(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"+FSz":function(e,t){e.exports="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkVolumeFS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n// Template for the volume mappers fragment shader\n\n// the output of this shader\n//VTK::Output::Dec\n\nvarying vec3 vertexVCVSOutput;\n\n// first declare the settings from the mapper\n// that impact the code paths in here\n\n// always set vtkNumComponents 1,2,3,4\n//VTK::NumComponents\n\n// possibly define vtkUseTriliear\n//VTK::TrilinearOn\n\n// possibly define vtkIndependentComponents\n//VTK::IndependentComponentsOn\n\n// Define the blend mode to use\n#define vtkBlendMode //VTK::BlendMode\n\n// Possibly define vtkImageLabelOutlineOn\n//VTK::ImageLabelOutlineOn\n\n#ifdef vtkImageLabelOutlineOn\nuniform int outlineThickness;\nuniform float vpWidth;\nuniform float vpHeight;\nuniform mat4 PCWCMatrix;\nuniform mat4 vWCtoIDX;\n#endif\n\n// define vtkLightComplexity\n//VTK::LightComplexity\n#if vtkLightComplexity > 0\nuniform float vSpecularPower;\nuniform float vAmbient;\nuniform float vDiffuse;\nuniform float vSpecular;\n//VTK::Light::Dec\n#endif\n\n// possibly define vtkGradientOpacityOn\n//VTK::GradientOpacityOn\n#ifdef vtkGradientOpacityOn\nuniform float goscale0;\nuniform float goshift0;\nuniform float gomin0;\nuniform float gomax0;\n#if defined(vtkIndependentComponentsOn) && (vtkNumComponents > 1)\nuniform float goscale1;\nuniform float goshift1;\nuniform float gomin1;\nuniform float gomax1;\n#if vtkNumComponents >= 3\nuniform float goscale2;\nuniform float goshift2;\nuniform float gomin2;\nuniform float gomax2;\n#endif\n#if vtkNumComponents >= 4\nuniform float goscale3;\nuniform float goshift3;\nuniform float gomin3;\nuniform float gomax3;\n#endif\n#endif\n#endif\n\n// camera values\nuniform float camThick;\nuniform float camNear;\nuniform float camFar;\nuniform int cameraParallel;\n\n// values describing the volume geometry\nuniform vec3 vOriginVC;\nuniform vec3 vSpacing;\nuniform ivec3 volumeDimensions; // 3d texture dimensions\nuniform vec3 vPlaneNormal0;\nuniform float vPlaneDistance0;\nuniform vec3 vPlaneNormal1;\nuniform float vPlaneDistance1;\nuniform vec3 vPlaneNormal2;\nuniform float vPlaneDistance2;\nuniform vec3 vPlaneNormal3;\nuniform float vPlaneDistance3;\nuniform vec3 vPlaneNormal4;\nuniform float vPlaneDistance4;\nuniform vec3 vPlaneNormal5;\nuniform float vPlaneDistance5;\n\n// opacity and color textures\nuniform sampler2D otexture;\nuniform float oshift0;\nuniform float oscale0;\nuniform sampler2D ctexture;\nuniform float cshift0;\nuniform float cscale0;\n\n// jitter texture\nuniform sampler2D jtexture;\n\n// some 3D texture values\nuniform float sampleDistance;\nuniform vec3 vVCToIJK;\n\n// the heights defined below are the locations\n// for the up to four components of the tfuns\n// the tfuns have a height of 2XnumComps pixels so the\n// values are computed to hit the middle of the two rows\n// for that component\n#ifdef vtkIndependentComponentsOn\n#if vtkNumComponents == 2\nuniform float mix0;\nuniform float mix1;\n#define height0 0.25\n#define height1 0.75\n#endif\n#if vtkNumComponents == 3\nuniform float mix0;\nuniform float mix1;\nuniform float mix2;\n#define height0 0.17\n#define height1 0.5\n#define height2 0.83\n#endif\n#if vtkNumComponents == 4\nuniform float mix0;\nuniform float mix1;\nuniform float mix2;\nuniform float mix3;\n#define height0 0.125\n#define height1 0.375\n#define height2 0.625\n#define height3 0.875\n#endif\n#endif\n\n#if vtkNumComponents >= 2\nuniform float oshift1;\nuniform float oscale1;\nuniform float cshift1;\nuniform float cscale1;\n#endif\n#if vtkNumComponents >= 3\nuniform float oshift2;\nuniform float oscale2;\nuniform float cshift2;\nuniform float cscale2;\n#endif\n#if vtkNumComponents >= 4\nuniform float oshift3;\nuniform float oscale3;\nuniform float cshift3;\nuniform float cscale3;\n#endif\n\n// declaration for intermixed geometry\n//VTK::ZBuffer::Dec\n\n// Lighting values\n//VTK::Light::Dec\n\n//=======================================================================\n// Webgl2 specific version of functions\n#if __VERSION__ == 300\n\nuniform highp sampler3D texture1;\n\nvec4 getTextureValue(vec3 pos)\n{\n  vec4 tmp = texture(texture1, pos);\n#if vtkNumComponents == 1\n  tmp.a = tmp.r;\n#endif\n#if vtkNumComponents == 2\n  tmp.a = tmp.g;\n#endif\n#if vtkNumComponents == 3\n  tmp.a = length(tmp.rgb);\n#endif\n  return tmp;\n}\n\n//=======================================================================\n// WebGL1 specific version of functions\n#else\n\nuniform sampler2D texture1;\n\nuniform float texWidth;\nuniform float texHeight;\nuniform int xreps;\nuniform float xstride;\nuniform float ystride;\n\n// if computing triliear values from multiple z slices\n#ifdef vtkTriliearOn\nvec4 getTextureValue(vec3 ijk)\n{\n  float zoff = 1.0/float(volumeDimensions.z);\n  vec4 val1 = getOneTextureValue(ijk);\n  vec4 val2 = getOneTextureValue(vec3(ijk.xy, ijk.z + zoff));\n\n  float indexZ = float(volumeDimensions)*ijk.z;\n  float zmix =  indexZ - floor(indexZ);\n\n  return mix(val1, val2, zmix);\n}\n\nvec4 getOneTextureValue(vec3 ijk)\n#else // nearest or fast linear\nvec4 getTextureValue(vec3 ijk)\n#endif\n{\n  vec3 tdims = vec3(volumeDimensions);\n\n  int z = int(ijk.z * tdims.z);\n  int yz = z / xreps;\n  int xz = z - yz*xreps;\n\n  float ni = (ijk.x + float(xz)) * tdims.x/xstride;\n  float nj = (ijk.y + float(yz)) * tdims.y/ystride;\n\n  vec2 tpos = vec2(ni/texWidth, nj/texHeight);\n\n  vec4 tmp = texture2D(texture1, tpos);\n\n#if vtkNumComponents == 1\n  tmp.a = tmp.r;\n#endif\n#if vtkNumComponents == 2\n  tmp.g = tmp.a;\n#endif\n#if vtkNumComponents == 3\n  tmp.a = length(tmp.rgb);\n#endif\n  return tmp;\n}\n\n// End of Webgl1 specific code\n//=======================================================================\n#endif\n\n//=======================================================================\n// compute the normal and gradient magnitude for a position\nvec4 computeNormal(vec3 pos, float scalar, vec3 tstep)\n{\n  vec4 result;\n\n  result.x = getTextureValue(pos + vec3(tstep.x, 0.0, 0.0)).a - scalar;\n  result.y = getTextureValue(pos + vec3(0.0, tstep.y, 0.0)).a - scalar;\n  result.z = getTextureValue(pos + vec3(0.0, 0.0, tstep.z)).a - scalar;\n\n  // divide by spacing\n  result.xyz /= vSpacing;\n\n  result.w = length(result.xyz);\n\n  // rotate to View Coords\n  result.xyz =\n    result.x * vPlaneNormal0 +\n    result.y * vPlaneNormal2 +\n    result.z * vPlaneNormal4;\n\n  if (result.w > 0.0)\n  {\n    result.xyz /= result.w;\n  }\n  return result;\n}\n\n#ifdef vtkImageLabelOutlineOn\nvec3 fragCoordToIndexSpace(vec4 fragCoord) {\n  vec4 pcPos = vec4(\n    (fragCoord.x / vpWidth - 0.5) * 2.0,\n    (fragCoord.y / vpHeight - 0.5) * 2.0,\n    (fragCoord.z - 0.5) * 2.0,\n    1.0);\n\n  vec4 worldCoord = PCWCMatrix * pcPos;\n  vec4 vertex = (worldCoord/worldCoord.w);\n\n  return (vWCtoIDX * vertex).xyz / vec3(volumeDimensions);\n}\n#endif\n\n//=======================================================================\n// compute the normals and gradient magnitudes for a position\n// for independent components\nmat4 computeMat4Normal(vec3 pos, vec4 tValue, vec3 tstep)\n{\n  mat4 result;\n  vec4 distX = getTextureValue(pos + vec3(tstep.x, 0.0, 0.0)) - tValue;\n  vec4 distY = getTextureValue(pos + vec3(0.0, tstep.y, 0.0)) - tValue;\n  vec4 distZ = getTextureValue(pos + vec3(0.0, 0.0, tstep.z)) - tValue;\n\n  // divide by spacing\n  distX /= vSpacing.x;\n  distY /= vSpacing.y;\n  distZ /= vSpacing.z;\n\n  mat3 rot;\n  rot[0] = vPlaneNormal0;\n  rot[1] = vPlaneNormal2;\n  rot[2] = vPlaneNormal4;\n\n  result[0].xyz = vec3(distX.r, distY.r, distZ.r);\n  result[0].a = length(result[0].xyz);\n  result[0].xyz *= rot;\n  if (result[0].w > 0.0)\n  {\n    result[0].xyz /= result[0].w;\n  }\n\n  result[1].xyz = vec3(distX.g, distY.g, distZ.g);\n  result[1].a = length(result[1].xyz);\n  result[1].xyz *= rot;\n  if (result[1].w > 0.0)\n  {\n    result[1].xyz /= result[1].w;\n  }\n\n// optionally compute the 3rd component\n#if vtkNumComponents >= 3\n  result[2].xyz = vec3(distX.b, distY.b, distZ.b);\n  result[2].a = length(result[2].xyz);\n  result[2].xyz *= rot;\n  if (result[2].w > 0.0)\n  {\n    result[2].xyz /= result[2].w;\n  }\n#endif\n\n// optionally compute the 4th component\n#if vtkNumComponents >= 4\n  result[3].xyz = vec3(distX.a, distY.a, distZ.a);\n  result[3].a = length(result[3].xyz);\n  result[3].xyz *= rot;\n  if (result[3].w > 0.0)\n  {\n    result[3].xyz /= result[3].w;\n  }\n#endif\n\n  return result;\n}\n\n//=======================================================================\n// Given a normal compute the gradient opacity factors\n//\nfloat computeGradientOpacityFactor(\n  vec4 normal, float goscale, float goshift, float gomin, float gomax)\n{\n#if defined(vtkGradientOpacityOn)\n  return clamp(normal.a*goscale + goshift, gomin, gomax);\n#else\n  return 1.0;\n#endif\n}\n\n#if vtkLightComplexity > 0\nvoid applyLighting(inout vec3 tColor, vec4 normal)\n{\n  vec3 diffuse = vec3(0.0, 0.0, 0.0);\n  vec3 specular = vec3(0.0, 0.0, 0.0);\n  //VTK::Light::Impl\n  tColor.rgb = tColor.rgb*(diffuse*vDiffuse + vAmbient) + specular*vSpecular;\n}\n#endif\n\n//=======================================================================\n// Given a texture value compute the color and opacity\n//\nvec4 getColorForValue(vec4 tValue, vec3 posIS, vec3 tstep)\n{\n#ifdef vtkImageLabelOutlineOn\n  vec3 centerPosIS = fragCoordToIndexSpace(gl_FragCoord); // pos in texture space\n  vec4 centerValue = getTextureValue(centerPosIS);\n  bool pixelOnBorder = false;\n  vec4 tColor = texture2D(ctexture, vec2(centerValue.r * cscale0 + cshift0, 0.5));\n\n  // Get alpha of segment from opacity function.\n  tColor.a = texture2D(otexture, vec2(centerValue.r * oscale0 + oshift0, 0.5)).r;\n\n  // Only perform outline check on fragments rendering voxels that aren't invisible.\n  // Saves a bunch of needless checks on the background.\n  // TODO define epsilon when building shader?\n  if (float(tColor.a) > 0.01) {\n    for (int i = -outlineThickness; i <= outlineThickness; i++) {\n      for (int j = -outlineThickness; j <= outlineThickness; j++) {\n        if (i == 0 || j == 0) {\n          continue;\n        }\n\n        vec4 neighborPixelCoord = vec4(gl_FragCoord.x + float(i),\n          gl_FragCoord.y + float(j),\n          gl_FragCoord.z, gl_FragCoord.w);\n\n        vec3 neighborPosIS = fragCoordToIndexSpace(neighborPixelCoord);\n        vec4 value = getTextureValue(neighborPosIS);\n\n        // If any of my neighbours are not the same value as I\n        // am, this means I am on the border of the segment.\n        // We can break the loops\n        if (any(notEqual(value, centerValue))) {\n          pixelOnBorder = true;\n          break;\n        }\n      }\n\n      if (pixelOnBorder == true) {\n        break;\n      }\n    }\n\n    // If I am on the border, I am displayed at full opacity\n    if (pixelOnBorder == true) {\n      tColor.a = 1.0;\n    }\n  }\n\n#else\n  // compute the normal and gradient magnitude if needed\n  // We compute it as a vec4 if possible otherwise a mat4\n  //\n  vec4 goFactor = vec4(1.0,1.0,1.0,1.0);\n\n  // compute the normal vectors as needed\n  #if (vtkLightComplexity > 0) || defined(vtkGradientOpacityOn)\n  #if defined(vtkIndependentComponentsOn) && (vtkNumComponents > 1)\n    mat4 normalMat = computeMat4Normal(posIS, tValue, tstep);\n    vec4 normal0 = normalMat[0];\n    vec4 normal1 = normalMat[1];\n  #if vtkNumComponents > 2\n    vec4 normal2 = normalMat[2];\n  #endif\n  #if vtkNumComponents > 3\n    vec4 normal3 = normalMat[3];\n  #endif\n  #else\n    vec4 normal0 = computeNormal(posIS, tValue.a, tstep);\n  #endif\n  #endif\n\n  // compute gradient opacity factors as needed\n  #if defined(vtkGradientOpacityOn)\n    goFactor.x =\n      computeGradientOpacityFactor(normal0, goscale0, goshift0, gomin0, gomax0);\n  #if defined(vtkIndependentComponentsOn) && (vtkNumComponents > 1)\n    goFactor.y =\n      computeGradientOpacityFactor(normal1, goscale1, goshift1, gomin1, gomax1);\n  #if vtkNumComponents > 2\n    goFactor.z =\n      computeGradientOpacityFactor(normal2, goscale2, goshift2, gomin2, gomax2);\n  #if vtkNumComponents > 3\n    goFactor.w =\n      computeGradientOpacityFactor(normal3, goscale3, goshift3, gomin3, gomax3);\n  #endif\n  #endif\n  #endif\n  #endif\n\n  // single component is always independent\n  #if vtkNumComponents == 1\n    vec4 tColor = texture2D(ctexture, vec2(tValue.r * cscale0 + cshift0, 0.5));\n    tColor.a = goFactor.x*texture2D(otexture, vec2(tValue.r * oscale0 + oshift0, 0.5)).r;\n  #endif\n\n  #if defined(vtkIndependentComponentsOn) && vtkNumComponents >= 2\n    vec4 tColor = mix0*texture2D(ctexture, vec2(tValue.r * cscale0 + cshift0, height0));\n    tColor.a = goFactor.x*mix0*texture2D(otexture, vec2(tValue.r * oscale0 + oshift0, height0)).r;\n    vec3 tColor1 = mix1*texture2D(ctexture, vec2(tValue.g * cscale1 + cshift1, height1)).rgb;\n    tColor.a += goFactor.y*mix1*texture2D(otexture, vec2(tValue.g * oscale1 + oshift1, height1)).r;\n  #if vtkNumComponents >= 3\n    vec3 tColor2 = mix2*texture2D(ctexture, vec2(tValue.b * cscale2 + cshift2, height2)).rgb;\n    tColor.a += goFactor.z*mix2*texture2D(otexture, vec2(tValue.b * oscale2 + oshift2, height2)).r;\n  #if vtkNumComponents >= 4\n    vec3 tColor3 = mix3*texture2D(ctexture, vec2(tValue.a * cscale3 + cshift3, height3)).rgb;\n    tColor.a += goFactor.w*mix3*texture2D(otexture, vec2(tValue.a * oscale3 + oshift3, height3)).r;\n  #endif\n  #endif\n\n  #else // then not independent\n\n  #if vtkNumComponents == 2\n    float lum = tValue.r * cscale0 + cshift0;\n    float alpha = goFactor.x*texture2D(otexture, vec2(tValue.a * oscale1 + oshift1, 0.5)).r;\n    vec4 tColor = vec4(lum, lum, lum, alpha);\n  #endif\n  #if vtkNumComponents == 3\n    vec4 tColor;\n    tColor.r = tValue.r * cscale0 + cshift0;\n    tColor.g = tValue.g * cscale1 + cshift1;\n    tColor.b = tValue.b * cscale2 + cshift2;\n    tColor.a = goFactor.x*texture2D(otexture, vec2(tValue.a * oscale0 + oshift0, 0.5)).r;\n  #endif\n  #if vtkNumComponents == 4\n    vec4 tColor;\n    tColor.r = tValue.r * cscale0 + cshift0;\n    tColor.g = tValue.g * cscale1 + cshift1;\n    tColor.b = tValue.b * cscale2 + cshift2;\n    tColor.a = goFactor.x*texture2D(otexture, vec2(tValue.a * oscale3 + oshift3, 0.5)).r;\n  #endif\n  #endif // dependent\n\n  // apply lighting if requested as appropriate\n  #if vtkLightComplexity > 0\n    applyLighting(tColor.rgb, normal0);\n  #if defined(vtkIndependentComponentsOn) && vtkNumComponents >= 2\n    applyLighting(tColor1, normal1);\n  #if vtkNumComponents >= 3\n    applyLighting(tColor2, normal2);\n  #if vtkNumComponents >= 4\n    applyLighting(tColor3, normal3);\n  #endif\n  #endif\n  #endif\n#endif\n\n// perform final independent blend as needed\n#if defined(vtkIndependentComponentsOn) && vtkNumComponents >= 2\n  tColor.rgb += tColor1;\n#if vtkNumComponents >= 3\n  tColor.rgb += tColor2;\n#if vtkNumComponents >= 4\n  tColor.rgb += tColor3;\n#endif\n#endif\n#endif\n\n#endif\n\n\n\n\n\n\n\nreturn tColor;\n}\n\n\n\n//=======================================================================\n// Apply the specified blend mode operation along the ray's path.\n//\nvoid applyBlend(vec3 posIS, vec3 endIS, float sampleDistanceIS, vec3 tdims)\n{\n  vec3 tstep = 1.0/tdims;\n\n  // start slightly inside and apply some jitter\n  vec3 delta = endIS - posIS;\n  vec3 stepIS = normalize(delta)*sampleDistanceIS;\n  float raySteps = length(delta)/sampleDistanceIS;\n\n  // avoid 0.0 jitter\n  float jitter = 0.01 + 0.99*texture2D(jtexture, gl_FragCoord.xy/32.0).r;\n  float stepsTraveled = jitter;\n\n  // local vars for the loop\n  vec4 color = vec4(0.0, 0.0, 0.0, 0.0);\n  vec4 tValue;\n  vec4 tColor;\n\n  // if we have less than one step then pick the middle point\n  // as our value\n  // if (raySteps <= 1.0)\n  // {\n  //   posIS = (posIS + endIS)*0.5;\n  // }\n\n  // Perform initial step at the volume boundary\n  // compute the scalar\n  tValue = getTextureValue(posIS);\n\n  #if vtkBlendMode == 0 // COMPOSITE_BLEND\n    // now map through opacity and color\n    tColor = getColorForValue(tValue, posIS, tstep);\n\n    // handle very thin volumes\n    if (raySteps <= 1.0)\n    {\n      tColor.a = 1.0 - pow(1.0 - tColor.a, raySteps);\n      gl_FragData[0] = tColor;\n      return;\n    }\n\n    tColor.a = 1.0 - pow(1.0 - tColor.a, jitter);\n    color = vec4(tColor.rgb*tColor.a, tColor.a);\n    posIS += (jitter*stepIS);\n\n    for (int i = 0; i < //VTK::MaximumSamplesValue ; ++i)\n    {\n      if (stepsTraveled + 1.0 >= raySteps) { break; }\n\n      // compute the scalar\n      tValue = getTextureValue(posIS);\n\n      // now map through opacity and color\n      tColor = getColorForValue(tValue, posIS, tstep);\n\n      float mix = (1.0 - color.a);\n\n      // this line should not be needed but nvidia seems to not handle\n      // the break correctly on windows/chrome 58 angle\n      //mix = mix * sign(max(raySteps - stepsTraveled - 1.0, 0.0));\n\n      color = color + vec4(tColor.rgb*tColor.a, tColor.a)*mix;\n      stepsTraveled++;\n      posIS += stepIS;\n      if (color.a > 0.99) { color.a = 1.0; break; }\n    }\n\n    if (color.a < 0.99 && (raySteps - stepsTraveled) > 0.0)\n    {\n      posIS = endIS;\n\n      // compute the scalar\n      tValue = getTextureValue(posIS);\n\n      // now map through opacity and color\n      tColor = getColorForValue(tValue, posIS, tstep);\n      tColor.a = 1.0 - pow(1.0 - tColor.a, raySteps - stepsTraveled);\n\n      float mix = (1.0 - color.a);\n      color = color + vec4(tColor.rgb*tColor.a, tColor.a)*mix;\n    }\n\n    gl_FragData[0] = vec4(color.rgb/color.a, color.a);\n  #endif\n  #if vtkBlendMode == 1 || vtkBlendMode == 2\n    // MAXIMUM_INTENSITY_BLEND || MINIMUM_INTENSITY_BLEND\n    // Find maximum/minimum intensity along the ray.\n\n    // Define the operation we will use (min or max)\n    #if vtkBlendMode == 1\n    #define OP max\n    #else\n    #define OP min\n    #endif\n\n    // If the clipping range is shorter than the sample distance\n    // we can skip the sampling loop along the ray.\n    if (raySteps <= 1.0)\n    {\n      gl_FragData[0] = getColorForValue(tValue, posIS, tstep);\n      return;\n    }\n\n    vec4 value = tValue;\n    posIS += (jitter*stepIS);\n\n    // Sample along the ray until MaximumSamplesValue,\n    // ending slightly inside the total distance\n    for (int i = 0; i < //VTK::MaximumSamplesValue ; ++i)\n    {\n      // If we have reached the last step, break\n      if (stepsTraveled + 1.0 >= raySteps) { break; }\n\n      // compute the scalar\n      tValue = getTextureValue(posIS);\n\n      // Update the maximum value if necessary\n      value = OP(tValue, value);\n\n      // Otherwise, continue along the ray\n      stepsTraveled++;\n      posIS += stepIS;\n    }\n\n    // Perform the last step along the ray using the\n    // residual distance\n    posIS = endIS;\n    tValue = getTextureValue(posIS);\n    value = OP(tValue, value);\n\n    // Now map through opacity and color\n    gl_FragData[0] = getColorForValue(value, posIS, tstep);\n  #endif\n  #if vtkBlendMode == 3 //AVERAGE_INTENSITY_BLEND\n    vec4 averageIPScalarRangeMin = vec4 (\n      //VTK::AverageIPScalarRangeMin,\n      //VTK::AverageIPScalarRangeMin,\n      //VTK::AverageIPScalarRangeMin,\n      1.0);\n    vec4 averageIPScalarRangeMax = vec4(\n      //VTK::AverageIPScalarRangeMax,\n      //VTK::AverageIPScalarRangeMax,\n      //VTK::AverageIPScalarRangeMax,\n      1.0);\n\n    vec4 sum = vec4(0.);\n\n    averageIPScalarRangeMin.a = tValue.a;\n    averageIPScalarRangeMax.a = tValue.a;\n\n    if (all(greaterThanEqual(tValue, averageIPScalarRangeMin)) &&\n    all(lessThanEqual(tValue, averageIPScalarRangeMax))) {\n      sum += tValue;\n    }\n\n    if (raySteps <= 1.0) {\n      gl_FragData[0] = getColorForValue(sum, posIS, tstep);\n      return;\n    }\n\n    posIS += (jitter*stepIS);\n\n    // Sample along the ray until MaximumSamplesValue,\n    // ending slightly inside the total distance\n    for (int i = 0; i < //VTK::MaximumSamplesValue ; ++i)\n    {\n      // If we have reached the last step, break\n      if (stepsTraveled + 1.0 >= raySteps) { break; }\n\n      // compute the scalar\n      tValue = getTextureValue(posIS);\n\n      // One can control the scalar range by setting the AverageIPScalarRange to disregard scalar values, not in the range of interest, from the average computation.\n      // Notes:\n      // - We are comparing all values in the texture to see if any of them\n      //   are outside of the scalar range. In the future we might want to allow\n      //   scalar ranges for each component.\n      // - We are setting the alpha channel for averageIPScalarRangeMin and\n      //   averageIPScalarRangeMax so that we do not trigger this 'continue'\n      //   based on the alpha channel comparison.\n      // - There might be a better way to do this. I'm not sure if there is an\n      //   equivalent of 'any' which only operates on RGB, though I suppose\n      //   we could write an 'anyRGB' function and see if that is faster.\n      averageIPScalarRangeMin.a = tValue.a;\n      averageIPScalarRangeMax.a = tValue.a;\n      if (any(lessThan(tValue, averageIPScalarRangeMin)) ||\n          any(greaterThan(tValue, averageIPScalarRangeMax))) {\n        continue;\n      }\n\n      // Sum the values across each step in the path\n      sum += tValue;\n\n      // Otherwise, continue along the ray\n      stepsTraveled++;\n      posIS += stepIS;\n    }\n\n    // Perform the last step along the ray using the\n    // residual distance\n    posIS = endIS;\n\n    // compute the scalar\n    tValue = getTextureValue(posIS);\n\n    // One can control the scalar range by setting the AverageIPScalarRange to disregard scalar values, not in the range of interest, from the average computation\n    if (all(greaterThanEqual(tValue, averageIPScalarRangeMin)) &&\n        all(lessThanEqual(tValue, averageIPScalarRangeMax))) {\n      sum += tValue;\n\n      stepsTraveled++;\n    }\n\n    sum /= vec4(stepsTraveled, stepsTraveled, stepsTraveled, 1.0);\n\n    gl_FragData[0] = getColorForValue(sum, posIS, tstep);\n  #endif\n}\n\n//=======================================================================\n// Compute a new start and end point for a given ray based\n// on the provided bounded clipping plane (aka a rectangle)\nvoid getRayPointIntersectionBounds(\n  vec3 rayPos, vec3 rayDir,\n  vec3 planeDir, float planeDist,\n  inout vec2 tbounds, vec3 vPlaneX, vec3 vPlaneY,\n  float vSize1, float vSize2)\n{\n  float result = dot(rayDir, planeDir);\n  if (result == 0.0)\n  {\n    return;\n  }\n  result = -1.0 * (dot(rayPos, planeDir) + planeDist) / result;\n  vec3 xposVC = rayPos + rayDir*result;\n  vec3 vxpos = xposVC - vOriginVC;\n  vec2 vpos = vec2(\n    dot(vxpos, vPlaneX),\n    dot(vxpos, vPlaneY));\n\n  // on some apple nvidia systems this does not work\n  // if (vpos.x < 0.0 || vpos.x > vSize1 ||\n  //     vpos.y < 0.0 || vpos.y > vSize2)\n  // even just\n  // if (vpos.x < 0.0 || vpos.y < 0.0)\n  // fails\n  // so instead we compute a value that represents in and out\n  //and then compute the return using this value\n  float xcheck = max(0.0, vpos.x * (vpos.x - vSize1)); //  0 means in bounds\n  float check = sign(max(xcheck, vpos.y * (vpos.y - vSize2))); //  0 means in bounds, 1 = out\n\n  tbounds = mix(\n   vec2(min(tbounds.x, result), max(tbounds.y, result)), // in value\n   tbounds, // out value\n   check);  // 0 in 1 out\n}\n\n//=======================================================================\n// given a\n// - ray direction (rayDir)\n// - starting point (vertexVCVSOutput)\n// - bounding planes of the volume\n// - optionally depth buffer values\n// - far clipping plane\n// compute the start/end distances of the ray we need to cast\nvec2 computeRayDistances(vec3 rayDir, vec3 tdims)\n{\n  vec2 dists = vec2(100.0*camFar, -1.0);\n\n  vec3 vSize = vSpacing*(tdims - 1.0);\n\n  // all this is in View Coordinates\n  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,\n    vPlaneNormal0, vPlaneDistance0, dists, vPlaneNormal2, vPlaneNormal4,\n    vSize.y, vSize.z);\n  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,\n    vPlaneNormal1, vPlaneDistance1, dists, vPlaneNormal2, vPlaneNormal4,\n    vSize.y, vSize.z);\n  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,\n    vPlaneNormal2, vPlaneDistance2, dists, vPlaneNormal0, vPlaneNormal4,\n    vSize.x, vSize.z);\n  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,\n    vPlaneNormal3, vPlaneDistance3, dists, vPlaneNormal0, vPlaneNormal4,\n    vSize.x, vSize.z);\n  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,\n    vPlaneNormal4, vPlaneDistance4, dists, vPlaneNormal0, vPlaneNormal2,\n    vSize.x, vSize.y);\n  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,\n    vPlaneNormal5, vPlaneDistance5, dists, vPlaneNormal0, vPlaneNormal2,\n    vSize.x, vSize.y);\n\n  // do not go behind front clipping plane\n  dists.x = max(0.0,dists.x);\n\n  // do not go PAST far clipping plane\n  float farDist = -camThick/rayDir.z;\n  dists.y = min(farDist,dists.y);\n\n  // Do not go past the zbuffer value if set\n  // This is used for intermixing opaque geometry\n  //VTK::ZBuffer::Impl\n\n  return dists;\n}\n\n//=======================================================================\n// Compute the index space starting position (pos) and end\n// position\n//\nvoid computeIndexSpaceValues(out vec3 pos, out vec3 endPos, out float sampleDistanceIS, vec3 rayDir, vec2 dists)\n{\n  // compute starting and ending values in volume space\n  pos = vertexVCVSOutput + dists.x*rayDir;\n  pos = pos - vOriginVC;\n  // convert to volume basis and origin\n  pos = vec3(\n    dot(pos, vPlaneNormal0),\n    dot(pos, vPlaneNormal2),\n    dot(pos, vPlaneNormal4));\n\n  endPos = vertexVCVSOutput + dists.y*rayDir;\n  endPos = endPos - vOriginVC;\n  endPos = vec3(\n    dot(endPos, vPlaneNormal0),\n    dot(endPos, vPlaneNormal2),\n    dot(endPos, vPlaneNormal4));\n\n  float delta = length(endPos - pos);\n\n  pos *= vVCToIJK;\n  endPos *= vVCToIJK;\n\n  float delta2 = length(endPos - pos);\n  sampleDistanceIS = sampleDistance*delta2/delta;\n}\n\nvoid main()\n{\n\n  vec3 rayDirVC;\n\n  if (cameraParallel == 1)\n  {\n    // Camera is parallel, so the rayDir is just the direction of the camera.\n    rayDirVC = vec3(0.0, 0.0, -1.0);\n  } else {\n    // camera is at 0,0,0 so rayDir for perspective is just the vc coord\n    rayDirVC = normalize(vertexVCVSOutput);\n  }\n\n  vec3 tdims = vec3(volumeDimensions);\n\n  // compute the start and end points for the ray\n  vec2 rayStartEndDistancesVC = computeRayDistances(rayDirVC, tdims);\n\n  // do we need to composite? aka does the ray have any length\n  // If not, bail out early\n  if (rayStartEndDistancesVC.y <= rayStartEndDistancesVC.x)\n  {\n    discard;\n  }\n\n  // IS = Index Space\n  vec3 posIS;\n  vec3 endIS;\n  float sampleDistanceIS;\n  computeIndexSpaceValues(posIS, endIS, sampleDistanceIS, rayDirVC, rayStartEndDistancesVC);\n\n  // Perform the blending operation along the ray\n  applyBlend(posIS, endIS, sampleDistanceIS, tdims);\n}\n"},0:function(e,t,n){e.exports=n("zUnb")},1:function(e,t){},"8GHZ":function(e,t){e.exports="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkSphereMapperVS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n// this shader implements imposters in OpenGL for Spheres\n\nattribute vec4 vertexMC;\nattribute vec2 offsetMC;\n\n// optional normal declaration\n//VTK::Normal::Dec\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\nuniform mat3 normalMatrix; // transform model coordinate directions to view coordinates\n\n// material property values\n//VTK::Color::Dec\n\n// clipping plane vars\n//VTK::Clip::Dec\n\n// camera and actor matrix values\n//VTK::Camera::Dec\n\nvarying vec4 vertexVCVSOutput;\nvarying float radiusVCVSOutput;\nvarying vec3 centerVCVSOutput;\n\nuniform int cameraParallel;\n\nvoid main()\n{\n  //VTK::Color::Impl\n\n  //VTK::Normal::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Clip::Impl\n\n  // compute the projected vertex position\n  vertexVCVSOutput = MCVCMatrix * vertexMC;\n  centerVCVSOutput = vertexVCVSOutput.xyz;\n  radiusVCVSOutput = length(offsetMC)*0.5;\n\n  // make the triangle face the camera\n  if (cameraParallel == 0)\n    {\n    vec3 dir = normalize(-vertexVCVSOutput.xyz);\n    vec3 base2 = normalize(cross(dir,vec3(1.0,0.0,0.0)));\n    vec3 base1 = cross(base2,dir);\n    vertexVCVSOutput.xyz = vertexVCVSOutput.xyz + offsetMC.x*base1 + offsetMC.y*base2;\n    }\n  else\n    {\n    // add in the offset\n    vertexVCVSOutput.xy = vertexVCVSOutput.xy + offsetMC;\n    }\n\n  gl_Position = VCPCMatrix * vertexVCVSOutput;\n}\n"},B9Yq:function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},EhIR:function(e,t,n){(function(e){var r;!function(e,o,i){function a(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function l(e,t){var n=new a(e),r=t&&t.state,o=n.next;return o.int32=function(){return 4294967296*n.next()|0},o.double=function(){return o()+11102230246251565e-32*(2097152*o()|0)},o.quick=o,r&&("object"==typeof r&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=l:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return l}).call(t,n,t,o))||(o.exports=r):this.alea=l}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},IYyN:function(e,t){e.exports="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkPolyDataFS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n// Template for the polydata mappers fragment shader\n\nuniform int PrimitiveIDOffset;\n\n// VC position of this fragment\n//VTK::PositionVC::Dec\n\n// optional color passed in from the vertex shader, vertexColor\n//VTK::Color::Dec\n\n// optional surface normal declaration\n//VTK::Normal::Dec\n\n// extra lighting parameters\n//VTK::Light::Dec\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\n// picking support\n//VTK::Picking::Dec\n\n// Depth Peeling Support\n//VTK::DepthPeeling::Dec\n\n// clipping plane vars\n//VTK::Clip::Dec\n\n// the output of this shader\n//VTK::Output::Dec\n\n// Apple Bug\n//VTK::PrimID::Dec\n\n// handle coincident offsets\n//VTK::Coincident::Dec\n\n//VTK::ZBuffer::Dec\n\nvoid main()\n{\n  // VC position of this fragment. This should not branch/return/discard.\n  //VTK::PositionVC::Impl\n\n  // Place any calls that require uniform flow (e.g. dFdx) here.\n  //VTK::UniformFlow::Impl\n\n  // Set gl_FragDepth here (gl_FragCoord.z by default)\n  //VTK::Depth::Impl\n\n  // Early depth peeling abort:\n  //VTK::DepthPeeling::PreColor\n\n  // Apple Bug\n  //VTK::PrimID::Impl\n\n  //VTK::Clip::Impl\n\n  //VTK::Color::Impl\n\n  // Generate the normal if we are not passed in one\n  //VTK::Normal::Impl\n\n  //VTK::Light::Impl\n\n  //VTK::TCoord::Impl\n\n  if (gl_FragData[0].a <= 0.0)\n    {\n    discard;\n    }\n\n  //VTK::DepthPeeling::Impl\n\n  //VTK::Picking::Impl\n\n  // handle coincident offsets\n  //VTK::Coincident::Impl\n\n  //VTK::ZBuffer::Impl\n}\n"},"O2i/":function(e,t,n){var r;r=function(){"use strict";var e,t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=function(){return/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent)},r=function(e,t){for(var n=0,r=e.length;n<r;n++)t[n]=e[n]},o=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},i=function(e,n){return function(e,n){e.exports=function(){var e,n,r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e,t,n){return e+(t-e)*n},a=function(){var e=/iPad|iPhone|iPod/.test(navigator.platform);return function(){return e}}(),s=function(){var e=-1!==navigator.userAgent.indexOf("Version")&&-1!==navigator.userAgent.indexOf("Android")&&-1!==navigator.userAgent.indexOf("Chrome");return function(){return e}}(),l=(/^((?!chrome|android).)*safari/i.test(navigator.userAgent),function(){var e=-1!==navigator.userAgent.indexOf("Firefox")&&-1!==navigator.userAgent.indexOf("Android");return function(){return e}}()),u=(n=navigator.userAgent.match(/.*Chrome\/([0-9]+)/),r=n?parseInt(n[1],10):null,function(){return r}),c=function(){var e=!1;if(65===u()){var t=navigator.userAgent.match(/.*Chrome\/([0-9\.]*)/);if(t){var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),4!==n.length);r=!0);}catch(l){o=!0,i=l}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(t[1].split(".")),r=n[3];e=3325===parseInt(n[2],10)&&parseInt(r,10)<148}}return function(){return e}}(),d=function(){var e=-1!==navigator.userAgent.indexOf("R7 Build");return function(){return e}}(),g=function(){var e=90==window.orientation||-90==window.orientation;return d()?!e:e},p=function(){return Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio},f=function(){return Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio},h=function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else{if(!document.msExitFullscreen)return!1;document.msExitFullscreen()}return!0},M=function(e,t,n,r){var o=e.createShader(e.VERTEX_SHADER);e.shaderSource(o,t),e.compileShader(o);var i=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(i,n),e.compileShader(i);var a=e.createProgram();for(var s in e.attachShader(a,o),e.attachShader(a,i),r)e.bindAttribLocation(a,r[s],s);return e.linkProgram(a),e.deleteShader(o),e.deleteShader(i),a},m=function(e,t){for(var n={},r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),o="",i=0;i<r;i++)n[o=e.getActiveUniform(t,i).name.replace("[0]","")]=e.getUniformLocation(t,o);return n},A=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t},y=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},T=function(e){if(a()){var t=e.style.width,n=e.style.height;e.style.width=parseInt(t)+1+"px",e.style.height=parseInt(n)+"px",setTimeout((function(){e.style.width=t,e.style.height=n}),100)}window.canvas=e},D=function(){var e=Math.PI/180,t=.25*Math.PI,n=new Float32Array([0,0,0,1]),r=new Float32Array([0,0,0]);function o(o,i,a,s,l,u){var c,d,g,p,f,h,M,m,A,y,T,D,N,x,I,w,C,E,v;!function(n,r,o,i){var a=Math.tan(r?r.upDegrees*e:t),s=Math.tan(r?r.downDegrees*e:t),l=Math.tan(r?r.leftDegrees*e:t),u=Math.tan(r?r.rightDegrees*e:t),c=2/(l+u),d=2/(a+s);n[0]=c,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=d,n[6]=0,n[7]=0,n[8]=-(l-u)*c*.5,n[9]=(a-s)*d*.5,n[10]=i/(o-i),n[11]=-1,n[12]=0,n[13]=0,n[14]=i*o/(o-i),n[15]=0}(o,s||null,u.depthNear,u.depthFar),g=a.position||r,T=(p=(d=a.orientation||n)[0])*(m=p+p),D=p*(A=(f=d[1])+f),N=p*(y=(h=d[2])+h),I=f*y,C=(M=d[3])*m,E=M*A,v=M*y,(c=i)[0]=1-((x=f*A)+(w=h*y)),c[1]=D+v,c[2]=N-E,c[3]=0,c[4]=D-v,c[5]=1-(T+w),c[6]=I+C,c[7]=0,c[8]=N+E,c[9]=I-C,c[10]=1-(T+x),c[11]=0,c[12]=g[0],c[13]=g[1],c[14]=g[2],c[15]=1,l&&function(e,t,n){var r,o,i,a,s,l,u,c,d,g,p,f,h=n[0],M=n[1],m=n[2];t===e?(e[12]=t[0]*h+t[4]*M+t[8]*m+t[12],e[13]=t[1]*h+t[5]*M+t[9]*m+t[13],e[14]=t[2]*h+t[6]*M+t[10]*m+t[14],e[15]=t[3]*h+t[7]*M+t[11]*m+t[15]):(o=t[1],i=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],g=t[9],p=t[10],f=t[11],e[0]=r=t[0],e[1]=o,e[2]=i,e[3]=a,e[4]=s,e[5]=l,e[6]=u,e[7]=c,e[8]=d,e[9]=g,e[10]=p,e[11]=f,e[12]=r*h+s*M+d*m+t[12],e[13]=o*h+l*M+g*m+t[13],e[14]=i*h+u*M+p*m+t[14],e[15]=a*h+c*M+f*m+t[15])}(i,i,l),function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],d=t[9],g=t[10],p=t[11],f=t[12],h=t[13],M=t[14],m=t[15],A=n*s-r*a,y=n*l-o*a,T=n*u-i*a,D=r*l-o*s,N=r*u-i*s,x=o*u-i*l,I=c*h-d*f,w=c*M-g*f,C=c*m-p*f,E=d*M-g*h,v=d*m-p*h,L=g*m-p*M,b=A*L-y*v+T*E+D*C-N*w+x*I;b&&(e[0]=(s*L-l*v+u*E)*(b=1/b),e[1]=(o*v-r*L-i*E)*b,e[2]=(h*x-M*N+m*D)*b,e[3]=(g*N-d*x-p*D)*b,e[4]=(l*C-a*L-u*w)*b,e[5]=(n*L-o*C+i*w)*b,e[6]=(M*T-f*x-m*y)*b,e[7]=(c*x-g*T+p*y)*b,e[8]=(a*v-s*C+u*I)*b,e[9]=(r*C-n*v-i*I)*b,e[10]=(f*N-h*T+m*A)*b,e[11]=(d*T-c*N-p*A)*b,e[12]=(s*w-a*E-l*I)*b,e[13]=(n*E-r*w+o*I)*b,e[14]=(h*y-f*D-M*A)*b,e[15]=(c*D-d*y+g*A)*b)}(i,i)}return function(e,t,n){return!(!e||!t||(e.pose=t,e.timestamp=t.timestamp,o(e.leftProjectionMatrix,e.leftViewMatrix,t,n._getFieldOfView("left"),n._getEyeOffset("left"),n),o(e.rightProjectionMatrix,e.rightViewMatrix,t,n._getFieldOfView("right"),n._getEyeOffset("right"),n),0))}}(),N=function(e){var t=e.indexOf("://"),n=e.indexOf("/",-1!==t?t+3:0);return-1===n&&(n=e.length),e.substring(0,n)},x=(e={},function(t,n){void 0===e[t]&&(console.warn("webvr-polyfill: "+n),e[t]=!0)}),I=function(e,t){x(e,e+" has been deprecated. This may not work on native WebVR displays. "+(t?"Please use "+t+" instead.":""))},w=function(e,t,n){if(t){for(var r=[],o=null,i=0;i<t.length;++i)switch(a=t[i]){case e.TEXTURE_BINDING_2D:case e.TEXTURE_BINDING_CUBE_MAP:if((l=t[++i])<e.TEXTURE0||l>e.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),r.push(null,null);break}o||(o=e.getParameter(e.ACTIVE_TEXTURE)),e.activeTexture(l),r.push(e.getParameter(a),null);break;case e.ACTIVE_TEXTURE:o=e.getParameter(e.ACTIVE_TEXTURE),r.push(null);break;default:r.push(e.getParameter(a))}for(n(e),i=0;i<t.length;++i){var a,s=r[i];switch(a=t[i]){case e.ACTIVE_TEXTURE:break;case e.ARRAY_BUFFER_BINDING:e.bindBuffer(e.ARRAY_BUFFER,s);break;case e.COLOR_CLEAR_VALUE:e.clearColor(s[0],s[1],s[2],s[3]);break;case e.COLOR_WRITEMASK:e.colorMask(s[0],s[1],s[2],s[3]);break;case e.CURRENT_PROGRAM:e.useProgram(s);break;case e.ELEMENT_ARRAY_BUFFER_BINDING:e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,s);break;case e.FRAMEBUFFER_BINDING:e.bindFramebuffer(e.FRAMEBUFFER,s);break;case e.RENDERBUFFER_BINDING:e.bindRenderbuffer(e.RENDERBUFFER,s);break;case e.TEXTURE_BINDING_2D:if((l=t[++i])<e.TEXTURE0||l>e.TEXTURE31)break;e.activeTexture(l),e.bindTexture(e.TEXTURE_2D,s);break;case e.TEXTURE_BINDING_CUBE_MAP:var l;if((l=t[++i])<e.TEXTURE0||l>e.TEXTURE31)break;e.activeTexture(l),e.bindTexture(e.TEXTURE_CUBE_MAP,s);break;case e.VIEWPORT:e.viewport(s[0],s[1],s[2],s[3]);break;case e.BLEND:case e.CULL_FACE:case e.DEPTH_TEST:case e.SCISSOR_TEST:case e.STENCIL_TEST:s?e.enable(a):e.disable(a);break;default:console.log("No GL restore behavior for 0x"+a.toString(16))}o&&e.activeTexture(o)}}else n(e)},C=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join("\n"),E=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");function v(e,t,n,r){this.gl=e,this.cardboardUI=t,this.bufferScale=n,this.dirtySubmitFrameBindings=r,this.ctxAttribs=e.getContextAttributes(),this.meshWidth=20,this.meshHeight=20,this.bufferWidth=e.drawingBufferWidth,this.bufferHeight=e.drawingBufferHeight,this.realBindFramebuffer=e.bindFramebuffer,this.realEnable=e.enable,this.realDisable=e.disable,this.realColorMask=e.colorMask,this.realClearColor=e.clearColor,this.realViewport=e.viewport,a()||(this.realCanvasWidth=Object.getOwnPropertyDescriptor(e.canvas.__proto__,"width"),this.realCanvasHeight=Object.getOwnPropertyDescriptor(e.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=M(e,C,E,this.attribs),this.uniforms=m(e,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),this.indexCount=0,this.renderTarget=e.createTexture(),this.framebuffer=e.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=e.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=e.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=e.createRenderbuffer()),this.patch(),this.onResize()}v.prototype.destroy=function(){var e=this.gl;this.unpatch(),e.deleteProgram(this.program),e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.indexBuffer),e.deleteTexture(this.renderTarget),e.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&e.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&e.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&e.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},v.prototype.onResize=function(){var e=this.gl,t=this;w(e,[e.RENDERBUFFER_BINDING,e.TEXTURE_BINDING_2D,e.TEXTURE0],(function(e){t.realBindFramebuffer.call(e,e.FRAMEBUFFER,null),t.scissorTest&&t.realDisable.call(e,e.SCISSOR_TEST),t.realColorMask.call(e,!0,!0,!0,!0),t.realViewport.call(e,0,0,e.drawingBufferWidth,e.drawingBufferHeight),t.realClearColor.call(e,0,0,0,1),e.clear(e.COLOR_BUFFER_BIT),t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.framebuffer),e.bindTexture(e.TEXTURE_2D,t.renderTarget),e.texImage2D(e.TEXTURE_2D,0,t.ctxAttribs.alpha?e.RGBA:e.RGB,t.bufferWidth,t.bufferHeight,0,t.ctxAttribs.alpha?e.RGBA:e.RGB,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t.renderTarget,0),t.ctxAttribs.depth&&t.ctxAttribs.stencil?(e.bindRenderbuffer(e.RENDERBUFFER,t.depthStencilBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t.depthStencilBuffer)):t.ctxAttribs.depth?(e.bindRenderbuffer(e.RENDERBUFFER,t.depthBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t.depthBuffer)):t.ctxAttribs.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,t.stencilBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.STENCIL_INDEX8,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.STENCIL_ATTACHMENT,e.RENDERBUFFER,t.stencilBuffer)),!e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.lastBoundFramebuffer),t.scissorTest&&t.realEnable.call(e,e.SCISSOR_TEST),t.realColorMask.apply(e,t.colorMask),t.realViewport.apply(e,t.viewport),t.realClearColor.apply(e,t.clearColor)})),this.cardboardUI&&this.cardboardUI.onResize()},v.prototype.patch=function(){if(!this.isPatched){var e=this,t=this.gl.canvas,n=this.gl;a()||(t.width=p()*this.bufferScale,t.height=f()*this.bufferScale,Object.defineProperty(t,"width",{configurable:!0,enumerable:!0,get:function(){return e.bufferWidth},set:function(n){e.bufferWidth=n,e.realCanvasWidth.set.call(t,n),e.onResize()}}),Object.defineProperty(t,"height",{configurable:!0,enumerable:!0,get:function(){return e.bufferHeight},set:function(n){e.bufferHeight=n,e.realCanvasHeight.set.call(t,n),e.onResize()}})),this.lastBoundFramebuffer=n.getParameter(n.FRAMEBUFFER_BINDING),null==this.lastBoundFramebuffer&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(t,r){e.lastBoundFramebuffer=r||e.framebuffer,e.realBindFramebuffer.call(n,t,e.lastBoundFramebuffer)},this.cullFace=n.getParameter(n.CULL_FACE),this.depthTest=n.getParameter(n.DEPTH_TEST),this.blend=n.getParameter(n.BLEND),this.scissorTest=n.getParameter(n.SCISSOR_TEST),this.stencilTest=n.getParameter(n.STENCIL_TEST),n.enable=function(t){switch(t){case n.CULL_FACE:e.cullFace=!0;break;case n.DEPTH_TEST:e.depthTest=!0;break;case n.BLEND:e.blend=!0;break;case n.SCISSOR_TEST:e.scissorTest=!0;break;case n.STENCIL_TEST:e.stencilTest=!0}e.realEnable.call(n,t)},n.disable=function(t){switch(t){case n.CULL_FACE:e.cullFace=!1;break;case n.DEPTH_TEST:e.depthTest=!1;break;case n.BLEND:e.blend=!1;break;case n.SCISSOR_TEST:e.scissorTest=!1;break;case n.STENCIL_TEST:e.stencilTest=!1}e.realDisable.call(n,t)},this.colorMask=n.getParameter(n.COLOR_WRITEMASK),n.colorMask=function(t,r,o,i){e.colorMask[0]=t,e.colorMask[1]=r,e.colorMask[2]=o,e.colorMask[3]=i,e.realColorMask.call(n,t,r,o,i)},this.clearColor=n.getParameter(n.COLOR_CLEAR_VALUE),n.clearColor=function(t,r,o,i){e.clearColor[0]=t,e.clearColor[1]=r,e.clearColor[2]=o,e.clearColor[3]=i,e.realClearColor.call(n,t,r,o,i)},this.viewport=n.getParameter(n.VIEWPORT),n.viewport=function(t,r,o,i){e.viewport[0]=t,e.viewport[1]=r,e.viewport[2]=o,e.viewport[3]=i,e.realViewport.call(n,t,r,o,i)},this.isPatched=!0,T(t)}},v.prototype.unpatch=function(){if(this.isPatched){var e=this.gl,t=this.gl.canvas;a()||(Object.defineProperty(t,"width",this.realCanvasWidth),Object.defineProperty(t,"height",this.realCanvasHeight)),t.width=this.bufferWidth,t.height=this.bufferHeight,e.bindFramebuffer=this.realBindFramebuffer,e.enable=this.realEnable,e.disable=this.realDisable,e.colorMask=this.realColorMask,e.clearColor=this.realClearColor,e.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&e.bindFramebuffer(e.FRAMEBUFFER,null),this.isPatched=!1,setTimeout((function(){T(t)}),1)}},v.prototype.setTextureBounds=function(e,t){e||(e=[0,0,.5,1]),t||(t=[.5,0,.5,1]),this.viewportOffsetScale[0]=e[0],this.viewportOffsetScale[1]=e[1],this.viewportOffsetScale[2]=e[2],this.viewportOffsetScale[3]=e[3],this.viewportOffsetScale[4]=t[0],this.viewportOffsetScale[5]=t[1],this.viewportOffsetScale[6]=t[2],this.viewportOffsetScale[7]=t[3]},v.prototype.submitFrame=function(){var e=this.gl,t=this,n=[];if(this.dirtySubmitFrameBindings||n.push(e.CURRENT_PROGRAM,e.ARRAY_BUFFER_BINDING,e.ELEMENT_ARRAY_BUFFER_BINDING,e.TEXTURE_BINDING_2D,e.TEXTURE0),w(e,n,(function(e){t.realBindFramebuffer.call(e,e.FRAMEBUFFER,null),t.cullFace&&t.realDisable.call(e,e.CULL_FACE),t.depthTest&&t.realDisable.call(e,e.DEPTH_TEST),t.blend&&t.realDisable.call(e,e.BLEND),t.scissorTest&&t.realDisable.call(e,e.SCISSOR_TEST),t.stencilTest&&t.realDisable.call(e,e.STENCIL_TEST),t.realColorMask.call(e,!0,!0,!0,!0),t.realViewport.call(e,0,0,e.drawingBufferWidth,e.drawingBufferHeight),(t.ctxAttribs.alpha||a())&&(t.realClearColor.call(e,0,0,0,1),e.clear(e.COLOR_BUFFER_BIT)),e.useProgram(t.program),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.indexBuffer),e.bindBuffer(e.ARRAY_BUFFER,t.vertexBuffer),e.enableVertexAttribArray(t.attribs.position),e.enableVertexAttribArray(t.attribs.texCoord),e.vertexAttribPointer(t.attribs.position,2,e.FLOAT,!1,20,0),e.vertexAttribPointer(t.attribs.texCoord,3,e.FLOAT,!1,20,8),e.activeTexture(e.TEXTURE0),e.uniform1i(t.uniforms.diffuse,0),e.bindTexture(e.TEXTURE_2D,t.renderTarget),e.uniform4fv(t.uniforms.viewportOffsetScale,t.viewportOffsetScale),e.drawElements(e.TRIANGLES,t.indexCount,e.UNSIGNED_SHORT,0),t.cardboardUI&&t.cardboardUI.renderNoState(),t.realBindFramebuffer.call(t.gl,e.FRAMEBUFFER,t.framebuffer),t.ctxAttribs.preserveDrawingBuffer||(t.realClearColor.call(e,0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)),t.dirtySubmitFrameBindings||t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.lastBoundFramebuffer),t.cullFace&&t.realEnable.call(e,e.CULL_FACE),t.depthTest&&t.realEnable.call(e,e.DEPTH_TEST),t.blend&&t.realEnable.call(e,e.BLEND),t.scissorTest&&t.realEnable.call(e,e.SCISSOR_TEST),t.stencilTest&&t.realEnable.call(e,e.STENCIL_TEST),t.realColorMask.apply(e,t.colorMask),t.realViewport.apply(e,t.viewport),!t.ctxAttribs.alpha&&t.ctxAttribs.preserveDrawingBuffer||t.realClearColor.apply(e,t.clearColor)})),a()){var r=e.canvas;r.width==t.bufferWidth&&r.height==t.bufferHeight||(t.bufferWidth=r.width,t.bufferHeight=r.height,t.onResize())}},v.prototype.updateDeviceInfo=function(e){var t=this.gl,n=this;w(t,[t.ARRAY_BUFFER_BINDING,t.ELEMENT_ARRAY_BUFFER_BINDING],(function(t){var r=n.computeMeshVertices_(n.meshWidth,n.meshHeight,e);if(t.bindBuffer(t.ARRAY_BUFFER,n.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW),!n.indexCount){var o=n.computeMeshIndices_(n.meshWidth,n.meshHeight);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,o,t.STATIC_DRAW),n.indexCount=o.length}}))},v.prototype.computeMeshVertices_=function(e,t,n){for(var r=new Float32Array(2*e*t*5),o=n.getLeftEyeVisibleTanAngles(),a=n.getLeftEyeNoLensTanAngles(),s=n.getLeftEyeVisibleScreenRect(a),l=0,u=0;u<2;u++){for(var c=0;c<t;c++)for(var d=0;d<e;d++,l++){var g=d/(e-1),p=c/(t-1),f=g,h=p,M=i(o[0],o[2],g),m=i(o[3],o[1],p),A=Math.sqrt(M*M+m*m),y=n.distortion.distortInverse(A);p=2*(s.y+(p=(m*y/A-a[3])/(a[1]-a[3]))*s.height-.5),r[5*l+0]=g=2*(s.x+(g=(M*y/A-a[0])/(a[2]-a[0]))*s.width-.5),r[5*l+1]=p,r[5*l+2]=f,r[5*l+3]=h,r[5*l+4]=u}var T=o[2]-o[0];o[0]=-(T+o[0]),o[2]=T-o[2],a[0]=-((T=a[2]-a[0])+a[0]),a[2]=T-a[2],s.x=1-(s.x+s.width)}return r},v.prototype.computeMeshIndices_=function(e,t){for(var n=new Uint16Array(2*(e-1)*(t-1)*6),r=e/2,o=t/2,i=0,a=0,s=0;s<2;s++)for(var l=0;l<t;l++)for(var u=0;u<e;u++,i++)0!=u&&0!=l&&(u<=r==l<=o?(n[a++]=i,n[a++]=i-e-1,n[a++]=i-e,n[a++]=i-e-1,n[a++]=i,n[a++]=i-1):(n[a++]=i-1,n[a++]=i-e,n[a++]=i,n[a++]=i-e,n[a++]=i-1,n[a++]=i-e-1));return n},v.prototype.getOwnPropertyDescriptor_=function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return void 0!==n.get&&void 0!==n.set||(n.configurable=!0,n.enumerable=!0,n.get=function(){return this.getAttribute(t)},n.set=function(e){this.setAttribute(t,e)}),n};var L=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join("\n"),b=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join("\n"),O=Math.PI/180;function S(e){this.gl=e,this.attribs={position:0},this.program=M(e,L,b,this.attribs),this.uniforms=m(e,this.program),this.vertexBuffer=e.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}function j(e){this.coefficients=e}S.prototype.destroy=function(){var e=this.gl;this.listener&&e.canvas.removeEventListener("click",this.listener,!1),e.deleteProgram(this.program),e.deleteBuffer(this.vertexBuffer)},S.prototype.listen=function(e,t){var n=this.gl.canvas;this.listener=function(r){var o=n.clientWidth/2;r.clientX>o-42&&r.clientX<o+42&&r.clientY>n.clientHeight-42?e(r):r.clientX<42&&r.clientY<42&&t(r)},n.addEventListener("click",this.listener,!1)},S.prototype.onResize=function(){var e=this.gl,t=this;w(e,[e.ARRAY_BUFFER_BINDING],(function(e){var n=[],r=e.drawingBufferWidth/2,o=Math.max(screen.width,screen.height)*window.devicePixelRatio,i=e.drawingBufferWidth/o*window.devicePixelRatio,a=4*i/2,s=42*i,l=28*i/2,u=14*i;function c(e,t){var o=(90-e)*O,i=Math.cos(o),a=Math.sin(o);n.push(.3125*i*l+r,.3125*a*l+l),n.push(t*i*l+r,t*a*l+l)}n.push(r-a,s),n.push(r-a,e.drawingBufferHeight),n.push(r+a,s),n.push(r+a,e.drawingBufferHeight),t.gearOffset=n.length/2;for(var d=0;d<=6;d++){var g=60*d;c(g,1),c(g+12,1),c(g+20,.75),c(g+40,.75),c(g+48,1)}function p(t,r){n.push(u+t,e.drawingBufferHeight-u-r)}t.gearVertexCount=n.length/2-t.gearOffset,t.arrowOffset=n.length/2;var f=a/Math.sin(45*O);p(0,l),p(l,0),p(l+f,f),p(f,l+f),p(f,l-f),p(0,l),p(l,2*l),p(l+f,2*l-f),p(f,l-f),p(0,l),p(f,l-a),p(28*i,l-a),p(f,l+a),p(28*i,l+a),t.arrowVertexCount=n.length/2-t.arrowOffset,e.bindBuffer(e.ARRAY_BUFFER,t.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,new Float32Array(n),e.STATIC_DRAW)}))},S.prototype.render=function(){var e=this.gl,t=this;w(e,[e.CULL_FACE,e.DEPTH_TEST,e.BLEND,e.SCISSOR_TEST,e.STENCIL_TEST,e.COLOR_WRITEMASK,e.VIEWPORT,e.CURRENT_PROGRAM,e.ARRAY_BUFFER_BINDING],(function(e){e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.BLEND),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.colorMask(!0,!0,!0,!0),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),t.renderNoState()}))},S.prototype.renderNoState=function(){var e,t,n,r,o,i,a=this.gl;a.useProgram(this.program),a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer),a.enableVertexAttribArray(this.attribs.position),a.vertexAttribPointer(this.attribs.position,2,a.FLOAT,!1,8,0),a.uniform4f(this.uniforms.color,1,1,1,1),o=1/(0-(n=a.drawingBufferHeight)),i=1/-1023.9,(e=this.projMat)[0]=-2*(r=1/(0-(t=a.drawingBufferWidth))),e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*i,e[11]=0,e[12]=(0+t)*r,e[13]=(n+0)*o,e[14]=1024.1*i,e[15]=1,a.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),a.drawArrays(a.TRIANGLE_STRIP,0,4),a.drawArrays(a.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),a.drawArrays(a.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)},j.prototype.distortInverse=function(e){for(var t=0,n=1,r=e-this.distort(t);Math.abs(n-t)>1e-4;){var o=e-this.distort(n),i=n-o*((n-t)/(o-r));t=n,n=i,r=o}return n},j.prototype.distort=function(e){for(var t=e*e,n=0,r=0;r<this.coefficients.length;r++)n=t*(n+this.coefficients[r]);return(n+1)*e};var P=Math.PI/180,k=180/Math.PI,z=function(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0};z.prototype={constructor:z,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var e=this.length();return 0!==e?this.multiplyScalar(1/e):(this.x=0,this.y=0,this.z=0),this},multiplyScalar:function(e){this.x*=e,this.y*=e,this.z*=e},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,o=e.x,i=e.y,a=e.z,s=e.w,l=s*t+i*r-a*n,u=s*n+a*t-o*r,c=s*r+o*n-i*t,d=-o*t-i*n-a*r;return this.x=l*s+d*-o+u*-a-c*-i,this.y=u*s+d*-i+c*-o-l*-a,this.z=c*s+d*-a+l*-i-u*-o,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},crossVectors:function(e,t){var n=e.x,r=e.y,o=e.z,i=t.x,a=t.y,s=t.z;return this.x=r*s-o*a,this.y=o*i-n*s,this.z=n*a-r*i,this}};var R,_,V=function(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1};function B(e){this.width=e.width||p(),this.height=e.height||f(),this.widthMeters=e.widthMeters,this.heightMeters=e.heightMeters,this.bevelMeters=e.bevelMeters}V.prototype={constructor:V,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this},setFromEulerXYZ:function(e,t,n){var r=Math.cos(e/2),o=Math.cos(t/2),i=Math.cos(n/2),a=Math.sin(e/2),s=Math.sin(t/2),l=Math.sin(n/2);return this.x=a*o*i+r*s*l,this.y=r*s*i-a*o*l,this.z=r*o*l+a*s*i,this.w=r*o*i-a*s*l,this},setFromEulerYXZ:function(e,t,n){var r=Math.cos(e/2),o=Math.cos(t/2),i=Math.cos(n/2),a=Math.sin(e/2),s=Math.sin(t/2),l=Math.sin(n/2);return this.x=a*o*i+r*s*l,this.y=r*s*i-a*o*l,this.z=r*o*l-a*s*i,this.w=r*o*i+a*s*l,this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);return this.x=e.x*r,this.y=e.y*r,this.z=e.z*r,this.w=Math.cos(n),this},multiply:function(e){return this.multiplyQuaternions(this,e)},multiplyQuaternions:function(e,t){var n=e.x,r=e.y,o=e.z,i=e.w,a=t.x,s=t.y,l=t.z,u=t.w;return this.x=n*u+i*a+r*l-o*s,this.y=r*u+i*s+o*a-n*l,this.z=o*u+i*l+n*s-r*a,this.w=i*u-n*a-r*s-o*l,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=1):(this.x=this.x*(e=1/e),this.y=this.y*e,this.z=this.z*e,this.w=this.w*e),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this.x,r=this.y,o=this.z,i=this.w,a=i*e.w+n*e.x+r*e.y+o*e.z;if(a<0?(this.w=-e.w,this.x=-e.x,this.y=-e.y,this.z=-e.z,a=-a):this.copy(e),a>=1)return this.w=i,this.x=n,this.y=r,this.z=o,this;var s=Math.acos(a),l=Math.sqrt(1-a*a);if(Math.abs(l)<.001)return this.w=.5*(i+this.w),this.x=.5*(n+this.x),this.y=.5*(r+this.y),this.z=.5*(o+this.z),this;var u=Math.sin((1-t)*s)/l,c=Math.sin(t*s)/l;return this.w=i*u+this.w*c,this.x=n*u+this.x*c,this.y=r*u+this.y*c,this.z=o*u+this.z*c,this},setFromUnitVectors:function(e,t){return void 0===R&&(R=new z),(_=e.dot(t)+1)<1e-6?(_=0,Math.abs(e.x)>Math.abs(e.z)?R.set(-e.y,e.x,0):R.set(0,-e.z,e.y)):R.crossVectors(e,t),this.x=R.x,this.y=R.y,this.z=R.z,this.w=_,this.normalize(),this}};var U=new B({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),F=new B({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),G={CardboardV1:new Y({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new Y({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};function Q(e,t){this.viewer=G.CardboardV2,this.updateDeviceParams(e),this.distortion=new j(this.viewer.distortionCoefficients);for(var n=0;n<t.length;n++){var r=t[n];G[r.id]=new Y(r)}}function Y(e){this.id=e.id,this.label=e.label,this.fov=e.fov,this.interLensDistance=e.interLensDistance,this.baselineLensDistance=e.baselineLensDistance,this.screenLensDistance=e.screenLensDistance,this.distortionCoefficients=e.distortionCoefficients,this.inverseCoefficients=e.inverseCoefficients}Q.prototype.updateDeviceParams=function(e){this.device=this.determineDevice_(e)||this.device},Q.prototype.getDevice=function(){return this.device},Q.prototype.setViewer=function(e){this.viewer=e,this.distortion=new j(this.viewer.distortionCoefficients)},Q.prototype.determineDevice_=function(e){if(!e)return a()?(console.warn("Using fallback iOS device measurements."),F):(console.warn("Using fallback Android device measurements."),U);var t=.0254/e.ydpi;return new B({widthMeters:.0254/e.xdpi*p(),heightMeters:t*f(),bevelMeters:.001*e.bevelMm})},Q.prototype.getDistortedFieldOfViewLeftEye=function(){var e=this.viewer,t=this.device,n=this.distortion,r=e.screenLensDistance,o=e.interLensDistance/2,i=e.baselineLensDistance-t.bevelMeters,a=t.heightMeters-i,s=k*Math.atan(n.distort((t.widthMeters-e.interLensDistance)/2/r)),l=k*Math.atan(n.distort(o/r)),u=k*Math.atan(n.distort(i/r)),c=k*Math.atan(n.distort(a/r));return{leftDegrees:Math.min(s,e.fov),rightDegrees:Math.min(l,e.fov),downDegrees:Math.min(u,e.fov),upDegrees:Math.min(c,e.fov)}},Q.prototype.getLeftEyeVisibleTanAngles=function(){var e=this.viewer,t=this.device,n=this.distortion,r=Math.tan(-P*e.fov),o=Math.tan(P*e.fov),i=Math.tan(P*e.fov),a=Math.tan(-P*e.fov),s=t.widthMeters/4,l=t.heightMeters/2,u=e.interLensDistance/2-s,c=-(e.baselineLensDistance-t.bevelMeters-l),d=e.screenLensDistance,g=n.distort((u-s)/d),p=n.distort((c+l)/d),f=n.distort((u+s)/d),h=n.distort((c-l)/d),M=new Float32Array(4);return M[0]=Math.max(r,g),M[1]=Math.min(o,p),M[2]=Math.min(i,f),M[3]=Math.max(a,h),M},Q.prototype.getLeftEyeNoLensTanAngles=function(){var e=this.viewer,t=this.device,n=this.distortion,r=new Float32Array(4),o=n.distortInverse(Math.tan(-P*e.fov)),i=n.distortInverse(Math.tan(P*e.fov)),a=n.distortInverse(Math.tan(P*e.fov)),s=n.distortInverse(Math.tan(-P*e.fov)),l=t.widthMeters/4,u=t.heightMeters/2,c=e.interLensDistance/2-l,d=-(e.baselineLensDistance-t.bevelMeters-u),g=e.screenLensDistance,p=(d+u)/g,f=(c+l)/g,h=(d-u)/g;return r[0]=Math.max(o,(c-l)/g),r[1]=Math.min(i,p),r[2]=Math.min(a,f),r[3]=Math.max(s,h),r},Q.prototype.getLeftEyeVisibleScreenRect=function(e){var t=this.viewer,n=this.device,r=t.screenLensDistance,o=(n.widthMeters-t.interLensDistance)/2,i=t.baselineLensDistance-n.bevelMeters,a=(e[0]*r+o)/n.widthMeters,s=(e[3]*r+i)/n.heightMeters;return{x:a,y:s,width:(e[2]*r+o)/n.widthMeters-a,height:(e[1]*r+i)/n.heightMeters-s}},Q.prototype.getFieldOfViewLeftEye=function(e){return e?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},Q.prototype.getFieldOfViewRightEye=function(e){var t=this.getFieldOfViewLeftEye(e);return{leftDegrees:t.rightDegrees,rightDegrees:t.leftDegrees,upDegrees:t.upDegrees,downDegrees:t.downDegrees}},Q.prototype.getUndistortedFieldOfViewLeftEye=function(){var e=this.getUndistortedParams_();return{leftDegrees:k*Math.atan(e.outerDist),rightDegrees:k*Math.atan(e.innerDist),downDegrees:k*Math.atan(e.bottomDist),upDegrees:k*Math.atan(e.topDist)}},Q.prototype.getUndistortedViewportLeftEye=function(){var e=this.getUndistortedParams_(),t=this.device,n=this.viewer.screenLensDistance,r=t.width/(t.widthMeters/n),o=t.height/(t.heightMeters/n),i=Math.round((e.eyePosX-e.outerDist)*r),a=Math.round((e.eyePosY-e.bottomDist)*o);return{x:i,y:a,width:Math.round((e.eyePosX+e.innerDist)*r)-i,height:Math.round((e.eyePosY+e.topDist)*o)-a}},Q.prototype.getUndistortedParams_=function(){var e=this.viewer,t=this.device,n=e.screenLensDistance,r=e.interLensDistance/2/n,o=t.heightMeters/n,i=t.widthMeters/n/2-r,a=(e.baselineLensDistance-t.bevelMeters)/n,s=this.distortion.distortInverse(Math.tan(P*e.fov)),l=Math.min(i,s),u=Math.min(r,s),c=Math.min(a,s);return{outerDist:l,innerDist:u,topDist:Math.min(o-a,s),bottomDist:c,eyePosX:i,eyePosY:a}},Q.Viewers=G;var W={format:1,last_updated:"2018-10-17T15:31:16Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/BLN-L24/*"},{ua:"HONORBLN-L24"}],dpi:480,bw:4,ac:500},{type:"android",rules:[{mdmh:"Huawei/*/BKL-L09/*"},{ua:"BKL-L09"}],dpi:403,bw:3.47,ac:500},{type:"android",rules:[{mdmh:"LENOVO/*/Lenovo PB2-690Y/*"},{ua:"Lenovo PB2-690Y"}],dpi:[457.2,454.713],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/G5/*"},{ua:"Moto G (5) Plus"}],dpi:[403.4,403],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A5000/*"},{ua:"ONEPLUS A5000 "}],dpi:[403.411,399.737],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A5010/*"},{ua:"ONEPLUS A5010"}],dpi:[403,400],bw:2,ac:1e3},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920P/*"},{ua:"SM-N920P"}],dpi:[386.3655,390.144],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G950F/*"},{ua:"SM-G950F"}],dpi:[562.707,565.293],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955U/*"},{ua:"SM-G955U"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955F/*"},{ua:"SM-G955F"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Fly/*/IQ4412/*"},{ua:"IQ4412"}],dpi:307.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"BENEVE/*/VR518/*"},{ua:"VR518"}],dpi:480,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2436]}],dpi:458,bw:4,ac:1e3}]};function H(e,t){if(this.dpdb=W,this.recalculateDeviceParams_(),e){this.onDeviceParamsUpdated=t;var n=new XMLHttpRequest,r=this;n.open("GET",e,!0),n.addEventListener("load",(function(){r.loading=!1,n.status>=200&&n.status<=299?(r.dpdb=JSON.parse(n.response),r.recalculateDeviceParams_()):console.error("Error loading online DPDB!")})),n.send()}}function K(e){this.xdpi=e.xdpi,this.ydpi=e.ydpi,this.bevelMm=e.bevelMm}function X(e,t){this.set(e,t)}function Z(e,t){this.kFilter=e,this.isDebug=t,this.currentAccelMeasurement=new X,this.currentGyroMeasurement=new X,this.previousGyroMeasurement=new X,this.filterQ=a()?new V(-1,0,0,1):new V(1,0,0,1),this.previousFilterQ=new V,this.previousFilterQ.copy(this.filterQ),this.accelQ=new V,this.isOrientationInitialized=!1,this.estimatedGravity=new z,this.measuredGravity=new z,this.gyroIntegralQ=new V}function q(e,t){this.predictionTimeS=e,this.isDebug=t,this.previousQ=new V,this.previousTimestampS=null,this.deltaQ=new V,this.outQ=new V}function $(e,t,n,r){this.yawOnly=n,this.accelerometer=new z,this.gyroscope=new z,this.filter=new Z(e,r),this.posePredictor=new q(t,r),this.isFirefoxAndroid=l(),this.isIOS=a();var o=u();this.isDeviceMotionInRadians=!this.isIOS&&o&&o<66,this.isWithoutDeviceMotion=c(),this.filterToWorldQ=new V,a()?this.filterToWorldQ.setFromAxisAngle(new z(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new z(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new V,this.worldToScreenQ=new V,this.originalPoseAdjustQ=new V,this.originalPoseAdjustQ.setFromAxisAngle(new z(0,0,1),-window.orientation*Math.PI/180),this.setScreenTransform_(),g()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new V,this.orientationOut_=new Float32Array(4),this.start()}H.prototype.getDeviceParams=function(){return this.deviceParams},H.prototype.recalculateDeviceParams_=function(){var e=this.calcDeviceParams_();e?(this.deviceParams=e,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},H.prototype.calcDeviceParams_=function(){var e=this.dpdb;if(!e)return console.error("DPDB not available."),null;if(1!=e.format)return console.error("DPDB has unexpected format version."),null;if(!e.devices||!e.devices.length)return console.error("DPDB does not have a devices section."),null;var t=navigator.userAgent||navigator.vendor||window.opera,n=p(),r=f();if(!e.devices)return console.error("DPDB has no devices section."),null;for(var o=0;o<e.devices.length;o++){var i=e.devices[o];if(i.rules)if("ios"==i.type||"android"==i.type){if(a()==("ios"==i.type)){for(var s=!1,l=0;l<i.rules.length;l++)if(this.matchRule_(i.rules[l],t,n,r)){s=!0;break}if(s)return new K({xdpi:i.dpi[0]||i.dpi,ydpi:i.dpi[1]||i.dpi,bevelMm:i.bw})}}else console.warn("Device["+o+"] has invalid type.");else console.warn("Device["+o+"] has no rules section.")}return console.warn("No DPDB device match."),null},H.prototype.matchRule_=function(e,t,n,r){if(!e.ua&&!e.res)return!1;if(e.ua&&"SM"===e.ua.substring(0,2)&&(e.ua=e.ua.substring(0,7)),e.ua&&t.indexOf(e.ua)<0)return!1;if(e.res){if(!e.res[0]||!e.res[1])return!1;var o=e.res[0],i=e.res[1];if(Math.min(n,r)!=Math.min(o,i)||Math.max(n,r)!=Math.max(o,i))return!1}return!0},X.prototype.set=function(e,t){this.sample=e,this.timestampS=t},X.prototype.copy=function(e){this.set(e.sample,e.timestampS)},Z.prototype.addAccelMeasurement=function(e,t){this.currentAccelMeasurement.set(e,t)},Z.prototype.addGyroMeasurement=function(e,t){var n;this.currentGyroMeasurement.set(e,t),n=t-this.previousGyroMeasurement.timestampS,isNaN(n)||n<=.001||n>1||this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},Z.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var e=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS);this.gyroIntegralQ.multiply(e),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(e);var t=new V;t.copy(this.filterQ),t.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(t),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var n,r=new V;r.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),r.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",k*((n=r).w>1?(console.warn("getQuaternionAngle: w > 1"),0):2*Math.acos(n.w)),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var o=new V;o.copy(this.filterQ),o.multiply(r),this.filterQ.slerp(o,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},Z.prototype.getOrientation=function(){return this.filterQ},Z.prototype.accelToQuaternion_=function(e){var t=new z;t.copy(e),t.normalize();var n=new V;return n.setFromUnitVectors(new z(0,0,-1),t),n.inverse(),n},Z.prototype.gyroToQuaternionDelta_=function(e,t){var n=new V,r=new z;return r.copy(e),r.normalize(),n.setFromAxisAngle(r,e.length()*t),n},q.prototype.getPrediction=function(e,t,n){if(!this.previousTimestampS)return this.previousQ.copy(e),this.previousTimestampS=n,e;var r=new z;r.copy(t),r.normalize();var o=t.length();return o<20*P?(this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(k*o).toFixed(1)),this.outQ.copy(e),this.previousQ.copy(e),this.outQ):(this.deltaQ.setFromAxisAngle(r,o*this.predictionTimeS),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(e),this.previousTimestampS=n,this.outQ)},$.prototype.getPosition=function(){return null},$.prototype.getOrientation=function(){var e=void 0;if(this.isWithoutDeviceMotion&&this._deviceOrientationQ)return this.deviceOrientationFixQ=this.deviceOrientationFixQ||(n=(new V).setFromAxisAngle(new z(0,0,-1),0),r=new V,-90===window.orientation?r.setFromAxisAngle(new z(0,1,0),Math.PI/-2):r.setFromAxisAngle(new z(0,1,0),Math.PI/2),n.multiply(r)),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||((t=new V).setFromAxisAngle(new z(1,0,0),-Math.PI/2),t),e=this._deviceOrientationQ,(o=new V).copy(e),o.multiply(this.deviceOrientationFilterToWorldQ),o.multiply(this.resetQ),o.multiply(this.worldToScreenQ),o.multiplyQuaternions(this.deviceOrientationFixQ,o),this.yawOnly&&(o.x=0,o.z=0,o.normalize()),this.orientationOut_[0]=o.x,this.orientationOut_[1]=o.y,this.orientationOut_[2]=o.z,this.orientationOut_[3]=o.w,this.orientationOut_;var t,n,r,o,i=this.filter.getOrientation();return e=this.posePredictor.getPrediction(i,this.gyroscope,this.previousTimestampS),(o=new V).copy(this.filterToWorldQ),o.multiply(this.resetQ),o.multiply(e),o.multiply(this.worldToScreenQ),this.yawOnly&&(o.x=0,o.z=0,o.normalize()),this.orientationOut_[0]=o.x,this.orientationOut_[1]=o.y,this.orientationOut_[2]=o.z,this.orientationOut_[3]=o.w,this.orientationOut_},$.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),g()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},$.prototype.onDeviceOrientation_=function(e){this._deviceOrientationQ=this._deviceOrientationQ||new V;var t=e.alpha,n=e.beta,r=e.gamma;t=(t||0)*Math.PI/180,n=(n||0)*Math.PI/180,r=(r||0)*Math.PI/180,this._deviceOrientationQ.setFromEulerYXZ(n,t,-r)},$.prototype.onDeviceMotion_=function(e){this.updateDeviceMotion_(e)},$.prototype.updateDeviceMotion_=function(e){var t=e.accelerationIncludingGravity,n=e.rotationRate,r=e.timeStamp/1e3,o=r-this.previousTimestampS;return o<0?(x("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),void(this.previousTimestampS=r)):o<=.001||o>1?(x("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),void(this.previousTimestampS=r)):(this.accelerometer.set(-t.x,-t.y,-t.z),d()?this.gyroscope.set(-n.beta,n.alpha,n.gamma):this.gyroscope.set(n.alpha,n.beta,n.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addAccelMeasurement(this.accelerometer,r),this.filter.addGyroMeasurement(this.gyroscope,r),void(this.previousTimestampS=r))},$.prototype.onOrientationChange_=function(e){this.setScreenTransform_()},$.prototype.onMessage_=function(e){var t=e.data;t&&t.type&&"devicemotion"===t.type.toLowerCase()&&this.updateDeviceMotion_(t.deviceMotionEvent)},$.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),window.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new z(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new z(0,0,1),Math.PI/2)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},$.prototype.start=function(){var e,t,n;this.onDeviceMotionCallback_=this.onDeviceMotion_.bind(this),this.onOrientationChangeCallback_=this.onOrientationChange_.bind(this),this.onMessageCallback_=this.onMessage_.bind(this),this.onDeviceOrientationCallback_=this.onDeviceOrientation_.bind(this),a()&&(e=window.self!==window.top,t=N(document.referrer),n=N(window.location.href),e&&t!==n)&&window.addEventListener("message",this.onMessageCallback_),window.addEventListener("orientationchange",this.onOrientationChangeCallback_),this.isWithoutDeviceMotion?window.addEventListener("deviceorientation",this.onDeviceOrientationCallback_):window.addEventListener("devicemotion",this.onDeviceMotionCallback_)},$.prototype.stop=function(){window.removeEventListener("devicemotion",this.onDeviceMotionCallback_),window.removeEventListener("deviceorientation",this.onDeviceOrientationCallback_),window.removeEventListener("orientationchange",this.onOrientationChangeCallback_),window.removeEventListener("message",this.onMessageCallback_)};var J=new z(1,0,0),ee=new z(0,0,1),te=new V;te.setFromAxisAngle(J,-Math.PI/2),te.multiply((new V).setFromAxisAngle(ee,Math.PI/2));var ne=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=t,this.sensor=null,this.fusionSensor=null,this._out=new Float32Array(4),this.api=null,this.errors=[],this._sensorQ=new V,this._outQ=new V,this._onSensorRead=this._onSensorRead.bind(this),this._onSensorError=this._onSensorError.bind(this),this.init()}return o(e,[{key:"init",value:function(){var e=null;try{(e=new RelativeOrientationSensor({frequency:60,referenceFrame:"screen"})).addEventListener("error",this._onSensorError)}catch(t){this.errors.push(t),"SecurityError"===t.name?(console.error("Cannot construct sensors due to the Feature Policy"),console.warn('Attempting to fall back using "devicemotion"; however this will fail in the future without correct permissions.'),this.useDeviceMotion()):"ReferenceError"===t.name?this.useDeviceMotion():console.error(t)}e&&(this.api="sensor",this.sensor=e,this.sensor.addEventListener("reading",this._onSensorRead),this.sensor.start())}},{key:"useDeviceMotion",value:function(){this.api="devicemotion",this.fusionSensor=new $(this.config.K_FILTER,this.config.PREDICTION_TIME_S,this.config.YAW_ONLY,this.config.DEBUG),this.sensor&&(this.sensor.removeEventListener("reading",this._onSensorRead),this.sensor.removeEventListener("error",this._onSensorError),this.sensor=null)}},{key:"getOrientation",value:function(){if(this.fusionSensor)return this.fusionSensor.getOrientation();if(!this.sensor||!this.sensor.quaternion)return this._out[0]=this._out[1]=this._out[2]=0,this._out[3]=1,this._out;var e=this.sensor.quaternion;this._sensorQ.set(e[0],e[1],e[2],e[3]);var t=this._outQ;return t.copy(te),t.multiply(this._sensorQ),this.config.YAW_ONLY&&(t.x=t.z=0,t.normalize()),this._out[0]=t.x,this._out[1]=t.y,this._out[2]=t.z,this._out[3]=t.w,this._out}},{key:"_onSensorError",value:function(e){this.errors.push(e.error),"NotAllowedError"===e.error.name?console.error("Permission to access sensor was denied"):"NotReadableError"===e.error.name?console.error("Sensor could not be read"):console.error(e.error),this.useDeviceMotion()}},{key:"_onSensorRead",value:function(){}}]),e}();function re(){this.loadIcon_();var e=document.createElement("div");(i=e.style).position="fixed",i.top=0,i.right=0,i.bottom=0,i.left=0,i.backgroundColor="gray",i.fontFamily="sans-serif",i.zIndex=1e6;var t=document.createElement("img");t.src=this.icon,(i=t.style).marginLeft="25%",i.marginTop="25%",i.width="50%",e.appendChild(t);var n=document.createElement("div");(i=n.style).textAlign="center",i.fontSize="16px",i.lineHeight="24px",i.margin="24px 25%",i.width="50%",n.innerHTML="Place your phone into your Cardboard viewer.",e.appendChild(n);var r=document.createElement("div");(i=r.style).backgroundColor="#CFD8DC",i.position="fixed",i.bottom=0,i.width="100%",i.height="48px",i.padding="14px 24px",i.boxSizing="border-box",i.color="#656A6B",e.appendChild(r);var o=document.createElement("div");o.style.float="left",o.innerHTML="No Cardboard viewer?";var i,a=document.createElement("a");a.href="https://www.google.com/get/cardboard/get-cardboard/",a.innerHTML="get one",a.target="_blank",(i=a.style).float="right",i.fontWeight=600,i.textTransform="uppercase",i.borderLeft="1px solid gray",i.paddingLeft="24px",i.textDecoration="none",i.color="#656A6B",r.appendChild(o),r.appendChild(a),this.overlay=e,this.text=n,this.hide()}function oe(e){try{this.selectedKey=localStorage.getItem("WEBVR_CARDBOARD_VIEWER")}catch(t){console.error("Failed to load viewer profile: %s",t)}this.selectedKey||(this.selectedKey=e||"CardboardV1"),this.dialog=this.createDialog_(Q.Viewers),this.root=null,this.onChangeCallbacks_=[]}re.prototype.show=function(e){e||this.overlay.parentElement?e&&(this.overlay.parentElement&&this.overlay.parentElement!=e&&this.overlay.parentElement.removeChild(this.overlay),e.appendChild(this.overlay)):document.body.appendChild(this.overlay),this.overlay.style.display="block";var t=this.overlay.querySelector("img").style;g()?(t.width="20%",t.marginLeft="40%",t.marginTop="3%"):(t.width="50%",t.marginLeft="25%",t.marginTop="25%")},re.prototype.hide=function(){this.overlay.style.display="none"},re.prototype.showTemporarily=function(e,t){this.show(t),this.timer=setTimeout(this.hide.bind(this),e)},re.prototype.disableShowTemporarily=function(){clearTimeout(this.timer)},re.prototype.update=function(){this.disableShowTemporarily(),!g()&&A()?this.show():this.hide()},re.prototype.loadIcon_=function(){this.icon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE5OHB4IiBoZWlnaHQ9IjI0MHB4IiB2aWV3Qm94PSIwIDAgMTk4IDI0MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDMuMy4zICgxMjA4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+dHJhbnNpdGlvbjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHNrZXRjaDp0eXBlPSJNU1BhZ2UiPgogICAgICAgIDxnIGlkPSJ0cmFuc2l0aW9uIiBza2V0Y2g6dHlwZT0iTVNBcnRib2FyZEdyb3VwIj4KICAgICAgICAgICAgPGcgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTQtKy1JbXBvcnRlZC1MYXllcnMtQ29weS0rLUltcG9ydGVkLUxheWVycy1Db3B5LTItQ29weSIgc2tldGNoOnR5cGU9Ik1TTGF5ZXJHcm91cCI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHktNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDEwNy4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjYyNSwyLjUyNyBDMTQ5LjYyNSwyLjUyNyAxNTUuODA1LDYuMDk2IDE1Ni4zNjIsNi40MTggTDE1Ni4zNjIsNy4zMDQgQzE1Ni4zNjIsNy40ODEgMTU2LjM3NSw3LjY2NCAxNTYuNCw3Ljg1MyBDMTU2LjQxLDcuOTM0IDE1Ni40Miw4LjAxNSAxNTYuNDI3LDguMDk1IEMxNTYuNTY3LDkuNTEgMTU3LjQwMSwxMS4wOTMgMTU4LjUzMiwxMi4wOTQgTDE2NC4yNTIsMTcuMTU2IEwxNjQuMzMzLDE3LjA2NiBDMTY0LjMzMywxNy4wNjYgMTY4LjcxNSwxNC41MzYgMTY5LjU2OCwxNC4wNDIgQzE3MS4wMjUsMTQuODgzIDE5NS41MzgsMjkuMDM1IDE5NS41MzgsMjkuMDM1IEwxOTUuNTM4LDgzLjAzNiBDMTk1LjUzOCw4My44MDcgMTk1LjE1Miw4NC4yNTMgMTk0LjU5LDg0LjI1MyBDMTk0LjM1Nyw4NC4yNTMgMTk0LjA5NSw4NC4xNzcgMTkzLjgxOCw4NC4wMTcgTDE2OS44NTEsNzAuMTc5IEwxNjkuODM3LDcwLjIwMyBMMTQyLjUxNSw4NS45NzggTDE0MS42NjUsODQuNjU1IEMxMzYuOTM0LDgzLjEyNiAxMzEuOTE3LDgxLjkxNSAxMjYuNzE0LDgxLjA0NSBDMTI2LjcwOSw4MS4wNiAxMjYuNzA3LDgxLjA2OSAxMjYuNzA3LDgxLjA2OSBMMTIxLjY0LDk4LjAzIEwxMTMuNzQ5LDEwMi41ODYgTDExMy43MTIsMTAyLjUyMyBMMTEzLjcxMiwxMzAuMTEzIEMxMTMuNzEyLDEzMC44ODUgMTEzLjMyNiwxMzEuMzMgMTEyLjc2NCwxMzEuMzMgQzExMi41MzIsMTMxLjMzIDExMi4yNjksMTMxLjI1NCAxMTEuOTkyLDEzMS4wOTQgTDY5LjUxOSwxMDYuNTcyIEM2OC41NjksMTA2LjAyMyA2Ny43OTksMTA0LjY5NSA2Ny43OTksMTAzLjYwNSBMNjcuNzk5LDEwMi41NyBMNjcuNzc4LDEwMi42MTcgQzY3LjI3LDEwMi4zOTMgNjYuNjQ4LDEwMi4yNDkgNjUuOTYyLDEwMi4yMTggQzY1Ljg3NSwxMDIuMjE0IDY1Ljc4OCwxMDIuMjEyIDY1LjcwMSwxMDIuMjEyIEM2NS42MDYsMTAyLjIxMiA2NS41MTEsMTAyLjIxNSA2NS40MTYsMTAyLjIxOSBDNjUuMTk1LDEwMi4yMjkgNjQuOTc0LDEwMi4yMzUgNjQuNzU0LDEwMi4yMzUgQzY0LjMzMSwxMDIuMjM1IDYzLjkxMSwxMDIuMjE2IDYzLjQ5OCwxMDIuMTc4IEM2MS44NDMsMTAyLjAyNSA2MC4yOTgsMTAxLjU3OCA1OS4wOTQsMTAwLjg4MiBMMTIuNTE4LDczLjk5MiBMMTIuNTIzLDc0LjAwNCBMMi4yNDUsNTUuMjU0IEMxLjI0NCw1My40MjcgMi4wMDQsNTEuMDM4IDMuOTQzLDQ5LjkxOCBMNTkuOTU0LDE3LjU3MyBDNjAuNjI2LDE3LjE4NSA2MS4zNSwxNy4wMDEgNjIuMDUzLDE3LjAwMSBDNjMuMzc5LDE3LjAwMSA2NC42MjUsMTcuNjYgNjUuMjgsMTguODU0IEw2NS4yODUsMTguODUxIEw2NS41MTIsMTkuMjY0IEw2NS41MDYsMTkuMjY4IEM2NS45MDksMjAuMDAzIDY2LjQwNSwyMC42OCA2Ni45ODMsMjEuMjg2IEw2Ny4yNiwyMS41NTYgQzY5LjE3NCwyMy40MDYgNzEuNzI4LDI0LjM1NyA3NC4zNzMsMjQuMzU3IEM3Ni4zMjIsMjQuMzU3IDc4LjMyMSwyMy44NCA4MC4xNDgsMjIuNzg1IEM4MC4xNjEsMjIuNzg1IDg3LjQ2NywxOC41NjYgODcuNDY3LDE4LjU2NiBDODguMTM5LDE4LjE3OCA4OC44NjMsMTcuOTk0IDg5LjU2NiwxNy45OTQgQzkwLjg5MiwxNy45OTQgOTIuMTM4LDE4LjY1MiA5Mi43OTIsMTkuODQ3IEw5Ni4wNDIsMjUuNzc1IEw5Ni4wNjQsMjUuNzU3IEwxMDIuODQ5LDI5LjY3NCBMMTAyLjc0NCwyOS40OTIgTDE0OS42MjUsMi41MjcgTTE0OS42MjUsMC44OTIgQzE0OS4zNDMsMC44OTIgMTQ5LjA2MiwwLjk2NSAxNDguODEsMS4xMSBMMTAyLjY0MSwyNy42NjYgTDk3LjIzMSwyNC41NDIgTDk0LjIyNiwxOS4wNjEgQzkzLjMxMywxNy4zOTQgOTEuNTI3LDE2LjM1OSA4OS41NjYsMTYuMzU4IEM4OC41NTUsMTYuMzU4IDg3LjU0NiwxNi42MzIgODYuNjQ5LDE3LjE1IEM4My44NzgsMTguNzUgNzkuNjg3LDIxLjE2OSA3OS4zNzQsMjEuMzQ1IEM3OS4zNTksMjEuMzUzIDc5LjM0NSwyMS4zNjEgNzkuMzMsMjEuMzY5IEM3Ny43OTgsMjIuMjU0IDc2LjA4NCwyMi43MjIgNzQuMzczLDIyLjcyMiBDNzIuMDgxLDIyLjcyMiA2OS45NTksMjEuODkgNjguMzk3LDIwLjM4IEw2OC4xNDUsMjAuMTM1IEM2Ny43MDYsMTkuNjcyIDY3LjMyMywxOS4xNTYgNjcuMDA2LDE4LjYwMSBDNjYuOTg4LDE4LjU1OSA2Ni45NjgsMTguNTE5IDY2Ljk0NiwxOC40NzkgTDY2LjcxOSwxOC4wNjUgQzY2LjY5LDE4LjAxMiA2Ni42NTgsMTcuOTYgNjYuNjI0LDE3LjkxMSBDNjUuNjg2LDE2LjMzNyA2My45NTEsMTUuMzY2IDYyLjA1MywxNS4zNjYgQzYxLjA0MiwxNS4zNjYgNjAuMDMzLDE1LjY0IDU5LjEzNiwxNi4xNTggTDMuMTI1LDQ4LjUwMiBDMC40MjYsNTAuMDYxIC0wLjYxMyw1My40NDIgMC44MTEsNTYuMDQgTDExLjA4OSw3NC43OSBDMTEuMjY2LDc1LjExMyAxMS41MzcsNzUuMzUzIDExLjg1LDc1LjQ5NCBMNTguMjc2LDEwMi4yOTggQzU5LjY3OSwxMDMuMTA4IDYxLjQzMywxMDMuNjMgNjMuMzQ4LDEwMy44MDYgQzYzLjgxMiwxMDMuODQ4IDY0LjI4NSwxMDMuODcgNjQuNzU0LDEwMy44NyBDNjUsMTAzLjg3IDY1LjI0OSwxMDMuODY0IDY1LjQ5NCwxMDMuODUyIEM2NS41NjMsMTAzLjg0OSA2NS42MzIsMTAzLjg0NyA2NS43MDEsMTAzLjg0NyBDNjUuNzY0LDEwMy44NDcgNjUuODI4LDEwMy44NDkgNjUuODksMTAzLjg1MiBDNjUuOTg2LDEwMy44NTYgNjYuMDgsMTAzLjg2MyA2Ni4xNzMsMTAzLjg3NCBDNjYuMjgyLDEwNS40NjcgNjcuMzMyLDEwNy4xOTcgNjguNzAyLDEwNy45ODggTDExMS4xNzQsMTMyLjUxIEMxMTEuNjk4LDEzMi44MTIgMTEyLjIzMiwxMzIuOTY1IDExMi43NjQsMTMyLjk2NSBDMTE0LjI2MSwxMzIuOTY1IDExNS4zNDcsMTMxLjc2NSAxMTUuMzQ3LDEzMC4xMTMgTDExNS4zNDcsMTAzLjU1MSBMMTIyLjQ1OCw5OS40NDYgQzEyMi44MTksOTkuMjM3IDEyMy4wODcsOTguODk4IDEyMy4yMDcsOTguNDk4IEwxMjcuODY1LDgyLjkwNSBDMTMyLjI3OSw4My43MDIgMTM2LjU1Nyw4NC43NTMgMTQwLjYwNyw4Ni4wMzMgTDE0MS4xNCw4Ni44NjIgQzE0MS40NTEsODcuMzQ2IDE0MS45NzcsODcuNjEzIDE0Mi41MTYsODcuNjEzIEMxNDIuNzk0LDg3LjYxMyAxNDMuMDc2LDg3LjU0MiAxNDMuMzMzLDg3LjM5MyBMMTY5Ljg2NSw3Mi4wNzYgTDE5Myw4NS40MzMgQzE5My41MjMsODUuNzM1IDE5NC4wNTgsODUuODg4IDE5NC41OSw4NS44ODggQzE5Ni4wODcsODUuODg4IDE5Ny4xNzMsODQuNjg5IDE5Ny4xNzMsODMuMDM2IEwxOTcuMTczLDI5LjAzNSBDMTk3LjE3MywyOC40NTEgMTk2Ljg2MSwyNy45MTEgMTk2LjM1NSwyNy42MTkgQzE5Ni4zNTUsMjcuNjE5IDE3MS44NDMsMTMuNDY3IDE3MC4zODUsMTIuNjI2IEMxNzAuMTMyLDEyLjQ4IDE2OS44NSwxMi40MDcgMTY5LjU2OCwxMi40MDcgQzE2OS4yODUsMTIuNDA3IDE2OS4wMDIsMTIuNDgxIDE2OC43NDksMTIuNjI3IEMxNjguMTQzLDEyLjk3OCAxNjUuNzU2LDE0LjM1NyAxNjQuNDI0LDE1LjEyNSBMMTU5LjYxNSwxMC44NyBDMTU4Ljc5NiwxMC4xNDUgMTU4LjE1NCw4LjkzNyAxNTguMDU0LDcuOTM0IEMxNTguMDQ1LDcuODM3IDE1OC4wMzQsNy43MzkgMTU4LjAyMSw3LjY0IEMxNTguMDA1LDcuNTIzIDE1Ny45OTgsNy40MSAxNTcuOTk4LDcuMzA0IEwxNTcuOTk4LDYuNDE4IEMxNTcuOTk4LDUuODM0IDE1Ny42ODYsNS4yOTUgMTU3LjE4MSw1LjAwMiBDMTU2LjYyNCw0LjY4IDE1MC40NDIsMS4xMTEgMTUwLjQ0MiwxLjExMSBDMTUwLjE4OSwwLjk2NSAxNDkuOTA3LDAuODkyIDE0OS42MjUsMC44OTIiIGlkPSJGaWxsLTEiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTYuMDI3LDI1LjYzNiBMMTQyLjYwMyw1Mi41MjcgQzE0My44MDcsNTMuMjIyIDE0NC41ODIsNTQuMTE0IDE0NC44NDUsNTUuMDY4IEwxNDQuODM1LDU1LjA3NSBMNjMuNDYxLDEwMi4wNTcgTDYzLjQ2LDEwMi4wNTcgQzYxLjgwNiwxMDEuOTA1IDYwLjI2MSwxMDEuNDU3IDU5LjA1NywxMDAuNzYyIEwxMi40ODEsNzMuODcxIEw5Ni4wMjcsMjUuNjM2IiBpZD0iRmlsbC0yIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYzLjQ2MSwxMDIuMTc0IEM2My40NTMsMTAyLjE3NCA2My40NDYsMTAyLjE3NCA2My40MzksMTAyLjE3MiBDNjEuNzQ2LDEwMi4wMTYgNjAuMjExLDEwMS41NjMgNTguOTk4LDEwMC44NjMgTDEyLjQyMiw3My45NzMgQzEyLjM4Niw3My45NTIgMTIuMzY0LDczLjkxNCAxMi4zNjQsNzMuODcxIEMxMi4zNjQsNzMuODMgMTIuMzg2LDczLjc5MSAxMi40MjIsNzMuNzcgTDk1Ljk2OCwyNS41MzUgQzk2LjAwNCwyNS41MTQgOTYuMDQ5LDI1LjUxNCA5Ni4wODUsMjUuNTM1IEwxNDIuNjYxLDUyLjQyNiBDMTQzLjg4OCw1My4xMzQgMTQ0LjY4Miw1NC4wMzggMTQ0Ljk1Nyw1NS4wMzcgQzE0NC45Nyw1NS4wODMgMTQ0Ljk1Myw1NS4xMzMgMTQ0LjkxNSw1NS4xNjEgQzE0NC45MTEsNTUuMTY1IDE0NC44OTgsNTUuMTc0IDE0NC44OTQsNTUuMTc3IEw2My41MTksMTAyLjE1OCBDNjMuNTAxLDEwMi4xNjkgNjMuNDgxLDEwMi4xNzQgNjMuNDYxLDEwMi4xNzQgTDYzLjQ2MSwxMDIuMTc0IFogTTEyLjcxNCw3My44NzEgTDU5LjExNSwxMDAuNjYxIEM2MC4yOTMsMTAxLjM0MSA2MS43ODYsMTAxLjc4MiA2My40MzUsMTAxLjkzNyBMMTQ0LjcwNyw1NS4wMTUgQzE0NC40MjgsNTQuMTA4IDE0My42ODIsNTMuMjg1IDE0Mi41NDQsNTIuNjI4IEw5Ni4wMjcsMjUuNzcxIEwxMi43MTQsNzMuODcxIEwxMi43MTQsNzMuODcxIFoiIGlkPSJGaWxsLTMiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ4LjMyNyw1OC40NzEgQzE0OC4xNDUsNTguNDggMTQ3Ljk2Miw1OC40OCAxNDcuNzgxLDU4LjQ3MiBDMTQ1Ljg4Nyw1OC4zODkgMTQ0LjQ3OSw1Ny40MzQgMTQ0LjYzNiw1Ni4zNCBDMTQ0LjY4OSw1NS45NjcgMTQ0LjY2NCw1NS41OTcgMTQ0LjU2NCw1NS4yMzUgTDYzLjQ2MSwxMDIuMDU3IEM2NC4wODksMTAyLjExNSA2NC43MzMsMTAyLjEzIDY1LjM3OSwxMDIuMDk5IEM2NS41NjEsMTAyLjA5IDY1Ljc0MywxMDIuMDkgNjUuOTI1LDEwMi4wOTggQzY3LjgxOSwxMDIuMTgxIDY5LjIyNywxMDMuMTM2IDY5LjA3LDEwNC4yMyBMMTQ4LjMyNyw1OC40NzEiIGlkPSJGaWxsLTQiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNjkuMDcsMTA0LjM0NyBDNjkuMDQ4LDEwNC4zNDcgNjkuMDI1LDEwNC4zNCA2OS4wMDUsMTA0LjMyNyBDNjguOTY4LDEwNC4zMDEgNjguOTQ4LDEwNC4yNTcgNjguOTU1LDEwNC4yMTMgQzY5LDEwMy44OTYgNjguODk4LDEwMy41NzYgNjguNjU4LDEwMy4yODggQzY4LjE1MywxMDIuNjc4IDY3LjEwMywxMDIuMjY2IDY1LjkyLDEwMi4yMTQgQzY1Ljc0MiwxMDIuMjA2IDY1LjU2MywxMDIuMjA3IDY1LjM4NSwxMDIuMjE1IEM2NC43NDIsMTAyLjI0NiA2NC4wODcsMTAyLjIzMiA2My40NSwxMDIuMTc0IEM2My4zOTksMTAyLjE2OSA2My4zNTgsMTAyLjEzMiA2My4zNDcsMTAyLjA4MiBDNjMuMzM2LDEwMi4wMzMgNjMuMzU4LDEwMS45ODEgNjMuNDAyLDEwMS45NTYgTDE0NC41MDYsNTUuMTM0IEMxNDQuNTM3LDU1LjExNiAxNDQuNTc1LDU1LjExMyAxNDQuNjA5LDU1LjEyNyBDMTQ0LjY0Miw1NS4xNDEgMTQ0LjY2OCw1NS4xNyAxNDQuNjc3LDU1LjIwNCBDMTQ0Ljc4MSw1NS41ODUgMTQ0LjgwNiw1NS45NzIgMTQ0Ljc1MSw1Ni4zNTcgQzE0NC43MDYsNTYuNjczIDE0NC44MDgsNTYuOTk0IDE0NS4wNDcsNTcuMjgyIEMxNDUuNTUzLDU3Ljg5MiAxNDYuNjAyLDU4LjMwMyAxNDcuNzg2LDU4LjM1NSBDMTQ3Ljk2NCw1OC4zNjMgMTQ4LjE0Myw1OC4zNjMgMTQ4LjMyMSw1OC4zNTQgQzE0OC4zNzcsNTguMzUyIDE0OC40MjQsNTguMzg3IDE0OC40MzksNTguNDM4IEMxNDguNDU0LDU4LjQ5IDE0OC40MzIsNTguNTQ1IDE0OC4zODUsNTguNTcyIEw2OS4xMjksMTA0LjMzMSBDNjkuMTExLDEwNC4zNDIgNjkuMDksMTA0LjM0NyA2OS4wNywxMDQuMzQ3IEw2OS4wNywxMDQuMzQ3IFogTTY1LjY2NSwxMDEuOTc1IEM2NS43NTQsMTAxLjk3NSA2NS44NDIsMTAxLjk3NyA2NS45MywxMDEuOTgxIEM2Ny4xOTYsMTAyLjAzNyA2OC4yODMsMTAyLjQ2OSA2OC44MzgsMTAzLjEzOSBDNjkuMDY1LDEwMy40MTMgNjkuMTg4LDEwMy43MTQgNjkuMTk4LDEwNC4wMjEgTDE0Ny44ODMsNTguNTkyIEMxNDcuODQ3LDU4LjU5MiAxNDcuODExLDU4LjU5MSAxNDcuNzc2LDU4LjU4OSBDMTQ2LjUwOSw1OC41MzMgMTQ1LjQyMiw1OC4xIDE0NC44NjcsNTcuNDMxIEMxNDQuNTg1LDU3LjA5MSAxNDQuNDY1LDU2LjcwNyAxNDQuNTIsNTYuMzI0IEMxNDQuNTYzLDU2LjAyMSAxNDQuNTUyLDU1LjcxNiAxNDQuNDg4LDU1LjQxNCBMNjMuODQ2LDEwMS45NyBDNjQuMzUzLDEwMi4wMDIgNjQuODY3LDEwMi4wMDYgNjUuMzc0LDEwMS45ODIgQzY1LjQ3MSwxMDEuOTc3IDY1LjU2OCwxMDEuOTc1IDY1LjY2NSwxMDEuOTc1IEw2NS42NjUsMTAxLjk3NSBaIiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTIuMjA4LDU1LjEzNCBDMS4yMDcsNTMuMzA3IDEuOTY3LDUwLjkxNyAzLjkwNiw0OS43OTcgTDU5LjkxNywxNy40NTMgQzYxLjg1NiwxNi4zMzMgNjQuMjQxLDE2LjkwNyA2NS4yNDMsMTguNzM0IEw2NS40NzUsMTkuMTQ0IEM2NS44NzIsMTkuODgyIDY2LjM2OCwyMC41NiA2Ni45NDUsMjEuMTY1IEw2Ny4yMjMsMjEuNDM1IEM3MC41NDgsMjQuNjQ5IDc1LjgwNiwyNS4xNTEgODAuMTExLDIyLjY2NSBMODcuNDMsMTguNDQ1IEM4OS4zNywxNy4zMjYgOTEuNzU0LDE3Ljg5OSA5Mi43NTUsMTkuNzI3IEw5Ni4wMDUsMjUuNjU1IEwxMi40ODYsNzMuODg0IEwyLjIwOCw1NS4xMzQgWiIgaWQ9IkZpbGwtNiIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMi40ODYsNzQuMDAxIEMxMi40NzYsNzQuMDAxIDEyLjQ2NSw3My45OTkgMTIuNDU1LDczLjk5NiBDMTIuNDI0LDczLjk4OCAxMi4zOTksNzMuOTY3IDEyLjM4NCw3My45NCBMMi4xMDYsNTUuMTkgQzEuMDc1LDUzLjMxIDEuODU3LDUwLjg0NSAzLjg0OCw0OS42OTYgTDU5Ljg1OCwxNy4zNTIgQzYwLjUyNSwxNi45NjcgNjEuMjcxLDE2Ljc2NCA2Mi4wMTYsMTYuNzY0IEM2My40MzEsMTYuNzY0IDY0LjY2NiwxNy40NjYgNjUuMzI3LDE4LjY0NiBDNjUuMzM3LDE4LjY1NCA2NS4zNDUsMTguNjYzIDY1LjM1MSwxOC42NzQgTDY1LjU3OCwxOS4wODggQzY1LjU4NCwxOS4xIDY1LjU4OSwxOS4xMTIgNjUuNTkxLDE5LjEyNiBDNjUuOTg1LDE5LjgzOCA2Ni40NjksMjAuNDk3IDY3LjAzLDIxLjA4NSBMNjcuMzA1LDIxLjM1MSBDNjkuMTUxLDIzLjEzNyA3MS42NDksMjQuMTIgNzQuMzM2LDI0LjEyIEM3Ni4zMTMsMjQuMTIgNzguMjksMjMuNTgyIDgwLjA1MywyMi41NjMgQzgwLjA2NCwyMi41NTcgODAuMDc2LDIyLjU1MyA4MC4wODgsMjIuNTUgTDg3LjM3MiwxOC4zNDQgQzg4LjAzOCwxNy45NTkgODguNzg0LDE3Ljc1NiA4OS41MjksMTcuNzU2IEM5MC45NTYsMTcuNzU2IDkyLjIwMSwxOC40NzIgOTIuODU4LDE5LjY3IEw5Ni4xMDcsMjUuNTk5IEM5Ni4xMzgsMjUuNjU0IDk2LjExOCwyNS43MjQgOTYuMDYzLDI1Ljc1NiBMMTIuNTQ1LDczLjk4NSBDMTIuNTI2LDczLjk5NiAxMi41MDYsNzQuMDAxIDEyLjQ4Niw3NC4wMDEgTDEyLjQ4Niw3NC4wMDEgWiBNNjIuMDE2LDE2Ljk5NyBDNjEuMzEyLDE2Ljk5NyA2MC42MDYsMTcuMTkgNTkuOTc1LDE3LjU1NCBMMy45NjUsNDkuODk5IEMyLjA4Myw1MC45ODUgMS4zNDEsNTMuMzA4IDIuMzEsNTUuMDc4IEwxMi41MzEsNzMuNzIzIEw5NS44NDgsMjUuNjExIEw5Mi42NTMsMTkuNzgyIEM5Mi4wMzgsMTguNjYgOTAuODcsMTcuOTkgODkuNTI5LDE3Ljk5IEM4OC44MjUsMTcuOTkgODguMTE5LDE4LjE4MiA4Ny40ODksMTguNTQ3IEw4MC4xNzIsMjIuNzcyIEM4MC4xNjEsMjIuNzc4IDgwLjE0OSwyMi43ODIgODAuMTM3LDIyLjc4NSBDNzguMzQ2LDIzLjgxMSA3Ni4zNDEsMjQuMzU0IDc0LjMzNiwyNC4zNTQgQzcxLjU4OCwyNC4zNTQgNjkuMDMzLDIzLjM0NyA2Ny4xNDIsMjEuNTE5IEw2Ni44NjQsMjEuMjQ5IEM2Ni4yNzcsMjAuNjM0IDY1Ljc3NCwxOS45NDcgNjUuMzY3LDE5LjIwMyBDNjUuMzYsMTkuMTkyIDY1LjM1NiwxOS4xNzkgNjUuMzU0LDE5LjE2NiBMNjUuMTYzLDE4LjgxOSBDNjUuMTU0LDE4LjgxMSA2NS4xNDYsMTguODAxIDY1LjE0LDE4Ljc5IEM2NC41MjUsMTcuNjY3IDYzLjM1NywxNi45OTcgNjIuMDE2LDE2Ljk5NyBMNjIuMDE2LDE2Ljk5NyBaIiBpZD0iRmlsbC03IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTQyLjQzNCw0OC44MDggTDQyLjQzNCw0OC44MDggQzM5LjkyNCw0OC44MDcgMzcuNzM3LDQ3LjU1IDM2LjU4Miw0NS40NDMgQzM0Ljc3MSw0Mi4xMzkgMzYuMTQ0LDM3LjgwOSAzOS42NDEsMzUuNzg5IEw1MS45MzIsMjguNjkxIEM1My4xMDMsMjguMDE1IDU0LjQxMywyNy42NTggNTUuNzIxLDI3LjY1OCBDNTguMjMxLDI3LjY1OCA2MC40MTgsMjguOTE2IDYxLjU3MywzMS4wMjMgQzYzLjM4NCwzNC4zMjcgNjIuMDEyLDM4LjY1NyA1OC41MTQsNDAuNjc3IEw0Ni4yMjMsNDcuNzc1IEM0NS4wNTMsNDguNDUgNDMuNzQyLDQ4LjgwOCA0Mi40MzQsNDguODA4IEw0Mi40MzQsNDguODA4IFogTTU1LjcyMSwyOC4xMjUgQzU0LjQ5NSwyOC4xMjUgNTMuMjY1LDI4LjQ2MSA1Mi4xNjYsMjkuMDk2IEwzOS44NzUsMzYuMTk0IEMzNi41OTYsMzguMDg3IDM1LjMwMiw0Mi4xMzYgMzYuOTkyLDQ1LjIxOCBDMzguMDYzLDQ3LjE3MyA0MC4wOTgsNDguMzQgNDIuNDM0LDQ4LjM0IEM0My42NjEsNDguMzQgNDQuODksNDguMDA1IDQ1Ljk5LDQ3LjM3IEw1OC4yODEsNDAuMjcyIEM2MS41NiwzOC4zNzkgNjIuODUzLDM0LjMzIDYxLjE2NCwzMS4yNDggQzYwLjA5MiwyOS4yOTMgNTguMDU4LDI4LjEyNSA1NS43MjEsMjguMTI1IEw1NS43MjEsMjguMTI1IFoiIGlkPSJGaWxsLTgiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjU4OCwyLjQwNyBDMTQ5LjU4OCwyLjQwNyAxNTUuNzY4LDUuOTc1IDE1Ni4zMjUsNi4yOTcgTDE1Ni4zMjUsNy4xODQgQzE1Ni4zMjUsNy4zNiAxNTYuMzM4LDcuNTQ0IDE1Ni4zNjIsNy43MzMgQzE1Ni4zNzMsNy44MTQgMTU2LjM4Miw3Ljg5NCAxNTYuMzksNy45NzUgQzE1Ni41Myw5LjM5IDE1Ny4zNjMsMTAuOTczIDE1OC40OTUsMTEuOTc0IEwxNjUuODkxLDE4LjUxOSBDMTY2LjA2OCwxOC42NzUgMTY2LjI0OSwxOC44MTQgMTY2LjQzMiwxOC45MzQgQzE2OC4wMTEsMTkuOTc0IDE2OS4zODIsMTkuNCAxNjkuNDk0LDE3LjY1MiBDMTY5LjU0MywxNi44NjggMTY5LjU1MSwxNi4wNTcgMTY5LjUxNywxNS4yMjMgTDE2OS41MTQsMTUuMDYzIEwxNjkuNTE0LDEzLjkxMiBDMTcwLjc4LDE0LjY0MiAxOTUuNTAxLDI4LjkxNSAxOTUuNTAxLDI4LjkxNSBMMTk1LjUwMSw4Mi45MTUgQzE5NS41MDEsODQuMDA1IDE5NC43MzEsODQuNDQ1IDE5My43ODEsODMuODk3IEwxNTEuMzA4LDU5LjM3NCBDMTUwLjM1OCw1OC44MjYgMTQ5LjU4OCw1Ny40OTcgMTQ5LjU4OCw1Ni40MDggTDE0OS41ODgsMjIuMzc1IiBpZD0iRmlsbC05IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE5NC41NTMsODQuMjUgQzE5NC4yOTYsODQuMjUgMTk0LjAxMyw4NC4xNjUgMTkzLjcyMiw4My45OTcgTDE1MS4yNSw1OS40NzYgQzE1MC4yNjksNTguOTA5IDE0OS40NzEsNTcuNTMzIDE0OS40NzEsNTYuNDA4IEwxNDkuNDcxLDIyLjM3NSBMMTQ5LjcwNSwyMi4zNzUgTDE0OS43MDUsNTYuNDA4IEMxNDkuNzA1LDU3LjQ1OSAxNTAuNDUsNTguNzQ0IDE1MS4zNjYsNTkuMjc0IEwxOTMuODM5LDgzLjc5NSBDMTk0LjI2Myw4NC4wNCAxOTQuNjU1LDg0LjA4MyAxOTQuOTQyLDgzLjkxNyBDMTk1LjIyNyw4My43NTMgMTk1LjM4NCw4My4zOTcgMTk1LjM4NCw4Mi45MTUgTDE5NS4zODQsMjguOTgyIEMxOTQuMTAyLDI4LjI0MiAxNzIuMTA0LDE1LjU0MiAxNjkuNjMxLDE0LjExNCBMMTY5LjYzNCwxNS4yMiBDMTY5LjY2OCwxNi4wNTIgMTY5LjY2LDE2Ljg3NCAxNjkuNjEsMTcuNjU5IEMxNjkuNTU2LDE4LjUwMyAxNjkuMjE0LDE5LjEyMyAxNjguNjQ3LDE5LjQwNSBDMTY4LjAyOCwxOS43MTQgMTY3LjE5NywxOS41NzggMTY2LjM2NywxOS4wMzIgQzE2Ni4xODEsMTguOTA5IDE2NS45OTUsMTguNzY2IDE2NS44MTQsMTguNjA2IEwxNTguNDE3LDEyLjA2MiBDMTU3LjI1OSwxMS4wMzYgMTU2LjQxOCw5LjQzNyAxNTYuMjc0LDcuOTg2IEMxNTYuMjY2LDcuOTA3IDE1Ni4yNTcsNy44MjcgMTU2LjI0Nyw3Ljc0OCBDMTU2LjIyMSw3LjU1NSAxNTYuMjA5LDcuMzY1IDE1Ni4yMDksNy4xODQgTDE1Ni4yMDksNi4zNjQgQzE1NS4zNzUsNS44ODMgMTQ5LjUyOSwyLjUwOCAxNDkuNTI5LDIuNTA4IEwxNDkuNjQ2LDIuMzA2IEMxNDkuNjQ2LDIuMzA2IDE1NS44MjcsNS44NzQgMTU2LjM4NCw2LjE5NiBMMTU2LjQ0Miw2LjIzIEwxNTYuNDQyLDcuMTg0IEMxNTYuNDQyLDcuMzU1IDE1Ni40NTQsNy41MzUgMTU2LjQ3OCw3LjcxNyBDMTU2LjQ4OSw3LjggMTU2LjQ5OSw3Ljg4MiAxNTYuNTA3LDcuOTYzIEMxNTYuNjQ1LDkuMzU4IDE1Ny40NTUsMTAuODk4IDE1OC41NzIsMTEuODg2IEwxNjUuOTY5LDE4LjQzMSBDMTY2LjE0MiwxOC41ODQgMTY2LjMxOSwxOC43MiAxNjYuNDk2LDE4LjgzNyBDMTY3LjI1NCwxOS4zMzYgMTY4LDE5LjQ2NyAxNjguNTQzLDE5LjE5NiBDMTY5LjAzMywxOC45NTMgMTY5LjMyOSwxOC40MDEgMTY5LjM3NywxNy42NDUgQzE2OS40MjcsMTYuODY3IDE2OS40MzQsMTYuMDU0IDE2OS40MDEsMTUuMjI4IEwxNjkuMzk3LDE1LjA2NSBMMTY5LjM5NywxMy43MSBMMTY5LjU3MiwxMy44MSBDMTcwLjgzOSwxNC41NDEgMTk1LjU1OSwyOC44MTQgMTk1LjU1OSwyOC44MTQgTDE5NS42MTgsMjguODQ3IEwxOTUuNjE4LDgyLjkxNSBDMTk1LjYxOCw4My40ODQgMTk1LjQyLDgzLjkxMSAxOTUuMDU5LDg0LjExOSBDMTk0LjkwOCw4NC4yMDYgMTk0LjczNyw4NC4yNSAxOTQuNTUzLDg0LjI1IiBpZD0iRmlsbC0xMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDUuNjg1LDU2LjE2MSBMMTY5LjgsNzAuMDgzIEwxNDMuODIyLDg1LjA4MSBMMTQyLjM2LDg0Ljc3NCBDMTM1LjgyNiw4Mi42MDQgMTI4LjczMiw4MS4wNDYgMTIxLjM0MSw4MC4xNTggQzExNi45NzYsNzkuNjM0IDExMi42NzgsODEuMjU0IDExMS43NDMsODMuNzc4IEMxMTEuNTA2LDg0LjQxNCAxMTEuNTAzLDg1LjA3MSAxMTEuNzMyLDg1LjcwNiBDMTEzLjI3LDg5Ljk3MyAxMTUuOTY4LDk0LjA2OSAxMTkuNzI3LDk3Ljg0MSBMMTIwLjI1OSw5OC42ODYgQzEyMC4yNiw5OC42ODUgOTQuMjgyLDExMy42ODMgOTQuMjgyLDExMy42ODMgTDcwLjE2Nyw5OS43NjEgTDE0NS42ODUsNTYuMTYxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05NC4yODIsMTEzLjgxOCBMOTQuMjIzLDExMy43ODUgTDY5LjkzMyw5OS43NjEgTDcwLjEwOCw5OS42NiBMMTQ1LjY4NSw1Ni4wMjYgTDE0NS43NDMsNTYuMDU5IEwxNzAuMDMzLDcwLjA4MyBMMTQzLjg0Miw4NS4yMDUgTDE0My43OTcsODUuMTk1IEMxNDMuNzcyLDg1LjE5IDE0Mi4zMzYsODQuODg4IDE0Mi4zMzYsODQuODg4IEMxMzUuNzg3LDgyLjcxNCAxMjguNzIzLDgxLjE2MyAxMjEuMzI3LDgwLjI3NCBDMTIwLjc4OCw4MC4yMDkgMTIwLjIzNiw4MC4xNzcgMTE5LjY4OSw4MC4xNzcgQzExNS45MzEsODAuMTc3IDExMi42MzUsODEuNzA4IDExMS44NTIsODMuODE5IEMxMTEuNjI0LDg0LjQzMiAxMTEuNjIxLDg1LjA1MyAxMTEuODQyLDg1LjY2NyBDMTEzLjM3Nyw4OS45MjUgMTE2LjA1OCw5My45OTMgMTE5LjgxLDk3Ljc1OCBMMTE5LjgyNiw5Ny43NzkgTDEyMC4zNTIsOTguNjE0IEMxMjAuMzU0LDk4LjYxNyAxMjAuMzU2LDk4LjYyIDEyMC4zNTgsOTguNjI0IEwxMjAuNDIyLDk4LjcyNiBMMTIwLjMxNyw5OC43ODcgQzEyMC4yNjQsOTguODE4IDk0LjU5OSwxMTMuNjM1IDk0LjM0LDExMy43ODUgTDk0LjI4MiwxMTMuODE4IEw5NC4yODIsMTEzLjgxOCBaIE03MC40MDEsOTkuNzYxIEw5NC4yODIsMTEzLjU0OSBMMTE5LjA4NCw5OS4yMjkgQzExOS42Myw5OC45MTQgMTE5LjkzLDk4Ljc0IDEyMC4xMDEsOTguNjU0IEwxMTkuNjM1LDk3LjkxNCBDMTE1Ljg2NCw5NC4xMjcgMTEzLjE2OCw5MC4wMzMgMTExLjYyMiw4NS43NDYgQzExMS4zODIsODUuMDc5IDExMS4zODYsODQuNDA0IDExMS42MzMsODMuNzM4IEMxMTIuNDQ4LDgxLjUzOSAxMTUuODM2LDc5Ljk0MyAxMTkuNjg5LDc5Ljk0MyBDMTIwLjI0Niw3OS45NDMgMTIwLjgwNiw3OS45NzYgMTIxLjM1NSw4MC4wNDIgQzEyOC43NjcsODAuOTMzIDEzNS44NDYsODIuNDg3IDE0Mi4zOTYsODQuNjYzIEMxNDMuMjMyLDg0LjgzOCAxNDMuNjExLDg0LjkxNyAxNDMuNzg2LDg0Ljk2NyBMMTY5LjU2Niw3MC4wODMgTDE0NS42ODUsNTYuMjk1IEw3MC40MDEsOTkuNzYxIEw3MC40MDEsOTkuNzYxIFoiIGlkPSJGaWxsLTEyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2Ny4yMywxOC45NzkgTDE2Ny4yMyw2OS44NSBMMTM5LjkwOSw4NS42MjMgTDEzMy40NDgsNzEuNDU2IEMxMzIuNTM4LDY5LjQ2IDEzMC4wMiw2OS43MTggMTI3LjgyNCw3Mi4wMyBDMTI2Ljc2OSw3My4xNCAxMjUuOTMxLDc0LjU4NSAxMjUuNDk0LDc2LjA0OCBMMTE5LjAzNCw5Ny42NzYgTDkxLjcxMiwxMTMuNDUgTDkxLjcxMiw2Mi41NzkgTDE2Ny4yMywxOC45NzkiIGlkPSJGaWxsLTEzIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTkxLjcxMiwxMTMuNTY3IEM5MS42OTIsMTEzLjU2NyA5MS42NzIsMTEzLjU2MSA5MS42NTMsMTEzLjU1MSBDOTEuNjE4LDExMy41MyA5MS41OTUsMTEzLjQ5MiA5MS41OTUsMTEzLjQ1IEw5MS41OTUsNjIuNTc5IEM5MS41OTUsNjIuNTM3IDkxLjYxOCw2Mi40OTkgOTEuNjUzLDYyLjQ3OCBMMTY3LjE3MiwxOC44NzggQzE2Ny4yMDgsMTguODU3IDE2Ny4yNTIsMTguODU3IDE2Ny4yODgsMTguODc4IEMxNjcuMzI0LDE4Ljg5OSAxNjcuMzQ3LDE4LjkzNyAxNjcuMzQ3LDE4Ljk3OSBMMTY3LjM0Nyw2OS44NSBDMTY3LjM0Nyw2OS44OTEgMTY3LjMyNCw2OS45MyAxNjcuMjg4LDY5Ljk1IEwxMzkuOTY3LDg1LjcyNSBDMTM5LjkzOSw4NS43NDEgMTM5LjkwNSw4NS43NDUgMTM5Ljg3Myw4NS43MzUgQzEzOS44NDIsODUuNzI1IDEzOS44MTYsODUuNzAyIDEzOS44MDIsODUuNjcyIEwxMzMuMzQyLDcxLjUwNCBDMTMyLjk2Nyw3MC42ODIgMTMyLjI4LDcwLjIyOSAxMzEuNDA4LDcwLjIyOSBDMTMwLjMxOSw3MC4yMjkgMTI5LjA0NCw3MC45MTUgMTI3LjkwOCw3Mi4xMSBDMTI2Ljg3NCw3My4yIDEyNi4wMzQsNzQuNjQ3IDEyNS42MDYsNzYuMDgyIEwxMTkuMTQ2LDk3LjcwOSBDMTE5LjEzNyw5Ny43MzggMTE5LjExOCw5Ny43NjIgMTE5LjA5Miw5Ny43NzcgTDkxLjc3LDExMy41NTEgQzkxLjc1MiwxMTMuNTYxIDkxLjczMiwxMTMuNTY3IDkxLjcxMiwxMTMuNTY3IEw5MS43MTIsMTEzLjU2NyBaIE05MS44MjksNjIuNjQ3IEw5MS44MjksMTEzLjI0OCBMMTE4LjkzNSw5Ny41OTggTDEyNS4zODIsNzYuMDE1IEMxMjUuODI3LDc0LjUyNSAxMjYuNjY0LDczLjA4MSAxMjcuNzM5LDcxLjk1IEMxMjguOTE5LDcwLjcwOCAxMzAuMjU2LDY5Ljk5NiAxMzEuNDA4LDY5Ljk5NiBDMTMyLjM3Nyw2OS45OTYgMTMzLjEzOSw3MC40OTcgMTMzLjU1NCw3MS40MDcgTDEzOS45NjEsODUuNDU4IEwxNjcuMTEzLDY5Ljc4MiBMMTY3LjExMywxOS4xODEgTDkxLjgyOSw2Mi42NDcgTDkxLjgyOSw2Mi42NDcgWiIgaWQ9IkZpbGwtMTQiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTY4LjU0MywxOS4yMTMgTDE2OC41NDMsNzAuMDgzIEwxNDEuMjIxLDg1Ljg1NyBMMTM0Ljc2MSw3MS42ODkgQzEzMy44NTEsNjkuNjk0IDEzMS4zMzMsNjkuOTUxIDEyOS4xMzcsNzIuMjYzIEMxMjguMDgyLDczLjM3NCAxMjcuMjQ0LDc0LjgxOSAxMjYuODA3LDc2LjI4MiBMMTIwLjM0Niw5Ny45MDkgTDkzLjAyNSwxMTMuNjgzIEw5My4wMjUsNjIuODEzIEwxNjguNTQzLDE5LjIxMyIgaWQ9IkZpbGwtMTUiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTMuMDI1LDExMy44IEM5My4wMDUsMTEzLjggOTIuOTg0LDExMy43OTUgOTIuOTY2LDExMy43ODUgQzkyLjkzMSwxMTMuNzY0IDkyLjkwOCwxMTMuNzI1IDkyLjkwOCwxMTMuNjg0IEw5Mi45MDgsNjIuODEzIEM5Mi45MDgsNjIuNzcxIDkyLjkzMSw2Mi43MzMgOTIuOTY2LDYyLjcxMiBMMTY4LjQ4NCwxOS4xMTIgQzE2OC41MiwxOS4wOSAxNjguNTY1LDE5LjA5IDE2OC42MDEsMTkuMTEyIEMxNjguNjM3LDE5LjEzMiAxNjguNjYsMTkuMTcxIDE2OC42NiwxOS4yMTIgTDE2OC42Niw3MC4wODMgQzE2OC42Niw3MC4xMjUgMTY4LjYzNyw3MC4xNjQgMTY4LjYwMSw3MC4xODQgTDE0MS4yOCw4NS45NTggQzE0MS4yNTEsODUuOTc1IDE0MS4yMTcsODUuOTc5IDE0MS4xODYsODUuOTY4IEMxNDEuMTU0LDg1Ljk1OCAxNDEuMTI5LDg1LjkzNiAxNDEuMTE1LDg1LjkwNiBMMTM0LjY1NSw3MS43MzggQzEzNC4yOCw3MC45MTUgMTMzLjU5Myw3MC40NjMgMTMyLjcyLDcwLjQ2MyBDMTMxLjYzMiw3MC40NjMgMTMwLjM1Nyw3MS4xNDggMTI5LjIyMSw3Mi4zNDQgQzEyOC4xODYsNzMuNDMzIDEyNy4zNDcsNzQuODgxIDEyNi45MTksNzYuMzE1IEwxMjAuNDU4LDk3Ljk0MyBDMTIwLjQ1LDk3Ljk3MiAxMjAuNDMxLDk3Ljk5NiAxMjAuNDA1LDk4LjAxIEw5My4wODMsMTEzLjc4NSBDOTMuMDY1LDExMy43OTUgOTMuMDQ1LDExMy44IDkzLjAyNSwxMTMuOCBMOTMuMDI1LDExMy44IFogTTkzLjE0Miw2Mi44ODEgTDkzLjE0MiwxMTMuNDgxIEwxMjAuMjQ4LDk3LjgzMiBMMTI2LjY5NSw3Ni4yNDggQzEyNy4xNCw3NC43NTggMTI3Ljk3Nyw3My4zMTUgMTI5LjA1Miw3Mi4xODMgQzEzMC4yMzEsNzAuOTQyIDEzMS41NjgsNzAuMjI5IDEzMi43Miw3MC4yMjkgQzEzMy42ODksNzAuMjI5IDEzNC40NTIsNzAuNzMxIDEzNC44NjcsNzEuNjQxIEwxNDEuMjc0LDg1LjY5MiBMMTY4LjQyNiw3MC4wMTYgTDE2OC40MjYsMTkuNDE1IEw5My4xNDIsNjIuODgxIEw5My4xNDIsNjIuODgxIFoiIGlkPSJGaWxsLTE2IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS44LDcwLjA4MyBMMTQyLjQ3OCw4NS44NTcgTDEzNi4wMTgsNzEuNjg5IEMxMzUuMTA4LDY5LjY5NCAxMzIuNTksNjkuOTUxIDEzMC4zOTMsNzIuMjYzIEMxMjkuMzM5LDczLjM3NCAxMjguNSw3NC44MTkgMTI4LjA2NCw3Ni4yODIgTDEyMS42MDMsOTcuOTA5IEw5NC4yODIsMTEzLjY4MyBMOTQuMjgyLDYyLjgxMyBMMTY5LjgsMTkuMjEzIEwxNjkuOCw3MC4wODMgWiIgaWQ9IkZpbGwtMTciIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTQuMjgyLDExMy45MTcgQzk0LjI0MSwxMTMuOTE3IDk0LjIwMSwxMTMuOTA3IDk0LjE2NSwxMTMuODg2IEM5NC4wOTMsMTEzLjg0NSA5NC4wNDgsMTEzLjc2NyA5NC4wNDgsMTEzLjY4NCBMOTQuMDQ4LDYyLjgxMyBDOTQuMDQ4LDYyLjczIDk0LjA5Myw2Mi42NTIgOTQuMTY1LDYyLjYxMSBMMTY5LjY4MywxOS4wMSBDMTY5Ljc1NSwxOC45NjkgMTY5Ljg0NCwxOC45NjkgMTY5LjkxNywxOS4wMSBDMTY5Ljk4OSwxOS4wNTIgMTcwLjAzMywxOS4xMjkgMTcwLjAzMywxOS4yMTIgTDE3MC4wMzMsNzAuMDgzIEMxNzAuMDMzLDcwLjE2NiAxNjkuOTg5LDcwLjI0NCAxNjkuOTE3LDcwLjI4NSBMMTQyLjU5NSw4Ni4wNiBDMTQyLjUzOCw4Ni4wOTIgMTQyLjQ2OSw4Ni4xIDE0Mi40MDcsODYuMDggQzE0Mi4zNDQsODYuMDYgMTQyLjI5Myw4Ni4wMTQgMTQyLjI2Niw4NS45NTQgTDEzNS44MDUsNzEuNzg2IEMxMzUuNDQ1LDcwLjk5NyAxMzQuODEzLDcwLjU4IDEzMy45NzcsNzAuNTggQzEzMi45MjEsNzAuNTggMTMxLjY3Niw3MS4yNTIgMTMwLjU2Miw3Mi40MjQgQzEyOS41NCw3My41MDEgMTI4LjcxMSw3NC45MzEgMTI4LjI4Nyw3Ni4zNDggTDEyMS44MjcsOTcuOTc2IEMxMjEuODEsOTguMDM0IDEyMS43NzEsOTguMDgyIDEyMS43Miw5OC4xMTIgTDk0LjM5OCwxMTMuODg2IEM5NC4zNjIsMTEzLjkwNyA5NC4zMjIsMTEzLjkxNyA5NC4yODIsMTEzLjkxNyBMOTQuMjgyLDExMy45MTcgWiBNOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDExMy4yNzkgTDEyMS40MDYsOTcuNzU0IEwxMjcuODQsNzYuMjE1IEMxMjguMjksNzQuNzA4IDEyOS4xMzcsNzMuMjQ3IDEzMC4yMjQsNzIuMTAzIEMxMzEuNDI1LDcwLjgzOCAxMzIuNzkzLDcwLjExMiAxMzMuOTc3LDcwLjExMiBDMTM0Ljk5NSw3MC4xMTIgMTM1Ljc5NSw3MC42MzggMTM2LjIzLDcxLjU5MiBMMTQyLjU4NCw4NS41MjYgTDE2OS41NjYsNjkuOTQ4IEwxNjkuNTY2LDE5LjYxNyBMOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDYyLjk0OCBaIiBpZD0iRmlsbC0xOCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMDkuODk0LDkyLjk0MyBMMTA5Ljg5NCw5Mi45NDMgQzEwOC4xMiw5Mi45NDMgMTA2LjY1Myw5Mi4yMTggMTA1LjY1LDkwLjgyMyBDMTA1LjU4Myw5MC43MzEgMTA1LjU5Myw5MC42MSAxMDUuNjczLDkwLjUyOSBDMTA1Ljc1Myw5MC40NDggMTA1Ljg4LDkwLjQ0IDEwNS45NzQsOTAuNTA2IEMxMDYuNzU0LDkxLjA1MyAxMDcuNjc5LDkxLjMzMyAxMDguNzI0LDkxLjMzMyBDMTEwLjA0Nyw5MS4zMzMgMTExLjQ3OCw5MC44OTQgMTEyLjk4LDkwLjAyNyBDMTE4LjI5MSw4Ni45NiAxMjIuNjExLDc5LjUwOSAxMjIuNjExLDczLjQxNiBDMTIyLjYxMSw3MS40ODkgMTIyLjE2OSw2OS44NTYgMTIxLjMzMyw2OC42OTIgQzEyMS4yNjYsNjguNiAxMjEuMjc2LDY4LjQ3MyAxMjEuMzU2LDY4LjM5MiBDMTIxLjQzNiw2OC4zMTEgMTIxLjU2Myw2OC4yOTkgMTIxLjY1Niw2OC4zNjUgQzEyMy4zMjcsNjkuNTM3IDEyNC4yNDcsNzEuNzQ2IDEyNC4yNDcsNzQuNTg0IEMxMjQuMjQ3LDgwLjgyNiAxMTkuODIxLDg4LjQ0NyAxMTQuMzgyLDkxLjU4NyBDMTEyLjgwOCw5Mi40OTUgMTExLjI5OCw5Mi45NDMgMTA5Ljg5NCw5Mi45NDMgTDEwOS44OTQsOTIuOTQzIFogTTEwNi45MjUsOTEuNDAxIEMxMDcuNzM4LDkyLjA1MiAxMDguNzQ1LDkyLjI3OCAxMDkuODkzLDkyLjI3OCBMMTA5Ljg5NCw5Mi4yNzggQzExMS4yMTUsOTIuMjc4IDExMi42NDcsOTEuOTUxIDExNC4xNDgsOTEuMDg0IEMxMTkuNDU5LDg4LjAxNyAxMjMuNzgsODAuNjIxIDEyMy43OCw3NC41MjggQzEyMy43OCw3Mi41NDkgMTIzLjMxNyw3MC45MjkgMTIyLjQ1NCw2OS43NjcgQzEyMi44NjUsNzAuODAyIDEyMy4wNzksNzIuMDQyIDEyMy4wNzksNzMuNDAyIEMxMjMuMDc5LDc5LjY0NSAxMTguNjUzLDg3LjI4NSAxMTMuMjE0LDkwLjQyNSBDMTExLjY0LDkxLjMzNCAxMTAuMTMsOTEuNzQyIDEwOC43MjQsOTEuNzQyIEMxMDguMDgzLDkxLjc0MiAxMDcuNDgxLDkxLjU5MyAxMDYuOTI1LDkxLjQwMSBMMTA2LjkyNSw5MS40MDEgWiIgaWQ9IkZpbGwtMTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjA5Nyw5MC4yMyBDMTE4LjQ4MSw4Ny4xMjIgMTIyLjg0NSw3OS41OTQgMTIyLjg0NSw3My40MTYgQzEyMi44NDUsNzEuMzY1IDEyMi4zNjIsNjkuNzI0IDEyMS41MjIsNjguNTU2IEMxMTkuNzM4LDY3LjMwNCAxMTcuMTQ4LDY3LjM2MiAxMTQuMjY1LDY5LjAyNiBDMTA4Ljg4MSw3Mi4xMzQgMTA0LjUxNyw3OS42NjIgMTA0LjUxNyw4NS44NCBDMTA0LjUxNyw4Ny44OTEgMTA1LDg5LjUzMiAxMDUuODQsOTAuNyBDMTA3LjYyNCw5MS45NTIgMTEwLjIxNCw5MS44OTQgMTEzLjA5Nyw5MC4yMyIgaWQ9IkZpbGwtMjAiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTA4LjcyNCw5MS42MTQgTDEwOC43MjQsOTEuNjE0IEMxMDcuNTgyLDkxLjYxNCAxMDYuNTY2LDkxLjQwMSAxMDUuNzA1LDkwLjc5NyBDMTA1LjY4NCw5MC43ODMgMTA1LjY2NSw5MC44MTEgMTA1LjY1LDkwLjc5IEMxMDQuNzU2LDg5LjU0NiAxMDQuMjgzLDg3Ljg0MiAxMDQuMjgzLDg1LjgxNyBDMTA0LjI4Myw3OS41NzUgMTA4LjcwOSw3MS45NTMgMTE0LjE0OCw2OC44MTIgQzExNS43MjIsNjcuOTA0IDExNy4yMzIsNjcuNDQ5IDExOC42MzgsNjcuNDQ5IEMxMTkuNzgsNjcuNDQ5IDEyMC43OTYsNjcuNzU4IDEyMS42NTYsNjguMzYyIEMxMjEuNjc4LDY4LjM3NyAxMjEuNjk3LDY4LjM5NyAxMjEuNzEyLDY4LjQxOCBDMTIyLjYwNiw2OS42NjIgMTIzLjA3OSw3MS4zOSAxMjMuMDc5LDczLjQxNSBDMTIzLjA3OSw3OS42NTggMTE4LjY1Myw4Ny4xOTggMTEzLjIxNCw5MC4zMzggQzExMS42NCw5MS4yNDcgMTEwLjEzLDkxLjYxNCAxMDguNzI0LDkxLjYxNCBMMTA4LjcyNCw5MS42MTQgWiBNMTA2LjAwNiw5MC41MDUgQzEwNi43OCw5MS4wMzcgMTA3LjY5NCw5MS4yODEgMTA4LjcyNCw5MS4yODEgQzExMC4wNDcsOTEuMjgxIDExMS40NzgsOTAuODY4IDExMi45OCw5MC4wMDEgQzExOC4yOTEsODYuOTM1IDEyMi42MTEsNzkuNDk2IDEyMi42MTEsNzMuNDAzIEMxMjIuNjExLDcxLjQ5NCAxMjIuMTc3LDY5Ljg4IDEyMS4zNTYsNjguNzE4IEMxMjAuNTgyLDY4LjE4NSAxMTkuNjY4LDY3LjkxOSAxMTguNjM4LDY3LjkxOSBDMTE3LjMxNSw2Ny45MTkgMTE1Ljg4Myw2OC4zNiAxMTQuMzgyLDY5LjIyNyBDMTA5LjA3MSw3Mi4yOTMgMTA0Ljc1MSw3OS43MzMgMTA0Ljc1MSw4NS44MjYgQzEwNC43NTEsODcuNzM1IDEwNS4xODUsODkuMzQzIDEwNi4wMDYsOTAuNTA1IEwxMDYuMDA2LDkwLjUwNSBaIiBpZD0iRmlsbC0yMSIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDkuMzE4LDcuMjYyIEwxMzkuMzM0LDE2LjE0IEwxNTUuMjI3LDI3LjE3MSBMMTYwLjgxNiwyMS4wNTkgTDE0OS4zMTgsNy4yNjIiIGlkPSJGaWxsLTIyIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS42NzYsMTMuODQgTDE1OS45MjgsMTkuNDY3IEMxNTYuMjg2LDIxLjU3IDE1MC40LDIxLjU4IDE0Ni43ODEsMTkuNDkxIEMxNDMuMTYxLDE3LjQwMiAxNDMuMTgsMTQuMDAzIDE0Ni44MjIsMTEuOSBMMTU2LjMxNyw2LjI5MiBMMTQ5LjU4OCwyLjQwNyBMNjcuNzUyLDQ5LjQ3OCBMMTEzLjY3NSw3NS45OTIgTDExNi43NTYsNzQuMjEzIEMxMTcuMzg3LDczLjg0OCAxMTcuNjI1LDczLjMxNSAxMTcuMzc0LDcyLjgyMyBDMTE1LjAxNyw2OC4xOTEgMTE0Ljc4MSw2My4yNzcgMTE2LjY5MSw1OC41NjEgQzEyMi4zMjksNDQuNjQxIDE0MS4yLDMzLjc0NiAxNjUuMzA5LDMwLjQ5MSBDMTczLjQ3OCwyOS4zODggMTgxLjk4OSwyOS41MjQgMTkwLjAxMywzMC44ODUgQzE5MC44NjUsMzEuMDMgMTkxLjc4OSwzMC44OTMgMTkyLjQyLDMwLjUyOCBMMTk1LjUwMSwyOC43NSBMMTY5LjY3NiwxMy44NCIgaWQ9IkZpbGwtMjMiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3Ni40NTkgQzExMy41OTQsNzYuNDU5IDExMy41MTQsNzYuNDM4IDExMy40NDIsNzYuMzk3IEw2Ny41MTgsNDkuODgyIEM2Ny4zNzQsNDkuNzk5IDY3LjI4NCw0OS42NDUgNjcuMjg1LDQ5LjQ3OCBDNjcuMjg1LDQ5LjMxMSA2Ny4zNzQsNDkuMTU3IDY3LjUxOSw0OS4wNzMgTDE0OS4zNTUsMi4wMDIgQzE0OS40OTksMS45MTkgMTQ5LjY3NywxLjkxOSAxNDkuODIxLDIuMDAyIEwxNTYuNTUsNS44ODcgQzE1Ni43NzQsNi4wMTcgMTU2Ljg1LDYuMzAyIDE1Ni43MjIsNi41MjYgQzE1Ni41OTIsNi43NDkgMTU2LjMwNyw2LjgyNiAxNTYuMDgzLDYuNjk2IEwxNDkuNTg3LDIuOTQ2IEw2OC42ODcsNDkuNDc5IEwxMTMuNjc1LDc1LjQ1MiBMMTE2LjUyMyw3My44MDggQzExNi43MTUsNzMuNjk3IDExNy4xNDMsNzMuMzk5IDExNi45NTgsNzMuMDM1IEMxMTQuNTQyLDY4LjI4NyAxMTQuMyw2My4yMjEgMTE2LjI1OCw1OC4zODUgQzExOS4wNjQsNTEuNDU4IDEyNS4xNDMsNDUuMTQzIDEzMy44NCw0MC4xMjIgQzE0Mi40OTcsMzUuMTI0IDE1My4zNTgsMzEuNjMzIDE2NS4yNDcsMzAuMDI4IEMxNzMuNDQ1LDI4LjkyMSAxODIuMDM3LDI5LjA1OCAxOTAuMDkxLDMwLjQyNSBDMTkwLjgzLDMwLjU1IDE5MS42NTIsMzAuNDMyIDE5Mi4xODYsMzAuMTI0IEwxOTQuNTY3LDI4Ljc1IEwxNjkuNDQyLDE0LjI0NCBDMTY5LjIxOSwxNC4xMTUgMTY5LjE0MiwxMy44MjkgMTY5LjI3MSwxMy42MDYgQzE2OS40LDEzLjM4MiAxNjkuNjg1LDEzLjMwNiAxNjkuOTA5LDEzLjQzNSBMMTk1LjczNCwyOC4zNDUgQzE5NS44NzksMjguNDI4IDE5NS45NjgsMjguNTgzIDE5NS45NjgsMjguNzUgQzE5NS45NjgsMjguOTE2IDE5NS44NzksMjkuMDcxIDE5NS43MzQsMjkuMTU0IEwxOTIuNjUzLDMwLjkzMyBDMTkxLjkzMiwzMS4zNSAxOTAuODksMzEuNTA4IDE4OS45MzUsMzEuMzQ2IEMxODEuOTcyLDI5Ljk5NSAxNzMuNDc4LDI5Ljg2IDE2NS4zNzIsMzAuOTU0IEMxNTMuNjAyLDMyLjU0MyAxNDIuODYsMzUuOTkzIDEzNC4zMDcsNDAuOTMxIEMxMjUuNzkzLDQ1Ljg0NyAxMTkuODUxLDUyLjAwNCAxMTcuMTI0LDU4LjczNiBDMTE1LjI3LDYzLjMxNCAxMTUuNTAxLDY4LjExMiAxMTcuNzksNzIuNjExIEMxMTguMTYsNzMuMzM2IDExNy44NDUsNzQuMTI0IDExNi45OSw3NC42MTcgTDExMy45MDksNzYuMzk3IEMxMTMuODM2LDc2LjQzOCAxMTMuNzU2LDc2LjQ1OSAxMTMuNjc1LDc2LjQ1OSIgaWQ9IkZpbGwtMjQiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUzLjMxNiwyMS4yNzkgQzE1MC45MDMsMjEuMjc5IDE0OC40OTUsMjAuNzUxIDE0Ni42NjQsMTkuNjkzIEMxNDQuODQ2LDE4LjY0NCAxNDMuODQ0LDE3LjIzMiAxNDMuODQ0LDE1LjcxOCBDMTQzLjg0NCwxNC4xOTEgMTQ0Ljg2LDEyLjc2MyAxNDYuNzA1LDExLjY5OCBMMTU2LjE5OCw2LjA5MSBDMTU2LjMwOSw2LjAyNSAxNTYuNDUyLDYuMDYyIDE1Ni41MTgsNi4xNzMgQzE1Ni41ODMsNi4yODQgMTU2LjU0Nyw2LjQyNyAxNTYuNDM2LDYuNDkzIEwxNDYuOTQsMTIuMTAyIEMxNDUuMjQ0LDEzLjA4MSAxNDQuMzEyLDE0LjM2NSAxNDQuMzEyLDE1LjcxOCBDMTQ0LjMxMiwxNy4wNTggMTQ1LjIzLDE4LjMyNiAxNDYuODk3LDE5LjI4OSBDMTUwLjQ0NiwyMS4zMzggMTU2LjI0LDIxLjMyNyAxNTkuODExLDE5LjI2NSBMMTY5LjU1OSwxMy42MzcgQzE2OS42NywxMy41NzMgMTY5LjgxMywxMy42MTEgMTY5Ljg3OCwxMy43MjMgQzE2OS45NDMsMTMuODM0IDE2OS45MDQsMTMuOTc3IDE2OS43OTMsMTQuMDQyIEwxNjAuMDQ1LDE5LjY3IEMxNTguMTg3LDIwLjc0MiAxNTUuNzQ5LDIxLjI3OSAxNTMuMzE2LDIxLjI3OSIgaWQ9IkZpbGwtMjUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3NS45OTIgTDY3Ljc2Miw0OS40ODQiIGlkPSJGaWxsLTI2IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMy42NzUsNzYuMzQyIEMxMTMuNjE1LDc2LjM0MiAxMTMuNTU1LDc2LjMyNyAxMTMuNSw3Ni4yOTUgTDY3LjU4Nyw0OS43ODcgQzY3LjQxOSw0OS42OSA2Ny4zNjIsNDkuNDc2IDY3LjQ1OSw0OS4zMDkgQzY3LjU1Niw0OS4xNDEgNjcuNzcsNDkuMDgzIDY3LjkzNyw0OS4xOCBMMTEzLjg1LDc1LjY4OCBDMTE0LjAxOCw3NS43ODUgMTE0LjA3NSw3NiAxMTMuOTc4LDc2LjE2NyBDMTEzLjkxNCw3Ni4yNzkgMTEzLjc5Niw3Ni4zNDIgMTEzLjY3NSw3Ni4zNDIiIGlkPSJGaWxsLTI3IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY3Ljc2Miw0OS40ODQgTDY3Ljc2MiwxMDMuNDg1IEM2Ny43NjIsMTA0LjU3NSA2OC41MzIsMTA1LjkwMyA2OS40ODIsMTA2LjQ1MiBMMTExLjk1NSwxMzAuOTczIEMxMTIuOTA1LDEzMS41MjIgMTEzLjY3NSwxMzEuMDgzIDExMy42NzUsMTI5Ljk5MyBMMTEzLjY3NSw3NS45OTIiIGlkPSJGaWxsLTI4IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMi43MjcsMTMxLjU2MSBDMTEyLjQzLDEzMS41NjEgMTEyLjEwNywxMzEuNDY2IDExMS43OCwxMzEuMjc2IEw2OS4zMDcsMTA2Ljc1NSBDNjguMjQ0LDEwNi4xNDIgNjcuNDEyLDEwNC43MDUgNjcuNDEyLDEwMy40ODUgTDY3LjQxMiw0OS40ODQgQzY3LjQxMiw0OS4yOSA2Ny41NjksNDkuMTM0IDY3Ljc2Miw0OS4xMzQgQzY3Ljk1Niw0OS4xMzQgNjguMTEzLDQ5LjI5IDY4LjExMyw0OS40ODQgTDY4LjExMywxMDMuNDg1IEM2OC4xMTMsMTA0LjQ0NSA2OC44MiwxMDUuNjY1IDY5LjY1NywxMDYuMTQ4IEwxMTIuMTMsMTMwLjY3IEMxMTIuNDc0LDEzMC44NjggMTEyLjc5MSwxMzAuOTEzIDExMywxMzAuNzkyIEMxMTMuMjA2LDEzMC42NzMgMTEzLjMyNSwxMzAuMzgxIDExMy4zMjUsMTI5Ljk5MyBMMTEzLjMyNSw3NS45OTIgQzExMy4zMjUsNzUuNzk4IDExMy40ODIsNzUuNjQxIDExMy42NzUsNzUuNjQxIEMxMTMuODY5LDc1LjY0MSAxMTQuMDI1LDc1Ljc5OCAxMTQuMDI1LDc1Ljk5MiBMMTE0LjAyNSwxMjkuOTkzIEMxMTQuMDI1LDEzMC42NDggMTEzLjc4NiwxMzEuMTQ3IDExMy4zNSwxMzEuMzk5IEMxMTMuMTYyLDEzMS41MDcgMTEyLjk1MiwxMzEuNTYxIDExMi43MjcsMTMxLjU2MSIgaWQ9IkZpbGwtMjkiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEyLjg2LDQwLjUxMiBDMTEyLjg2LDQwLjUxMiAxMTIuODYsNDAuNTEyIDExMi44NTksNDAuNTEyIEMxMTAuNTQxLDQwLjUxMiAxMDguMzYsMzkuOTkgMTA2LjcxNywzOS4wNDEgQzEwNS4wMTIsMzguMDU3IDEwNC4wNzQsMzYuNzI2IDEwNC4wNzQsMzUuMjkyIEMxMDQuMDc0LDMzLjg0NyAxMDUuMDI2LDMyLjUwMSAxMDYuNzU0LDMxLjUwNCBMMTE4Ljc5NSwyNC41NTEgQzEyMC40NjMsMjMuNTg5IDEyMi42NjksMjMuMDU4IDEyNS4wMDcsMjMuMDU4IEMxMjcuMzI1LDIzLjA1OCAxMjkuNTA2LDIzLjU4MSAxMzEuMTUsMjQuNTMgQzEzMi44NTQsMjUuNTE0IDEzMy43OTMsMjYuODQ1IDEzMy43OTMsMjguMjc4IEMxMzMuNzkzLDI5LjcyNCAxMzIuODQxLDMxLjA2OSAxMzEuMTEzLDMyLjA2NyBMMTE5LjA3MSwzOS4wMTkgQzExNy40MDMsMzkuOTgyIDExNS4xOTcsNDAuNTEyIDExMi44Niw0MC41MTIgTDExMi44Niw0MC41MTIgWiBNMTI1LjAwNywyMy43NTkgQzEyMi43OSwyMy43NTkgMTIwLjcwOSwyNC4yNTYgMTE5LjE0NiwyNS4xNTggTDEwNy4xMDQsMzIuMTEgQzEwNS42MDIsMzIuOTc4IDEwNC43NzQsMzQuMTA4IDEwNC43NzQsMzUuMjkyIEMxMDQuNzc0LDM2LjQ2NSAxMDUuNTg5LDM3LjU4MSAxMDcuMDY3LDM4LjQzNCBDMTA4LjYwNSwzOS4zMjMgMTEwLjY2MywzOS44MTIgMTEyLjg1OSwzOS44MTIgTDExMi44NiwzOS44MTIgQzExNS4wNzYsMzkuODEyIDExNy4xNTgsMzkuMzE1IDExOC43MjEsMzguNDEzIEwxMzAuNzYyLDMxLjQ2IEMxMzIuMjY0LDMwLjU5MyAxMzMuMDkyLDI5LjQ2MyAxMzMuMDkyLDI4LjI3OCBDMTMzLjA5MiwyNy4xMDYgMTMyLjI3OCwyNS45OSAxMzAuOCwyNS4xMzYgQzEyOS4yNjEsMjQuMjQ4IDEyNy4yMDQsMjMuNzU5IDEyNS4wMDcsMjMuNzU5IEwxMjUuMDA3LDIzLjc1OSBaIiBpZD0iRmlsbC0zMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNjUuNjMsMTYuMjE5IEwxNTkuODk2LDE5LjUzIEMxNTYuNzI5LDIxLjM1OCAxNTEuNjEsMjEuMzY3IDE0OC40NjMsMTkuNTUgQzE0NS4zMTYsMTcuNzMzIDE0NS4zMzIsMTQuNzc4IDE0OC40OTksMTIuOTQ5IEwxNTQuMjMzLDkuNjM5IEwxNjUuNjMsMTYuMjE5IiBpZD0iRmlsbC0zMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNTQuMjMzLDEwLjQ0OCBMMTY0LjIyOCwxNi4yMTkgTDE1OS41NDYsMTguOTIzIEMxNTguMTEyLDE5Ljc1IDE1Ni4xOTQsMjAuMjA2IDE1NC4xNDcsMjAuMjA2IEMxNTIuMTE4LDIwLjIwNiAxNTAuMjI0LDE5Ljc1NyAxNDguODE0LDE4Ljk0MyBDMTQ3LjUyNCwxOC4xOTkgMTQ2LjgxNCwxNy4yNDkgMTQ2LjgxNCwxNi4yNjkgQzE0Ni44MTQsMTUuMjc4IDE0Ny41MzcsMTQuMzE0IDE0OC44NSwxMy41NTYgTDE1NC4yMzMsMTAuNDQ4IE0xNTQuMjMzLDkuNjM5IEwxNDguNDk5LDEyLjk0OSBDMTQ1LjMzMiwxNC43NzggMTQ1LjMxNiwxNy43MzMgMTQ4LjQ2MywxOS41NSBDMTUwLjAzMSwyMC40NTUgMTUyLjA4NiwyMC45MDcgMTU0LjE0NywyMC45MDcgQzE1Ni4yMjQsMjAuOTA3IDE1OC4zMDYsMjAuNDQ3IDE1OS44OTYsMTkuNTMgTDE2NS42MywxNi4yMTkgTDE1NC4yMzMsOS42MzkiIGlkPSJGaWxsLTMyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NS40NDUsNzIuNjY3IEwxNDUuNDQ1LDcyLjY2NyBDMTQzLjY3Miw3Mi42NjcgMTQyLjIwNCw3MS44MTcgMTQxLjIwMiw3MC40MjIgQzE0MS4xMzUsNzAuMzMgMTQxLjE0NSw3MC4xNDcgMTQxLjIyNSw3MC4wNjYgQzE0MS4zMDUsNjkuOTg1IDE0MS40MzIsNjkuOTQ2IDE0MS41MjUsNzAuMDExIEMxNDIuMzA2LDcwLjU1OSAxNDMuMjMxLDcwLjgyMyAxNDQuMjc2LDcwLjgyMiBDMTQ1LjU5OCw3MC44MjIgMTQ3LjAzLDcwLjM3NiAxNDguNTMyLDY5LjUwOSBDMTUzLjg0Miw2Ni40NDMgMTU4LjE2Myw1OC45ODcgMTU4LjE2Myw1Mi44OTQgQzE1OC4xNjMsNTAuOTY3IDE1Ny43MjEsNDkuMzMyIDE1Ni44ODQsNDguMTY4IEMxNTYuODE4LDQ4LjA3NiAxNTYuODI4LDQ3Ljk0OCAxNTYuOTA4LDQ3Ljg2NyBDMTU2Ljk4OCw0Ny43ODYgMTU3LjExNCw0Ny43NzQgMTU3LjIwOCw0Ny44NCBDMTU4Ljg3OCw0OS4wMTIgMTU5Ljc5OCw1MS4yMiAxNTkuNzk4LDU0LjA1OSBDMTU5Ljc5OCw2MC4zMDEgMTU1LjM3Myw2OC4wNDYgMTQ5LjkzMyw3MS4xODYgQzE0OC4zNiw3Mi4wOTQgMTQ2Ljg1LDcyLjY2NyAxNDUuNDQ1LDcyLjY2NyBMMTQ1LjQ0NSw3Mi42NjcgWiBNMTQyLjQ3Niw3MSBDMTQzLjI5LDcxLjY1MSAxNDQuMjk2LDcyLjAwMiAxNDUuNDQ1LDcyLjAwMiBDMTQ2Ljc2Nyw3Mi4wMDIgMTQ4LjE5OCw3MS41NSAxNDkuNyw3MC42ODIgQzE1NS4wMSw2Ny42MTcgMTU5LjMzMSw2MC4xNTkgMTU5LjMzMSw1NC4wNjUgQzE1OS4zMzEsNTIuMDg1IDE1OC44NjgsNTAuNDM1IDE1OC4wMDYsNDkuMjcyIEMxNTguNDE3LDUwLjMwNyAxNTguNjMsNTEuNTMyIDE1OC42Myw1Mi44OTIgQzE1OC42Myw1OS4xMzQgMTU0LjIwNSw2Ni43NjcgMTQ4Ljc2NSw2OS45MDcgQzE0Ny4xOTIsNzAuODE2IDE0NS42ODEsNzEuMjgzIDE0NC4yNzYsNzEuMjgzIEMxNDMuNjM0LDcxLjI4MyAxNDMuMDMzLDcxLjE5MiAxNDIuNDc2LDcxIEwxNDIuNDc2LDcxIFoiIGlkPSJGaWxsLTMzIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0OC42NDgsNjkuNzA0IEMxNTQuMDMyLDY2LjU5NiAxNTguMzk2LDU5LjA2OCAxNTguMzk2LDUyLjg5MSBDMTU4LjM5Niw1MC44MzkgMTU3LjkxMyw0OS4xOTggMTU3LjA3NCw0OC4wMyBDMTU1LjI4OSw0Ni43NzggMTUyLjY5OSw0Ni44MzYgMTQ5LjgxNiw0OC41MDEgQzE0NC40MzMsNTEuNjA5IDE0MC4wNjgsNTkuMTM3IDE0MC4wNjgsNjUuMzE0IEMxNDAuMDY4LDY3LjM2NSAxNDAuNTUyLDY5LjAwNiAxNDEuMzkxLDcwLjE3NCBDMTQzLjE3Niw3MS40MjcgMTQ1Ljc2NSw3MS4zNjkgMTQ4LjY0OCw2OS43MDQiIGlkPSJGaWxsLTM0IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NC4yNzYsNzEuMjc2IEwxNDQuMjc2LDcxLjI3NiBDMTQzLjEzMyw3MS4yNzYgMTQyLjExOCw3MC45NjkgMTQxLjI1Nyw3MC4zNjUgQzE0MS4yMzYsNzAuMzUxIDE0MS4yMTcsNzAuMzMyIDE0MS4yMDIsNzAuMzExIEMxNDAuMzA3LDY5LjA2NyAxMzkuODM1LDY3LjMzOSAxMzkuODM1LDY1LjMxNCBDMTM5LjgzNSw1OS4wNzMgMTQ0LjI2LDUxLjQzOSAxNDkuNyw0OC4yOTggQzE1MS4yNzMsNDcuMzkgMTUyLjc4NCw0Ni45MjkgMTU0LjE4OSw0Ni45MjkgQzE1NS4zMzIsNDYuOTI5IDE1Ni4zNDcsNDcuMjM2IDE1Ny4yMDgsNDcuODM5IEMxNTcuMjI5LDQ3Ljg1NCAxNTcuMjQ4LDQ3Ljg3MyAxNTcuMjYzLDQ3Ljg5NCBDMTU4LjE1Nyw0OS4xMzggMTU4LjYzLDUwLjg2NSAxNTguNjMsNTIuODkxIEMxNTguNjMsNTkuMTMyIDE1NC4yMDUsNjYuNzY2IDE0OC43NjUsNjkuOTA3IEMxNDcuMTkyLDcwLjgxNSAxNDUuNjgxLDcxLjI3NiAxNDQuMjc2LDcxLjI3NiBMMTQ0LjI3Niw3MS4yNzYgWiBNMTQxLjU1OCw3MC4xMDQgQzE0Mi4zMzEsNzAuNjM3IDE0My4yNDUsNzEuMDA1IDE0NC4yNzYsNzEuMDA1IEMxNDUuNTk4LDcxLjAwNSAxNDcuMDMsNzAuNDY3IDE0OC41MzIsNjkuNiBDMTUzLjg0Miw2Ni41MzQgMTU4LjE2Myw1OS4wMzMgMTU4LjE2Myw1Mi45MzkgQzE1OC4xNjMsNTEuMDMxIDE1Ny43MjksNDkuMzg1IDE1Ni45MDcsNDguMjIzIEMxNTYuMTMzLDQ3LjY5MSAxNTUuMjE5LDQ3LjQwOSAxNTQuMTg5LDQ3LjQwOSBDMTUyLjg2Nyw0Ny40MDkgMTUxLjQzNSw0Ny44NDIgMTQ5LjkzMyw0OC43MDkgQzE0NC42MjMsNTEuNzc1IDE0MC4zMDIsNTkuMjczIDE0MC4zMDIsNjUuMzY2IEMxNDAuMzAyLDY3LjI3NiAxNDAuNzM2LDY4Ljk0MiAxNDEuNTU4LDcwLjEwNCBMMTQxLjU1OCw3MC4xMDQgWiIgaWQ9IkZpbGwtMzUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUwLjcyLDY1LjM2MSBMMTUwLjM1Nyw2NS4wNjYgQzE1MS4xNDcsNjQuMDkyIDE1MS44NjksNjMuMDQgMTUyLjUwNSw2MS45MzggQzE1My4zMTMsNjAuNTM5IDE1My45NzgsNTkuMDY3IDE1NC40ODIsNTcuNTYzIEwxNTQuOTI1LDU3LjcxMiBDMTU0LjQxMiw1OS4yNDUgMTUzLjczMyw2MC43NDUgMTUyLjkxLDYyLjE3MiBDMTUyLjI2Miw2My4yOTUgMTUxLjUyNSw2NC4zNjggMTUwLjcyLDY1LjM2MSIgaWQ9IkZpbGwtMzYiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE1LjkxNyw4NC41MTQgTDExNS41NTQsODQuMjIgQzExNi4zNDQsODMuMjQ1IDExNy4wNjYsODIuMTk0IDExNy43MDIsODEuMDkyIEMxMTguNTEsNzkuNjkyIDExOS4xNzUsNzguMjIgMTE5LjY3OCw3Ni43MTcgTDEyMC4xMjEsNzYuODY1IEMxMTkuNjA4LDc4LjM5OCAxMTguOTMsNzkuODk5IDExOC4xMDYsODEuMzI2IEMxMTcuNDU4LDgyLjQ0OCAxMTYuNzIyLDgzLjUyMSAxMTUuOTE3LDg0LjUxNCIgaWQ9IkZpbGwtMzciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE0LDEzMC40NzYgTDExNCwxMzAuMDA4IEwxMTQsNzYuMDUyIEwxMTQsNzUuNTg0IEwxMTQsNzYuMDUyIEwxMTQsMTMwLjAwOCBMMTE0LDEzMC40NzYiIGlkPSJGaWxsLTM4IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYyLjAwMDAwMCwgMC4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTkuODIyLDM3LjQ3NCBDMTkuODM5LDM3LjMzOSAxOS43NDcsMzcuMTk0IDE5LjU1NSwzNy4wODIgQzE5LjIyOCwzNi44OTQgMTguNzI5LDM2Ljg3MiAxOC40NDYsMzcuMDM3IEwxMi40MzQsNDAuNTA4IEMxMi4zMDMsNDAuNTg0IDEyLjI0LDQwLjY4NiAxMi4yNDMsNDAuNzkzIEMxMi4yNDUsNDAuOTI1IDEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQxLjM3MSBMMTIuMjQ1LDQxLjQxNCBMMTIuMjM4LDQxLjU0MiBDOC4xNDgsNDMuODg3IDUuNjQ3LDQ1LjMyMSA1LjY0Nyw0NS4zMjEgQzUuNjQ2LDQ1LjMyMSAzLjU3LDQ2LjM2NyAyLjg2LDUwLjUxMyBDMi44Niw1MC41MTMgMS45NDgsNTcuNDc0IDEuOTYyLDcwLjI1OCBDMS45NzcsODIuODI4IDIuNTY4LDg3LjMyOCAzLjEyOSw5MS42MDkgQzMuMzQ5LDkzLjI5MyA2LjEzLDkzLjczNCA2LjEzLDkzLjczNCBDNi40NjEsOTMuNzc0IDYuODI4LDkzLjcwNyA3LjIxLDkzLjQ4NiBMODIuNDgzLDQ5LjkzNSBDODQuMjkxLDQ4Ljg2NiA4NS4xNSw0Ni4yMTYgODUuNTM5LDQzLjY1MSBDODYuNzUyLDM1LjY2MSA4Ny4yMTQsMTAuNjczIDg1LjI2NCwzLjc3MyBDODUuMDY4LDMuMDggODQuNzU0LDIuNjkgODQuMzk2LDIuNDkxIEw4Mi4zMSwxLjcwMSBDODEuNTgzLDEuNzI5IDgwLjg5NCwyLjE2OCA4MC43NzYsMi4yMzYgQzgwLjYzNiwyLjMxNyA0MS44MDcsMjQuNTg1IDIwLjAzMiwzNy4wNzIgTDE5LjgyMiwzNy40NzQiIGlkPSJGaWxsLTEiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNODIuMzExLDEuNzAxIEw4NC4zOTYsMi40OTEgQzg0Ljc1NCwyLjY5IDg1LjA2OCwzLjA4IDg1LjI2NCwzLjc3MyBDODcuMjEzLDEwLjY3MyA4Ni43NTEsMzUuNjYgODUuNTM5LDQzLjY1MSBDODUuMTQ5LDQ2LjIxNiA4NC4yOSw0OC44NjYgODIuNDgzLDQ5LjkzNSBMNy4yMSw5My40ODYgQzYuODk3LDkzLjY2NyA2LjU5NSw5My43NDQgNi4zMTQsOTMuNzQ0IEw2LjEzMSw5My43MzMgQzYuMTMxLDkzLjczNCAzLjM0OSw5My4yOTMgMy4xMjgsOTEuNjA5IEMyLjU2OCw4Ny4zMjcgMS45NzcsODIuODI4IDEuOTYzLDcwLjI1OCBDMS45NDgsNTcuNDc0IDIuODYsNTAuNTEzIDIuODYsNTAuNTEzIEMzLjU3LDQ2LjM2NyA1LjY0Nyw0NS4zMjEgNS42NDcsNDUuMzIxIEM1LjY0Nyw0NS4zMjEgOC4xNDgsNDMuODg3IDEyLjIzOCw0MS41NDIgTDEyLjI0NSw0MS40MTQgTDEyLjI0NSw0MS4zNzEgQzEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQwLjkyNSAxMi4yNDMsNDAuNzkzIEMxMi4yNCw0MC42ODYgMTIuMzAyLDQwLjU4MyAxMi40MzQsNDAuNTA4IEwxOC40NDYsMzcuMDM2IEMxOC41NzQsMzYuOTYyIDE4Ljc0NiwzNi45MjYgMTguOTI3LDM2LjkyNiBDMTkuMTQ1LDM2LjkyNiAxOS4zNzYsMzYuOTc5IDE5LjU1NCwzNy4wODIgQzE5Ljc0NywzNy4xOTQgMTkuODM5LDM3LjM0IDE5LjgyMiwzNy40NzQgTDIwLjAzMywzNy4wNzIgQzQxLjgwNiwyNC41ODUgODAuNjM2LDIuMzE4IDgwLjc3NywyLjIzNiBDODAuODk0LDIuMTY4IDgxLjU4MywxLjcyOSA4Mi4zMTEsMS43MDEgTTgyLjMxMSwwLjcwNCBMODIuMjcyLDAuNzA1IEM4MS42NTQsMC43MjggODAuOTg5LDAuOTQ5IDgwLjI5OCwxLjM2MSBMODAuMjc3LDEuMzczIEM4MC4xMjksMS40NTggNTkuNzY4LDEzLjEzNSAxOS43NTgsMzYuMDc5IEMxOS41LDM1Ljk4MSAxOS4yMTQsMzUuOTI5IDE4LjkyNywzNS45MjkgQzE4LjU2MiwzNS45MjkgMTguMjIzLDM2LjAxMyAxNy45NDcsMzYuMTczIEwxMS45MzUsMzkuNjQ0IEMxMS40OTMsMzkuODk5IDExLjIzNiw0MC4zMzQgMTEuMjQ2LDQwLjgxIEwxMS4yNDcsNDAuOTYgTDUuMTY3LDQ0LjQ0NyBDNC43OTQsNDQuNjQ2IDIuNjI1LDQ1Ljk3OCAxLjg3Nyw1MC4zNDUgTDEuODcxLDUwLjM4NCBDMS44NjIsNTAuNDU0IDAuOTUxLDU3LjU1NyAwLjk2NSw3MC4yNTkgQzAuOTc5LDgyLjg3OSAxLjU2OCw4Ny4zNzUgMi4xMzcsOTEuNzI0IEwyLjEzOSw5MS43MzkgQzIuNDQ3LDk0LjA5NCA1LjYxNCw5NC42NjIgNS45NzUsOTQuNzE5IEw2LjAwOSw5NC43MjMgQzYuMTEsOTQuNzM2IDYuMjEzLDk0Ljc0MiA2LjMxNCw5NC43NDIgQzYuNzksOTQuNzQyIDcuMjYsOTQuNjEgNy43MSw5NC4zNSBMODIuOTgzLDUwLjc5OCBDODQuNzk0LDQ5LjcyNyA4NS45ODIsNDcuMzc1IDg2LjUyNSw0My44MDEgQzg3LjcxMSwzNS45ODcgODguMjU5LDEwLjcwNSA4Ni4yMjQsMy41MDIgQzg1Ljk3MSwyLjYwOSA4NS41MiwxLjk3NSA4NC44ODEsMS42MiBMODQuNzQ5LDEuNTU4IEw4Mi42NjQsMC43NjkgQzgyLjU1MSwwLjcyNSA4Mi40MzEsMC43MDQgODIuMzExLDAuNzA0IiBpZD0iRmlsbC0yIiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY2LjI2NywxMS41NjUgTDY3Ljc2MiwxMS45OTkgTDExLjQyMyw0NC4zMjUiIGlkPSJGaWxsLTMiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMjAyLDkwLjU0NSBDMTIuMDI5LDkwLjU0NSAxMS44NjIsOTAuNDU1IDExLjc2OSw5MC4yOTUgQzExLjYzMiw5MC4wNTcgMTEuNzEzLDg5Ljc1MiAxMS45NTIsODkuNjE0IEwzMC4zODksNzguOTY5IEMzMC42MjgsNzguODMxIDMwLjkzMyw3OC45MTMgMzEuMDcxLDc5LjE1MiBDMzEuMjA4LDc5LjM5IDMxLjEyNyw3OS42OTYgMzAuODg4LDc5LjgzMyBMMTIuNDUxLDkwLjQ3OCBMMTIuMjAyLDkwLjU0NSIgaWQ9IkZpbGwtNCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMy43NjQsNDIuNjU0IEwxMy42NTYsNDIuNTkyIEwxMy43MDIsNDIuNDIxIEwxOC44MzcsMzkuNDU3IEwxOS4wMDcsMzkuNTAyIEwxOC45NjIsMzkuNjczIEwxMy44MjcsNDIuNjM3IEwxMy43NjQsNDIuNjU0IiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTguNTIsOTAuMzc1IEw4LjUyLDQ2LjQyMSBMOC41ODMsNDYuMzg1IEw3NS44NCw3LjU1NCBMNzUuODQsNTEuNTA4IEw3NS43NzgsNTEuNTQ0IEw4LjUyLDkwLjM3NSBMOC41Miw5MC4zNzUgWiBNOC43Nyw0Ni41NjQgTDguNzcsODkuOTQ0IEw3NS41OTEsNTEuMzY1IEw3NS41OTEsNy45ODUgTDguNzcsNDYuNTY0IEw4Ljc3LDQ2LjU2NCBaIiBpZD0iRmlsbC02IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTI0Ljk4Niw4My4xODIgQzI0Ljc1Niw4My4zMzEgMjQuMzc0LDgzLjU2NiAyNC4xMzcsODMuNzA1IEwxMi42MzIsOTAuNDA2IEMxMi4zOTUsOTAuNTQ1IDEyLjQyNiw5MC42NTggMTIuNyw5MC42NTggTDEzLjI2NSw5MC42NTggQzEzLjU0LDkwLjY1OCAxMy45NTgsOTAuNTQ1IDE0LjE5NSw5MC40MDYgTDI1LjcsODMuNzA1IEMyNS45MzcsODMuNTY2IDI2LjEyOCw4My40NTIgMjYuMTI1LDgzLjQ0OSBDMjYuMTIyLDgzLjQ0NyAyNi4xMTksODMuMjIgMjYuMTE5LDgyLjk0NiBDMjYuMTE5LDgyLjY3MiAyNS45MzEsODIuNTY5IDI1LjcwMSw4Mi43MTkgTDI0Ljk4Niw4My4xODIiIGlkPSJGaWxsLTciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTMuMjY2LDkwLjc4MiBMMTIuNyw5MC43ODIgQzEyLjUsOTAuNzgyIDEyLjM4NCw5MC43MjYgMTIuMzU0LDkwLjYxNiBDMTIuMzI0LDkwLjUwNiAxMi4zOTcsOTAuMzk5IDEyLjU2OSw5MC4yOTkgTDI0LjA3NCw4My41OTcgQzI0LjMxLDgzLjQ1OSAyNC42ODksODMuMjI2IDI0LjkxOCw4My4wNzggTDI1LjYzMyw4Mi42MTQgQzI1LjcyMyw4Mi41NTUgMjUuODEzLDgyLjUyNSAyNS44OTksODIuNTI1IEMyNi4wNzEsODIuNTI1IDI2LjI0NCw4Mi42NTUgMjYuMjQ0LDgyLjk0NiBDMjYuMjQ0LDgzLjE2IDI2LjI0NSw4My4zMDkgMjYuMjQ3LDgzLjM4MyBMMjYuMjUzLDgzLjM4NyBMMjYuMjQ5LDgzLjQ1NiBDMjYuMjQ2LDgzLjUzMSAyNi4yNDYsODMuNTMxIDI1Ljc2Myw4My44MTIgTDE0LjI1OCw5MC41MTQgQzE0LDkwLjY2NSAxMy41NjQsOTAuNzgyIDEzLjI2Niw5MC43ODIgTDEzLjI2Niw5MC43ODIgWiBNMTIuNjY2LDkwLjUzMiBMMTIuNyw5MC41MzMgTDEzLjI2Niw5MC41MzMgQzEzLjUxOCw5MC41MzMgMTMuOTE1LDkwLjQyNSAxNC4xMzIsOTAuMjk5IEwyNS42MzcsODMuNTk3IEMyNS44MDUsODMuNDk5IDI1LjkzMSw4My40MjQgMjUuOTk4LDgzLjM4MyBDMjUuOTk0LDgzLjI5OSAyNS45OTQsODMuMTY1IDI1Ljk5NCw4Mi45NDYgTDI1Ljg5OSw4Mi43NzUgTDI1Ljc2OCw4Mi44MjQgTDI1LjA1NCw4My4yODcgQzI0LjgyMiw4My40MzcgMjQuNDM4LDgzLjY3MyAyNC4yLDgzLjgxMiBMMTIuNjk1LDkwLjUxNCBMMTIuNjY2LDkwLjUzMiBMMTIuNjY2LDkwLjUzMiBaIiBpZD0iRmlsbC04IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEzLjI2Niw4OS44NzEgTDEyLjcsODkuODcxIEMxMi41LDg5Ljg3MSAxMi4zODQsODkuODE1IDEyLjM1NCw4OS43MDUgQzEyLjMyNCw4OS41OTUgMTIuMzk3LDg5LjQ4OCAxMi41NjksODkuMzg4IEwyNC4wNzQsODIuNjg2IEMyNC4zMzIsODIuNTM1IDI0Ljc2OCw4Mi40MTggMjUuMDY3LDgyLjQxOCBMMjUuNjMyLDgyLjQxOCBDMjUuODMyLDgyLjQxOCAyNS45NDgsODIuNDc0IDI1Ljk3OCw4Mi41ODQgQzI2LjAwOCw4Mi42OTQgMjUuOTM1LDgyLjgwMSAyNS43NjMsODIuOTAxIEwxNC4yNTgsODkuNjAzIEMxNCw4OS43NTQgMTMuNTY0LDg5Ljg3MSAxMy4yNjYsODkuODcxIEwxMy4yNjYsODkuODcxIFogTTEyLjY2Niw4OS42MjEgTDEyLjcsODkuNjIyIEwxMy4yNjYsODkuNjIyIEMxMy41MTgsODkuNjIyIDEzLjkxNSw4OS41MTUgMTQuMTMyLDg5LjM4OCBMMjUuNjM3LDgyLjY4NiBMMjUuNjY3LDgyLjY2OCBMMjUuNjMyLDgyLjY2NyBMMjUuMDY3LDgyLjY2NyBDMjQuODE1LDgyLjY2NyAyNC40MTgsODIuNzc1IDI0LjIsODIuOTAxIEwxMi42OTUsODkuNjAzIEwxMi42NjYsODkuNjIxIEwxMi42NjYsODkuNjIxIFoiIGlkPSJGaWxsLTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMzcsOTAuODAxIEwxMi4zNyw4OS41NTQgTDEyLjM3LDkwLjgwMSIgaWQ9IkZpbGwtMTAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNi4xMyw5My45MDEgQzUuMzc5LDkzLjgwOCA0LjgxNiw5My4xNjQgNC42OTEsOTIuNTI1IEMzLjg2LDg4LjI4NyAzLjU0LDgzLjc0MyAzLjUyNiw3MS4xNzMgQzMuNTExLDU4LjM4OSA0LjQyMyw1MS40MjggNC40MjMsNTEuNDI4IEM1LjEzNCw0Ny4yODIgNy4yMSw0Ni4yMzYgNy4yMSw0Ni4yMzYgQzcuMjEsNDYuMjM2IDgxLjY2NywzLjI1IDgyLjA2OSwzLjAxNyBDODIuMjkyLDIuODg4IDg0LjU1NiwxLjQzMyA4NS4yNjQsMy45NCBDODcuMjE0LDEwLjg0IDg2Ljc1MiwzNS44MjcgODUuNTM5LDQzLjgxOCBDODUuMTUsNDYuMzgzIDg0LjI5MSw0OS4wMzMgODIuNDgzLDUwLjEwMSBMNy4yMSw5My42NTMgQzYuODI4LDkzLjg3NCA2LjQ2MSw5My45NDEgNi4xMyw5My45MDEgQzYuMTMsOTMuOTAxIDMuMzQ5LDkzLjQ2IDMuMTI5LDkxLjc3NiBDMi41NjgsODcuNDk1IDEuOTc3LDgyLjk5NSAxLjk2Miw3MC40MjUgQzEuOTQ4LDU3LjY0MSAyLjg2LDUwLjY4IDIuODYsNTAuNjggQzMuNTcsNDYuNTM0IDUuNjQ3LDQ1LjQ4OSA1LjY0Nyw0NS40ODkgQzUuNjQ2LDQ1LjQ4OSA4LjA2NSw0NC4wOTIgMTIuMjQ1LDQxLjY3OSBMMTMuMTE2LDQxLjU2IEwxOS43MTUsMzcuNzMgTDE5Ljc2MSwzNy4yNjkgTDYuMTMsOTMuOTAxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjMxNyw5NC4xNjEgTDYuMTAyLDk0LjE0OCBMNi4xMDEsOTQuMTQ4IEw1Ljg1Nyw5NC4xMDEgQzUuMTM4LDkzLjk0NSAzLjA4NSw5My4zNjUgMi44ODEsOTEuODA5IEMyLjMxMyw4Ny40NjkgMS43MjcsODIuOTk2IDEuNzEzLDcwLjQyNSBDMS42OTksNTcuNzcxIDIuNjA0LDUwLjcxOCAyLjYxMyw1MC42NDggQzMuMzM4LDQ2LjQxNyA1LjQ0NSw0NS4zMSA1LjUzNSw0NS4yNjYgTDEyLjE2Myw0MS40MzkgTDEzLjAzMyw0MS4zMiBMMTkuNDc5LDM3LjU3OCBMMTkuNTEzLDM3LjI0NCBDMTkuNTI2LDM3LjEwNyAxOS42NDcsMzcuMDA4IDE5Ljc4NiwzNy4wMjEgQzE5LjkyMiwzNy4wMzQgMjAuMDIzLDM3LjE1NiAyMC4wMDksMzcuMjkzIEwxOS45NSwzNy44ODIgTDEzLjE5OCw0MS44MDEgTDEyLjMyOCw0MS45MTkgTDUuNzcyLDQ1LjcwNCBDNS43NDEsNDUuNzIgMy43ODIsNDYuNzcyIDMuMTA2LDUwLjcyMiBDMy4wOTksNTAuNzgyIDIuMTk4LDU3LjgwOCAyLjIxMiw3MC40MjQgQzIuMjI2LDgyLjk2MyAyLjgwOSw4Ny40MiAzLjM3Myw5MS43MjkgQzMuNDY0LDkyLjQyIDQuMDYyLDkyLjg4MyA0LjY4Miw5My4xODEgQzQuNTY2LDkyLjk4NCA0LjQ4Niw5Mi43NzYgNC40NDYsOTIuNTcyIEMzLjY2NSw4OC41ODggMy4yOTEsODQuMzcgMy4yNzYsNzEuMTczIEMzLjI2Miw1OC41MiA0LjE2Nyw1MS40NjYgNC4xNzYsNTEuMzk2IEM0LjkwMSw0Ny4xNjUgNy4wMDgsNDYuMDU5IDcuMDk4LDQ2LjAxNCBDNy4wOTQsNDYuMDE1IDgxLjU0MiwzLjAzNCA4MS45NDQsMi44MDIgTDgxLjk3MiwyLjc4NSBDODIuODc2LDIuMjQ3IDgzLjY5MiwyLjA5NyA4NC4zMzIsMi4zNTIgQzg0Ljg4NywyLjU3MyA4NS4yODEsMy4wODUgODUuNTA0LDMuODcyIEM4Ny41MTgsMTEgODYuOTY0LDM2LjA5MSA4NS43ODUsNDMuODU1IEM4NS4yNzgsNDcuMTk2IDg0LjIxLDQ5LjM3IDgyLjYxLDUwLjMxNyBMNy4zMzUsOTMuODY5IEM2Ljk5OSw5NC4wNjMgNi42NTgsOTQuMTYxIDYuMzE3LDk0LjE2MSBMNi4zMTcsOTQuMTYxIFogTTYuMTcsOTMuNjU0IEM2LjQ2Myw5My42OSA2Ljc3NCw5My42MTcgNy4wODUsOTMuNDM3IEw4Mi4zNTgsNDkuODg2IEM4NC4xODEsNDguODA4IDg0Ljk2LDQ1Ljk3MSA4NS4yOTIsNDMuNzggQzg2LjQ2NiwzNi4wNDkgODcuMDIzLDExLjA4NSA4NS4wMjQsNC4wMDggQzg0Ljg0NiwzLjM3NyA4NC41NTEsMi45NzYgODQuMTQ4LDIuODE2IEM4My42NjQsMi42MjMgODIuOTgyLDIuNzY0IDgyLjIyNywzLjIxMyBMODIuMTkzLDMuMjM0IEM4MS43OTEsMy40NjYgNy4zMzUsNDYuNDUyIDcuMzM1LDQ2LjQ1MiBDNy4zMDQsNDYuNDY5IDUuMzQ2LDQ3LjUyMSA0LjY2OSw1MS40NzEgQzQuNjYyLDUxLjUzIDMuNzYxLDU4LjU1NiAzLjc3NSw3MS4xNzMgQzMuNzksODQuMzI4IDQuMTYxLDg4LjUyNCA0LjkzNiw5Mi40NzYgQzUuMDI2LDkyLjkzNyA1LjQxMiw5My40NTkgNS45NzMsOTMuNjE1IEM2LjA4Nyw5My42NCA2LjE1OCw5My42NTIgNi4xNjksOTMuNjU0IEw2LjE3LDkzLjY1NCBMNi4xNyw5My42NTQgWiIgaWQ9IkZpbGwtMTIiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4zMTcsNjguOTgyIEM3LjgwNiw2OC43MDEgOC4yMDIsNjguOTI2IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNi44MjksNzEuMjk0IDYuNDMzLDcxLjA2OSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIiBpZD0iRmlsbC0xMyIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjkyLDcxLjEzMyBDNi42MzEsNzEuMTMzIDYuNDMzLDcwLjkwNSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIEM3LjQ2LDY4LjkgNy41OTUsNjguODYxIDcuNzE0LDY4Ljg2MSBDOC4wMDMsNjguODYxIDguMjAyLDY5LjA5IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNy4xNzQsNzEuMDk0IDcuMDM5LDcxLjEzMyA2LjkyLDcxLjEzMyBNNy43MTQsNjguNjc0IEM3LjU1Nyw2OC42NzQgNy4zOTIsNjguNzIzIDcuMjI0LDY4LjgyMSBDNi42NzYsNjkuMTM4IDYuMjQ2LDY5Ljg3OSA2LjI0Niw3MC41MDggQzYuMjQ2LDcwLjk5NCA2LjUxNyw3MS4zMiA2LjkyLDcxLjMyIEM3LjA3OCw3MS4zMiA3LjI0Myw3MS4yNzEgNy40MTEsNzEuMTc0IEM3Ljk1OSw3MC44NTcgOC4zODksNzAuMTE3IDguMzg5LDY5LjQ4NyBDOC4zODksNjkuMDAxIDguMTE3LDY4LjY3NCA3LjcxNCw2OC42NzQiIGlkPSJGaWxsLTE0IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYuOTIsNzAuOTQ3IEM2LjY0OSw3MC45NDcgNi42MjEsNzAuNjQgNi42MjEsNzAuNTA4IEM2LjYyMSw3MC4wMTcgNi45ODIsNjkuMzkyIDcuNDExLDY5LjE0NSBDNy41MjEsNjkuMDgyIDcuNjI1LDY5LjA0OSA3LjcxNCw2OS4wNDkgQzcuOTg2LDY5LjA0OSA4LjAxNSw2OS4zNTUgOC4wMTUsNjkuNDg3IEM4LjAxNSw2OS45NzggNy42NTIsNzAuNjAzIDcuMjI0LDcwLjg1MSBDNy4xMTUsNzAuOTE0IDcuMDEsNzAuOTQ3IDYuOTIsNzAuOTQ3IE03LjcxNCw2OC44NjEgQzcuNTk1LDY4Ljg2MSA3LjQ2LDY4LjkgNy4zMTcsNjguOTgyIEM2LjgyOSw2OS4yNjUgNi40MzMsNjkuOTQ4IDYuNDMzLDcwLjUwOCBDNi40MzMsNzAuOTA1IDYuNjMxLDcxLjEzMyA2LjkyLDcxLjEzMyBDNy4wMzksNzEuMTMzIDcuMTc0LDcxLjA5NCA3LjMxNyw3MS4wMTIgQzcuODA2LDcwLjczIDguMjAyLDcwLjA0NyA4LjIwMiw2OS40ODcgQzguMjAyLDY5LjA5IDguMDAzLDY4Ljg2MSA3LjcxNCw2OC44NjEiIGlkPSJGaWxsLTE1IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTcuNDQ0LDg1LjM1IEM3LjcwOCw4NS4xOTggNy45MjEsODUuMzE5IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuOTI1IDcuNzA4LDg2LjI5MiA3LjQ0NCw4Ni40NDQgQzcuMTgxLDg2LjU5NyA2Ljk2Nyw4Ni40NzUgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IiBpZD0iRmlsbC0xNiIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LjIzLDg2LjUxIEM3LjA3NCw4Ni41MSA2Ljk2Nyw4Ni4zODcgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IEM3LjUyMSw4NS4zMDUgNy41OTQsODUuMjg0IDcuNjU4LDg1LjI4NCBDNy44MTQsODUuMjg0IDcuOTIxLDg1LjQwOCA3LjkyMSw4NS42MjIgQzcuOTIxLDg1LjkyNSA3LjcwOCw4Ni4yOTIgNy40NDQsODYuNDQ0IEM3LjM2Nyw4Ni40ODkgNy4yOTQsODYuNTEgNy4yMyw4Ni41MSBNNy42NTgsODUuMDk4IEM3LjU1OCw4NS4wOTggNy40NTUsODUuMTI3IDcuMzUxLDg1LjE4OCBDNy4wMzEsODUuMzczIDYuNzgxLDg1LjgwNiA2Ljc4MSw4Ni4xNzMgQzYuNzgxLDg2LjQ4MiA2Ljk2Niw4Ni42OTcgNy4yMyw4Ni42OTcgQzcuMzMsODYuNjk3IDcuNDMzLDg2LjY2NiA3LjUzOCw4Ni42MDcgQzcuODU4LDg2LjQyMiA4LjEwOCw4NS45ODkgOC4xMDgsODUuNjIyIEM4LjEwOCw4NS4zMTMgNy45MjMsODUuMDk4IDcuNjU4LDg1LjA5OCIgaWQ9IkZpbGwtMTciIGZpbGw9IiM4MDk3QTIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4yMyw4Ni4zMjIgTDcuMTU0LDg2LjE3MyBDNy4xNTQsODUuOTM4IDcuMzMzLDg1LjYyOSA3LjUzOCw4NS41MTIgTDcuNjU4LDg1LjQ3MSBMNy43MzQsODUuNjIyIEM3LjczNCw4NS44NTYgNy41NTUsODYuMTY0IDcuMzUxLDg2LjI4MiBMNy4yMyw4Ni4zMjIgTTcuNjU4LDg1LjI4NCBDNy41OTQsODUuMjg0IDcuNTIxLDg1LjMwNSA3LjQ0NCw4NS4zNSBDNy4xODEsODUuNTAyIDYuOTY3LDg1Ljg3MSA2Ljk2Nyw4Ni4xNzMgQzYuOTY3LDg2LjM4NyA3LjA3NCw4Ni41MSA3LjIzLDg2LjUxIEM3LjI5NCw4Ni41MSA3LjM2Nyw4Ni40ODkgNy40NDQsODYuNDQ0IEM3LjcwOCw4Ni4yOTIgNy45MjEsODUuOTI1IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuNDA4IDcuODE0LDg1LjI4NCA3LjY1OCw4NS4yODQiIGlkPSJGaWxsLTE4IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTc3LjI3OCw3Ljc2OSBMNzcuMjc4LDUxLjQzNiBMMTAuMjA4LDkwLjE2IEwxMC4yMDgsNDYuNDkzIEw3Ny4yNzgsNy43NjkiIGlkPSJGaWxsLTE5IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLjA4Myw5MC4zNzUgTDEwLjA4Myw0Ni40MjEgTDEwLjE0Niw0Ni4zODUgTDc3LjQwMyw3LjU1NCBMNzcuNDAzLDUxLjUwOCBMNzcuMzQxLDUxLjU0NCBMMTAuMDgzLDkwLjM3NSBMMTAuMDgzLDkwLjM3NSBaIE0xMC4zMzMsNDYuNTY0IEwxMC4zMzMsODkuOTQ0IEw3Ny4xNTQsNTEuMzY1IEw3Ny4xNTQsNy45ODUgTDEwLjMzMyw0Ni41NjQgTDEwLjMzMyw0Ni41NjQgWiIgaWQ9IkZpbGwtMjAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMjUuNzM3LDg4LjY0NyBMMTE4LjA5OCw5MS45ODEgTDExOC4wOTgsODQgTDEwNi42MzksODguNzEzIEwxMDYuNjM5LDk2Ljk4MiBMOTksMTAwLjMxNSBMMTEyLjM2OSwxMDMuOTYxIEwxMjUuNzM3LDg4LjY0NyIgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTIiIGZpbGw9IiM0NTVBNjQiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},oe.prototype.show=function(e){this.root=e,e.appendChild(this.dialog),this.dialog.querySelector("#"+this.selectedKey).checked=!0,this.dialog.style.display="block"},oe.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},oe.prototype.getCurrentViewer=function(){return Q.Viewers[this.selectedKey]},oe.prototype.getSelectedKey_=function(){var e=this.dialog.querySelector("input[name=field]:checked");return e?e.id:null},oe.prototype.onChange=function(e){this.onChangeCallbacks_.push(e)},oe.prototype.fireOnChange_=function(e){for(var t=0;t<this.onChangeCallbacks_.length;t++)this.onChangeCallbacks_[t](e)},oe.prototype.onSave_=function(){if(this.selectedKey=this.getSelectedKey_(),this.selectedKey&&Q.Viewers[this.selectedKey]){this.fireOnChange_(Q.Viewers[this.selectedKey]);try{localStorage.setItem("WEBVR_CARDBOARD_VIEWER",this.selectedKey)}catch(e){console.error("Failed to save viewer profile: %s",e)}this.hide()}else console.error("ViewerSelector.onSave_: this should never happen!")},oe.prototype.createDialog_=function(e){var t=document.createElement("div");t.classList.add("webvr-polyfill-viewer-selector"),t.style.display="none";var n=document.createElement("div");(o=n.style).position="fixed",o.left=0,o.top=0,o.width="100%",o.height="100%",o.background="rgba(0, 0, 0, 0.3)",n.addEventListener("click",this.hide.bind(this));var r=document.createElement("div"),o=r.style;for(var i in o.boxSizing="border-box",o.position="fixed",o.top="24px",o.left="50%",o.marginLeft="-140px",o.width="280px",o.padding="24px",o.overflow="hidden",o.background="#fafafa",o.fontFamily="'Roboto', sans-serif",o.boxShadow="0px 5px 20px #666",r.appendChild(this.createH1_("Select your viewer")),e)r.appendChild(this.createChoice_(i,e[i].label));return r.appendChild(this.createButton_("Save",this.onSave_.bind(this))),t.appendChild(n),t.appendChild(r),t},oe.prototype.createH1_=function(e){var t=document.createElement("h1"),n=t.style;return n.color="black",n.fontSize="20px",n.fontWeight="bold",n.marginTop=0,n.marginBottom="24px",t.innerHTML=e,t},oe.prototype.createChoice_=function(e,t){var n=document.createElement("div");n.style.marginTop="8px",n.style.color="black";var r=document.createElement("input");r.style.fontSize="30px",r.setAttribute("id",e),r.setAttribute("type","radio"),r.setAttribute("value",e),r.setAttribute("name","field");var o=document.createElement("label");return o.style.marginLeft="4px",o.setAttribute("for",e),o.innerHTML=t,n.appendChild(r),n.appendChild(o),n},oe.prototype.createButton_=function(e,t){var n=document.createElement("button");n.innerHTML=e;var r=n.style;return r.float="right",r.textTransform="uppercase",r.color="#1094f7",r.fontSize="14px",r.letterSpacing=0,r.border=0,r.background="none",r.marginTop="16px",n.addEventListener("click",t),n},"undefined"!=typeof window?window:void 0!==t||"undefined"!=typeof self&&self;var ie,ae=(ie=function(e,t){return function(e,t){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),i="undefined"!=typeof navigator&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("playsinline",""),this.noSleepVideo.setAttribute("src",o),this.noSleepVideo.addEventListener("timeupdate",(function(e){this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())}).bind(this)))}return r(e,[{key:"enable",value:function(){i?(this.disable(),this.noSleepTimer=window.setInterval((function(){window.location.href="/",window.setTimeout(window.stop,0)}),15e3)):this.noSleepVideo.play()}},{key:"disable",value:function(){i?this.noSleepTimer&&(window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()}}]),e}();e.exports=a},function(e,t,n){e.exports="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQADQGgcIQADQGgcAAAACQGeYUQn/wALKCEAA0BoHAAAAAkBnmNEJ/8ACykhAANAaBwhAANAaBwAAAANQZpoNExDP/6plgAMuSEAA0BoHAAAAAtBnoZFESwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBnqVEJ/8ACykhAANAaBwAAAAJAZ6nRCf/AAsoIQADQGgcIQADQGgcAAAADUGarDRMQz/+qZYADLghAANAaBwAAAALQZ7KRRUsK/8ACPkhAANAaBwAAAAJAZ7pRCf/AAsoIQADQGgcIQADQGgcAAAACQGe60Qn/wALKCEAA0BoHAAAAA1BmvA0TEM//qmWAAy5IQADQGgcIQADQGgcAAAAC0GfDkUVLCv/AAj5IQADQGgcAAAACQGfLUQn/wALKSEAA0BoHCEAA0BoHAAAAAkBny9EJ/8ACyghAANAaBwAAAANQZs0NExDP/6plgAMuCEAA0BoHAAAAAtBn1JFFSwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBn3FEJ/8ACyghAANAaBwAAAAJAZ9zRCf/AAsoIQADQGgcIQADQGgcAAAADUGbeDRMQz/+qZYADLkhAANAaBwAAAALQZ+WRRUsK/8ACPghAANAaBwhAANAaBwAAAAJAZ+1RCf/AAspIQADQGgcAAAACQGft0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bm7w0TEM//qmWAAy4IQADQGgcAAAAC0Gf2kUVLCv/AAj5IQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHAAAAAkBn/tEJ/8ACykhAANAaBwAAAANQZvgNExDP/6plgAMuSEAA0BoHCEAA0BoHAAAAAtBnh5FFSwr/wAI+CEAA0BoHAAAAAkBnj1EJ/8ACyghAANAaBwhAANAaBwAAAAJAZ4/RCf/AAspIQADQGgcAAAADUGaJDRMQz/+qZYADLghAANAaBwAAAALQZ5CRRUsK/8ACPkhAANAaBwhAANAaBwAAAAJAZ5hRCf/AAsoIQADQGgcAAAACQGeY0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bmmg0TEM//qmWAAy5IQADQGgcAAAAC0GehkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGepUQn/wALKSEAA0BoHAAAAAkBnqdEJ/8ACyghAANAaBwAAAANQZqsNExDP/6plgAMuCEAA0BoHCEAA0BoHAAAAAtBnspFFSwr/wAI+SEAA0BoHAAAAAkBnulEJ/8ACyghAANAaBwhAANAaBwAAAAJAZ7rRCf/AAsoIQADQGgcAAAADUGa8DRMQz/+qZYADLkhAANAaBwhAANAaBwAAAALQZ8ORRUsK/8ACPkhAANAaBwAAAAJAZ8tRCf/AAspIQADQGgcIQADQGgcAAAACQGfL0Qn/wALKCEAA0BoHAAAAA1BmzQ0TEM//qmWAAy4IQADQGgcAAAAC0GfUkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGfcUQn/wALKCEAA0BoHAAAAAkBn3NEJ/8ACyghAANAaBwhAANAaBwAAAANQZt4NExC//6plgAMuSEAA0BoHAAAAAtBn5ZFFSwr/wAI+CEAA0BoHCEAA0BoHAAAAAkBn7VEJ/8ACykhAANAaBwAAAAJAZ+3RCf/AAspIQADQGgcAAAADUGbuzRMQn/+nhAAYsAhAANAaBwhAANAaBwAAAAJQZ/aQhP/AAspIQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHAAACiFtb292AAAAbG12aGQAAAAA1YCCX9WAgl8AAAPoAAAH/AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAGGlvZHMAAAAAEICAgAcAT////v7/AAAF+XRyYWsAAABcdGtoZAAAAAPVgIJf1YCCXwAAAAEAAAAAAAAH0AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAygAAAMoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAB9AAABdwAAEAAAAABXFtZGlhAAAAIG1kaGQAAAAA1YCCX9WAgl8AAV+QAAK/IFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAUcbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAE3HN0YmwAAACYc3RzZAAAAAAAAAABAAAAiGF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAygDKAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAyYXZjQwFNQCj/4QAbZ01AKOyho3ySTUBAQFAAAAMAEAAr8gDxgxlgAQAEaO+G8gAAABhzdHRzAAAAAAAAAAEAAAA8AAALuAAAABRzdHNzAAAAAAAAAAEAAAABAAAB8GN0dHMAAAAAAAAAPAAAAAEAABdwAAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAAC7gAAAAAQAAF3AAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAEEc3RzegAAAAAAAAAAAAAAPAAAAzQAAAAQAAAADQAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAANAAAADQAAAQBzdGNvAAAAAAAAADwAAAAwAAADZAAAA3QAAAONAAADoAAAA7kAAAPQAAAD6wAAA/4AAAQXAAAELgAABEMAAARcAAAEbwAABIwAAAShAAAEugAABM0AAATkAAAE/wAABRIAAAUrAAAFQgAABV0AAAVwAAAFiQAABaAAAAW1AAAFzgAABeEAAAX+AAAGEwAABiwAAAY/AAAGVgAABnEAAAaEAAAGnQAABrQAAAbPAAAG4gAABvUAAAcSAAAHJwAAB0AAAAdTAAAHcAAAB4UAAAeeAAAHsQAAB8gAAAfjAAAH9gAACA8AAAgmAAAIQQAACFQAAAhnAAAIhAAACJcAAAMsdHJhawAAAFx0a2hkAAAAA9WAgl/VgIJfAAAAAgAAAAAAAAf8AAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAACsm1kaWEAAAAgbWRoZAAAAADVgIJf1YCCXwAArEQAAWAAVcQAAAAAACdoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU3RlcmVvAAAAAmNtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAZ3N0c2QAAAAAAAAAAQAAAFdtcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAArEQAAAAAADNlc2RzAAAAAAOAgIAiAAIABICAgBRAFQAAAAADDUAAAAAABYCAgAISEAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAABYAAAEAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAAGAAAAWAAAAXBzdGNvAAAAAAAAAFgAAAOBAAADhwAAA5oAAAOtAAADswAAA8oAAAPfAAAD5QAAA/gAAAQLAAAEEQAABCgAAAQ9AAAEUAAABFYAAARpAAAEgAAABIYAAASbAAAErgAABLQAAATHAAAE3gAABPMAAAT5AAAFDAAABR8AAAUlAAAFPAAABVEAAAVXAAAFagAABX0AAAWDAAAFmgAABa8AAAXCAAAFyAAABdsAAAXyAAAF+AAABg0AAAYgAAAGJgAABjkAAAZQAAAGZQAABmsAAAZ+AAAGkQAABpcAAAauAAAGwwAABskAAAbcAAAG7wAABwYAAAcMAAAHIQAABzQAAAc6AAAHTQAAB2QAAAdqAAAHfwAAB5IAAAeYAAAHqwAAB8IAAAfXAAAH3QAAB/AAAAgDAAAICQAACCAAAAg1AAAIOwAACE4AAAhhAAAIeAAACH4AAAiRAAAIpAAACKoAAAiwAAAItgAACLwAAAjCAAAAFnVkdGEAAAAObmFtZVN0ZXJlbwAAAHB1ZHRhAAAAaG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAO2lsc3QAAAAzqXRvbwAAACtkYXRhAAAAAQAAAABIYW5kQnJha2UgMC4xMC4yIDIwMTUwNjExMDA="}])}(t={exports:{}}),t.exports}())&&ie.__esModule&&Object.prototype.hasOwnProperty.call(ie,"default")?ie.default:ie,se=1e3,le=[0,0,.5,1],ue=[.5,0,.5,1],ce=window.requestAnimationFrame,de=window.cancelAnimationFrame;function ge(e){Object.defineProperties(this,{hasPosition:{writable:!1,enumerable:!0,value:e.hasPosition},hasExternalDisplay:{writable:!1,enumerable:!0,value:e.hasExternalDisplay},canPresent:{writable:!1,enumerable:!0,value:e.canPresent},maxLayers:{writable:!1,enumerable:!0,value:e.maxLayers},hasOrientation:{enumerable:!0,get:function(){return I("VRDisplayCapabilities.prototype.hasOrientation","VRDisplay.prototype.getFrameData"),e.hasOrientation}}})}function pe(e){var t=!("wakelock"in(e=e||{}))||e.wakelock;this.isPolyfilled=!0,this.displayId=se++,this.displayName="",this.depthNear=.01,this.depthFar=1e4,this.isPresenting=!1,Object.defineProperty(this,"isConnected",{get:function(){return I("VRDisplay.prototype.isConnected","VRDisplayCapabilities.prototype.hasExternalDisplay"),!1}}),this.capabilities=new ge({hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1}),this.stageParameters=null,this.waitingForPresent_=!1,this.layer_=null,this.originalParent_=null,this.fullscreenElement_=null,this.fullscreenWrapper_=null,this.fullscreenElementCachedStyle_=null,this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null,t&&A()&&(this.wakelock_=new ae)}pe.prototype.getFrameData=function(e){return D(e,this._getPose(),this)},pe.prototype.getPose=function(){return I("VRDisplay.prototype.getPose","VRDisplay.prototype.getFrameData"),this._getPose()},pe.prototype.resetPose=function(){return I("VRDisplay.prototype.resetPose"),this._resetPose()},pe.prototype.getImmediatePose=function(){return I("VRDisplay.prototype.getImmediatePose","VRDisplay.prototype.getFrameData"),this._getPose()},pe.prototype.requestAnimationFrame=function(e){return ce(e)},pe.prototype.cancelAnimationFrame=function(e){return de(e)},pe.prototype.wrapForFullscreen=function(e){if(a())return e;if(!this.fullscreenWrapper_){this.fullscreenWrapper_=document.createElement("div");var t=["height: "+Math.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.fullscreenWrapper_.setAttribute("style",t.join("; ")+";"),this.fullscreenWrapper_.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.fullscreenElement_==e)return this.fullscreenWrapper_;if(this.fullscreenElement_&&(this.originalParent_?this.originalParent_.appendChild(this.fullscreenElement_):this.fullscreenElement_.parentElement.removeChild(this.fullscreenElement_)),this.fullscreenElement_=e,this.originalParent_=e.parentElement,this.originalParent_||document.body.appendChild(e),!this.fullscreenWrapper_.parentElement){var n=this.fullscreenElement_.parentElement;n.insertBefore(this.fullscreenWrapper_,this.fullscreenElement_),n.removeChild(this.fullscreenElement_)}this.fullscreenWrapper_.insertBefore(this.fullscreenElement_,this.fullscreenWrapper_.firstChild),this.fullscreenElementCachedStyle_=this.fullscreenElement_.getAttribute("style");var r=this;return function(){if(r.fullscreenElement_){var e=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];r.fullscreenElement_.setAttribute("style",e.join("; ")+";")}}(),this.fullscreenWrapper_},pe.prototype.removeFullscreenWrapper=function(){if(this.fullscreenElement_){var e=this.fullscreenElement_;this.fullscreenElementCachedStyle_?e.setAttribute("style",this.fullscreenElementCachedStyle_):e.removeAttribute("style"),this.fullscreenElement_=null,this.fullscreenElementCachedStyle_=null;var t=this.fullscreenWrapper_.parentElement;return this.fullscreenWrapper_.removeChild(e),this.originalParent_===t?t.insertBefore(e,this.fullscreenWrapper_):this.originalParent_&&this.originalParent_.appendChild(e),t.removeChild(this.fullscreenWrapper_),e}},pe.prototype.requestPresent=function(e){var t=this.isPresenting,n=this;return e instanceof Array||(I("VRDisplay.prototype.requestPresent with non-array argument","an array of VRLayers as the first argument"),e=[e]),new Promise((function(r,o){if(n.capabilities.canPresent)if(0==e.length||e.length>n.capabilities.maxLayers)o(new Error("Invalid number of layers."));else{var i=e[0];if(i.source){var l=i.leftBounds||le,u=i.rightBounds||ue;if(t){var c=n.layer_;c.source!==i.source&&(c.source=i.source);for(var d=0;d<4;d++)c.leftBounds[d]=l[d],c.rightBounds[d]=u[d];return n.wrapForFullscreen(n.layer_.source),n.updatePresent_(),void r()}if(n.layer_={predistorted:i.predistorted,source:i.source,leftBounds:l.slice(0),rightBounds:u.slice(0)},n.waitingForPresent_=!1,n.layer_&&n.layer_.source){var g=n.wrapForFullscreen(n.layer_.source);n.addFullscreenListeners_(g,(function(){var e=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;n.isPresenting=g===e,n.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch((function(e){console.error("screen.orientation.lock() failed due to",e.message)})),n.waitingForPresent_=!1,n.beginPresent_(),r()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),n.removeFullscreenWrapper(),n.disableWakeLock(),n.endPresent_(),n.removeFullscreenListeners_()),n.fireVRDisplayPresentChange_()}),(function(){n.waitingForPresent_&&(n.removeFullscreenWrapper(),n.removeFullscreenListeners_(),n.disableWakeLock(),n.waitingForPresent_=!1,n.isPresenting=!1,o(new Error("Unable to present.")))})),function(e){if(s())return!1;if(e.requestFullscreen)e.requestFullscreen();else if(e.webkitRequestFullscreen)e.webkitRequestFullscreen();else if(e.mozRequestFullScreen)e.mozRequestFullScreen();else{if(!e.msRequestFullscreen)return!1;e.msRequestFullscreen()}return!0}(g)?(n.enableWakeLock(),n.waitingForPresent_=!0):(a()||s())&&(n.enableWakeLock(),n.isPresenting=!0,n.beginPresent_(),n.fireVRDisplayPresentChange_(),r())}n.waitingForPresent_||a()||(h(),o(new Error("Unable to present.")))}else r()}else o(new Error("VRDisplay is not capable of presenting."))}))},pe.prototype.exitPresent=function(){var e=this.isPresenting,t=this;return this.isPresenting=!1,this.layer_=null,this.disableWakeLock(),new Promise((function(n,r){e?(!h()&&a()&&(t.endPresent_(),t.fireVRDisplayPresentChange_()),s()&&(t.removeFullscreenWrapper(),t.removeFullscreenListeners_(),t.endPresent_(),t.fireVRDisplayPresentChange_()),n()):r(new Error("Was not presenting to VRDisplay."))}))},pe.prototype.getLayers=function(){return this.layer_?[this.layer_]:[]},pe.prototype.fireVRDisplayPresentChange_=function(){var e=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});window.dispatchEvent(e)},pe.prototype.fireVRDisplayConnect_=function(){var e=new CustomEvent("vrdisplayconnect",{detail:{display:this}});window.dispatchEvent(e)},pe.prototype.addFullscreenListeners_=function(e,t,n){this.removeFullscreenListeners_(),this.fullscreenEventTarget_=e,this.fullscreenChangeHandler_=t,this.fullscreenErrorHandler_=n,t&&(document.fullscreenEnabled?e.addEventListener("fullscreenchange",t,!1):document.webkitFullscreenEnabled?e.addEventListener("webkitfullscreenchange",t,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenchange",t,!1):document.msFullscreenEnabled&&e.addEventListener("msfullscreenchange",t,!1)),n&&(document.fullscreenEnabled?e.addEventListener("fullscreenerror",n,!1):document.webkitFullscreenEnabled?e.addEventListener("webkitfullscreenerror",n,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenerror",n,!1):document.msFullscreenEnabled&&e.addEventListener("msfullscreenerror",n,!1))},pe.prototype.removeFullscreenListeners_=function(){if(this.fullscreenEventTarget_){var e=this.fullscreenEventTarget_;if(this.fullscreenChangeHandler_){var t=this.fullscreenChangeHandler_;e.removeEventListener("fullscreenchange",t,!1),e.removeEventListener("webkitfullscreenchange",t,!1),document.removeEventListener("mozfullscreenchange",t,!1),e.removeEventListener("msfullscreenchange",t,!1)}if(this.fullscreenErrorHandler_){var n=this.fullscreenErrorHandler_;e.removeEventListener("fullscreenerror",n,!1),e.removeEventListener("webkitfullscreenerror",n,!1),document.removeEventListener("mozfullscreenerror",n,!1),e.removeEventListener("msfullscreenerror",n,!1)}this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null}},pe.prototype.enableWakeLock=function(){this.wakelock_&&this.wakelock_.enable()},pe.prototype.disableWakeLock=function(){this.wakelock_&&this.wakelock_.disable()},pe.prototype.beginPresent_=function(){},pe.prototype.endPresent_=function(){},pe.prototype.submitFrame=function(e){},pe.prototype.getEyeParameters=function(e){return null};var fe={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1};function he(e){var t=y({},fe);e=y(t,e||{}),pe.call(this,{wakelock:e.MOBILE_WAKE_LOCK}),this.config=e,this.displayName="Cardboard VRDisplay",this.capabilities=new ge({hasPosition:!1,hasOrientation:!0,hasExternalDisplay:!1,canPresent:!0,maxLayers:1}),this.stageParameters=null,this.bufferScale_=this.config.BUFFER_SCALE,this.poseSensor_=new ne(this.config),this.distorter_=null,this.cardboardUI_=null,this.dpdb_=new H(this.config.DPDB_URL,this.onDeviceParamsUpdated_.bind(this)),this.deviceInfo_=new Q(this.dpdb_.getDeviceParams(),e.ADDITIONAL_VIEWERS),this.viewerSelector_=new oe(e.DEFAULT_VIEWER),this.viewerSelector_.onChange(this.onViewerChanged_.bind(this)),this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer()),this.config.ROTATE_INSTRUCTIONS_DISABLED||(this.rotateInstructions_=new re),a()&&window.addEventListener("resize",this.onResize_.bind(this))}return(he.prototype=Object.create(pe.prototype))._getPose=function(){return{position:null,orientation:this.poseSensor_.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},he.prototype._resetPose=function(){this.poseSensor_.resetPose&&this.poseSensor_.resetPose()},he.prototype._getFieldOfView=function(e){var t;if("left"==e)t=this.deviceInfo_.getFieldOfViewLeftEye();else{if("right"!=e)return console.error("Invalid eye provided: %s",e),null;t=this.deviceInfo_.getFieldOfViewRightEye()}return t},he.prototype._getEyeOffset=function(e){var t;if("left"==e)t=[.5*-this.deviceInfo_.viewer.interLensDistance,0,0];else{if("right"!=e)return console.error("Invalid eye provided: %s",e),null;t=[.5*this.deviceInfo_.viewer.interLensDistance,0,0]}return t},he.prototype.getEyeParameters=function(e){var t=this._getEyeOffset(e),n=this._getFieldOfView(e),r={offset:t,renderWidth:.5*this.deviceInfo_.device.width*this.bufferScale_,renderHeight:this.deviceInfo_.device.height*this.bufferScale_};return Object.defineProperty(r,"fieldOfView",{enumerable:!0,get:function(){return I("VRFieldOfView","VRFrameData's projection matrices"),n}}),r},he.prototype.onDeviceParamsUpdated_=function(e){this.config.DEBUG&&console.log("DPDB reported that device params were updated."),this.deviceInfo_.updateDeviceParams(e),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_)},he.prototype.updateBounds_=function(){this.layer_&&this.distorter_&&(this.layer_.leftBounds||this.layer_.rightBounds)&&this.distorter_.setTextureBounds(this.layer_.leftBounds,this.layer_.rightBounds)},he.prototype.beginPresent_=function(){var e=this.layer_.source.getContext("webgl");e||(e=this.layer_.source.getContext("experimental-webgl")),e||(e=this.layer_.source.getContext("webgl2")),e&&(this.layer_.predistorted?this.config.CARDBOARD_UI_DISABLED||(e.canvas.width=p()*this.bufferScale_,e.canvas.height=f()*this.bufferScale_,this.cardboardUI_=new S(e)):(this.config.CARDBOARD_UI_DISABLED||(this.cardboardUI_=new S(e)),this.distorter_=new v(e,this.cardboardUI_,this.config.BUFFER_SCALE,this.config.DIRTY_SUBMIT_FRAME_BINDINGS),this.distorter_.updateDeviceInfo(this.deviceInfo_)),this.cardboardUI_&&this.cardboardUI_.listen((function(e){this.viewerSelector_.show(this.layer_.source.parentElement),e.stopPropagation(),e.preventDefault()}).bind(this),(function(e){this.exitPresent(),e.stopPropagation(),e.preventDefault()}).bind(this)),this.rotateInstructions_&&(g()&&A()?this.rotateInstructions_.showTemporarily(3e3,this.layer_.source.parentElement):this.rotateInstructions_.update()),this.orientationHandler=this.onOrientationChange_.bind(this),window.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.updateBounds_.bind(this),window.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.fireVRDisplayDeviceParamsChange_())},he.prototype.endPresent_=function(){this.distorter_&&(this.distorter_.destroy(),this.distorter_=null),this.cardboardUI_&&(this.cardboardUI_.destroy(),this.cardboardUI_=null),this.rotateInstructions_&&this.rotateInstructions_.hide(),this.viewerSelector_.hide(),window.removeEventListener("orientationchange",this.orientationHandler),window.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},he.prototype.updatePresent_=function(){this.endPresent_(),this.beginPresent_()},he.prototype.submitFrame=function(e){if(this.distorter_)this.updateBounds_(),this.distorter_.submitFrame();else if(this.cardboardUI_&&this.layer_){var t=this.layer_.source.getContext("webgl").canvas;t.width==this.lastWidth&&t.height==this.lastHeight||this.cardboardUI_.onResize(),this.lastWidth=t.width,this.lastHeight=t.height,this.cardboardUI_.render()}},he.prototype.onOrientationChange_=function(e){this.viewerSelector_.hide(),this.rotateInstructions_&&this.rotateInstructions_.update(),this.onResize_()},he.prototype.onResize_=function(e){if(this.layer_){var t=this.layer_.source.getContext("webgl");t.canvas.setAttribute("style",["position: absolute","top: 0","left: 0","width: 100vw","height: 100vh","border: 0","margin: 0","padding: 0px","box-sizing: content-box"].join("; ")+";"),T(t.canvas)}},he.prototype.onViewerChanged_=function(e){this.deviceInfo_.setViewer(e),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_),this.fireVRDisplayDeviceParamsChange_()},he.prototype.fireVRDisplayDeviceParamsChange_=function(){var e=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.deviceInfo_}});window.dispatchEvent(e)},he.VRFrameData=function(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null},he.VRDisplay=pe,he}()}(n={exports:{}}),n.exports}(),a=(e=i)&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,s={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",PROVIDE_MOBILE_VRDISPLAY:!0,GET_VR_DISPLAYS_TIMEOUT:1e3,MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1};function l(e){this.config=o(o({},s),e),this.polyfillDisplays=[],this.enabled=!1,this.hasNative="getVRDisplays"in navigator,this.native={},this.native.getVRDisplays=navigator.getVRDisplays,this.native.VRFrameData=window.VRFrameData,this.native.VRDisplay=window.VRDisplay,(!this.hasNative||this.config.PROVIDE_MOBILE_VRDISPLAY&&n())&&(this.enable(),this.getVRDisplays().then((function(e){e&&e[0]&&e[0].fireVRDisplayConnect_&&e[0].fireVRDisplayConnect_()})))}l.prototype.getPolyfillDisplays=function(){if(this._polyfillDisplaysPopulated)return this.polyfillDisplays;if(n()){var e=new a({ADDITIONAL_VIEWERS:this.config.ADDITIONAL_VIEWERS,DEFAULT_VIEWER:this.config.DEFAULT_VIEWER,MOBILE_WAKE_LOCK:this.config.MOBILE_WAKE_LOCK,DEBUG:this.config.DEBUG,DPDB_URL:this.config.DPDB_URL,CARDBOARD_UI_DISABLED:this.config.CARDBOARD_UI_DISABLED,K_FILTER:this.config.K_FILTER,PREDICTION_TIME_S:this.config.PREDICTION_TIME_S,ROTATE_INSTRUCTIONS_DISABLED:this.config.ROTATE_INSTRUCTIONS_DISABLED,YAW_ONLY:this.config.YAW_ONLY,BUFFER_SCALE:this.config.BUFFER_SCALE,DIRTY_SUBMIT_FRAME_BINDINGS:this.config.DIRTY_SUBMIT_FRAME_BINDINGS});this.polyfillDisplays.push(e)}return this._polyfillDisplaysPopulated=!0,this.polyfillDisplays},l.prototype.enable=function(){if(this.enabled=!0,this.hasNative&&this.native.VRFrameData){var e=this.native.VRFrameData,t=new this.native.VRFrameData,n=this.native.VRDisplay.prototype.getFrameData;window.VRDisplay.prototype.getFrameData=function(o){o instanceof e?n.call(this,o):(n.call(this,t),o.pose=t.pose,r(t.leftProjectionMatrix,o.leftProjectionMatrix),r(t.rightProjectionMatrix,o.rightProjectionMatrix),r(t.leftViewMatrix,o.leftViewMatrix),r(t.rightViewMatrix,o.rightViewMatrix))}}navigator.getVRDisplays=this.getVRDisplays.bind(this),window.VRDisplay=a.VRDisplay,window.VRFrameData=a.VRFrameData},l.prototype.getVRDisplays=function(){var e,t=this,n=this.config;if(!this.hasNative)return Promise.resolve(this.getPolyfillDisplays());var r,o=this.native.getVRDisplays.call(navigator),i=new Promise((function(t){e=setTimeout((function(){console.warn("Native WebVR implementation detected, but `getVRDisplays()` failed to resolve. Falling back to polyfill."),t([])}),n.GET_VR_DISPLAYS_TIMEOUT)}));return(r=[o,i],Promise.race?Promise.race(r):new Promise((function(e,t){for(var n=0;n<r.length;n++)r[n].then(e,t)}))).then((function(n){return clearTimeout(e),n.length>0?n:t.getPolyfillDisplays()}))},l.version="0.10.8",l.VRFrameData=a.VRFrameData,l.VRDisplay=a.VRDisplay;var u=Object.freeze({default:l}),c=u&&l||u;return void 0!==t&&t.window&&(t.document||(t.document=t.window.document),t.navigator||(t.navigator=t.window.navigator)),c},e.exports=r()},PDX0:function(e,t){(function(t){e.exports=t}).call(this,{})},WyB7:function(e,t){e.exports="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkPolyDataVS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n\nattribute vec4 vertexDC;\n\nvarying vec3 vertexVCVSOutput;\nuniform mat4 PCVCMatrix;\n\nuniform float dcxmin;\nuniform float dcxmax;\nuniform float dcymin;\nuniform float dcymax;\n\nvoid main()\n{\n  // dcsmall is the device coords reduced to the\n  // x y area covered by the volume\n  vec4 dcsmall = vec4(\n    dcxmin + 0.5 * (vertexDC.x + 1.0) * (dcxmax - dcxmin),\n    dcymin + 0.5 * (vertexDC.y + 1.0) * (dcymax - dcymin),\n    vertexDC.z,\n    vertexDC.w);\n  vec4 vcpos = PCVCMatrix * dcsmall;\n  vertexVCVSOutput = vcpos.xyz/vcpos.w;\n  gl_Position = dcsmall;\n}\n"},YSVl:function(e,t,n){var r=n("EhIR"),o=n("uDiL"),i=n("pJ6O"),a=n("yuCN"),s=n("euyF"),l=n("ie1u"),u=n("pJ3+");u.alea=r,u.xor128=o,u.xorwow=i,u.xorshift7=a,u.xor4096=s,u.tychei=l,e.exports=u},YuTi:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},a9tY:function(e,t){e.exports="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkStickMapperVS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n// this shader implements imposters in OpenGL for Sticks\n\nattribute vec4 vertexMC;\nattribute vec3 orientMC;\nattribute vec4 offsetMC;\nattribute float radiusMC;\n\n// optional normal declaration\n//VTK::Normal::Dec\n\n//VTK::Picking::Dec\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\nuniform mat3 normalMatrix; // transform model coordinate directions to view coordinates\n\n// material property values\n//VTK::Color::Dec\n\n// clipping plane vars\n//VTK::Clip::Dec\n\n// camera and actor matrix values\n//VTK::Camera::Dec\n\nvarying vec4 vertexVCVSOutput;\nvarying float radiusVCVSOutput;\nvarying float lengthVCVSOutput;\nvarying vec3 centerVCVSOutput;\nvarying vec3 orientVCVSOutput;\n\nuniform int cameraParallel;\n\nvoid main()\n{\n  //VTK::Picking::Impl\n\n  //VTK::Color::Impl\n\n  //VTK::Normal::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Clip::Impl\n\n  vertexVCVSOutput = MCVCMatrix * vertexMC;\n  centerVCVSOutput = vertexVCVSOutput.xyz;\n  radiusVCVSOutput = radiusMC;\n  lengthVCVSOutput = length(orientMC);\n  orientVCVSOutput = normalMatrix * normalize(orientMC);\n\n  // make sure it is pointing out of the screen\n  if (orientVCVSOutput.z < 0.0)\n    {\n    orientVCVSOutput = -orientVCVSOutput;\n    }\n\n  // make the basis\n  vec3 xbase;\n  vec3 ybase;\n  vec3 dir = vec3(0.0,0.0,1.0);\n  if (cameraParallel == 0)\n    {\n    dir = normalize(-vertexVCVSOutput.xyz);\n    }\n  if (abs(dot(dir,orientVCVSOutput)) == 1.0)\n    {\n    xbase = normalize(cross(vec3(0.0,1.0,0.0),orientVCVSOutput));\n    ybase = cross(xbase,orientVCVSOutput);\n    }\n  else\n    {\n    xbase = normalize(cross(orientVCVSOutput,dir));\n    ybase = cross(orientVCVSOutput,xbase);\n    }\n\n  vec3 offsets = offsetMC.xyz*2.0-1.0;\n  vertexVCVSOutput.xyz = vertexVCVSOutput.xyz +\n    radiusVCVSOutput*offsets.x*xbase +\n    radiusVCVSOutput*offsets.y*ybase +\n    0.5*lengthVCVSOutput*offsets.z*orientVCVSOutput;\n\n  gl_Position = VCPCMatrix * vertexVCVSOutput;\n}\n"},euyF:function(e,t,n){(function(e){var r;!function(e,o,i){function a(e){var t=this;t.next=function(){var e,n,r=t.w,o=t.X,i=t.i;return t.w=r=r+1640531527|0,n=o[i+34&127],e=o[i=i+1&127],n^=n<<13,e^=e<<17,n=o[i]=(n^=n>>>15)^(e^=e>>>12),t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,o,i,a,s=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),o=0,i=-32;i<l;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(a=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=0==(n=s[127&i]^=r+(a=a+1640531527|0))?o+1:0);for(o>=128&&(s[127&(t&&t.length||0)]=-1),o=127,i=512;i>0;--i)r=s[o+34&127],n=s[o=o+1&127],r^=r<<13,n^=n<<17,s[o]=(r^=r>>>15)^(n^=n>>>12);e.w=a,e.X=s,e.i=o}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function l(e,t){null==e&&(e=+new Date);var n=new a(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&(r.X&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=l:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return l}).call(t,n,t,o))||(o.exports=r):this.xor4096=l}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},fRhN:function(e,t){const n=document.querySelector("head");n&&[16,32,96,160,196].forEach(e=>{const t=document.createElement("link");t.setAttribute("rel","icon"),t.setAttribute("href",`https://kitware.github.io/vtk-js/icon/favicon-${e}x${e}.png`),t.setAttribute("sizes",`${e}x${e}`),t.setAttribute("type","image/png"),n.appendChild(t)})},ie1u:function(e,t,n){(function(e){var r;!function(e,o,i){function a(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,o=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^o,o=o-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^o,t.a=o-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function l(e,t){var n=new a(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=l:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return l}).call(t,n,t,o))||(o.exports=r):this.tychei=l}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},jYEY:function(e,t,n){var r;!function(o){"use strict";function i(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function a(e,t,n,r,o,a){return i((s=i(i(t,e),i(r,a)))<<(l=o)|s>>>32-l,n);var s,l}function s(e,t,n,r,o,i,s){return a(t&n|~t&r,e,t,o,i,s)}function l(e,t,n,r,o,i,s){return a(t&r|n&~r,e,t,o,i,s)}function u(e,t,n,r,o,i,s){return a(t^n^r,e,t,o,i,s)}function c(e,t,n,r,o,i,s){return a(n^(t|~r),e,t,o,i,s)}function d(e,t){var n,r,o,a,d;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var g=1732584193,p=-271733879,f=-1732584194,h=271733878;for(n=0;n<e.length;n+=16)r=g,o=p,a=f,d=h,g=s(g,p,f,h,e[n],7,-680876936),h=s(h,g,p,f,e[n+1],12,-389564586),f=s(f,h,g,p,e[n+2],17,606105819),p=s(p,f,h,g,e[n+3],22,-1044525330),g=s(g,p,f,h,e[n+4],7,-176418897),h=s(h,g,p,f,e[n+5],12,1200080426),f=s(f,h,g,p,e[n+6],17,-1473231341),p=s(p,f,h,g,e[n+7],22,-45705983),g=s(g,p,f,h,e[n+8],7,1770035416),h=s(h,g,p,f,e[n+9],12,-1958414417),f=s(f,h,g,p,e[n+10],17,-42063),p=s(p,f,h,g,e[n+11],22,-1990404162),g=s(g,p,f,h,e[n+12],7,1804603682),h=s(h,g,p,f,e[n+13],12,-40341101),f=s(f,h,g,p,e[n+14],17,-1502002290),g=l(g,p=s(p,f,h,g,e[n+15],22,1236535329),f,h,e[n+1],5,-165796510),h=l(h,g,p,f,e[n+6],9,-1069501632),f=l(f,h,g,p,e[n+11],14,643717713),p=l(p,f,h,g,e[n],20,-373897302),g=l(g,p,f,h,e[n+5],5,-701558691),h=l(h,g,p,f,e[n+10],9,38016083),f=l(f,h,g,p,e[n+15],14,-660478335),p=l(p,f,h,g,e[n+4],20,-405537848),g=l(g,p,f,h,e[n+9],5,568446438),h=l(h,g,p,f,e[n+14],9,-1019803690),f=l(f,h,g,p,e[n+3],14,-187363961),p=l(p,f,h,g,e[n+8],20,1163531501),g=l(g,p,f,h,e[n+13],5,-1444681467),h=l(h,g,p,f,e[n+2],9,-51403784),f=l(f,h,g,p,e[n+7],14,1735328473),g=u(g,p=l(p,f,h,g,e[n+12],20,-1926607734),f,h,e[n+5],4,-378558),h=u(h,g,p,f,e[n+8],11,-2022574463),f=u(f,h,g,p,e[n+11],16,1839030562),p=u(p,f,h,g,e[n+14],23,-35309556),g=u(g,p,f,h,e[n+1],4,-1530992060),h=u(h,g,p,f,e[n+4],11,1272893353),f=u(f,h,g,p,e[n+7],16,-155497632),p=u(p,f,h,g,e[n+10],23,-1094730640),g=u(g,p,f,h,e[n+13],4,681279174),h=u(h,g,p,f,e[n],11,-358537222),f=u(f,h,g,p,e[n+3],16,-722521979),p=u(p,f,h,g,e[n+6],23,76029189),g=u(g,p,f,h,e[n+9],4,-640364487),h=u(h,g,p,f,e[n+12],11,-421815835),f=u(f,h,g,p,e[n+15],16,530742520),g=c(g,p=u(p,f,h,g,e[n+2],23,-995338651),f,h,e[n],6,-198630844),h=c(h,g,p,f,e[n+7],10,1126891415),f=c(f,h,g,p,e[n+14],15,-1416354905),p=c(p,f,h,g,e[n+5],21,-57434055),g=c(g,p,f,h,e[n+12],6,1700485571),h=c(h,g,p,f,e[n+3],10,-1894986606),f=c(f,h,g,p,e[n+10],15,-1051523),p=c(p,f,h,g,e[n+1],21,-2054922799),g=c(g,p,f,h,e[n+8],6,1873313359),h=c(h,g,p,f,e[n+15],10,-30611744),f=c(f,h,g,p,e[n+6],15,-1560198380),p=c(p,f,h,g,e[n+13],21,1309151649),g=c(g,p,f,h,e[n+4],6,-145523070),h=c(h,g,p,f,e[n+11],10,-1120210379),f=c(f,h,g,p,e[n+2],15,718787259),p=c(p,f,h,g,e[n+9],21,-343485551),g=i(g,r),p=i(p,o),f=i(f,a),h=i(h,d);return[g,p,f,h]}function g(e){var t,n="",r=32*e.length;for(t=0;t<r;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function p(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var r=8*e.length;for(t=0;t<r;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function f(e){var t,n,r="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),r+="0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t);return r}function h(e){return unescape(encodeURIComponent(e))}function M(e){return function(e){return g(d(p(e),8*e.length))}(h(e))}function m(e,t){return function(e,t){var n,r,o=p(e),i=[],a=[];for(i[15]=a[15]=void 0,o.length>16&&(o=d(o,8*e.length)),n=0;n<16;n+=1)i[n]=909522486^o[n],a[n]=1549556828^o[n];return r=d(i.concat(p(t)),512+8*t.length),g(d(a.concat(r),640))}(h(e),h(t))}function A(e,t,n){return t?n?m(t,e):f(m(t,e)):n?M(e):f(M(e))}void 0===(r=(function(){return A}).call(t,n,t,e))||(e.exports=r)}()},"pJ3+":function(e,t,n){var r;!function(o,i){var a,s=this,l=i.pow(256,6),u=i.pow(2,52),c=2*u;function d(e,t,n){var r=[],d=f(function e(t,n){var r,o=[],i=typeof t;if(n&&"object"==i)for(r in t)try{o.push(e(t[r],n-1))}catch(a){}return o.length?o:"string"==i?t:t+"\0"}((t=1==t?{entropy:!0}:t||{}).entropy?[e,h(o)]:null==e?function(){try{var e;return a&&(e=a.randomBytes)?e=e(256):(e=new Uint8Array(256),(s.crypto||s.msCrypto).getRandomValues(e)),h(e)}catch(r){var t=s.navigator,n=t&&t.plugins;return[+new Date,s,n,s.screen,h(o)]}}():e,3),r),M=new g(r),m=function(){for(var e=M.g(6),t=l,n=0;e<u;)e=256*(e+n),t*=256,n=M.g(1);for(;e>=c;)e/=2,t/=2,n>>>=1;return(e+n)/t};return m.int32=function(){return 0|M.g(4)},m.quick=function(){return M.g(4)/4294967296},m.double=m,f(h(M.S),o),(t.pass||n||function(e,t,n,r){return r&&(r.S&&p(r,M),e.state=function(){return p(M,{})}),n?(i.random=e,t):e})(m,d,"global"in t?t.global:this==i,t.state)}function g(e){var t,n=e.length,r=this,o=0,i=r.i=r.j=0,a=r.S=[];for(n||(e=[n++]);o<256;)a[o]=o++;for(o=0;o<256;o++)a[o]=a[i=255&i+e[o%n]+(t=a[o])],a[i]=t;(r.g=function(e){for(var t,n=0,o=r.i,i=r.j,a=r.S;e--;)t=a[o=255&o+1],n=256*n+a[255&(a[o]=a[i=255&i+t])+(a[i]=t)];return r.i=o,r.j=i,n})(256)}function p(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function f(e,t){for(var n,r=e+"",o=0;o<r.length;)t[255&o]=255&(n^=19*t[255&o])+r.charCodeAt(o++);return h(t)}function h(e){return String.fromCharCode.apply(0,e)}if(i.seedrandom=d,f(i.random(),o),e.exports){e.exports=d;try{a=n(1)}catch(M){}}else void 0===(r=(function(){return d}).call(t,n,t,e))||(e.exports=r)}([],Math)},pJ6O:function(e,t,n){(function(e){var r;!function(e,o,i){function a(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function l(e,t){var n=new a(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=l:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return l}).call(t,n,t,o))||(o.exports=r):this.xorwow=l}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},uDiL:function(e,t,n){(function(e){var r;!function(e,o,i){function a(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function l(e,t){var n=new a(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=l:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return l}).call(t,n,t,o))||(o.exports=r):this.xor128=l}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},ymfm:function(e,t){e.exports="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkPolyDataVS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n\nattribute vec4 vertexMC;\n\n// frag position in VC\n//VTK::PositionVC::Dec\n\n// optional normal declaration\n//VTK::Normal::Dec\n\n// extra lighting parameters\n//VTK::Light::Dec\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\n// material property values\n//VTK::Color::Dec\n\n// clipping plane vars\n//VTK::Clip::Dec\n\n// camera and actor matrix values\n//VTK::Camera::Dec\n\n// Apple Bug\n//VTK::PrimID::Dec\n\n// picking support\n//VTK::Picking::Dec\n\nvoid main()\n{\n  //VTK::Color::Impl\n\n  //VTK::Normal::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Clip::Impl\n\n  //VTK::PrimID::Impl\n\n  //VTK::PositionVC::Impl\n\n  //VTK::Light::Impl\n\n  //VTK::Picking::Impl\n}\n"},yuCN:function(e,t,n){(function(e){var r;!function(e,o,i){function a(e){var t=this;t.next=function(){var e,n,r=t.x,o=t.i;return e=r[o],n=(e^=e>>>7)^e<<24,n^=(e=r[o+1&7])^e>>>10,n^=(e=r[o+3&7])^e>>>3,n^=(e=r[o+4&7])^e<<7,e=r[o+7&7],r[o]=n^=(e^=e<<13)^e<<9,t.i=o+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n&&(r[7]=-1),e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function l(e,t){null==e&&(e=+new Date);var n=new a(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,r&&(r.x&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=l:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return l}).call(t,n,t,o))||(o.exports=r):this.xorshift7=l}(0,e,n("B9Yq"))}).call(this,n("YuTi")(e))},zUnb:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"EPSILON",(function(){return ja})),n.d(r,"ARRAY_TYPE",(function(){return Pa})),n.d(r,"RANDOM",(function(){return ka})),n.d(r,"setMatrixArrayType",(function(){return za})),n.d(r,"toRadian",(function(){return _a})),n.d(r,"equals",(function(){return Va}));var o={};n.r(o),n.d(o,"create",(function(){return Ba})),n.d(o,"fromMat4",(function(){return Ua})),n.d(o,"clone",(function(){return Fa})),n.d(o,"copy",(function(){return Ga})),n.d(o,"fromValues",(function(){return Qa})),n.d(o,"set",(function(){return Ya})),n.d(o,"identity",(function(){return Wa})),n.d(o,"transpose",(function(){return Ha})),n.d(o,"invert",(function(){return Ka})),n.d(o,"adjoint",(function(){return Xa})),n.d(o,"determinant",(function(){return Za})),n.d(o,"multiply",(function(){return qa})),n.d(o,"translate",(function(){return $a})),n.d(o,"rotate",(function(){return Ja})),n.d(o,"scale",(function(){return es})),n.d(o,"fromTranslation",(function(){return ts})),n.d(o,"fromRotation",(function(){return ns})),n.d(o,"fromScaling",(function(){return rs})),n.d(o,"fromMat2d",(function(){return os})),n.d(o,"fromQuat",(function(){return is})),n.d(o,"normalFromMat4",(function(){return as})),n.d(o,"projection",(function(){return ss})),n.d(o,"str",(function(){return ls})),n.d(o,"frob",(function(){return us})),n.d(o,"add",(function(){return cs})),n.d(o,"subtract",(function(){return ds})),n.d(o,"multiplyScalar",(function(){return gs})),n.d(o,"multiplyScalarAndAdd",(function(){return ps})),n.d(o,"exactEquals",(function(){return fs})),n.d(o,"equals",(function(){return hs})),n.d(o,"mul",(function(){return Ms})),n.d(o,"sub",(function(){return ms}));var i={};n.r(i),n.d(i,"create",(function(){return As})),n.d(i,"clone",(function(){return ys})),n.d(i,"copy",(function(){return Ts})),n.d(i,"fromValues",(function(){return Ds})),n.d(i,"set",(function(){return Ns})),n.d(i,"identity",(function(){return xs})),n.d(i,"transpose",(function(){return Is})),n.d(i,"invert",(function(){return ws})),n.d(i,"adjoint",(function(){return Cs})),n.d(i,"determinant",(function(){return Es})),n.d(i,"multiply",(function(){return vs})),n.d(i,"translate",(function(){return Ls})),n.d(i,"scale",(function(){return bs})),n.d(i,"rotate",(function(){return Os})),n.d(i,"rotateX",(function(){return Ss})),n.d(i,"rotateY",(function(){return js})),n.d(i,"rotateZ",(function(){return Ps})),n.d(i,"fromTranslation",(function(){return ks})),n.d(i,"fromScaling",(function(){return zs})),n.d(i,"fromRotation",(function(){return Rs})),n.d(i,"fromXRotation",(function(){return _s})),n.d(i,"fromYRotation",(function(){return Vs})),n.d(i,"fromZRotation",(function(){return Bs})),n.d(i,"fromRotationTranslation",(function(){return Us})),n.d(i,"fromQuat2",(function(){return Fs})),n.d(i,"getTranslation",(function(){return Gs})),n.d(i,"getScaling",(function(){return Qs})),n.d(i,"getRotation",(function(){return Ys})),n.d(i,"fromRotationTranslationScale",(function(){return Ws})),n.d(i,"fromRotationTranslationScaleOrigin",(function(){return Hs})),n.d(i,"fromQuat",(function(){return Ks})),n.d(i,"frustum",(function(){return Xs})),n.d(i,"perspective",(function(){return Zs})),n.d(i,"perspectiveFromFieldOfView",(function(){return qs})),n.d(i,"ortho",(function(){return $s})),n.d(i,"lookAt",(function(){return Js})),n.d(i,"targetTo",(function(){return el})),n.d(i,"str",(function(){return tl})),n.d(i,"frob",(function(){return nl})),n.d(i,"add",(function(){return rl})),n.d(i,"subtract",(function(){return ol})),n.d(i,"multiplyScalar",(function(){return il})),n.d(i,"multiplyScalarAndAdd",(function(){return al})),n.d(i,"exactEquals",(function(){return sl})),n.d(i,"equals",(function(){return ll})),n.d(i,"mul",(function(){return ul})),n.d(i,"sub",(function(){return cl}));var a={};n.r(a),n.d(a,"create",(function(){return dl})),n.d(a,"clone",(function(){return gl})),n.d(a,"length",(function(){return pl})),n.d(a,"fromValues",(function(){return fl})),n.d(a,"copy",(function(){return hl})),n.d(a,"set",(function(){return Ml})),n.d(a,"add",(function(){return ml})),n.d(a,"subtract",(function(){return Al})),n.d(a,"multiply",(function(){return yl})),n.d(a,"divide",(function(){return Tl})),n.d(a,"ceil",(function(){return Dl})),n.d(a,"floor",(function(){return Nl})),n.d(a,"min",(function(){return xl})),n.d(a,"max",(function(){return Il})),n.d(a,"round",(function(){return wl})),n.d(a,"scale",(function(){return Cl})),n.d(a,"scaleAndAdd",(function(){return El})),n.d(a,"distance",(function(){return vl})),n.d(a,"squaredDistance",(function(){return Ll})),n.d(a,"squaredLength",(function(){return bl})),n.d(a,"negate",(function(){return Ol})),n.d(a,"inverse",(function(){return Sl})),n.d(a,"normalize",(function(){return jl})),n.d(a,"dot",(function(){return Pl})),n.d(a,"cross",(function(){return kl})),n.d(a,"lerp",(function(){return zl})),n.d(a,"hermite",(function(){return Rl})),n.d(a,"bezier",(function(){return _l})),n.d(a,"random",(function(){return Vl})),n.d(a,"transformMat4",(function(){return Bl})),n.d(a,"transformMat3",(function(){return Ul})),n.d(a,"transformQuat",(function(){return Fl})),n.d(a,"rotateX",(function(){return Gl})),n.d(a,"rotateY",(function(){return Ql})),n.d(a,"rotateZ",(function(){return Yl})),n.d(a,"angle",(function(){return Wl})),n.d(a,"zero",(function(){return Hl})),n.d(a,"str",(function(){return Kl})),n.d(a,"exactEquals",(function(){return Xl})),n.d(a,"equals",(function(){return Zl})),n.d(a,"sub",(function(){return $l})),n.d(a,"mul",(function(){return Jl})),n.d(a,"div",(function(){return eu})),n.d(a,"dist",(function(){return tu})),n.d(a,"sqrDist",(function(){return nu})),n.d(a,"len",(function(){return ru})),n.d(a,"sqrLen",(function(){return ou})),n.d(a,"forEach",(function(){return iu}));var s={};n.r(s),n.d(s,"create",(function(){return au})),n.d(s,"clone",(function(){return su})),n.d(s,"fromValues",(function(){return lu})),n.d(s,"copy",(function(){return uu})),n.d(s,"set",(function(){return cu})),n.d(s,"add",(function(){return du})),n.d(s,"subtract",(function(){return gu})),n.d(s,"multiply",(function(){return pu})),n.d(s,"divide",(function(){return fu})),n.d(s,"ceil",(function(){return hu})),n.d(s,"floor",(function(){return Mu})),n.d(s,"min",(function(){return mu})),n.d(s,"max",(function(){return Au})),n.d(s,"round",(function(){return yu})),n.d(s,"scale",(function(){return Tu})),n.d(s,"scaleAndAdd",(function(){return Du})),n.d(s,"distance",(function(){return Nu})),n.d(s,"squaredDistance",(function(){return xu})),n.d(s,"length",(function(){return Iu})),n.d(s,"squaredLength",(function(){return wu})),n.d(s,"negate",(function(){return Cu})),n.d(s,"inverse",(function(){return Eu})),n.d(s,"normalize",(function(){return vu})),n.d(s,"dot",(function(){return Lu})),n.d(s,"cross",(function(){return bu})),n.d(s,"lerp",(function(){return Ou})),n.d(s,"random",(function(){return Su})),n.d(s,"transformMat4",(function(){return ju})),n.d(s,"transformQuat",(function(){return Pu})),n.d(s,"zero",(function(){return ku})),n.d(s,"str",(function(){return zu})),n.d(s,"exactEquals",(function(){return Ru})),n.d(s,"equals",(function(){return _u})),n.d(s,"sub",(function(){return Vu})),n.d(s,"mul",(function(){return Bu})),n.d(s,"div",(function(){return Uu})),n.d(s,"dist",(function(){return Fu})),n.d(s,"sqrDist",(function(){return Gu})),n.d(s,"len",(function(){return Qu})),n.d(s,"sqrLen",(function(){return Yu})),n.d(s,"forEach",(function(){return Wu}));var l={};n.r(l),n.d(l,"create",(function(){return Hu})),n.d(l,"identity",(function(){return Ku})),n.d(l,"setAxisAngle",(function(){return Xu})),n.d(l,"getAxisAngle",(function(){return Zu})),n.d(l,"multiply",(function(){return qu})),n.d(l,"rotateX",(function(){return $u})),n.d(l,"rotateY",(function(){return Ju})),n.d(l,"rotateZ",(function(){return ec})),n.d(l,"calculateW",(function(){return tc})),n.d(l,"slerp",(function(){return nc})),n.d(l,"random",(function(){return rc})),n.d(l,"invert",(function(){return oc})),n.d(l,"conjugate",(function(){return ic})),n.d(l,"fromMat3",(function(){return ac})),n.d(l,"fromEuler",(function(){return sc})),n.d(l,"str",(function(){return lc})),n.d(l,"clone",(function(){return hc})),n.d(l,"fromValues",(function(){return Mc})),n.d(l,"copy",(function(){return mc})),n.d(l,"set",(function(){return Ac})),n.d(l,"add",(function(){return yc})),n.d(l,"mul",(function(){return Tc})),n.d(l,"scale",(function(){return Dc})),n.d(l,"dot",(function(){return Nc})),n.d(l,"lerp",(function(){return xc})),n.d(l,"length",(function(){return Ic})),n.d(l,"len",(function(){return wc})),n.d(l,"squaredLength",(function(){return Cc})),n.d(l,"sqrLen",(function(){return Ec})),n.d(l,"normalize",(function(){return vc})),n.d(l,"exactEquals",(function(){return Lc})),n.d(l,"equals",(function(){return bc})),n.d(l,"rotationTo",(function(){return Oc})),n.d(l,"sqlerp",(function(){return Sc})),n.d(l,"setAxes",(function(){return jc}));var u={};function c(e){return"function"==typeof e}n.r(u),n.d(u,"VOID",(function(){return Rc})),n.d(u,"setLoggerFunction",(function(){return Uc})),n.d(u,"vtkLogMacro",(function(){return Fc})),n.d(u,"vtkInfoMacro",(function(){return Gc})),n.d(u,"vtkDebugMacro",(function(){return Qc})),n.d(u,"vtkErrorMacro",(function(){return Yc})),n.d(u,"vtkWarningMacro",(function(){return Wc})),n.d(u,"vtkOnceErrorMacro",(function(){return Kc})),n.d(u,"TYPED_ARRAYS",(function(){return Xc})),n.d(u,"capitalize",(function(){return Zc})),n.d(u,"uncapitalize",(function(){return qc})),n.d(u,"formatBytesToProperUnit",(function(){return $c})),n.d(u,"formatNumbersWithThousandSeparator",(function(){return Jc})),n.d(u,"setImmediateVTK",(function(){return nd})),n.d(u,"obj",(function(){return rd})),n.d(u,"get",(function(){return od})),n.d(u,"set",(function(){return sd})),n.d(u,"setGet",(function(){return ld})),n.d(u,"getArray",(function(){return ud})),n.d(u,"setArray",(function(){return cd})),n.d(u,"setGetArray",(function(){return dd})),n.d(u,"algo",(function(){return gd})),n.d(u,"EVENT_ABORT",(function(){return pd})),n.d(u,"event",(function(){return fd})),n.d(u,"newInstance",(function(){return hd})),n.d(u,"chain",(function(){return Md})),n.d(u,"isVtkObject",(function(){return md})),n.d(u,"traverseInstanceTree",(function(){return Ad})),n.d(u,"debounce",(function(){return yd})),n.d(u,"throttle",(function(){return Td})),n.d(u,"keystore",(function(){return Dd})),n.d(u,"proxy",(function(){return xd})),n.d(u,"proxyPropertyMapping",(function(){return Id})),n.d(u,"proxyPropertyState",(function(){return wd})),n.d(u,"normalizeWheel",(function(){return Cd})),n.d(u,"default",(function(){return Ed}));let d=!1;const g={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else d&&console.log("RxJS: Back to a better error behavior. Thank you. <3");d=e},get useDeprecatedSynchronousErrorHandling(){return d}};function p(e){setTimeout(()=>{throw e},0)}const f={closed:!0,next(e){},error(e){if(g.useDeprecatedSynchronousErrorHandling)throw e;p(e)},complete(){}},h=(()=>Array.isArray||(e=>e&&"number"==typeof e.length))();function M(e){return null!==e&&"object"==typeof e}const m=(()=>{function e(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((e,t)=>`${t+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e})();let A=(()=>{class e{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:n,_unsubscribe:r,_subscriptions:o}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(let e=0;e<n.length;++e)n[e].remove(this);if(c(r))try{r.call(this)}catch(i){t=i instanceof m?y(i.errors):[i]}if(h(o)){let e=-1,n=o.length;for(;++e<n;){const n=o[e];if(M(n))try{n.unsubscribe()}catch(i){t=t||[],i instanceof m?t=t.concat(y(i.errors)):t.push(i)}}}if(t)throw new m(t)}add(t){let n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){const t=n;n=new e,n._subscriptions=[t]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof e){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n}remove(e){const t=this._subscriptions;if(t){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}return e.EMPTY=function(e){return e.closed=!0,e}(new e),e})();function y(e){return e.reduce((e,t)=>e.concat(t instanceof m?t.errors:t),[])}const T=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class D extends A{constructor(e,t,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=f;break;case 1:if(!e){this.destination=f;break}if("object"==typeof e){e instanceof D?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new N(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new N(this,e,t,n)}}[T](){return this}static create(e,t,n){const r=new D(e,t,n);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class N extends D{constructor(e,t,n,r){let o;super(),this._parentSubscriber=e;let i=this;c(t)?o=t:t&&(o=t.next,n=t.error,r=t.complete,t!==f&&(i=Object.create(t),c(i.unsubscribe)&&this.add(i.unsubscribe.bind(i)),i.unsubscribe=this.unsubscribe.bind(this))),this._context=i,this._next=o,this._error=n,this._complete=r}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;g.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:n}=g;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):p(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;p(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);g.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),g.useDeprecatedSynchronousErrorHandling)throw n;p(n)}}__tryOrSetError(e,t,n){if(!g.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return g.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(p(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const x=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function I(e){return e}let w=(()=>{class e{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(t){const n=new e;return n.source=this,n.operator=t,n}subscribe(e,t,n){const{operator:r}=this,o=function(e,t,n){if(e){if(e instanceof D)return e;if(e[T])return e[T]()}return e||t||n?new D(e,t,n):new D(f)}(e,t,n);if(o.add(r?r.call(o,this.source):this.source||g.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),g.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o}_trySubscribe(e){try{return this._subscribe(e)}catch(t){g.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){const{closed:t,destination:n,isStopped:r}=e;if(t||r)return!1;e=n&&n instanceof D?n:null}return!0}(e)?e.error(t):console.warn(t)}}forEach(e,t){return new(t=C(t))((t,n)=>{let r;r=this.subscribe(t=>{try{e(t)}catch(o){n(o),r&&r.unsubscribe()}},n,t)})}_subscribe(e){const{source:t}=this;return t&&t.subscribe(e)}[x](){return this}pipe(...e){return 0===e.length?this:(0===(t=e).length?I:1===t.length?t[0]:function(e){return t.reduce((e,t)=>t(e),e)})(this);var t}toPromise(e){return new(e=C(e))((e,t)=>{let n;this.subscribe(e=>n=e,e=>t(e),()=>e(n))})}}return e.create=t=>new e(t),e})();function C(e){if(e||(e=g.Promise||Promise),!e)throw new Error("no Promise impl found");return e}const E=(()=>{function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e})();class v extends A{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}class L extends D{constructor(e){super(e),this.destination=e}}let b=(()=>{class e extends w{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[T](){return new L(this)}lift(e){const t=new O(this,this);return t.operator=e,t}next(e){if(this.closed)throw new E;if(!this.isStopped){const{observers:t}=this,n=t.length,r=t.slice();for(let o=0;o<n;o++)r[o].next(e)}}error(e){if(this.closed)throw new E;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:t}=this,n=t.length,r=t.slice();for(let o=0;o<n;o++)r[o].error(e);this.observers.length=0}complete(){if(this.closed)throw new E;this.isStopped=!0;const{observers:e}=this,t=e.length,n=e.slice();for(let r=0;r<t;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new E;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new E;return this.hasError?(e.error(this.thrownError),A.EMPTY):this.isStopped?(e.complete(),A.EMPTY):(this.observers.push(e),new v(this,e))}asObservable(){const e=new w;return e.source=this,e}}return e.create=(e,t)=>new O(e,t),e})();class O extends b{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):A.EMPTY}}class S extends D{constructor(e,t,n){super(),this.parent=e,this.outerValue=t,this.outerIndex=n,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}const j=e=>t=>{for(let n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()};function P(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const k=P();const z=e=>{if(e&&"function"==typeof e[x])return i=e,e=>{const t=i[x]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if((t=e)&&"number"==typeof t.length&&"function"!=typeof t)return j(e);var t,n,r,o,i;if((n=e)&&"function"!=typeof n.subscribe&&"function"==typeof n.then)return o=e,e=>(o.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,p),e);if(e&&"function"==typeof e[k])return r=e,e=>{const t=r[k]();for(;;){const n=t.next();if(n.done){e.complete();break}if(e.next(n.value),e.closed)break}return"function"==typeof t.return&&e.add(()=>{t.return&&t.return()}),e};{const t=M(e)?"an invalid object":`'${e}'`;throw new TypeError(`You provided ${t} where a stream was expected.`+" You can provide an Observable, Promise, Array, or Iterable.")}};class R extends D{notifyNext(e,t,n,r,o){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class _{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new V(e,this.project,this.thisArg))}}class V extends D{constructor(e,t,n){super(e),this.project=t,this.count=0,this.thisArg=n||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}class B{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new U(e,this.project,this.concurrent))}}class U extends R{constructor(e,t,n=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t,e,n)}_innerSub(e,t,n){const r=new S(this,t,n),o=this.destination;o.add(r);const i=function(e,t,n,r,o=new S(e,n,r)){if(!o.closed)return t instanceof w?t.subscribe(o):z(t)(o)}(this,e,void 0,void 0,r);i!==r&&o.add(i)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e,t,n,r,o){this.destination.next(t)}notifyComplete(e){const t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function F(){return function(e){return e.lift(new G(e))}}class G{constructor(e){this.connectable=e}call(e,t){const{connectable:n}=this;n._refCount++;const r=new Q(e,n),o=t.subscribe(r);return r.closed||(r.connection=n.connect()),o}}class Q extends D{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:n}=this,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class Y extends w{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new A,e.add(this.source.subscribe(new H(this.getSubject(),this))),e.closed&&(this._connection=null,e=A.EMPTY)),e}refCount(){return F()(this)}}const W=(()=>{const e=Y.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}})();class H extends L{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}function K(){return new b}function X(e){return{toString:e}.toString()}function Z(e,t,n){return X(()=>{const r=function(e){return function(...t){if(e){const n=e(...t);for(const e in n)this[e]=n[e]}}}(t);function o(...e){if(this instanceof o)return r.apply(this,e),this;const t=new o(...e);return n.annotation=t,n;function n(e,n,r){const o=e.hasOwnProperty("__parameters__")?e.__parameters__:Object.defineProperty(e,"__parameters__",{value:[]}).__parameters__;for(;o.length<=r;)o.push(null);return(o[r]=o[r]||[]).push(t),e}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=e,o.annotationCls=o,o})}const q=Z("Inject",e=>({token:e})),$=Z("Optional"),J=Z("Self"),ee=Z("SkipSelf");var te=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});function ne(e){for(let t in e)if(e[t]===ne)return t;throw Error("Could not find renamed property on target object.")}function re(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function oe(e){return{factory:e.factory,providers:e.providers||[],imports:e.imports||[]}}function ie(e){return ae(e,e[le])||ae(e,e[de])}function ae(e,t){return t&&t.token===e?t:null}function se(e){return e&&(e.hasOwnProperty(ue)||e.hasOwnProperty(ge))?e[ue]:null}const le=ne({"\u0275prov":ne}),ue=ne({"\u0275inj":ne}),ce=ne({"\u0275provFallback":ne}),de=ne({ngInjectableDef:ne}),ge=ne({ngInjectorDef:ne});function pe(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(pe).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function fe(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const he=ne({__forward_ref__:ne});function Me(e){return e.__forward_ref__=Me,e.toString=function(){return pe(this())},e}function me(e){return"function"==typeof(t=e)&&t.hasOwnProperty(he)&&t.__forward_ref__===Me?e():e;var t}const Ae="undefined"!=typeof globalThis&&globalThis,ye="undefined"!=typeof window&&window,Te="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,De="undefined"!=typeof global&&global,Ne=Ae||De||ye||Te,xe=ne({"\u0275cmp":ne}),Ie=ne({"\u0275dir":ne}),we=ne({"\u0275pipe":ne}),Ce=ne({"\u0275mod":ne}),Ee=ne({"\u0275loc":ne}),ve=ne({"\u0275fac":ne}),Le=ne({__NG_ELEMENT_ID__:ne});class be{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=re({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Oe=new be("INJECTOR",-1),Se={},je=/\n/gm,Pe=ne({provide:String,useValue:ne});let ke,ze=void 0;function Re(e){const t=ze;return ze=e,t}function _e(e){const t=ke;return ke=e,t}function Ve(e,t=te.Default){if(void 0===ze)throw new Error("inject() must be called from an injection context");return null===ze?Ue(e,void 0,t):ze.get(e,t&te.Optional?null:void 0,t)}function Be(e,t=te.Default){return(ke||Ve)(me(e),t)}function Ue(e,t,n){const r=ie(e);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&te.Optional)return null;if(void 0!==t)return t;throw new Error(`Injector: NOT_FOUND [${pe(e)}]`)}function Fe(e){const t=[];for(let n=0;n<e.length;n++){const r=me(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let e=void 0,n=te.Default;for(let t=0;t<r.length;t++){const o=r[t];o instanceof $||"Optional"===o.ngMetadataName||o===$?n|=te.Optional:o instanceof ee||"SkipSelf"===o.ngMetadataName||o===ee?n|=te.SkipSelf:o instanceof J||"Self"===o.ngMetadataName||o===J?n|=te.Self:e=o instanceof q||o===q?o.token:o}t.push(Be(e,n))}else t.push(Be(r))}return t}class Ge{get(e,t=Se){if(t===Se){const t=new Error(`NullInjectorError: No provider for ${pe(e)}!`);throw t.name="NullInjectorError",t}return t}}class Qe{}function Ye(e,t){e.forEach(e=>Array.isArray(e)?Ye(e,t):t(e))}const We=function(){var e={OnPush:0,Default:1};return e[e.OnPush]="OnPush",e[e.Default]="Default",e}(),He=function(){var e={Emulated:0,Native:1,None:2,ShadowDom:3};return e[e.Emulated]="Emulated",e[e.Native]="Native",e[e.None]="None",e[e.ShadowDom]="ShadowDom",e}(),Ke={},Xe=[];let Ze=0;function qe(e){return X(()=>{const t=e.type,n=t.prototype,r={},o={type:t,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:e.exportAs||null,onChanges:null,onInit:n.ngOnInit||null,doCheck:n.ngDoCheck||null,afterContentInit:n.ngAfterContentInit||null,afterContentChecked:n.ngAfterContentChecked||null,afterViewInit:n.ngAfterViewInit||null,afterViewChecked:n.ngAfterViewChecked||null,onDestroy:n.ngOnDestroy||null,onPush:e.changeDetection===We.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||Xe,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||He.Emulated,id:"c",styles:e.styles||Xe,_:null,setInput:null,schemas:e.schemas||null,tView:null},i=e.directives,a=e.features,s=e.pipes;return o.id+=Ze++,o.inputs=nt(e.inputs,r),o.outputs=nt(e.outputs),a&&a.forEach(e=>e(o)),o.directiveDefs=i?()=>("function"==typeof i?i():i).map($e):null,o.pipeDefs=s?()=>("function"==typeof s?s():s).map(Je):null,o})}function $e(e){return rt(e)||function(e){return e[Ie]||null}(e)}function Je(e){return function(e){return e[we]||null}(e)}const et={};function tt(e){const t={type:e.type,bootstrap:e.bootstrap||Xe,declarations:e.declarations||Xe,imports:e.imports||Xe,exports:e.exports||Xe,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&X(()=>{et[e.id]=e.type}),t}function nt(e,t){if(null==e)return Ke;const n={};for(const r in e)if(e.hasOwnProperty(r)){let o=e[r],i=o;Array.isArray(o)&&(i=o[1],o=o[0]),n[o]=r,t&&(t[o]=i)}return n}function rt(e){return e[xe]||null}function ot(e,t){return e.hasOwnProperty(ve)?e[ve]:null}function it(e,t){const n=e[Ce]||null;if(!n&&!0===t)throw new Error(`Type ${pe(e)} does not have '\u0275mod' property.`);return n}function at(e){return Array.isArray(e)&&"object"==typeof e[1]}function st(e){return Array.isArray(e)&&!0===e[1]}function lt(e){return 0!=(8&e.flags)}function ut(e){return 1==(1&e.flags)}function ct(e){return null!==e.template}let dt=void 0;function gt(e){return!!e.listen}const pt={createRenderer:(e,t)=>void 0!==dt?dt:"undefined"!=typeof document?document:void 0};function ft(e){for(;Array.isArray(e);)e=e[0];return e}function ht(e,t){return ft(t[e.index])}function Mt(e,t){const n=t[e];return at(n)?n:n[0]}function mt(e){const t=function(e){return e.__ngContext__||null}(e);return t?Array.isArray(t)?t:t.lView:null}function At(e){return 128==(128&e[2])}function yt(e,t){return null===e||null==t?null:e[t]}function Tt(e){e[18]=0}const Dt={lFrame:kt(null),bindingsEnabled:!0,checkNoChangesMode:!1};function Nt(){return Dt.bindingsEnabled}function xt(){return Dt.lFrame.lView}function It(){return Dt.lFrame.tView}function wt(){return Dt.lFrame.previousOrParentTNode}function Ct(e,t){Dt.lFrame.previousOrParentTNode=e,Dt.lFrame.isParent=t}function Et(){return Dt.lFrame.isParent}function vt(){return Dt.checkNoChangesMode}function Lt(e){Dt.checkNoChangesMode=e}function bt(e,t){const n=Dt.lFrame;n.bindingIndex=n.bindingRootIndex=e,n.currentDirectiveIndex=t}function Ot(e){Dt.lFrame.currentQueryIndex=e}function St(e,t){const n=Pt();Dt.lFrame=n,n.previousOrParentTNode=t,n.lView=e}function jt(e,t){const n=Pt(),r=e[1];Dt.lFrame=n,n.previousOrParentTNode=t,n.lView=e,n.tView=r,n.contextLView=e,n.bindingIndex=r.bindingStartIndex}function Pt(){const e=Dt.lFrame,t=null===e?null:e.child;return null===t?kt(e):t}function kt(e){const t={previousOrParentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentSanitizer:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null};return null!==e&&(e.child=t),t}function zt(){const e=Dt.lFrame;return Dt.lFrame=e.parent,e.previousOrParentTNode=null,e.lView=null,e}const Rt=zt;function _t(){const e=zt();e.isParent=!0,e.tView=null,e.selectedIndex=0,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.currentSanitizer=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Vt(e){Dt.lFrame.selectedIndex=e}function Bt(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const t=e.data[n];t.afterContentInit&&(e.contentHooks||(e.contentHooks=[])).push(-n,t.afterContentInit),t.afterContentChecked&&((e.contentHooks||(e.contentHooks=[])).push(n,t.afterContentChecked),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,t.afterContentChecked)),t.afterViewInit&&(e.viewHooks||(e.viewHooks=[])).push(-n,t.afterViewInit),t.afterViewChecked&&((e.viewHooks||(e.viewHooks=[])).push(n,t.afterViewChecked),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,t.afterViewChecked)),null!=t.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(n,t.onDestroy)}}function Ut(e,t,n){Qt(e,t,3,n)}function Ft(e,t,n,r){(3&e[2])===n&&Qt(e,t,n,r)}function Gt(e,t){let n=e[2];(3&n)===t&&(n&=1023,n+=1,e[2]=n)}function Qt(e,t,n,r){const o=null!=r?r:-1;let i=0;for(let a=void 0!==r?65535&e[18]:0;a<t.length;a++)if("number"==typeof t[a+1]){if(i=t[a],null!=r&&i>=r)break}else t[a]<0&&(e[18]+=65536),(i<o||-1==o)&&(Yt(e,n,t,a),e[18]=(4294901760&e[18])+a+2),a++}function Yt(e,t,n,r){const o=n[r]<0,i=n[r+1],a=e[o?-n[r]:n[r]];o?e[2]>>10<e[18]>>16&&(3&e[2])===t&&(e[2]+=1024,i.call(a)):i.call(a)}class Wt{constructor(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}}function Ht(e,t,n){const r=gt(e);let o=0;for(;o<n.length;){const i=n[o];if("number"==typeof i){if(0!==i)break;o++;const a=n[o++],s=n[o++],l=n[o++];r?e.setAttribute(t,s,l,a):t.setAttributeNS(a,s,l)}else{const a=i,s=n[++o];64===a.charCodeAt(0)?r&&e.setProperty(t,a,s):r?e.setAttribute(t,a,s):t.setAttribute(a,s),o++}}return o}function Kt(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const o=t[r];"number"==typeof o?n=o:0===n||Xt(e,n,o,null,-1===n||2===n?t[++r]:null)}}return e}function Xt(e,t,n,r,o){let i=0,a=e.length;if(-1===t)a=-1;else for(;i<e.length;){const n=e[i++];if("number"==typeof n){if(n===t){a=-1;break}if(n>t){a=i-1;break}}}for(;i<e.length;){const t=e[i];if("number"==typeof t)break;if(t===n){if(null===r)return void(null!==o&&(e[i+1]=o));if(r===e[i+1])return void(e[i+2]=o)}i++,null!==r&&i++,null!==o&&i++}-1!==a&&(e.splice(a,0,t),i=a+1),e.splice(i++,0,n),null!==r&&e.splice(i++,0,r),null!==o&&e.splice(i++,0,o)}function Zt(e){return 32767&e}function qt(e,t){let n=e>>16,r=t;for(;n>0;)r=r[15],n--;return r}function $t(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():function(e){return"string"==typeof e?e:null==e?"":""+e}(e)}const Jt=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ne))();function en(e){return e instanceof Function?e():e}let tn=!0;function nn(e){const t=tn;return tn=e,t}let rn=0;function on(e,t){const n=sn(e,t);if(-1!==n)return n;const r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,an(r.data,e),an(t,null),an(r.blueprint,null));const o=ln(e,t),i=e.injectorIndex;if(-1!==o){const e=Zt(o),n=qt(o,t),r=n[1].data;for(let o=0;o<8;o++)t[i+o]=n[e+o]|r[e+o]}return t[i+8]=o,i}function an(e,t){e.push(0,0,0,0,0,0,0,0,t)}function sn(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null==t[e.injectorIndex+8]?-1:e.injectorIndex}function ln(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=t[6],r=1;for(;n&&-1===n.injectorIndex;)n=(t=t[15])?t[6]:null,r++;return n?n.injectorIndex|r<<16:-1}function un(e,t,n){!function(e,t,n){let r="string"!=typeof n?n[Le]:n.charCodeAt(0)||0;null==r&&(r=n[Le]=rn++);const o=255&r,i=1<<o,a=64&o,s=32&o,l=t.data;128&o?a?s?l[e+7]|=i:l[e+6]|=i:s?l[e+5]|=i:l[e+4]|=i:a?s?l[e+3]|=i:l[e+2]|=i:s?l[e+1]|=i:l[e]|=i}(e,t,n)}function cn(e,t,n,r=te.Default,o){if(null!==e){const o=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e[Le];return"number"==typeof t&&t>0?255&t:t}(n);if("function"==typeof o){St(t,e);try{const e=o();if(null!=e||r&te.Optional)return e;throw new Error(`No provider for ${$t(n)}!`)}finally{Rt()}}else if("number"==typeof o){if(-1===o)return new Mn(e,t);let i=null,a=sn(e,t),s=-1,l=r&te.Host?t[16][6]:null;for((-1===a||r&te.SkipSelf)&&(s=-1===a?ln(e,t):t[a+8],hn(r,!1)?(i=t[1],a=Zt(s),t=qt(s,t)):a=-1);-1!==a;){s=t[a+8];const e=t[1];if(fn(o,a,e.data)){const e=gn(a,t,n,i,r,l);if(e!==dn)return e}hn(r,t[1].data[a+8]===l)&&fn(o,a,t)?(i=e,a=Zt(s),t=qt(s,t)):a=-1}}}if(r&te.Optional&&void 0===o&&(o=null),0==(r&(te.Self|te.Host))){const e=t[9],i=_e(void 0);try{return e?e.get(n,o,r&te.Optional):Ue(n,o,r&te.Optional)}finally{_e(i)}}if(r&te.Optional)return o;throw new Error(`NodeInjector: NOT_FOUND [${$t(n)}]`)}const dn={};function gn(e,t,n,r,o,i){const a=t[1],s=a.data[e+8],l=function(e,t,n,r,o){const i=e.providerIndexes,a=t.data,s=65535&i,l=e.directiveStart,u=i>>16,c=o?s+u:e.directiveEnd;for(let d=r?s:s+u;d<c;d++){const e=a[d];if(d<l&&n===e||d>=l&&e.type===n)return d}if(o){const e=a[l];if(e&&ct(e)&&e.type===n)return l}return null}(s,a,n,null==r?function(e){return 2==(2&e.flags)}(s)&&tn:r!=a&&3===s.type,o&te.Host&&i===s);return null!==l?pn(t,a,l,s):dn}function pn(e,t,n,r){let o=e[n];const i=t.data;if(o instanceof Wt){const a=o;if(a.resolving)throw new Error(`Circular dep for ${$t(i[n])}`);const s=nn(a.canSeeViewProviders);let l;a.resolving=!0,a.injectImpl&&(l=_e(a.injectImpl)),St(e,r);try{o=e[n]=a.factory(void 0,i,e,r),t.firstCreatePass&&n>=r.directiveStart&&function(e,t,n){const{onChanges:r,onInit:o,doCheck:i}=t;r&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,r)),o&&(n.preOrderHooks||(n.preOrderHooks=[])).push(-e,o),i&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,i),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,i))}(n,i[n],t)}finally{a.injectImpl&&_e(l),nn(s),a.resolving=!1,Rt()}}return o}function fn(e,t,n){const r=64&e,o=32&e;let i;return i=128&e?r?o?n[t+7]:n[t+6]:o?n[t+5]:n[t+4]:r?o?n[t+3]:n[t+2]:o?n[t+1]:n[t],!!(i&1<<e)}function hn(e,t){return!(e&te.Self||e&te.Host&&t)}class Mn{constructor(e,t){this._tNode=e,this._lView=t}get(e,t){return cn(this._tNode,this._lView,e,void 0,t)}}function mn(e){return e.ngDebugContext}function An(e){return e.ngOriginalError}function yn(e,...t){e.error(...t)}class Tn{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e.ngErrorLogger||yn}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(e){return e?mn(e)?mn(e):this._findContext(An(e)):null}_findOriginalError(e){let t=An(e);for(;t&&An(t);)t=An(t);return t}}let Dn=!0,Nn=!1;function xn(){return Nn=!0,Dn}function In(e,t){e.__ngContext__=t}function wn(e){throw new Error(`Multiple components match node with tagname ${e.tagName}`)}function Cn(){throw new Error("Cannot mix multi providers and regular providers")}function En(e,t,n){let r=e.length;for(;;){const o=e.indexOf(t,n);if(-1===o)return o;if(0===o||e.charCodeAt(o-1)<=32){const n=t.length;if(o+n===r||e.charCodeAt(o+n)<=32)return o}n=o+1}}function vn(e,t,n){let r=0;for(;r<e.length;){let o=e[r++];if(n&&"class"===o){if(o=e[r],-1!==En(o.toLowerCase(),t,0))return!0}else if(1===o){for(;r<e.length&&"string"==typeof(o=e[r++]);)if(o.toLowerCase()===t)return!0;return!1}}return!1}function Ln(e){return 0===e.type&&"ng-template"!==e.tagName}function bn(e,t,n){return t===(0!==e.type||n?e.tagName:"ng-template")}function On(e,t,n){let r=4;const o=e.attrs||[],i=function(e){for(let n=0;n<e.length;n++)if(3===(t=e[n])||4===t||6===t)return n;var t;return e.length}(o);let a=!1;for(let s=0;s<t.length;s++){const l=t[s];if("number"!=typeof l){if(!a)if(4&r){if(r=2|1&r,""!==l&&!bn(e,l,n)||""===l&&1===t.length){if(Sn(r))return!1;a=!0}}else{const u=8&r?l:t[++s];if(8&r&&null!==e.attrs){if(!vn(e.attrs,u,n)){if(Sn(r))return!1;a=!0}continue}const c=jn(8&r?"class":l,o,Ln(e),n);if(-1===c){if(Sn(r))return!1;a=!0;continue}if(""!==u){let e;e=c>i?"":o[c+1].toLowerCase();const t=8&r?e:null;if(t&&-1!==En(t,u,0)||2&r&&u!==e){if(Sn(r))return!1;a=!0}}}}else{if(!a&&!Sn(r)&&!Sn(l))return!1;if(a&&Sn(l))continue;a=!1,r=l|1&r}}return Sn(r)||a}function Sn(e){return 0==(1&e)}function jn(e,t,n,r){if(null===t)return-1;let o=0;if(r||!n){let n=!1;for(;o<t.length;){const r=t[o];if(r===e)return o;if(3===r||6===r)n=!0;else{if(1===r||2===r){let e=t[++o];for(;"string"==typeof e;)e=t[++o];continue}if(4===r)break;if(0===r){o+=4;continue}}o+=n?1:2}return-1}return function(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function Pn(e,t,n=!1){for(let r=0;r<t.length;r++)if(On(e,t[r],n))return!0;return!1}function kn(e,t){return e?":not("+t.trim()+")":t}function zn(e){let t=e[0],n=1,r=2,o="",i=!1;for(;n<e.length;){let a=e[n];if("string"==typeof a)if(2&r){const t=e[++n];o+="["+a+(t.length>0?'="'+t+'"':"")+"]"}else 8&r?o+="."+a:4&r&&(o+=" "+a);else""===o||Sn(a)||(t+=kn(i,o),o=""),r=a,i=i||!Sn(r);n++}return""!==o&&(t+=kn(i,o)),t}const Rn={};function _n(e){const t=e[3];return st(t)?t[3]:t}function Vn(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const o=n[r],i=n[r+1];if(-1!==i){const n=e.data[i];Ot(o),n.contentQueries(2,t[i],i)}}}function Bn(e,t,n){return gt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Un(e,t,n,r,o,i,a,s,l,u){const c=t.blueprint.slice();return c[0]=o,c[2]=140|r,Tt(c),c[3]=c[15]=e,c[8]=n,c[10]=a||e&&e[10],c[11]=s||e&&e[11],c[12]=l||e&&e[12]||null,c[9]=u||e&&e[9]||null,c[6]=i,c[16]=2==t.type?e[16]:c,c}function Fn(e,t,n,r,o,i){const a=n+19,s=e.data[a]||function(e,t,n,r,o,i){const a=wt(),s=Et(),l=s?a:a&&a.parent,u=e.data[n]=Xn(0,l&&l!==t?l:null,r,n,o,i);return null===e.firstChild&&(e.firstChild=u),a&&(!s||null!=a.child||null===u.parent&&2!==a.type?s||(a.next=u):a.child=u),u}(e,t,a,r,o,i);return Ct(s,!0),s}function Gn(e,t,n){jt(t,t[6]);try{const r=e.viewQuery;null!==r&&hr(1,r,n);const o=e.template;null!==o&&Wn(e,t,o,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Vn(e,t),e.staticViewQueries&&hr(2,e.viewQuery,n);const i=e.components;null!==i&&function(e,t){for(let n=0;n<t.length;n++)cr(e,t[n])}(t,i)}finally{t[2]&=-5,_t()}}function Qn(e,t,n,r){const o=t[2];if(256==(256&o))return;jt(t,t[6]);const i=vt();try{Tt(t),Dt.lFrame.bindingIndex=e.bindingStartIndex,null!==n&&Wn(e,t,n,2,r);const a=3==(3&o);if(!i)if(a){const n=e.preOrderCheckHooks;null!==n&&Ut(t,n,null)}else{const n=e.preOrderHooks;null!==n&&Ft(t,n,0,null),Gt(t,0)}if(function(e){let t=e[13];for(;null!==t;){let n;if(st(t)&&(n=t[2])>>1==-1){for(let e=9;e<t.length;e++){const n=t[e],r=n[1];At(n)&&Qn(r,n,r.template,n[8])}0!=(1&n)&&lr(t,e[16])}t=t[4]}}(t),null!==e.contentQueries&&Vn(e,t),!i)if(a){const n=e.contentCheckHooks;null!==n&&Ut(t,n)}else{const n=e.contentHooks;null!==n&&Ft(t,n,1),Gt(t,1)}!function(e,t){try{const n=e.expandoInstructions;if(null!==n){let r=e.expandoStartIndex,o=-1,i=-1;for(let e=0;e<n.length;e++){const a=n[e];"number"==typeof a?a<=0?(i=0-a,Vt(i),r+=9+n[++e],o=r):r+=a:(null!==a&&(bt(r,o),a(2,t[o])),o++)}}}finally{Vt(-1)}}(e,t);const s=e.components;null!==s&&function(e,t){for(let n=0;n<t.length;n++)ur(e,t[n])}(t,s);const l=e.viewQuery;if(null!==l&&hr(2,l,r),!i)if(a){const n=e.viewCheckHooks;null!==n&&Ut(t,n)}else{const n=e.viewHooks;null!==n&&Ft(t,n,2),Gt(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),i||(t[2]&=-73)}finally{_t()}}function Yn(e,t,n,r){const o=t[10],i=!vt(),a=4==(4&t[2]);try{i&&!a&&o.begin&&o.begin(),a&&Gn(e,t,r),Qn(e,t,n,r)}finally{i&&!a&&o.end&&o.end()}}function Wn(e,t,n,r,o){const i=Dt.lFrame.selectedIndex;try{Vt(-1),2&r&&t.length>19&&function(e,t,n,r){if(!r)if(3==(3&t[2])){const n=e.preOrderCheckHooks;null!==n&&Ut(t,n,0)}else{const n=e.preOrderHooks;null!==n&&Ft(t,n,0,0)}Vt(0)}(e,t,0,vt()),n(r,o)}finally{Vt(i)}}function Hn(e){return e.tView||(e.tView=Kn(1,-1,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts))}function Kn(e,t,n,r,o,i,a,s,l,u){const c=19+r,d=c+o,g=function(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:Rn);return n}(c,d);return g[1]={type:e,id:t,blueprint:g,template:n,queries:null,viewQuery:s,node:null,data:g.slice().fill(null,c),bindingStartIndex:c,expandoStartIndex:d,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof i?i():i,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:l,consts:u}}function Xn(e,t,n,r,o,i){return{type:n,index:r,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,residualStyles:void 0,classes:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Zn(e,t,n){for(let r in e)if(e.hasOwnProperty(r)){const o=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,o):n[r]=[t,o]}return n}function qn(e,t){const n=e.expandoInstructions;n.push(t.hostBindings),0!==t.hostVars&&n.push(t.hostVars)}function $n(e,t,n){for(let r=0;r<n;r++)t.push(Rn),e.blueprint.push(Rn),e.data.push(null)}function Jn(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function er(e,t,n){const r=19-t.index,o=e.data.length-(65535&t.providerIndexes);(e.expandoInstructions||(e.expandoInstructions=[])).push(r,o,n)}function tr(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function nr(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;ct(t)&&(n[""]=e)}}function rr(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function or(e,t,n){e.data.push(n);const r=n.factory||(n.factory=ot(n.type)),o=new Wt(r,ct(n),null);e.blueprint.push(o),t.push(o)}function ir(e,t,n){const r=ht(t,e),o=Hn(n),i=e[10],a=dr(e,Un(e,o,null,n.onPush?64:16,r,t,i,i.createRenderer(r,n)));e[t.index]=a}function ar(e,t,n,r,o,i){const a=i[t];if(null!==a){const e=r.setInput;for(let t=0;t<a.length;){const o=a[t++],i=a[t++],s=a[t++];null!==e?r.setInput(n,s,o,i):n[i]=s}}}function sr(e,t){let n=null,r=0;for(;r<t.length;){const o=t[r];if(0!==o)if(5!==o){if("number"==typeof o)break;e.hasOwnProperty(o)&&(null===n&&(n=[]),n.push(o,e[o],t[r+1])),r+=2}else r+=2;else r+=4}return n}function lr(e,t){const n=e[5];for(let r=0;r<n.length;r++){const e=n[r],o=e[3][3][16];if(o!==t&&0==(16&o[2])){const t=e[1];Qn(t,e,t.template,e[8])}}}function ur(e,t){const n=Mt(t,e);if(At(n)&&80&n[2]){const e=n[1];Qn(e,n,e.template,n[8])}}function cr(e,t){const n=Mt(t,e),r=n[1];!function(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n),Gn(r,n,n[8])}function dr(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function gr(e){for(;e;){e[2]|=64;const t=_n(e);if(0!=(512&e[2])&&!t)return e;e=t}return null}function pr(e,t,n){const r=t[10];r.begin&&r.begin();try{Qn(e,t,e.template,n)}catch(o){throw Ar(t,o),o}finally{r.end&&r.end()}}function fr(e){!function(e){for(let t=0;t<e.components.length;t++){const n=e.components[t],r=mt(n),o=r[1];Yn(o,r,o.template,n)}}(e[8])}function hr(e,t,n){Ot(0),t(e,n)}const Mr=(()=>Promise.resolve(null))();function mr(e){return e[7]||(e[7]=[])}function Ar(e,t){const n=e[9],r=n?n.get(Tn,null):null;r&&r.handleError(t)}function yr(e,t){const n=t[3];return-1===e.index?st(n)?n:null:n}function Tr(e,t,n,r,o){if(null!=r){let i,a=!1;st(r)?i=r:at(r)&&(a=!0,r=r[0]);const s=ft(r);0===e&&null!==n?null==o?Ir(t,n,s):xr(t,n,s,o||null):1===e&&null!==n?xr(t,n,s,o||null):2===e?function(e,t,n){const r=Cr(e,t);r&&function(e,t,n,r){gt(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}(t,s,a):3===e&&t.destroyNode(s),null!=i&&function(e,t,n,r,o){const i=n[7];i!==ft(n)&&Tr(t,e,r,i,o);for(let a=9;a<n.length;a++){const o=n[a];Lr(o[1],o,e,t,r,i)}}(t,e,i,n,o)}}function Dr(e,t){let n;return at(e)&&(n=e[6])&&2===n.type?yr(n,e):e[3]===t?null:e[3]}function Nr(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const e=t[n[r]];if(!(e instanceof Wt)){const t=n[r+1];if(Array.isArray(t))for(let n=0;n<t.length;n+=2)t[n+1].call(e[t[n]]);else t.call(e)}}}(e,t),function(e,t){const n=e.cleanup;if(null!==n){const e=t[7];for(let r=0;r<n.length-1;r+=2)if("string"==typeof n[r]){const o=n[r+1],i="function"==typeof o?o(t):ft(t[o]),a=e[n[r+2]],s=n[r+3];"boolean"==typeof s?i.removeEventListener(n[r],a,s):s>=0?e[s]():e[-s].unsubscribe(),r+=2}else n[r].call(e[n[r+1]]);t[7]=null}}(e,t);const n=t[6];n&&3===n.type&&gt(t[11])&&t[11].destroy();const r=t[17];if(null!==r&&st(t[3])){r!==t[3]&&function(e,t){const n=e[5],r=n.indexOf(t);n.splice(r,1)}(r,t);const n=t[5];null!==n&&n.detachView(e)}}}function xr(e,t,n,r){gt(e)?e.insertBefore(t,n,r):t.insertBefore(n,r,!0)}function Ir(e,t,n){gt(e)?e.appendChild(t,n):t.appendChild(n)}function wr(e,t,n,r){null!==r?xr(e,t,n,r):Ir(e,t,n)}function Cr(e,t){return gt(e)?e.parentNode(t):t.parentNode}function Er(e,t,n,r){const o=function(e,t,n){let r=t.parent;for(;null!=r&&(4===r.type||5===r.type);)r=(t=r).parent;if(null==r){const e=n[6];return 2===e.type?function(e,t){const n=yr(e,t);return n?Cr(t[11],n[7]):null}(e,n):n[0]}if(t&&5===t.type&&4&t.flags)return ht(t,n).parentNode;if(2&r.flags){const t=e.data,n=t[t[r.index].directiveStart].encapsulation;if(n!==He.ShadowDom&&n!==He.Native)return null}return ht(r,n)}(e,r,t);if(null!=o){const e=t[11],i=function(e,t){if(2===e.type){const n=yr(e,t);return null===n?null:function e(t,n){const r=9+t+1;if(r<n.length){const t=n[r],o=t[1].firstChild;if(null!==o)return function t(n,r){if(null!==r){const o=r.type;if(3===o)return ht(r,n);if(0===o)return e(-1,n[r.index]);if(4===o||5===o){const o=r.child;if(null!==o)return t(n,o);{const t=n[r.index];return st(t)?e(-1,t):ft(t)}}{const e=n[16],o=e[6],i=_n(e),a=o.projection[r.projection];return null!=a?t(i,a):t(n,r.next)}}return null}(t,o)}return n[7]}(n.indexOf(t,9)-9,n)}return 4===e.type||5===e.type?ht(e,t):null}(r.parent||t[6],t);if(Array.isArray(n))for(let t=0;t<n.length;t++)wr(e,o,n[t],i);else wr(e,o,n,i)}}function vr(e,t,n,r,o,i,a){for(;null!=n;){const s=r[n.index],l=n.type;a&&0===t&&(s&&In(ft(s),r),n.flags|=4),64!=(64&n.flags)&&(4===l||5===l?(vr(e,t,n.child,r,o,i,!1),Tr(t,e,o,s,i)):1===l?br(e,t,r,n,o,i):Tr(t,e,o,s,i)),n=a?n.projectionNext:n.next}}function Lr(e,t,n,r,o,i){vr(n,r,e.node.child,t,o,i,!1)}function br(e,t,n,r,o,i){const a=n[16],s=a[6].projection[r.projection];if(Array.isArray(s))for(let l=0;l<s.length;l++)Tr(t,e,o,s[l],i);else vr(e,t,s,a[3],o,i,!0)}function Or(e,t,n){gt(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function Sr(e,t,n){gt(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}class jr extends class{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._viewContainerRef=null,this._tViewNode=null}get rootNodes(){const e=this._lView;return null==e[0]?function e(t,n,r,o,i=!1){for(;null!==r;){const a=n[r.index];if(null!==a&&o.push(ft(a)),st(a))for(let t=9;t<a.length;t++){const n=a[t],r=n[1].firstChild;null!==r&&e(n[1],n,r,o)}const s=r.type;if(4===s||5===s)e(t,n,r.child,o);else if(1===s){const t=n[16],i=t[6],a=_n(t);let s=i.projection[r.projection];null!==s&&null!==a&&e(a[1],a,s,o,!0)}r=i?r.projectionNext:r.next}return o}(e[1],e,e[6].child,[]):[]}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const e=this._viewContainerRef.indexOf(this);e>-1&&this._viewContainerRef.detach(e),this._viewContainerRef=null}!function(e,t){if(!(256&t[2])){const n=t[11];gt(n)&&n.destroyNode&&Lr(e,t,n,3,null,null),function(e){let t=e[13];if(!t)return Nr(e[1],e);for(;t;){let n=null;if(at(t))n=t[13];else{const e=t[9];e&&(n=e)}if(!n){for(;t&&!t[4]&&t!==e;)at(t)&&Nr(t[1],t),t=Dr(t,e);null===t&&(t=e),at(t)&&Nr(t[1],t),n=t&&t[4]}t=n}}(t)}}(this._lView[1],this._lView)}onDestroy(e){var t,n,r;t=this._lView[1],r=e,mr(n=this._lView).push(r),t.firstCreatePass&&function(e){return e.cleanup||(e.cleanup=[])}(t).push(n[7].length-1,null)}markForCheck(){gr(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){pr(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(e,t,n){Lt(!0);try{pr(e,t,n)}finally{Lt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(e){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=e}detachFromAppRef(){var e;this._appRef=null,Lr(this._lView[1],e=this._lView,e[11],2,null,null)}attachToAppRef(e){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}{constructor(e){super(e),this._view=e}detectChanges(){fr(this._view)}checkNoChanges(){!function(e){Lt(!0);try{fr(e)}finally{Lt(!1)}}(this._view)}get context(){return null}}let Pr;function kr(e,t,n){return Pr||(Pr=class extends e{}),new Pr(ht(t,n))}const zr=new be("Set Injector scope."),Rr={},_r={},Vr=[];let Br=void 0;function Ur(){return void 0===Br&&(Br=new Ge),Br}function Fr(e,t=null,n=null,r){return new Gr(e,n,t||Ur(),r)}class Gr{constructor(e,t,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const o=[];t&&Ye(t,n=>this.processProvider(n,e,t)),Ye([e],e=>this.processInjectorType(e,[],o)),this.records.set(Oe,Yr(void 0,this));const i=this.records.get(zr);this.scope=null!=i?i.value:null,this.source=r||("object"==typeof e?null:pe(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=Se,n=te.Default){this.assertNotDestroyed();const r=Re(this);try{if(!(n&te.SkipSelf)){let t=this.records.get(e);if(void 0===t){const n=("function"==typeof(o=e)||"object"==typeof o&&o instanceof be)&&ie(e);t=n&&this.injectableDefInScope(n)?Yr(Qr(e),Rr):null,this.records.set(e,t)}if(null!=t)return this.hydrate(e,t)}return(n&te.Self?Ur():this.parent).get(e,t=n&te.Optional&&t===Se?null:t)}catch(i){if("NullInjectorError"===i.name){if((i.ngTempTokenPath=i.ngTempTokenPath||[]).unshift(pe(e)),r)throw i;return function(e,t,n,r){const o=e.ngTempTokenPath;throw t.__source&&o.unshift(t.__source),e.message=function(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let o=pe(t);if(Array.isArray(t))o=t.map(pe).join(" -> ");else if("object"==typeof t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];e.push(n+":"+("string"==typeof r?JSON.stringify(r):pe(r)))}o=`{${e.join(", ")}}`}return`${n}${r?"("+r+")":""}[${o}]: ${e.replace(je,"\n  ")}`}("\n"+e.message,o,n,r),e.ngTokenPath=o,e.ngTempTokenPath=null,e}(i,e,"R3InjectorError",this.source)}throw i}finally{Re(r)}var o}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((t,n)=>e.push(pe(n))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,n){if(!(e=me(e)))return!1;let r=se(e);const o=null==r&&e.ngModule||void 0,i=void 0===o?e:o,a=-1!==n.indexOf(i);if(void 0!==o&&(r=se(o)),null==r)return!1;if(null!=r.imports&&!a){let e;n.push(i);try{Ye(r.imports,r=>{this.processInjectorType(r,t,n)&&(void 0===e&&(e=[]),e.push(r))})}finally{}if(void 0!==e)for(let t=0;t<e.length;t++){const{ngModule:n,providers:r}=e[t];Ye(r,e=>this.processProvider(e,n,r||Vr))}}this.injectorDefTypes.add(i),this.records.set(i,Yr(r.factory,Rr));const s=r.providers;if(null!=s&&!a){const t=e;Ye(s,e=>this.processProvider(e,t,s))}return void 0!==o&&void 0!==e.providers}processProvider(e,t,n){let r=Hr(e=me(e))?e:me(e&&e.provide);const o=function(e,t,n){return Wr(e)?Yr(void 0,e.useValue):Yr(function(e,t,n){let r=void 0;if(Hr(e)){const t=me(e);return ot(t)||Qr(t)}if(Wr(e))r=()=>me(e.useValue);else if((o=e)&&o.useFactory)r=()=>e.useFactory(...Fe(e.deps||[]));else if(function(e){return!(!e||!e.useExisting)}(e))r=()=>Be(me(e.useExisting));else{const o=me(e&&(e.useClass||e.provide));if(o||function(e,t,n){let r="";throw e&&t&&(r=` - only instances of Provider and Type are allowed, got: [${t.map(e=>e==n?"?"+n+"?":"...").join(", ")}]`),new Error(`Invalid provider for the NgModule '${pe(e)}'`+r)}(t,n,e),!function(e){return!!e.deps}(e))return ot(o)||Qr(o);r=()=>new o(...Fe(e.deps))}var o;return r}(e,t,n),Rr)}(e,t,n);if(Hr(e)||!0!==e.multi){const e=this.records.get(r);e&&void 0!==e.multi&&Cn()}else{let t=this.records.get(r);t?void 0===t.multi&&Cn():(t=Yr(void 0,Rr,!0),t.factory=()=>Fe(t.multi),this.records.set(r,t)),r=e,t.multi.push(e)}this.records.set(r,o)}hydrate(e,t){var n;return t.value===_r?function(e){throw new Error(`Cannot instantiate cyclic dependency! ${e}`)}(pe(e)):t.value===Rr&&(t.value=_r,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){return!!e.providedIn&&("string"==typeof e.providedIn?"any"===e.providedIn||e.providedIn===this.scope:this.injectorDefTypes.has(e.providedIn))}}function Qr(e){const t=ie(e),n=null!==t?t.factory:ot(e);if(null!==n)return n;const r=se(e);if(null!==r)return r.factory;if(e instanceof be)throw new Error(`Token ${pe(e)} is missing a \u0275prov definition.`);if(e instanceof Function)return function(e){const t=e.length;if(t>0){const n=function(e,t){const n=[];for(let r=0;r<e;r++)n.push("?");return n}(t);throw new Error(`Can't resolve all parameters for ${pe(e)}: (${n.join(", ")}).`)}const n=function(e){const t=e&&(e[le]||e[de]||e[ce]&&e[ce]());if(t){const n=function(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\n`+`This will become an error in v10. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new Error("unreachable")}function Yr(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function Wr(e){return null!==e&&"object"==typeof e&&Pe in e}function Hr(e){return"function"==typeof e}const Kr=function(e,t,n){return function(e,t=null,n=null,r){const o=Fr(e,t,n,r);return o._resolveInjectorDefTypes(),o}({name:n},t,e,n)};let Xr=(()=>{class e{static create(e,t){return Array.isArray(e)?Kr(e,t,""):Kr(e.providers,e.parent,e.name||"")}}return e.THROW_IF_NOT_FOUND=Se,e.NULL=new Ge,e.\u0275prov=re({token:e,providedIn:"any",factory:()=>Be(Oe)}),e.__NG_ELEMENT_ID__=-1,e})(),Zr=new Map;const qr=new Set;function $r(e){return"string"==typeof e?e:e.text()}function Jr(e,t){let n=e.styles,r=e.classes,o=0;for(let i=0;i<t.length;i++){const e=t[i];"number"==typeof e?o=e:1==o?r=fe(r,e):2==o&&(n=fe(n,e+": "+t[++i]+";"))}null!==n&&(e.styles=n),null!==r&&(e.classes=r)}let eo=null;function to(){if(!eo){const e=Ne.Symbol;if(e&&e.iterator)eo=e.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(eo=n)}}}return eo}function no(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}function ro(e){return!!oo(e)&&(Array.isArray(e)||!(e instanceof Map)&&to()in e)}function oo(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function io(e,t=te.Default){const n=xt();return null==n?Be(e,t):cn(wt(),n,me(e),t)}function ao(e,t,n,r,o){const i=o?"class":"style";!function(e,t,n,r,o){for(let i=0;i<n.length;){const a=n[i++],s=n[i++],l=t[a],u=e.data[a];null!==u.setInput?u.setInput(l,o,r,s):l[s]=o}}(e,n,t.inputs[i],i,r)}function so(e,t,n,r){const o=xt(),i=It(),a=19+e,s=o[11],l=o[a]=Bn(t,s,Dt.lFrame.currentNamespace),u=i.firstCreatePass?function(e,t,n,r,o,i,a){const s=t.consts,l=yt(s,i),u=Fn(t,n[6],e,3,o,l);return function(e,t,n,r){let o=!1;if(Nt()){const i=function(e,t,n){const r=e.directiveRegistry;let o=null;if(r)for(let i=0;i<r.length;i++){const a=r[i];Pn(n,a.selectors,!1)&&(o||(o=[]),un(on(n,t),e,a.type),ct(a)?(2&n.flags&&wn(n),tr(e,n),o.unshift(a)):o.push(a))}return o}(e,t,n),a=null===r?null:{"":-1};if(null!==i){let r=0;o=!0,rr(n,e.data.length,i.length);for(let e=0;e<i.length;e++){const t=i[e];t.providersResolver&&t.providersResolver(t)}er(e,n,i.length);let s=!1,l=!1;for(let o=0;o<i.length;o++){const u=i[o];n.mergedAttrs=Kt(n.mergedAttrs,u.hostAttrs),or(e,t,u),nr(e.data.length-1,u,a),null!==u.contentQueries&&(n.flags|=8),null===u.hostBindings&&null===u.hostAttrs&&0===u.hostVars||(n.flags|=128),!s&&(u.onChanges||u.onInit||u.doCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index-19),s=!0),l||!u.onChanges&&!u.doCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index-19),l=!0),qn(e,u),r+=u.hostVars}!function(e,t){const n=t.directiveEnd,r=e.data,o=t.attrs,i=[];let a=null,s=null;for(let l=t.directiveStart;l<n;l++){const e=r[l],n=e.inputs,u=null===o||Ln(t)?null:sr(n,o);i.push(u),a=Zn(n,l,a),s=Zn(e.outputs,l,s)}null!==a&&(a.hasOwnProperty("class")&&(t.flags|=16),a.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=i,t.inputs=a,t.outputs=s}(e,n),$n(e,t,r)}a&&function(e,t,n){if(t){const r=e.localNames=[];for(let e=0;e<t.length;e+=2){const o=n[t[e+1]];if(null==o)throw new Error(`Export of name '${t[e+1]}' not found!`);r.push(t[e],o)}}}(n,r,a)}n.mergedAttrs=Kt(n.mergedAttrs,n.attrs)}(t,n,u,yt(s,a)),null!==u.mergedAttrs&&Jr(u,u.mergedAttrs),null!==t.queries&&t.queries.elementStart(t,u),u}(e,i,o,0,t,n,r):i.data[a];Ct(u,!0);const c=u.mergedAttrs;null!==c&&Ht(s,l,c);const d=u.classes;null!==d&&Sr(s,l,d);const g=u.styles;null!==g&&Or(s,l,g),Er(i,o,l,u),0===Dt.lFrame.elementDepthCount&&In(l,o),Dt.lFrame.elementDepthCount++,ut(u)&&(function(e,t,n){Nt()&&(function(e,t,n,r){const o=n.directiveStart,i=n.directiveEnd;e.firstCreatePass||on(n,t),In(r,t);const a=n.initialInputs;for(let s=o;s<i;s++){const r=e.data[s],i=ct(r);i&&ir(t,n,r);const l=pn(t,e,s,n);In(l,t),null!==a&&ar(0,s-o,l,r,0,a),i&&(Mt(n.index,t)[8]=l)}}(e,t,n,ht(n,t)),128==(128&n.flags)&&function(e,t,n){const r=n.directiveStart,o=n.directiveEnd,i=e.expandoInstructions,a=e.firstCreatePass,s=n.index-19;try{Vt(s);for(let n=r;n<o;n++){const r=e.data[n],o=t[n];null!==r.hostBindings||0!==r.hostVars||null!==r.hostAttrs?Jn(r,o):a&&i.push(null)}}finally{Vt(-1)}}(e,t,n))}(i,o,u),function(e,t,n){if(lt(t)){const r=t.directiveEnd;for(let o=t.directiveStart;o<r;o++){const t=e.data[o];t.contentQueries&&t.contentQueries(1,n[o],o)}}}(i,u,o)),null!==r&&function(e,t,n=ht){const r=t.localNames;if(null!==r){let o=t.index+1;for(let i=0;i<r.length;i+=2){const a=r[i+1],s=-1===a?n(t,e):e[a];e[o++]=s}}}(o,u)}function lo(){let e=wt();Et()?Dt.lFrame.isParent=!1:(e=e.parent,Ct(e,!1));const t=e;Dt.lFrame.elementDepthCount--;const n=It();n.firstCreatePass&&(Bt(n,e),lt(e)&&n.queries.elementEnd(e)),null!==t.classes&&function(e){return 0!=(16&e.flags)}(t)&&ao(n,t,xt(),t.classes,!0),null!==t.styles&&function(e){return 0!=(32&e.flags)}(t)&&ao(n,t,xt(),t.styles,!1)}function uo(e,t,n,r){so(e,t,n,r),lo()}function co(e){return!!e&&"function"==typeof e.then}function go(e,t,n=!1,r){const o=xt(),i=It(),a=wt();return function(e,t,n,r,o,i,a=!1,s){const l=ut(r),u=e.firstCreatePass&&(e.cleanup||(e.cleanup=[])),c=mr(t);let d=!0;if(3===r.type){const g=ht(r,t),p=s?s(g):Ke,f=p.target||g,h=c.length,M=s?e=>s(ft(e[r.index])).target:r.index;if(gt(n)){let a=null;if(!s&&l&&(a=function(e,t,n,r){const o=e.cleanup;if(null!=o)for(let i=0;i<o.length-1;i+=2){const e=o[i];if(e===n&&o[i+1]===r){const e=t[7],n=o[i+2];return e.length>n?e[n]:null}"string"==typeof e&&(i+=2)}return null}(e,t,o,r.index)),null!==a)(a.__ngLastListenerFn__||a).__ngNextListenerFn__=i,a.__ngLastListenerFn__=i,d=!1;else{i=fo(r,t,i,!1);const e=n.listen(p.name||f,o,i);c.push(i,e),u&&u.push(o,M,h,h+1)}}else i=fo(r,t,i,!0),f.addEventListener(o,i,a),c.push(i),u&&u.push(o,M,h,a)}const g=r.outputs;let p;if(d&&null!==g&&(p=g[o])){const e=p.length;if(e)for(let n=0;n<e;n+=2){const e=t[p[n]][p[n+1]].subscribe(i),a=c.length;c.push(i,e),u&&u.push(o,r.index,a,-(a+1))}}}(i,o,o[11],a,e,t,n,r),go}function po(e,t,n){try{return!1!==t(n)}catch(r){return Ar(e,r),!1}}function fo(e,t,n,r){return function o(i){if(i===Function)return n;const a=2&e.flags?Mt(e.index,t):t;0==(32&t[2])&&gr(a);let s=po(t,n,i),l=o.__ngNextListenerFn__;for(;l;)s=po(t,l,i)&&s,l=l.__ngNextListenerFn__;return r&&!1===s&&(i.preventDefault(),i.returnValue=!1),s}}function ho(e,t=""){const n=xt(),r=It(),o=e+19,i=r.firstCreatePass?Fn(r,n[6],e,3,null,null):r.data[o],a=n[o]=function(e,t){return gt(t)?t.createText(e):t.createTextNode(e)}(t,n[11]);Er(r,n,a,i),Ct(i,!1)}function Mo(e,t){const n=mt(e)[1],r=n.data.length-1;Bt(n,{directiveStart:r,directiveEnd:r+1})}class mo{}class Ao{resolveComponentFactory(e){throw function(e){const t=Error(`No component factory found for ${pe(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(e)}}let yo=(()=>{class e{}return e.NULL=new Ao,e})(),To=(()=>{class e{constructor(e){this.nativeElement=e}}return e.__NG_ELEMENT_ID__=()=>Do(e),e})();const Do=function(e){return kr(e,wt(),xt())};class No{}const xo=function(){var e={Important:1,DashCase:2};return e[e.Important]="Important",e[e.DashCase]="DashCase",e}();let Io=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>wo(),e})();const wo=function(){const e=xt(),t=Mt(wt().index,e);return function(e){const t=e[11];if(gt(t))return t;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(at(t)?t:e)};let Co=(()=>{class e{}return e.\u0275prov=re({token:e,providedIn:"root",factory:()=>null}),e})();class Eo{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const vo=new Eo("9.1.3");class Lo{constructor(){}supports(e){return ro(e)}create(e){return new Oo(e)}}const bo=(e,t)=>t;class Oo{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||bo}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,r=0,o=null;for(;t||n;){const i=!n||t&&t.currentIndex<ko(n,r,o)?t:n,a=ko(i,r,o),s=i.currentIndex;if(i===n)r--,n=n._nextRemoved;else if(t=t._next,null==i.previousIndex)r++;else{o||(o=[]);const e=a-r,t=s-r;if(e!=t){for(let n=0;n<e;n++){const r=n<o.length?o[n]:o[n]=0,i=r+n;t<=i&&i<e&&(o[n]=r+1)}o[i.previousIndex]=t-e}}a!==s&&e(i,a,s)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!ro(e))throw new Error(`Error trying to diff '${pe(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t,n,r,o=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let t=0;t<this.length;t++)n=e[t],r=this._trackByFn(t,n),null!==o&&no(o.trackById,r)?(i&&(o=this._verifyReinsertion(o,n,r,t)),no(o.item,n)||this._addIdentityChange(o,n)):(o=this._mismatch(o,n,r,t),i=!0),o=o._next}else t=0,function(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[to()]();let r;for(;!(r=n.next()).done;)t(r.value)}}(e,e=>{r=this._trackByFn(t,e),null!==o&&no(o.trackById,r)?(i&&(o=this._verifyReinsertion(o,e,r,t)),no(o.item,e)||this._addIdentityChange(o,e)):(o=this._mismatch(o,e,r,t),i=!0),o=o._next,t++}),this.length=t;return this._truncate(o),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e,t;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=t)e.previousIndex=e.currentIndex,t=e._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,r){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(no(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,r)):null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(no(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,r)):e=this._addAfter(new So(t,n),o,r),e}_verifyReinsertion(e,t,n,r){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==o?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,o=e._nextRemoved;return null===r?this._removalsHead=o:r._nextRemoved=o,null===o?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new Po),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Po),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class So{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class jo{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&no(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class Po{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new jo,this.map.set(t,n)),n.add(e)}get(e,t){const n=this.map.get(e);return n?n.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ko(e,t,n){const r=e.previousIndex;if(null===r)return r;let o=0;return n&&r<n.length&&(o=n[r]),r+t+o}class zo{constructor(){}supports(e){return e instanceof Map||oo(e)}create(){return new Ro}}class Ro{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||oo(e)))throw new Error(`Error trying to diff '${pe(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(e,n)=>{if(t&&t.key===n)this._maybeAddToChanges(t,e),this._appendAfter=t,t=t._next;else{const r=this._getOrCreateRecordForKey(n,e);t=this._insertBeforeOrAppend(t,r)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let e=t;null!==e;e=e._nextRemoved)e===this._mapHead&&(this._mapHead=null),this._records.delete(e.key),e._nextRemoved=e._next,e.previousValue=e.currentValue,e.currentValue=null,e._prev=null,e._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const n=this._records.get(e);this._maybeAddToChanges(n,t);const r=n._prev,o=n._next;return r&&(r._next=o),o&&(o._prev=r),n._next=null,n._prev=null,n}const n=new _o(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){no(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class _o{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let Vo=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(null!=n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return e.create(t,n)},deps:[[e,new ee,new $]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(null!=t)return t;throw new Error(`Cannot find a differ supporting object '${e}' of type '${n=e,n.name||typeof n}'`);var n}}return e.\u0275prov=re({token:e,providedIn:"root",factory:()=>new e([new Lo])}),e})(),Bo=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return e.create(t,n)},deps:[[e,new ee,new $]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(t)return t;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return e.\u0275prov=re({token:e,providedIn:"root",factory:()=>new e([new zo])}),e})();const Uo=[new zo],Fo=new Vo([new Lo]),Go=new Bo(Uo),Qo={};class Yo extends yo{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=rt(e);return new Ko(t,this.ngModule)}}function Wo(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}const Ho=new be("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Jt});class Ko extends mo{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=e.selectors.map(zn).join(","),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return Wo(this.componentDef.inputs)}get outputs(){return Wo(this.componentDef.outputs)}create(e,t,n,r){const o=(r=r||this.ngModule)?function(e,t){return{get:(n,r,o)=>{const i=e.get(n,Qo,o);return i!==Qo||r===Qo?i:t.get(n,r,o)}}}(e,r.injector):e,i=o.get(No,pt),a=o.get(Co,null),s=i.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",u=n?function(e,t,n){if(gt(e))return e.selectRootElement(t,n===He.ShadowDom);let r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(s,n,this.componentDef.encapsulation):Bn(l,i.createRenderer(null,this.componentDef),function(e){const t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(l)),c=this.componentDef.onPush?576:528,d="string"==typeof n&&/^#root-ng-internal-isolated-\d+/.test(n),g={components:[],scheduler:Jt,clean:Mr,playerHandler:null,flags:0},p=Kn(0,-1,null,1,0,null,null,null,null,null),f=Un(null,p,g,c,null,null,i,s,a,o);let h,M;jt(f,null);try{const e=function(e,t,n,r,o,i){const a=n[1];n[19]=e;const s=Fn(a,null,0,3,null,null),l=s.mergedAttrs=t.hostAttrs;null!==l&&(Jr(s,l),null!==e&&(Ht(o,e,l),null!==s.classes&&Sr(o,e,s.classes),null!==s.styles&&Or(o,e,s.styles)));const u=r.createRenderer(e,t),c=Un(n,Hn(t),null,t.onPush?64:16,n[19],s,r,u,void 0);return a.firstCreatePass&&(un(on(s,n),a,t.type),tr(a,s),rr(s,n.length,1)),dr(n,c),n[19]=c}(u,this.componentDef,f,i,s);if(u)if(n)Ht(s,u,["ng-version",vo.full]);else{const{attrs:e,classes:t}=function(e){const t=[],n=[];let r=1,o=2;for(;r<e.length;){let i=e[r];if("string"==typeof i)2===o?""!==i&&t.push(i,e[++r]):8===o&&n.push(i);else{if(!Sn(o))break;o=i}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);e&&Ht(s,u,e),t&&t.length>0&&Sr(s,u,t.join(" "))}M=f[1].data[19],t&&(M.projection=t.map(e=>Array.from(e))),h=function(e,t,n,r,o){const i=n[1],a=function(e,t,n){const r=wt();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),er(e,r,1),or(e,t,n));const o=pn(t,e,t.length-1,r);In(o,t);const i=ht(r,t);return i&&In(i,t),o}(i,n,t);r.components.push(a),e[8]=a,o&&o.forEach(e=>e(a,t)),t.contentQueries&&t.contentQueries(1,a,n.length-1);const s=wt();if(i.firstCreatePass&&(null!==t.hostBindings||null!==t.hostAttrs)){Vt(s.index-19);const e=n[1];qn(e,t),$n(e,n,t.hostVars),Jn(t,a)}return a}(e,this.componentDef,f,g,[Mo]),Gn(p,f,null)}finally{_t()}const m=new Xo(this.componentType,h,kr(To,M,f),f,M);return n&&!d||(m.hostView._tViewNode.child=M),m}}class Xo extends class{}{constructor(e,t,n,r,o){super(),this.location=n,this._rootLView=r,this._tNode=o,this.destroyCbs=[],this.instance=t,this.hostView=this.changeDetectorRef=new jr(r),this.hostView._tViewNode=function(e,t,n,r){let o=e.node;return null==o&&(e.node=o=Xn(0,null,2,-1,null,null)),r[6]=o}(r[1],0,0,r),this.componentType=e}get injector(){return new Mn(this._tNode,this._rootLView)}destroy(){this.destroyCbs&&(this.destroyCbs.forEach(e=>e()),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}onDestroy(e){this.destroyCbs&&this.destroyCbs.push(e)}}var Zo=["en",[["a","p"],["AM","PM"],void 0],[["AM","PM"],void 0,void 0],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],void 0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],void 0,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",void 0,"{1} 'at' {0}",void 0],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){let t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let qo={};function $o(e){return e in qo||(qo[e]=Ne.ng&&Ne.ng.common&&Ne.ng.common.locales&&Ne.ng.common.locales[e]),qo[e]}const Jo=function(){var e={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencyCode:15,CurrencySymbol:16,CurrencyName:17,Currencies:18,Directionality:19,PluralCase:20,ExtraData:21};return e[e.LocaleId]="LocaleId",e[e.DayPeriodsFormat]="DayPeriodsFormat",e[e.DayPeriodsStandalone]="DayPeriodsStandalone",e[e.DaysFormat]="DaysFormat",e[e.DaysStandalone]="DaysStandalone",e[e.MonthsFormat]="MonthsFormat",e[e.MonthsStandalone]="MonthsStandalone",e[e.Eras]="Eras",e[e.FirstDayOfWeek]="FirstDayOfWeek",e[e.WeekendRange]="WeekendRange",e[e.DateFormat]="DateFormat",e[e.TimeFormat]="TimeFormat",e[e.DateTimeFormat]="DateTimeFormat",e[e.NumberSymbols]="NumberSymbols",e[e.NumberFormats]="NumberFormats",e[e.CurrencyCode]="CurrencyCode",e[e.CurrencySymbol]="CurrencySymbol",e[e.CurrencyName]="CurrencyName",e[e.Currencies]="Currencies",e[e.Directionality]="Directionality",e[e.PluralCase]="PluralCase",e[e.ExtraData]="ExtraData",e}();let ei="en-US";function ti(e){var t,n;n="Expected localeId to be defined",null==(t=e)&&function(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+` [Expected=> null != ${t} <=Actual]`)}(n,t),"string"==typeof e&&(ei=e.toLowerCase().replace(/_/g,"-"))}const ni=new Map;class ri extends Qe{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Yo(this);const n=it(e),r=e[Ee]||null;r&&ti(r),this._bootstrapComponents=en(n.bootstrap),this._r3Injector=Fr(e,t,[{provide:Qe,useValue:this},{provide:yo,useValue:this.componentFactoryResolver}],pe(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=Xr.THROW_IF_NOT_FOUND,n=te.Default){return e===Xr||e===Qe||e===Oe?this:this._r3Injector.get(e,t,n)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class oi extends class{}{constructor(e){super(),this.moduleType=e,null!==it(e)&&function e(t){if(null!==t.\u0275mod.id){const e=t.\u0275mod.id;(function(e,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${e} - ${pe(t)} vs ${pe(t.name)}`)})(e,ni.get(e),t),ni.set(e,t)}let n=t.\u0275mod.imports;n instanceof Function&&(n=n()),n&&n.forEach(t=>e(t))}(e)}create(e){return new ri(this.moduleType,e)}}class ii extends b{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){let r,o=e=>null,i=()=>null;e&&"object"==typeof e?(r=this.__isAsync?t=>{setTimeout(()=>e.next(t))}:t=>{e.next(t)},e.error&&(o=this.__isAsync?t=>{setTimeout(()=>e.error(t))}:t=>{e.error(t)}),e.complete&&(i=this.__isAsync?()=>{setTimeout(()=>e.complete())}:()=>{e.complete()})):(r=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)},t&&(o=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)}),n&&(i=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,i);return e instanceof A&&e.add(a),a}}const ai=new be("Application Initializer");let si=(()=>{class e{constructor(e){this.appInits=e,this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}runInitializers(){if(this.initialized)return;const e=[],t=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const t=this.appInits[n]();co(t)&&e.push(t)}Promise.all(e).then(()=>{t()}).catch(e=>{this.reject(e)}),0===e.length&&t(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(Be(ai,8))},e.\u0275prov=re({token:e,factory:e.\u0275fac}),e})();const li=new be("AppId"),ui={provide:li,useFactory:function(){return`${ci()}${ci()}${ci()}`},deps:[]};function ci(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const di=new be("Platform Initializer"),gi=new be("Platform ID"),pi=new be("appBootstrapListener");let fi=(()=>{class e{log(e){console.log(e)}warn(e){console.warn(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=re({token:e,factory:e.\u0275fac}),e})();const hi=new be("LocaleId"),Mi=new be("DefaultCurrencyCode");class mi{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}const Ai=function(e){return new oi(e)},yi=Ai,Ti=function(e){return Promise.resolve(Ai(e))},Di=function(e){const t=Ai(e),n=en(it(e).declarations).reduce((e,t)=>{const n=rt(t);return n&&e.push(new Ko(n)),e},[]);return new mi(t,n)},Ni=Di,xi=function(e){return Promise.resolve(Di(e))};let Ii=(()=>{class e{constructor(){this.compileModuleSync=yi,this.compileModuleAsync=Ti,this.compileModuleAndAllComponentsSync=Ni,this.compileModuleAndAllComponentsAsync=xi}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=re({token:e,factory:e.\u0275fac}),e})();const wi=new be("compilerOptions"),Ci=(()=>Promise.resolve(0))();function Ei(e){"undefined"==typeof Zone?Ci.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class vi{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ii(!1),this.onMicrotaskEmpty=new ii(!1),this.onStable=new ii(!1),this.onError=new ii(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=t,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){let e=Ne.requestAnimationFrame,t=Ne.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(e){const t=!!e.shouldCoalesceEventChangeDetection&&e.nativeRequestAnimationFrame&&(()=>{!function(e){-1===e.lastRequestAnimationFrameId&&(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Ne,()=>{e.lastRequestAnimationFrameId=-1,Si(e),Oi(e)}),Si(e))}(e)});e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:t},onInvokeTask:(n,r,o,i,a,s)=>{try{return ji(e),n.invokeTask(o,i,a,s)}finally{t&&"eventTask"===i.type&&t(),Pi(e)}},onInvoke:(t,n,r,o,i,a,s)=>{try{return ji(e),t.invoke(r,o,i,a,s)}finally{Pi(e)}},onHasTask:(t,n,r,o)=>{t.hasTask(r,o),n===r&&("microTask"==o.change?(e._hasPendingMicrotasks=o.microTask,Si(e),Oi(e)):"macroTask"==o.change&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,n,r,o)=>(t.handleError(r,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}(this)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!vi.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(vi.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,r){const o=this._inner,i=o.scheduleEventTask("NgZoneEvent: "+r,e,bi,Li,Li);try{return o.runTask(i,t,n)}finally{o.cancelTask(i)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}function Li(){}const bi={};function Oi(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Si(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||e.shouldCoalesceEventChangeDetection&&-1!==e.lastRequestAnimationFrameId)}function ji(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Pi(e){e._nesting--,Oi(e)}class ki{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ii,this.onMicrotaskEmpty=new ii,this.onStable=new ii,this.onError=new ii}run(e,t,n){return e.apply(t,n)}runGuarded(e,t,n){return e.apply(t,n)}runOutsideAngular(e){return e()}runTask(e,t,n,r){return e.apply(t,n)}}let zi=(()=>{class e{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{vi.assertNotInAngularZone(),Ei(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ei(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(t=>!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,t,n){let r=-1;t&&t>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(e=>e.timeoutId!==r),e(this._didWork,this.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:r,updateCb:n})}whenStable(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,t,n){return[]}}return e.\u0275fac=function(t){return new(t||e)(Be(vi))},e.\u0275prov=re({token:e,factory:e.\u0275fac}),e})(),Ri=(()=>{class e{constructor(){this._applications=new Map,Bi.addToWindow(this)}registerApplication(e,t){this._applications.set(e,t)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,t=!0){return Bi.findTestabilityInTree(this,e,t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=re({token:e,factory:e.\u0275fac}),e})();class _i{addToWindow(e){}findTestabilityInTree(e,t,n){return null}}let Vi,Bi=new _i,Ui=function(e,t,n){const r=e.get(wi,[]).concat(t),o=new oi(n);if(0===Zr.size)return Promise.resolve(o);const i=function(e){const t=[];return e.forEach(e=>e&&t.push(...e)),t}(r.map(e=>e.providers));if(0===i.length)return Promise.resolve(o);const a=function(){const e=Ne.ng;if(!e||!e.\u0275compilerFacade)throw new Error("Angular JIT compilation failed: '@angular/compiler' not loaded!\n  - JIT compilation is discouraged for production use-cases! Consider AOT mode instead.\n  - Did you bootstrap using '@angular/platform-browser-dynamic' or '@angular/platform-server'?\n  - Alternatively provide the compiler with 'import \"@angular/compiler\";' before bootstrapping.");return e.\u0275compilerFacade}(),s=Xr.create({providers:i}).get(a.ResourceLoader);return function(e){const t=[],n=new Map;function r(e){let t=n.get(e);if(!t){const r=(e=>Promise.resolve(s.get(e)))(e);n.set(e,t=r.then($r))}return t}return Zr.forEach((e,n)=>{const o=[];e.templateUrl&&o.push(r(e.templateUrl).then(t=>{e.template=t}));const i=e.styleUrls,a=e.styles||(e.styles=[]),s=e.styles.length;i&&i.forEach((t,n)=>{a.push(""),o.push(r(t).then(r=>{a[s+n]=r,i.splice(i.indexOf(t),1),0==i.length&&(e.styleUrls=void 0)}))});const l=Promise.all(o).then(()=>function(e){qr.delete(e)}(n));t.push(l)}),Zr=new Map,Promise.all(t).then(()=>{})}().then(()=>o)};const Fi=new be("AllowMultipleToken");function Gi(e,t,n=[]){const r=`Platform: ${t}`,o=new be(r);return(t=[])=>{let i=Qi();if(!i||i.injector.get(Fi,!1))if(e)e(n.concat(t).concat({provide:o,useValue:!0}));else{const e=n.concat(t).concat({provide:o,useValue:!0},{provide:zr,useValue:"platform"});!function(e){if(Vi&&!Vi.destroyed&&!Vi.injector.get(Fi,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Vi=e.get(Yi);const t=e.get(di,null);t&&t.forEach(e=>e())}(Xr.create({providers:e,name:r}))}return function(e){const t=Qi();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(o)}}function Qi(){return Vi&&!Vi.destroyed?Vi:null}let Yi=(()=>{class e{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,t){const n=function(e,t){let n;return n="noop"===e?new ki:("zone.js"===e?void 0:e)||new vi({enableLongStackTrace:xn(),shouldCoalesceEventChangeDetection:t}),n}(t?t.ngZone:void 0,t&&t.ngZoneEventCoalescing||!1),r=[{provide:vi,useValue:n}];return n.run(()=>{const t=Xr.create({providers:r,parent:this.injector,name:e.moduleType.name}),o=e.create(t),i=o.injector.get(Tn,null);if(!i)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return o.onDestroy(()=>Ki(this._modules,o)),n.runOutsideAngular(()=>n.onError.subscribe({next:e=>{i.handleError(e)}})),function(e,t,n){try{const r=n();return co(r)?r.catch(n=>{throw t.runOutsideAngular(()=>e.handleError(n)),n}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(i,n,()=>{const e=o.injector.get(si);return e.runInitializers(),e.donePromise.then(()=>(ti(o.injector.get(hi,"en-US")||"en-US"),this._moduleDoBootstrap(o),o))})})}bootstrapModule(e,t=[]){const n=Wi({},t);return Ui(this.injector,n,e).then(e=>this.bootstrapModuleFactory(e,n))}_moduleDoBootstrap(e){const t=e.injector.get(Hi);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(e=>t.bootstrap(e));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${pe(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. `+"Please define one of these.");e.instance.ngDoBootstrap(t)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(t){return new(t||e)(Be(Xr))},e.\u0275prov=re({token:e,factory:e.\u0275fac}),e})();function Wi(e,t){return Array.isArray(t)?t.reduce(Wi,e):Object.assign(Object.assign({},e),t)}let Hi=(()=>{class e{constructor(e,t,n,r,o,i){this._zone=e,this._console=t,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=o,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=xn(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new w(e=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{e.next(this._stable),e.complete()})}),s=new w(e=>{let t;this._zone.runOutsideAngular(()=>{t=this._zone.onStable.subscribe(()=>{vi.assertNotInAngularZone(),Ei(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,e.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{vi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{e.next(!1)}))});return()=>{t.unsubscribe(),n.unsubscribe()}});this.isStable=function(...e){let t=Number.POSITIVE_INFINITY,n=null,r=e[e.length-1];var o;return(o=r)&&"function"==typeof o.schedule?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof r&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof w?e[0]:function(e=Number.POSITIVE_INFINITY){return function e(t,n,r=Number.POSITIVE_INFINITY){return"function"==typeof n?o=>o.pipe(e((e,r)=>{return(o=t(e,r),o instanceof w?o:new w(z(o))).pipe(function(e,t){return function(t){return t.lift(new _(e,void 0))}}((t,o)=>n(e,t,r,o)));var o},r)):("number"==typeof n&&(r=n),e=>e.lift(new B(t,r)))}(I,e)}(t)(function(e,t){return t?function(e,t){return new w(n=>{const r=new A;let o=0;return r.add(t.schedule((function(){o!==e.length?(n.next(e[o++]),n.closed||r.add(this.schedule())):n.complete()}))),r})}(e,t):new w(j(e))}(e,n))}(a,s.pipe(e=>{return F()((t=K,function(e){let n;n="function"==typeof t?t:function(){return t};const r=Object.create(e,W);return r.source=e,r.subjectFactory=n,r})(e));var t}))}bootstrap(e,t){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=e instanceof mo?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Qe),o=n.create(Xr.NULL,[],t||n.selector,r);o.onDestroy(()=>{this._unloadComponent(o)});const i=o.injector.get(zi,null);return i&&o.injector.get(Ri).registerApplication(o.location.nativeElement,i),this._loadComponent(o),xn()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),o}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let e of this._views)e.detectChanges();if(this._enforceNoNewChanges)for(let e of this._views)e.checkNoChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const t=e;this._views.push(t),t.attachToAppRef(this)}detachView(e){const t=e;Ki(this._views,t),t.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(pi,[]).concat(this._bootstrapListeners).forEach(t=>t(e))}_unloadComponent(e){this.detachView(e.hostView),Ki(this.components,e)}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy())}get viewCount(){return this._views.length}}return e.\u0275fac=function(t){return new(t||e)(Be(vi),Be(fi),Be(Xr),Be(Tn),Be(yo),Be(si))},e.\u0275prov=re({token:e,factory:e.\u0275fac}),e})();function Ki(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Xi=Gi(null,"core",[{provide:gi,useValue:"unknown"},{provide:Yi,deps:[Xr]},{provide:Ri,deps:[]},{provide:fi,deps:[]}]),Zi=[{provide:Hi,useClass:Hi,deps:[vi,fi,Xr,Tn,yo,si]},{provide:Ho,deps:[vi],useFactory:function(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:si,useClass:si,deps:[[new $,ai]]},{provide:Ii,useClass:Ii,deps:[]},ui,{provide:Vo,useFactory:function(){return Fo},deps:[]},{provide:Bo,useFactory:function(){return Go},deps:[]},{provide:hi,useFactory:function(e){return ti(e=e||"undefined"!=typeof $localize&&$localize.locale||"en-US"),e},deps:[[new q(hi),new $,new ee]]},{provide:Mi,useValue:"USD"}];let qi=(()=>{class e{constructor(e){}}return e.\u0275mod=tt({type:e}),e.\u0275inj=oe({factory:function(t){return new(t||e)(Be(Hi))},providers:Zi}),e})(),$i=null;function Ji(){return $i}const ea=new be("DocumentToken"),ta=function(){var e={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return e[e.Zero]="Zero",e[e.One]="One",e[e.Two]="Two",e[e.Few]="Few",e[e.Many]="Many",e[e.Other]="Other",e}();class na{}let ra=(()=>{class e extends na{constructor(e){super(),this.locale=e}getPluralCategory(e,t){switch(function(e){return function(e){const t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=$o(t);if(n)return n;const r=t.split("-")[0];if(n=$o(r),n)return n;if("en"===r)return Zo;throw new Error(`Missing locale data for the locale "${e}".`)}(e)[Jo.PluralCase]}(t||this.locale)(e)){case ta.Zero:return"zero";case ta.One:return"one";case ta.Two:return"two";case ta.Few:return"few";case ta.Many:return"many";default:return"other"}}}return e.\u0275fac=function(t){return new(t||e)(Be(hi))},e.\u0275prov=re({token:e,factory:e.\u0275fac}),e})(),oa=(()=>{class e{}return e.\u0275mod=tt({type:e}),e.\u0275inj=oe({factory:function(t){return new(t||e)},providers:[{provide:na,useClass:ra}]}),e})();class ia extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var e;e=new ia,$i||($i=e)}getProperty(e,t){return e[t]}log(e){window.console&&window.console.log&&window.console.log(e)}logGroup(e){window.console&&window.console.group&&window.console.group(e)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){return e.parentNode&&e.parentNode.removeChild(e),e}getValue(e){return e.value}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(e){const t=sa||(sa=document.querySelector("base"),sa)?sa.getAttribute("href"):null;return null==t?null:(n=t,aa||(aa=document.createElement("a")),aa.setAttribute("href",n),"/"===aa.pathname.charAt(0)?aa.pathname:"/"+aa.pathname);var n}resetBaseElement(){sa=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(e){return function(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const e=n.indexOf("="),[r,o]=-1==e?[n,""]:[n.slice(0,e),n.slice(e+1)];if(r.trim()===t)return decodeURIComponent(o)}return null}(document.cookie,e)}}let aa,sa=null;const la=new be("TRANSITION_ID"),ua=[{provide:ai,useFactory:function(e,t,n){return()=>{n.get(si).donePromise.then(()=>{const n=Ji();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter(t=>t.getAttribute("ng-transition")===e).forEach(e=>n.remove(e))})}},deps:[la,ea,Xr],multi:!0}];class ca{static init(){var e;e=new ca,Bi=e}addToWindow(e){Ne.getAngularTestability=(t,n=!0)=>{const r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},Ne.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ne.getAllAngularRootElements=()=>e.getAllRootElements(),Ne.frameworkStabilizers||(Ne.frameworkStabilizers=[]),Ne.frameworkStabilizers.push(e=>{const t=Ne.getAllAngularTestabilities();let n=t.length,r=!1;const o=function(t){r=r||t,n--,0==n&&e(r)};t.forEach((function(e){e.whenStable(o)}))})}findTestabilityInTree(e,t,n){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:n?Ji().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}const da=new be("EventManagerPlugins");let ga=(()=>{class e{constructor(e,t){this._zone=t,this._eventNameToPlugin=new Map,e.forEach(e=>e.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}addGlobalEventListener(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}getZone(){return this._zone}_findPluginFor(e){const t=this._eventNameToPlugin.get(e);if(t)return t;const n=this._plugins;for(let r=0;r<n.length;r++){const t=n[r];if(t.supports(e))return this._eventNameToPlugin.set(e,t),t}throw new Error(`No event manager plugin found for event ${e}`)}}return e.\u0275fac=function(t){return new(t||e)(Be(da),Be(vi))},e.\u0275prov=re({token:e,factory:e.\u0275fac}),e})();class pa{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const r=Ji().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,n)}}let fa=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(e){const t=new Set;e.forEach(e=>{this._stylesSet.has(e)||(this._stylesSet.add(e),t.add(e))}),this.onStylesAdded(t)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=re({token:e,factory:e.\u0275fac}),e})(),ha=(()=>{class e extends fa{constructor(e){super(),this._doc=e,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(e.head)}_addStylesToHost(e,t){e.forEach(e=>{const n=this._doc.createElement("style");n.textContent=e,this._styleNodes.add(t.appendChild(n))})}addHost(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)}removeHost(e){this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach(t=>this._addStylesToHost(e,t))}ngOnDestroy(){this._styleNodes.forEach(e=>Ji().remove(e))}}return e.\u0275fac=function(t){return new(t||e)(Be(ea))},e.\u0275prov=re({token:e,factory:e.\u0275fac}),e})();const Ma={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ma=/%COMP%/g;function Aa(e,t,n){for(let r=0;r<t.length;r++){let o=t[r];Array.isArray(o)?Aa(e,o,n):(o=o.replace(ma,e),n.push(o))}return n}function ya(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let Ta=(()=>{class e{constructor(e,t,n){this.eventManager=e,this.sharedStylesHost=t,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new Da(e)}createRenderer(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case He.Emulated:{let n=this.rendererByCompId.get(t.id);return n||(n=new Na(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n}case He.Native:case He.ShadowDom:return new xa(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){const e=Aa(t.id,t.styles,[]);this.sharedStylesHost.addStyles(e),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(t){return new(t||e)(Be(ga),Be(ha),Be(li))},e.\u0275prov=re({token:e,factory:e.\u0275fac}),e})();class Da{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(Ma[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,n){e&&e.insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,r){if(r){t=r+":"+t;const o=Ma[r];o?e.setAttributeNS(o,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const r=Ma[n];r?e.removeAttributeNS(r,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,r){r&xo.DashCase?e.style.setProperty(t,n,r&xo.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&xo.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ya(n)):this.eventManager.addEventListener(e,t,ya(n))}}class Na extends Da{constructor(e,t,n,r){super(e),this.component=n;const o=Aa(r+"-"+n.id,n.styles,[]);t.addStyles(o),this.contentAttr="_ngcontent-%COMP%".replace(ma,r+"-"+n.id),this.hostAttr=function(e){return"_nghost-%COMP%".replace(ma,e)}(r+"-"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class xa extends Da{constructor(e,t,n,r){super(e),this.sharedStylesHost=t,this.hostEl=n,this.component=r,this.shadowRoot=r.encapsulation===He.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const o=Aa(r.id,r.styles,[]);for(let i=0;i<o.length;i++){const e=document.createElement("style");e.textContent=o[i],this.shadowRoot.appendChild(e)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Ia=(()=>{class e extends pa{constructor(e){super(e)}supports(e){return!0}addEventListener(e,t,n){return e.addEventListener(t,n,!1),()=>this.removeEventListener(e,t,n)}removeEventListener(e,t,n){return e.removeEventListener(t,n)}}return e.\u0275fac=function(t){return new(t||e)(Be(ea))},e.\u0275prov=re({token:e,factory:e.\u0275fac}),e})();const wa=["alt","control","meta","shift"],Ca={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ea={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},va={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let La=(()=>{class e extends pa{constructor(e){super(e)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,n,r){const o=e.parseEventName(n),i=e.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ji().onAndCancel(t,o.domEventName,i))}static parseEventName(t){const n=t.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const o=e._normalizeKey(n.pop());let i="";if(wa.forEach(e=>{const t=n.indexOf(e);t>-1&&(n.splice(t,1),i+=e+".")}),i+=o,0!=n.length||0===o.length)return null;const a={};return a.domEventName=r,a.fullKey=i,a}static getEventFullKey(e){let t="",n=function(e){let t=e.key;if(null==t){if(t=e.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&Ea.hasOwnProperty(t)&&(t=Ea[t]))}return Ca[t]||t}(e);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),wa.forEach(r=>{r!=n&&(0,va[r])(e)&&(t+=r+".")}),t+=n,t}static eventCallback(t,n,r){return o=>{e.getEventFullKey(o)===t&&r.runGuarded(()=>n(o))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return e.\u0275fac=function(t){return new(t||e)(Be(ea))},e.\u0275prov=re({token:e,factory:e.\u0275fac}),e})();const ba=Gi(Xi,"browser",[{provide:gi,useValue:"browser"},{provide:di,useValue:function(){ia.makeCurrent(),ca.init()},multi:!0},{provide:ea,useFactory:function(){return function(e){dt=e}(document),document},deps:[]}]),Oa=[[],{provide:zr,useValue:"root"},{provide:Tn,useFactory:function(){return new Tn},deps:[]},{provide:da,useClass:Ia,multi:!0,deps:[ea,vi,gi]},{provide:da,useClass:La,multi:!0,deps:[ea]},[],{provide:Ta,useClass:Ta,deps:[ga,ha,li]},{provide:No,useExisting:Ta},{provide:fa,useExisting:ha},{provide:ha,useClass:ha,deps:[ea]},{provide:zi,useClass:zi,deps:[vi]},{provide:ga,useClass:ga,deps:[da,vi]},[]];let Sa=(()=>{class e{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:e,providers:[{provide:li,useValue:t.appId},{provide:la,useExisting:li},ua]}}}return e.\u0275mod=tt({type:e}),e.\u0275inj=oe({factory:function(t){return new(t||e)(Be(e,12))},providers:Oa,imports:[oa,qi]}),e})();"undefined"!=typeof window&&window,n("fRhN");var ja=1e-6,Pa="undefined"!=typeof Float32Array?Float32Array:Array,ka=Math.random;function za(e){Pa=e}var Ra=Math.PI/180;function _a(e){return e*Ra}function Va(e,t){return Math.abs(e-t)<=ja*Math.max(1,Math.abs(e),Math.abs(t))}function Ba(){var e=new Pa(9);return Pa!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function Ua(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function Fa(e){var t=new Pa(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Ga(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Qa(e,t,n,r,o,i,a,s,l){var u=new Pa(9);return u[0]=e,u[1]=t,u[2]=n,u[3]=r,u[4]=o,u[5]=i,u[6]=a,u[7]=s,u[8]=l,u}function Ya(e,t,n,r,o,i,a,s,l,u){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e[4]=i,e[5]=a,e[6]=s,e[7]=l,e[8]=u,e}function Wa(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Ha(e,t){if(e===t){var n=t[1],r=t[2],o=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=o}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function Ka(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],d=c*a-s*u,g=-c*i+s*l,p=u*i-a*l,f=n*d+r*g+o*p;return f?(e[0]=d*(f=1/f),e[1]=(-c*r+o*u)*f,e[2]=(s*r-o*a)*f,e[3]=g*f,e[4]=(c*n-o*l)*f,e[5]=(-s*n+o*i)*f,e[6]=p*f,e[7]=(-u*n+r*l)*f,e[8]=(a*n-r*i)*f,e):null}function Xa(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8];return e[0]=a*c-s*u,e[1]=o*u-r*c,e[2]=r*s-o*a,e[3]=s*l-i*c,e[4]=n*c-o*l,e[5]=o*i-n*s,e[6]=i*u-a*l,e[7]=r*l-n*u,e[8]=n*a-r*i,e}function Za(e){var t=e[3],n=e[4],r=e[5],o=e[6],i=e[7],a=e[8];return e[0]*(a*n-r*i)+e[1]*(-a*t+r*o)+e[2]*(i*t-n*o)}function qa(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],g=n[0],p=n[1],f=n[2],h=n[3],M=n[4],m=n[5],A=n[6],y=n[7],T=n[8];return e[0]=g*r+p*a+f*u,e[1]=g*o+p*s+f*c,e[2]=g*i+p*l+f*d,e[3]=h*r+M*a+m*u,e[4]=h*o+M*s+m*c,e[5]=h*i+M*l+m*d,e[6]=A*r+y*a+T*u,e[7]=A*o+y*s+T*c,e[8]=A*i+y*l+T*d,e}function $a(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],g=n[0],p=n[1];return e[0]=r,e[1]=o,e[2]=i,e[3]=a,e[4]=s,e[5]=l,e[6]=g*r+p*a+u,e[7]=g*o+p*s+c,e[8]=g*i+p*l+d,e}function Ja(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],g=Math.sin(n),p=Math.cos(n);return e[0]=p*r+g*a,e[1]=p*o+g*s,e[2]=p*i+g*l,e[3]=p*a-g*r,e[4]=p*s-g*o,e[5]=p*l-g*i,e[6]=u,e[7]=c,e[8]=d,e}function es(e,t,n){var r=n[0],o=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=o*t[3],e[4]=o*t[4],e[5]=o*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function ts(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function ns(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function rs(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function os(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function is(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=n+n,s=r+r,l=o+o,u=n*a,c=r*a,d=r*s,g=o*a,p=o*s,f=o*l,h=i*a,M=i*s,m=i*l;return e[0]=1-d-f,e[3]=c-m,e[6]=g+M,e[1]=c+m,e[4]=1-u-f,e[7]=p-h,e[2]=g-M,e[5]=p+h,e[8]=1-u-d,e}function as(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],d=t[9],g=t[10],p=t[11],f=t[12],h=t[13],M=t[14],m=t[15],A=n*s-r*a,y=n*l-o*a,T=n*u-i*a,D=r*l-o*s,N=r*u-i*s,x=o*u-i*l,I=c*h-d*f,w=c*M-g*f,C=c*m-p*f,E=d*M-g*h,v=d*m-p*h,L=g*m-p*M,b=A*L-y*v+T*E+D*C-N*w+x*I;return b?(e[0]=(s*L-l*v+u*E)*(b=1/b),e[1]=(l*C-a*L-u*w)*b,e[2]=(a*v-s*C+u*I)*b,e[3]=(o*v-r*L-i*E)*b,e[4]=(n*L-o*C+i*w)*b,e[5]=(r*C-n*v-i*I)*b,e[6]=(h*x-M*N+m*D)*b,e[7]=(M*T-f*x-m*y)*b,e[8]=(f*N-h*T+m*A)*b,e):null}function ss(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function ls(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function us(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))}function cs(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e}function ds(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}function gs(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e}function ps(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e}function fs(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function hs(e,t){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],d=t[0],g=t[1],p=t[2],f=t[3],h=t[4],M=t[5],m=t[6],A=t[7],y=t[8];return Math.abs(n-d)<=ja*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(r-g)<=ja*Math.max(1,Math.abs(r),Math.abs(g))&&Math.abs(o-p)<=ja*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(i-f)<=ja*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(a-h)<=ja*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(s-M)<=ja*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(l-m)<=ja*Math.max(1,Math.abs(l),Math.abs(m))&&Math.abs(u-A)<=ja*Math.max(1,Math.abs(u),Math.abs(A))&&Math.abs(c-y)<=ja*Math.max(1,Math.abs(c),Math.abs(y))}var Ms=qa,ms=ds;function As(){var e=new Pa(16);return Pa!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function ys(e){var t=new Pa(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Ts(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Ds(e,t,n,r,o,i,a,s,l,u,c,d,g,p,f,h){var M=new Pa(16);return M[0]=e,M[1]=t,M[2]=n,M[3]=r,M[4]=o,M[5]=i,M[6]=a,M[7]=s,M[8]=l,M[9]=u,M[10]=c,M[11]=d,M[12]=g,M[13]=p,M[14]=f,M[15]=h,M}function Ns(e,t,n,r,o,i,a,s,l,u,c,d,g,p,f,h,M){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e[4]=i,e[5]=a,e[6]=s,e[7]=l,e[8]=u,e[9]=c,e[10]=d,e[11]=g,e[12]=p,e[13]=f,e[14]=h,e[15]=M,e}function xs(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Is(e,t){if(e===t){var n=t[1],r=t[2],o=t[3],i=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=i,e[11]=t[14],e[12]=o,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function ws(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],d=t[9],g=t[10],p=t[11],f=t[12],h=t[13],M=t[14],m=t[15],A=n*s-r*a,y=n*l-o*a,T=n*u-i*a,D=r*l-o*s,N=r*u-i*s,x=o*u-i*l,I=c*h-d*f,w=c*M-g*f,C=c*m-p*f,E=d*M-g*h,v=d*m-p*h,L=g*m-p*M,b=A*L-y*v+T*E+D*C-N*w+x*I;return b?(e[0]=(s*L-l*v+u*E)*(b=1/b),e[1]=(o*v-r*L-i*E)*b,e[2]=(h*x-M*N+m*D)*b,e[3]=(g*N-d*x-p*D)*b,e[4]=(l*C-a*L-u*w)*b,e[5]=(n*L-o*C+i*w)*b,e[6]=(M*T-f*x-m*y)*b,e[7]=(c*x-g*T+p*y)*b,e[8]=(a*v-s*C+u*I)*b,e[9]=(r*C-n*v-i*I)*b,e[10]=(f*N-h*T+m*A)*b,e[11]=(d*T-c*N-p*A)*b,e[12]=(s*w-a*E-l*I)*b,e[13]=(n*E-r*w+o*I)*b,e[14]=(h*y-f*D-M*A)*b,e[15]=(c*D-d*y+g*A)*b,e):null}function Cs(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],d=t[9],g=t[10],p=t[11],f=t[12],h=t[13],M=t[14],m=t[15];return e[0]=s*(g*m-p*M)-d*(l*m-u*M)+h*(l*p-u*g),e[1]=-(r*(g*m-p*M)-d*(o*m-i*M)+h*(o*p-i*g)),e[2]=r*(l*m-u*M)-s*(o*m-i*M)+h*(o*u-i*l),e[3]=-(r*(l*p-u*g)-s*(o*p-i*g)+d*(o*u-i*l)),e[4]=-(a*(g*m-p*M)-c*(l*m-u*M)+f*(l*p-u*g)),e[5]=n*(g*m-p*M)-c*(o*m-i*M)+f*(o*p-i*g),e[6]=-(n*(l*m-u*M)-a*(o*m-i*M)+f*(o*u-i*l)),e[7]=n*(l*p-u*g)-a*(o*p-i*g)+c*(o*u-i*l),e[8]=a*(d*m-p*h)-c*(s*m-u*h)+f*(s*p-u*d),e[9]=-(n*(d*m-p*h)-c*(r*m-i*h)+f*(r*p-i*d)),e[10]=n*(s*m-u*h)-a*(r*m-i*h)+f*(r*u-i*s),e[11]=-(n*(s*p-u*d)-a*(r*p-i*d)+c*(r*u-i*s)),e[12]=-(a*(d*M-g*h)-c*(s*M-l*h)+f*(s*g-l*d)),e[13]=n*(d*M-g*h)-c*(r*M-o*h)+f*(r*g-o*d),e[14]=-(n*(s*M-l*h)-a*(r*M-o*h)+f*(r*l-o*s)),e[15]=n*(s*g-l*d)-a*(r*g-o*d)+c*(r*l-o*s),e}function Es(e){var t=e[0],n=e[1],r=e[2],o=e[3],i=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=e[9],d=e[10],g=e[11],p=e[12],f=e[13],h=e[14],M=e[15];return(t*a-n*i)*(d*M-g*h)-(t*s-r*i)*(c*M-g*f)+(t*l-o*i)*(c*h-d*f)+(n*s-r*a)*(u*M-g*p)-(n*l-o*a)*(u*h-d*p)+(r*l-o*s)*(u*f-c*p)}function vs(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],g=t[9],p=t[10],f=t[11],h=t[12],M=t[13],m=t[14],A=t[15],y=n[0],T=n[1],D=n[2],N=n[3];return e[0]=y*r+T*s+D*d+N*h,e[1]=y*o+T*l+D*g+N*M,e[2]=y*i+T*u+D*p+N*m,e[3]=y*a+T*c+D*f+N*A,e[4]=(y=n[4])*r+(T=n[5])*s+(D=n[6])*d+(N=n[7])*h,e[5]=y*o+T*l+D*g+N*M,e[6]=y*i+T*u+D*p+N*m,e[7]=y*a+T*c+D*f+N*A,e[8]=(y=n[8])*r+(T=n[9])*s+(D=n[10])*d+(N=n[11])*h,e[9]=y*o+T*l+D*g+N*M,e[10]=y*i+T*u+D*p+N*m,e[11]=y*a+T*c+D*f+N*A,e[12]=(y=n[12])*r+(T=n[13])*s+(D=n[14])*d+(N=n[15])*h,e[13]=y*o+T*l+D*g+N*M,e[14]=y*i+T*u+D*p+N*m,e[15]=y*a+T*c+D*f+N*A,e}function Ls(e,t,n){var r,o,i,a,s,l,u,c,d,g,p,f,h=n[0],M=n[1],m=n[2];return t===e?(e[12]=t[0]*h+t[4]*M+t[8]*m+t[12],e[13]=t[1]*h+t[5]*M+t[9]*m+t[13],e[14]=t[2]*h+t[6]*M+t[10]*m+t[14],e[15]=t[3]*h+t[7]*M+t[11]*m+t[15]):(o=t[1],i=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],g=t[9],p=t[10],f=t[11],e[0]=r=t[0],e[1]=o,e[2]=i,e[3]=a,e[4]=s,e[5]=l,e[6]=u,e[7]=c,e[8]=d,e[9]=g,e[10]=p,e[11]=f,e[12]=r*h+s*M+d*m+t[12],e[13]=o*h+l*M+g*m+t[13],e[14]=i*h+u*M+p*m+t[14],e[15]=a*h+c*M+f*m+t[15]),e}function bs(e,t,n){var r=n[0],o=n[1],i=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*o,e[5]=t[5]*o,e[6]=t[6]*o,e[7]=t[7]*o,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Os(e,t,n,r){var o,i,a,s,l,u,c,d,g,p,f,h,M,m,A,y,T,D,N,x,I,w,C,E,v=r[0],L=r[1],b=r[2],O=Math.sqrt(v*v+L*L+b*b);return O<ja?null:(v*=O=1/O,L*=O,b*=O,o=Math.sin(n),i=Math.cos(n),l=t[1],u=t[2],c=t[3],g=t[5],p=t[6],f=t[7],M=t[9],m=t[10],A=t[11],N=v*L*(a=1-i)-b*o,x=L*L*a+i,I=b*L*a+v*o,w=v*b*a+L*o,C=L*b*a-v*o,E=b*b*a+i,e[0]=(s=t[0])*(y=v*v*a+i)+(d=t[4])*(T=L*v*a+b*o)+(h=t[8])*(D=b*v*a-L*o),e[1]=l*y+g*T+M*D,e[2]=u*y+p*T+m*D,e[3]=c*y+f*T+A*D,e[4]=s*N+d*x+h*I,e[5]=l*N+g*x+M*I,e[6]=u*N+p*x+m*I,e[7]=c*N+f*x+A*I,e[8]=s*w+d*C+h*E,e[9]=l*w+g*C+M*E,e[10]=u*w+p*C+m*E,e[11]=c*w+f*C+A*E,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function Ss(e,t,n){var r=Math.sin(n),o=Math.cos(n),i=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=t[9],d=t[10],g=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=i*o+u*r,e[5]=a*o+c*r,e[6]=s*o+d*r,e[7]=l*o+g*r,e[8]=u*o-i*r,e[9]=c*o-a*r,e[10]=d*o-s*r,e[11]=g*o-l*r,e}function js(e,t,n){var r=Math.sin(n),o=Math.cos(n),i=t[0],a=t[1],s=t[2],l=t[3],u=t[8],c=t[9],d=t[10],g=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*o-u*r,e[1]=a*o-c*r,e[2]=s*o-d*r,e[3]=l*o-g*r,e[8]=i*r+u*o,e[9]=a*r+c*o,e[10]=s*r+d*o,e[11]=l*r+g*o,e}function Ps(e,t,n){var r=Math.sin(n),o=Math.cos(n),i=t[0],a=t[1],s=t[2],l=t[3],u=t[4],c=t[5],d=t[6],g=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*o+u*r,e[1]=a*o+c*r,e[2]=s*o+d*r,e[3]=l*o+g*r,e[4]=u*o-i*r,e[5]=c*o-a*r,e[6]=d*o-s*r,e[7]=g*o-l*r,e}function ks(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function zs(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Rs(e,t,n){var r,o,i,a=n[0],s=n[1],l=n[2],u=Math.sqrt(a*a+s*s+l*l);return u<ja?null:(a*=u=1/u,s*=u,l*=u,r=Math.sin(t),o=Math.cos(t),e[0]=a*a*(i=1-o)+o,e[1]=s*a*i+l*r,e[2]=l*a*i-s*r,e[3]=0,e[4]=a*s*i-l*r,e[5]=s*s*i+o,e[6]=l*s*i+a*r,e[7]=0,e[8]=a*l*i+s*r,e[9]=s*l*i-a*r,e[10]=l*l*i+o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function _s(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Vs(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Bs(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Us(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=r+r,l=o+o,u=i+i,c=r*s,d=r*l,g=r*u,p=o*l,f=o*u,h=i*u,M=a*s,m=a*l,A=a*u;return e[0]=1-(p+h),e[1]=d+A,e[2]=g-m,e[3]=0,e[4]=d-A,e[5]=1-(c+h),e[6]=f+M,e[7]=0,e[8]=g+m,e[9]=f-M,e[10]=1-(c+p),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function Fs(e,t){var n=new Pa(3),r=-t[0],o=-t[1],i=-t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=r*r+o*o+i*i+a*a;return d>0?(n[0]=2*(s*a+c*r+l*i-u*o)/d,n[1]=2*(l*a+c*o+u*r-s*i)/d,n[2]=2*(u*a+c*i+s*o-l*r)/d):(n[0]=2*(s*a+c*r+l*i-u*o),n[1]=2*(l*a+c*o+u*r-s*i),n[2]=2*(u*a+c*i+s*o-l*r)),Us(e,t,n),e}function Gs(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function Qs(e,t){var n=t[0],r=t[1],o=t[2],i=t[4],a=t[5],s=t[6],l=t[8],u=t[9],c=t[10];return e[0]=Math.sqrt(n*n+r*r+o*o),e[1]=Math.sqrt(i*i+a*a+s*s),e[2]=Math.sqrt(l*l+u*u+c*c),e}function Ys(e,t){var n=t[0]+t[5]+t[10],r=0;return n>0?(r=2*Math.sqrt(n+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e}function Ws(e,t,n,r){var o=t[0],i=t[1],a=t[2],s=t[3],l=o+o,u=i+i,c=a+a,d=o*l,g=o*u,p=o*c,f=i*u,h=i*c,M=a*c,m=s*l,A=s*u,y=s*c,T=r[0],D=r[1],N=r[2];return e[0]=(1-(f+M))*T,e[1]=(g+y)*T,e[2]=(p-A)*T,e[3]=0,e[4]=(g-y)*D,e[5]=(1-(d+M))*D,e[6]=(h+m)*D,e[7]=0,e[8]=(p+A)*N,e[9]=(h-m)*N,e[10]=(1-(d+f))*N,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function Hs(e,t,n,r,o){var i=t[0],a=t[1],s=t[2],l=t[3],u=i+i,c=a+a,d=s+s,g=i*u,p=i*c,f=i*d,h=a*c,M=a*d,m=s*d,A=l*u,y=l*c,T=l*d,D=r[0],N=r[1],x=r[2],I=o[0],w=o[1],C=o[2],E=(1-(h+m))*D,v=(p+T)*D,L=(f-y)*D,b=(p-T)*N,O=(1-(g+m))*N,S=(M+A)*N,j=(f+y)*x,P=(M-A)*x,k=(1-(g+h))*x;return e[0]=E,e[1]=v,e[2]=L,e[3]=0,e[4]=b,e[5]=O,e[6]=S,e[7]=0,e[8]=j,e[9]=P,e[10]=k,e[11]=0,e[12]=n[0]+I-(E*I+b*w+j*C),e[13]=n[1]+w-(v*I+O*w+P*C),e[14]=n[2]+C-(L*I+S*w+k*C),e[15]=1,e}function Ks(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=n+n,s=r+r,l=o+o,u=n*a,c=r*a,d=r*s,g=o*a,p=o*s,f=o*l,h=i*a,M=i*s,m=i*l;return e[0]=1-d-f,e[1]=c+m,e[2]=g-M,e[3]=0,e[4]=c-m,e[5]=1-u-f,e[6]=p+h,e[7]=0,e[8]=g+M,e[9]=p-h,e[10]=1-u-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Xs(e,t,n,r,o,i,a){var s=1/(n-t),l=1/(o-r),u=1/(i-a);return e[0]=2*i*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*i*l,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(o+r)*l,e[10]=(a+i)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*i*2*u,e[15]=0,e}function Zs(e,t,n,r,o){var i,a=1/Math.tan(t/2);return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=o&&o!==1/0?(e[10]=(o+r)*(i=1/(r-o)),e[14]=2*o*r*i):(e[10]=-1,e[14]=-2*r),e}function qs(e,t,n,r){var o=Math.tan(t.upDegrees*Math.PI/180),i=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),l=2/(a+s),u=2/(o+i);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=-(a-s)*l*.5,e[9]=(o-i)*u*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e}function $s(e,t,n,r,o,i,a){var s=1/(t-n),l=1/(r-o),u=1/(i-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+n)*s,e[13]=(o+r)*l,e[14]=(a+i)*u,e[15]=1,e}function Js(e,t,n,r){var o,i,a,s,l,u,c,d,g,p,f=t[0],h=t[1],M=t[2],m=r[0],A=r[1],y=r[2],T=n[0],D=n[1],N=n[2];return Math.abs(f-T)<ja&&Math.abs(h-D)<ja&&Math.abs(M-N)<ja?xs(e):(c=f-T,d=h-D,g=M-N,o=A*(g*=p=1/Math.sqrt(c*c+d*d+g*g))-y*(d*=p),i=y*(c*=p)-m*g,a=m*d-A*c,(p=Math.sqrt(o*o+i*i+a*a))?(o*=p=1/p,i*=p,a*=p):(o=0,i=0,a=0),s=d*a-g*i,l=g*o-c*a,u=c*i-d*o,(p=Math.sqrt(s*s+l*l+u*u))?(s*=p=1/p,l*=p,u*=p):(s=0,l=0,u=0),e[0]=o,e[1]=s,e[2]=c,e[3]=0,e[4]=i,e[5]=l,e[6]=d,e[7]=0,e[8]=a,e[9]=u,e[10]=g,e[11]=0,e[12]=-(o*f+i*h+a*M),e[13]=-(s*f+l*h+u*M),e[14]=-(c*f+d*h+g*M),e[15]=1,e)}function el(e,t,n,r){var o=t[0],i=t[1],a=t[2],s=r[0],l=r[1],u=r[2],c=o-n[0],d=i-n[1],g=a-n[2],p=c*c+d*d+g*g;p>0&&(c*=p=1/Math.sqrt(p),d*=p,g*=p);var f=l*g-u*d,h=u*c-s*g,M=s*d-l*c;return(p=f*f+h*h+M*M)>0&&(f*=p=1/Math.sqrt(p),h*=p,M*=p),e[0]=f,e[1]=h,e[2]=M,e[3]=0,e[4]=d*M-g*h,e[5]=g*f-c*M,e[6]=c*h-d*f,e[7]=0,e[8]=c,e[9]=d,e[10]=g,e[11]=0,e[12]=o,e[13]=i,e[14]=a,e[15]=1,e}function tl(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function nl(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))}function rl(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e}function ol(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}function il(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e}function al(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e}function sl(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function ll(e,t){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],d=e[9],g=e[10],p=e[11],f=e[12],h=e[13],M=e[14],m=e[15],A=t[0],y=t[1],T=t[2],D=t[3],N=t[4],x=t[5],I=t[6],w=t[7],C=t[8],E=t[9],v=t[10],L=t[11],b=t[12],O=t[13],S=t[14],j=t[15];return Math.abs(n-A)<=ja*Math.max(1,Math.abs(n),Math.abs(A))&&Math.abs(r-y)<=ja*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(o-T)<=ja*Math.max(1,Math.abs(o),Math.abs(T))&&Math.abs(i-D)<=ja*Math.max(1,Math.abs(i),Math.abs(D))&&Math.abs(a-N)<=ja*Math.max(1,Math.abs(a),Math.abs(N))&&Math.abs(s-x)<=ja*Math.max(1,Math.abs(s),Math.abs(x))&&Math.abs(l-I)<=ja*Math.max(1,Math.abs(l),Math.abs(I))&&Math.abs(u-w)<=ja*Math.max(1,Math.abs(u),Math.abs(w))&&Math.abs(c-C)<=ja*Math.max(1,Math.abs(c),Math.abs(C))&&Math.abs(d-E)<=ja*Math.max(1,Math.abs(d),Math.abs(E))&&Math.abs(g-v)<=ja*Math.max(1,Math.abs(g),Math.abs(v))&&Math.abs(p-L)<=ja*Math.max(1,Math.abs(p),Math.abs(L))&&Math.abs(f-b)<=ja*Math.max(1,Math.abs(f),Math.abs(b))&&Math.abs(h-O)<=ja*Math.max(1,Math.abs(h),Math.abs(O))&&Math.abs(M-S)<=ja*Math.max(1,Math.abs(M),Math.abs(S))&&Math.abs(m-j)<=ja*Math.max(1,Math.abs(m),Math.abs(j))}var ul=vs,cl=ol;function dl(){var e=new Pa(3);return Pa!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function gl(e){var t=new Pa(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function pl(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}function fl(e,t,n){var r=new Pa(3);return r[0]=e,r[1]=t,r[2]=n,r}function hl(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Ml(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}function ml(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function Al(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function yl(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function Tl(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function Dl(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function Nl(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function xl(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function Il(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function wl(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function Cl(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function El(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function vl(e,t){var n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2];return Math.sqrt(n*n+r*r+o*o)}function Ll(e,t){var n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2];return n*n+r*r+o*o}function bl(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function Ol(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function Sl(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function jl(e,t){var n=t[0],r=t[1],o=t[2],i=n*n+r*r+o*o;return i>0&&(i=1/Math.sqrt(i)),e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function Pl(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function kl(e,t,n){var r=t[0],o=t[1],i=t[2],a=n[0],s=n[1],l=n[2];return e[0]=o*l-i*s,e[1]=i*a-r*l,e[2]=r*s-o*a,e}function zl(e,t,n,r){var o=t[0],i=t[1],a=t[2];return e[0]=o+r*(n[0]-o),e[1]=i+r*(n[1]-i),e[2]=a+r*(n[2]-a),e}function Rl(e,t,n,r,o,i){var a=i*i,s=a*(2*i-3)+1,l=a*(i-2)+i,u=a*(i-1),c=a*(3-2*i);return e[0]=t[0]*s+n[0]*l+r[0]*u+o[0]*c,e[1]=t[1]*s+n[1]*l+r[1]*u+o[1]*c,e[2]=t[2]*s+n[2]*l+r[2]*u+o[2]*c,e}function _l(e,t,n,r,o,i){var a=1-i,s=a*a,l=i*i,u=s*a,c=3*i*s,d=3*l*a,g=l*i;return e[0]=t[0]*u+n[0]*c+r[0]*d+o[0]*g,e[1]=t[1]*u+n[1]*c+r[1]*d+o[1]*g,e[2]=t[2]*u+n[2]*c+r[2]*d+o[2]*g,e}function Vl(e,t){t=t||1;var n=2*ka()*Math.PI,r=2*ka()-1,o=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*o,e[1]=Math.sin(n)*o,e[2]=r*t,e}function Bl(e,t,n){var r=t[0],o=t[1],i=t[2],a=n[3]*r+n[7]*o+n[11]*i+n[15];return e[0]=(n[0]*r+n[4]*o+n[8]*i+n[12])/(a=a||1),e[1]=(n[1]*r+n[5]*o+n[9]*i+n[13])/a,e[2]=(n[2]*r+n[6]*o+n[10]*i+n[14])/a,e}function Ul(e,t,n){var r=t[0],o=t[1],i=t[2];return e[0]=r*n[0]+o*n[3]+i*n[6],e[1]=r*n[1]+o*n[4]+i*n[7],e[2]=r*n[2]+o*n[5]+i*n[8],e}function Fl(e,t,n){var r=n[0],o=n[1],i=n[2],a=t[0],s=t[1],l=t[2],u=o*l-i*s,c=i*a-r*l,d=r*s-o*a,g=o*d-i*c,p=i*u-r*d,f=r*c-o*u,h=2*n[3];return c*=h,d*=h,p*=2,f*=2,e[0]=a+(u*=h)+(g*=2),e[1]=s+c+p,e[2]=l+d+f,e}function Gl(e,t,n,r){var o=[],i=[];return o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],i[0]=o[0],i[1]=o[1]*Math.cos(r)-o[2]*Math.sin(r),i[2]=o[1]*Math.sin(r)+o[2]*Math.cos(r),e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e}function Ql(e,t,n,r){var o=[],i=[];return o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],i[0]=o[2]*Math.sin(r)+o[0]*Math.cos(r),i[1]=o[1],i[2]=o[2]*Math.cos(r)-o[0]*Math.sin(r),e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e}function Yl(e,t,n,r){var o=[],i=[];return o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],i[0]=o[0]*Math.cos(r)-o[1]*Math.sin(r),i[1]=o[0]*Math.sin(r)+o[1]*Math.cos(r),i[2]=o[2],e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e}function Wl(e,t){var n=fl(e[0],e[1],e[2]),r=fl(t[0],t[1],t[2]);jl(n,n),jl(r,r);var o=Pl(n,r);return o>1?0:o<-1?Math.PI:Math.acos(o)}function Hl(e){return e[0]=0,e[1]=0,e[2]=0,e}function Kl(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function Xl(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function Zl(e,t){var n=e[0],r=e[1],o=e[2],i=t[0],a=t[1],s=t[2];return Math.abs(n-i)<=ja*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-a)<=ja*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(o-s)<=ja*Math.max(1,Math.abs(o),Math.abs(s))}var ql,$l=Al,Jl=yl,eu=Tl,tu=vl,nu=Ll,ru=pl,ou=bl,iu=(ql=dl(),function(e,t,n,r,o,i){var a,s;for(t||(t=3),n||(n=0),s=r?Math.min(r*t+n,e.length):e.length,a=n;a<s;a+=t)ql[0]=e[a],ql[1]=e[a+1],ql[2]=e[a+2],o(ql,ql,i),e[a]=ql[0],e[a+1]=ql[1],e[a+2]=ql[2];return e});function au(){var e=new Pa(4);return Pa!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function su(e){var t=new Pa(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function lu(e,t,n,r){var o=new Pa(4);return o[0]=e,o[1]=t,o[2]=n,o[3]=r,o}function uu(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function cu(e,t,n,r,o){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e}function du(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}function gu(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function pu(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}function fu(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e}function hu(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function Mu(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function mu(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e}function Au(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e}function yu(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function Tu(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function Du(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e}function Nu(e,t){var n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2],i=t[3]-e[3];return Math.sqrt(n*n+r*r+o*o+i*i)}function xu(e,t){var n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2],i=t[3]-e[3];return n*n+r*r+o*o+i*i}function Iu(e){var t=e[0],n=e[1],r=e[2],o=e[3];return Math.sqrt(t*t+n*n+r*r+o*o)}function wu(e){var t=e[0],n=e[1],r=e[2],o=e[3];return t*t+n*n+r*r+o*o}function Cu(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function Eu(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function vu(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=n*n+r*r+o*o+i*i;return a>0&&(a=1/Math.sqrt(a)),e[0]=n*a,e[1]=r*a,e[2]=o*a,e[3]=i*a,e}function Lu(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function bu(e,t,n,r){var o=n[0]*r[1]-n[1]*r[0],i=n[0]*r[2]-n[2]*r[0],a=n[0]*r[3]-n[3]*r[0],s=n[1]*r[2]-n[2]*r[1],l=n[1]*r[3]-n[3]*r[1],u=n[2]*r[3]-n[3]*r[2],c=t[0],d=t[1],g=t[2],p=t[3];return e[0]=d*u-g*l+p*s,e[1]=-c*u+g*a-p*i,e[2]=c*l-d*a+p*o,e[3]=-c*s+d*i-g*o,e}function Ou(e,t,n,r){var o=t[0],i=t[1],a=t[2],s=t[3];return e[0]=o+r*(n[0]-o),e[1]=i+r*(n[1]-i),e[2]=a+r*(n[2]-a),e[3]=s+r*(n[3]-s),e}function Su(e,t){var n,r,o,i,a,s;t=t||1;do{a=(n=2*ka()-1)*n+(r=2*ka()-1)*r}while(a>=1);do{s=(o=2*ka()-1)*o+(i=2*ka()-1)*i}while(s>=1);var l=Math.sqrt((1-a)/s);return e[0]=t*n,e[1]=t*r,e[2]=t*o*l,e[3]=t*i*l,e}function ju(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3];return e[0]=n[0]*r+n[4]*o+n[8]*i+n[12]*a,e[1]=n[1]*r+n[5]*o+n[9]*i+n[13]*a,e[2]=n[2]*r+n[6]*o+n[10]*i+n[14]*a,e[3]=n[3]*r+n[7]*o+n[11]*i+n[15]*a,e}function Pu(e,t,n){var r=t[0],o=t[1],i=t[2],a=n[0],s=n[1],l=n[2],u=n[3],c=u*r+s*i-l*o,d=u*o+l*r-a*i,g=u*i+a*o-s*r,p=-a*r-s*o-l*i;return e[0]=c*u+p*-a+d*-l-g*-s,e[1]=d*u+p*-s+g*-a-c*-l,e[2]=g*u+p*-l+c*-s-d*-a,e[3]=t[3],e}function ku(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}function zu(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function Ru(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function _u(e,t){var n=e[0],r=e[1],o=e[2],i=e[3],a=t[0],s=t[1],l=t[2],u=t[3];return Math.abs(n-a)<=ja*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=ja*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(o-l)<=ja*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(i-u)<=ja*Math.max(1,Math.abs(i),Math.abs(u))}var Vu=gu,Bu=pu,Uu=fu,Fu=Nu,Gu=xu,Qu=Iu,Yu=wu,Wu=function(){var e=au();return function(t,n,r,o,i,a){var s,l;for(n||(n=4),r||(r=0),l=o?Math.min(o*n+r,t.length):t.length,s=r;s<l;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],i(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=e[3];return t}}();function Hu(){var e=new Pa(4);return Pa!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function Ku(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function Xu(e,t,n){n*=.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function Zu(e,t){var n=2*Math.acos(t[3]),r=Math.sin(n/2);return r>ja?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),n}function qu(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=n[0],l=n[1],u=n[2],c=n[3];return e[0]=r*c+a*s+o*u-i*l,e[1]=o*c+a*l+i*s-r*u,e[2]=i*c+a*u+r*l-o*s,e[3]=a*c-r*s-o*l-i*u,e}function $u(e,t,n){n*=.5;var r=t[0],o=t[1],i=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+a*s,e[1]=o*l+i*s,e[2]=i*l-o*s,e[3]=a*l-r*s,e}function Ju(e,t,n){n*=.5;var r=t[0],o=t[1],i=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l-i*s,e[1]=o*l+a*s,e[2]=i*l+r*s,e[3]=a*l-o*s,e}function ec(e,t,n){n*=.5;var r=t[0],o=t[1],i=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+o*s,e[1]=o*l-r*s,e[2]=i*l+a*s,e[3]=a*l-i*s,e}function tc(e,t){var n=t[0],r=t[1],o=t[2];return e[0]=n,e[1]=r,e[2]=o,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-o*o)),e}function nc(e,t,n,r){var o,i,a,s,l,u=t[0],c=t[1],d=t[2],g=t[3],p=n[0],f=n[1],h=n[2],M=n[3];return(i=u*p+c*f+d*h+g*M)<0&&(i=-i,p=-p,f=-f,h=-h,M=-M),1-i>ja?(o=Math.acos(i),a=Math.sin(o),s=Math.sin((1-r)*o)/a,l=Math.sin(r*o)/a):(s=1-r,l=r),e[0]=s*u+l*p,e[1]=s*c+l*f,e[2]=s*d+l*h,e[3]=s*g+l*M,e}function rc(e){var t=ka(),n=ka(),r=ka(),o=Math.sqrt(1-t),i=Math.sqrt(t);return e[0]=o*Math.sin(2*Math.PI*n),e[1]=o*Math.cos(2*Math.PI*n),e[2]=i*Math.sin(2*Math.PI*r),e[3]=i*Math.cos(2*Math.PI*r),e}function oc(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=n*n+r*r+o*o+i*i,s=a?1/a:0;return e[0]=-n*s,e[1]=-r*s,e[2]=-o*s,e[3]=i*s,e}function ic(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function ac(e,t){var n,r=t[0]+t[4]+t[8];if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,e[0]=(t[5]-t[7])*(n=.5/n),e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var o=0;t[4]>t[0]&&(o=1),t[8]>t[3*o+o]&&(o=2);var i=(o+1)%3,a=(o+2)%3;n=Math.sqrt(t[3*o+o]-t[3*i+i]-t[3*a+a]+1),e[o]=.5*n,e[3]=(t[3*i+a]-t[3*a+i])*(n=.5/n),e[i]=(t[3*i+o]+t[3*o+i])*n,e[a]=(t[3*a+o]+t[3*o+a])*n}return e}function sc(e,t,n,r){var o=.5*Math.PI/180;t*=o,n*=o,r*=o;var i=Math.sin(t),a=Math.cos(t),s=Math.sin(n),l=Math.cos(n),u=Math.sin(r),c=Math.cos(r);return e[0]=i*l*c-a*s*u,e[1]=a*s*c+i*l*u,e[2]=a*l*u-i*s*c,e[3]=a*l*c+i*s*u,e}function lc(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}var uc,cc,dc,gc,pc,fc,hc=su,Mc=lu,mc=uu,Ac=cu,yc=du,Tc=qu,Dc=Tu,Nc=Lu,xc=Ou,Ic=Iu,wc=Ic,Cc=wu,Ec=Cc,vc=vu,Lc=Ru,bc=_u,Oc=(uc=dl(),cc=fl(1,0,0),dc=fl(0,1,0),function(e,t,n){var r=Pl(t,n);return r<-.999999?(kl(uc,cc,t),ru(uc)<1e-6&&kl(uc,dc,t),jl(uc,uc),Xu(e,uc,Math.PI),e):r>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(kl(uc,t,n),e[0]=uc[0],e[1]=uc[1],e[2]=uc[2],e[3]=1+r,vc(e,e))}),Sc=(gc=Hu(),pc=Hu(),function(e,t,n,r,o,i){return nc(gc,t,o,i),nc(pc,n,r,i),nc(e,gc,pc,2*i*(1-i)),e}),jc=(fc=Ba(),function(e,t,n,r){return fc[0]=n[0],fc[3]=n[1],fc[6]=n[2],fc[1]=r[0],fc[4]=r[1],fc[7]=r[2],fc[2]=-t[0],fc[5]=-t[1],fc[8]=-t[2],vc(e,ac(e,fc))});const Pc={vtkObject:()=>null};function kc(e){if(null==e)return e;if(e.isA)return e;if(!e.vtkClass)return global.console&&global.console.error&&global.console.error("Invalid VTK object"),null;const t=Pc[e.vtkClass];if(!t)return global.console&&global.console.error&&global.console.error(`No vtk class found for Object of type ${e.vtkClass}`),null;const n=Object.assign({},e);Object.keys(n).forEach(e=>{n[e]&&"object"==typeof n[e]&&n[e].vtkClass&&(n[e]=kc(n[e]))});const r=t(n);return r&&r.modified&&r.modified(),r}kc.register=function(e,t){Pc[e]=t};let zc=0;const Rc=Symbol("void"),_c={};function Vc(){}["log","debug","info","warn","error","time","timeEnd","group","groupEnd"].forEach(e=>{_c[e]=Vc}),global.console=console.hasOwnProperty("log")?console:_c;const Bc={debug:Vc,error:global.console.error||Vc,info:global.console.info||Vc,log:global.console.log||Vc,warn:global.console.warn||Vc};function Uc(e,t){Bc[e]&&(Bc[e]=t||Vc)}function Fc(...e){Bc.log(...e)}function Gc(...e){Bc.info(...e)}function Qc(...e){Bc.debug(...e)}function Yc(...e){Bc.error(...e)}function Wc(...e){Bc.warn(...e)}const Hc={};function Kc(e){Hc[e]||(Bc.error(e),Hc[e]=!0)}const Xc={Float32Array,Float64Array,Uint8Array,Int8Array,Uint16Array,Int16Array,Uint32Array,Int32Array};function Zc(e){return e.charAt(0).toUpperCase()+e.slice(1)}function qc(e){return e.charAt(0).toLowerCase()+e.slice(1)}function $c(e,t=2,n=1e3){const r=["TB","GB","MB","KB"];let o=Number(e),i="B";for(;o>n;)o/=n,i=r.pop();return`${o.toFixed(t)} ${i}`}function Jc(e,t=" "){const n=[];let r=e;for(;r>1e3;)n.push(`000${r%1e3}`.slice(-3)),r=Math.floor(r/1e3);return r>0&&n.push(r),n.reverse(),n.join(t)}function ed(e){Object.keys(e).forEach(t=>{Array.isArray(e[t])&&(e[t]=[].concat(e[t]))})}function td(e){return e.isA?e.getState():e}function nd(e){setTimeout(e,0)}function rd(e={},t={}){ed(t);const n=[];function r(e){n[e]=null}return Number.isInteger(t.mtime)||(t.mtime=++zc),t.classHierarchy=["vtkObject"],e.isDeleted=()=>!!t.deleted,e.modified=r=>{t.deleted?Yc("instance deleted - cannot call any method"):r&&r<e.getMTime()||(t.mtime=++zc,n.forEach(t=>t&&t(e)))},e.onModified=e=>{if(t.deleted)return Yc("instance deleted - cannot call any method"),null;const o=n.length;return n.push(e),function(e){return Object.freeze({unsubscribe:function(){r(e)}})}(o)},e.getMTime=()=>t.mtime,e.isA=e=>{let n=t.classHierarchy.length;for(;n--;)if(t.classHierarchy[n]===e)return!0;return!1},e.getClassName=(e=0)=>t.classHierarchy[t.classHierarchy.length-1-e],e.set=(n={},r=!1,o=!1)=>{let i=!1;return Object.keys(n).forEach(a=>{const s=o?null:e[`set${Zc(a)}`];s&&Array.isArray(n[a])&&s.length>1?i=s(...n[a])||i:s?i=s(n[a])||i:(-1!==["mtime"].indexOf(a)||r||Wc(`Warning: Set value to model directly ${a}, ${n[a]}`),t[a]=n[a],i=!0)}),i},e.get=(...e)=>{if(!e.length)return t;const n={};return e.forEach(e=>{n[e]=t[e]}),n},e.getReferenceByName=e=>t[e],e.delete=()=>{Object.keys(t).forEach(e=>delete t[e]),n.forEach((e,t)=>r(t)),t.deleted=!0},e.getState=()=>{const n=Object.assign({},t,{vtkClass:e.getClassName()});Object.keys(n).forEach(e=>{null==n[e]?delete n[e]:n[e].isA?n[e]=n[e].getState():Array.isArray(n[e])&&(n[e]=n[e].map(td))});const r={};return Object.keys(n).sort().forEach(e=>{r[e]=n[e]}),r.mtime&&delete r.mtime,r},e.shallowCopy=(n,r=!1)=>{if(n.getClassName()!==e.getClassName())throw new Error(`Cannot ShallowCopy ${n.getClassName()} into ${e.getClassName()}`);const o=n.get(),i=Object.keys(t).sort();Object.keys(o).sort().forEach(e=>{const n=i.indexOf(e);-1===n?r&&Qc(`add ${e} in shallowCopy`):i.splice(n,1),t[e]=o[e]}),i.length&&r&&Qc(`Untouched keys: ${i.join(", ")}`),e.modified()},e}function od(e,t,n){n.forEach(n=>{"object"==typeof n?e[`get${Zc(n.name)}`]=()=>t[n.name]:e[`get${Zc(n)}`]=()=>t[n]})}const id={enum:(e,t,n)=>r=>{if("string"==typeof r){if(void 0!==n.enum[r])return t[n.name]!==n.enum[r]&&(t[n.name]=n.enum[r],e.modified(),!0);throw Yc(`Set Enum with invalid argument ${n}, ${r}`),new RangeError("Set Enum with invalid string argument")}if("number"==typeof r){if(t[n.name]!==r){if(-1!==Object.keys(n.enum).map(e=>n.enum[e]).indexOf(r))return t[n.name]=r,e.modified(),!0;throw Yc(`Set Enum outside numeric range ${n}, ${r}`),new RangeError("Set Enum outside numeric range")}return!1}throw Yc(`Set Enum with invalid argument (String/Number) ${n}, ${r}`),new TypeError("Set Enum with invalid argument (String/Number)")}};function ad(e){if("object"==typeof e){const t=id[e.type];if(t)return(n,r)=>t(n,r,e);throw Yc(`No setter for field ${e}`),new TypeError("No setter for field")}return function(t,n){return function(r){return n.deleted?(Yc("instance deleted - cannot call any method"),!1):n[e]!==r&&(n[e]=r,t.modified(),!0)}}}function sd(e,t,n){n.forEach(n=>{"object"==typeof n?e[`set${Zc(n.name)}`]=ad(n)(e,t):e[`set${Zc(n)}`]=ad(n)(e,t)})}function ld(e,t,n){od(e,t,n),sd(e,t,n)}function ud(e,t,n){n.forEach(n=>{e[`get${Zc(n)}`]=()=>[].concat(t[n]),e[`get${Zc(n)}ByReference`]=()=>t[n]})}function cd(e,t,n,r,o){n.forEach(n=>{e[`set${Zc(n)}`]=(...i)=>{if(t.deleted)return Yc("instance deleted - cannot call any method"),!1;let a=i;if(1===a.length&&Array.isArray(a[0])&&(a=a[0]),a.length!==r){if(!(a.length<r&&void 0!==o))throw new RangeError(`Invalid number of values for array setter (${n})`);for(a=[].concat(a);a.length<r;)a.push(o)}let s=!1;return t[n].forEach((e,t)=>{if(e!==a[t]){if(s)return;s=!0}}),(s||t[n].length!==a.length)&&(t[n]=[].concat(a),e.modified()),!0},e[`set${Zc(n)}From`]=e=>{const r=t[n];e.forEach((e,t)=>{r[t]=e})}})}function dd(e,t,n,r,o){ud(e,t,n),cd(e,t,n,r,o)}function gd(e,t,n,r){function o(n,r=0){t.deleted?Yc("instance deleted - cannot call any method"):r>=t.numberOfInputs?Yc(`algorithm ${e.getClassName()} only has ${t.numberOfInputs} input ports. To add more input ports, use addInputData()`):(t.inputData[r]!==n||t.inputConnection[r])&&(t.inputData[r]=n,t.inputConnection[r]=null,e.modified&&e.modified())}function i(n,r=0){if(t.deleted)Yc("instance deleted - cannot call any method");else{if(r>=t.numberOfInputs){let n=`algorithm ${e.getClassName()} only has `;return n+=`${t.numberOfInputs}`,n+=" input ports. To add more input ports, use addInputConnection()",void Yc(n)}t.inputData[r]=null,t.inputConnection[r]=n}}function a(n=0){return t.deleted?(Yc("instance deleted - cannot call any method"),null):(e.shouldUpdate()&&e.update(),t.output[n])}if(t.inputData=t.inputData?t.inputData.map(kc):[],t.inputConnection=t.inputConnection?t.inputConnection.map(kc):[],t.output=t.output?t.output.map(kc):[],t.inputArrayToProcess=t.inputArrayToProcess?t.inputArrayToProcess.map(kc):[],t.numberOfInputs=n,e.shouldUpdate=()=>{const n=e.getMTime();let o=r,i=1/0;for(;o--;){if(!t.output[o])return!0;const e=t.output[o].getMTime();if(e<n)return!0;e<i&&(i=e)}for(o=t.numberOfInputs;o--;)if(t.inputConnection[o]&&t.inputConnection[o].filter.shouldUpdate())return!0;for(o=t.numberOfInputs;o--;)if(e.getInputData(o)&&e.getInputData(o).getMTime()>i)return!0;return!1},t.numberOfInputs){let n=t.numberOfInputs;for(;n--;)t.inputData.push(null),t.inputConnection.push(null);e.setInputData=o,e.setInputConnection=i,e.addInputData=function(e){t.deleted?Yc("instance deleted - cannot call any method"):(t.numberOfInputs++,o(e,t.numberOfInputs-1))},e.addInputConnection=function(e){t.deleted?Yc("instance deleted - cannot call any method"):(t.numberOfInputs++,i(e,t.numberOfInputs-1))},e.getInputData=function(e=0){return t.inputConnection[e]&&(t.inputData[e]=t.inputConnection[e]()),t.inputData[e]},e.getInputConnection=function(e=0){return t.inputConnection[e]}}r&&(e.getOutputData=a,e.getOutputPort=function(t=0){const n=()=>a(t);return n.filter=e,n}),e.update=()=>{const n=[];if(t.numberOfInputs){let r=0;for(;r<t.numberOfInputs;)n[r]=e.getInputData(r),r++}e.shouldUpdate()&&e.requestData&&e.requestData(n,t.output)},e.getNumberOfInputPorts=()=>t.numberOfInputs,e.getNumberOfOutputPorts=()=>r||t.output.length,e.getInputArrayToProcess=e=>{const n=t.inputArrayToProcess[e],r=t.inputData[e];return n&&r?r[`get${n.fieldAssociation}`]().getArray(n.arrayName):null},e.setInputArrayToProcess=(e,n,r,o="Scalars")=>{for(;t.inputArrayToProcess.length<e;)t.inputArrayToProcess.push(null);t.inputArrayToProcess[e]={arrayName:n,fieldAssociation:r,attributeType:o}}}const pd=Symbol("Event abort");function fd(e,t,n){const r=[],o=e.delete;let i=1;function a(e){for(let t=0;t<r.length;++t){const[n]=r[t];if(n===e)return void r.splice(t,1)}}e[`invoke${Zc(n)}`]=function(){if(t.deleted)return void Yc("instance deleted - cannot call any method");const n=r.slice();for(let t=0;t<n.length;++t){const[,r,o]=n[t];if(r)if(o<0)setTimeout(()=>r.apply(e,arguments),1-o);else if(r.apply(e,arguments)===pd)break}},e[`on${Zc(n)}`]=(e,o=0)=>{if(!e.apply)return console.error(`Invalid callback for event ${n}`),null;if(t.deleted)return Yc("instance deleted - cannot call any method"),null;const s=i++;return r.push([s,e,o]),r.sort((e,t)=>t[2]-e[2]),function(e){return Object.freeze({unsubscribe:function(){a(e)}})}(s)},e.delete=()=>{o(),r.forEach(([e])=>a(e))}}function hd(e,t){const n=(t={})=>{const n={};return e(n,{},t),Object.freeze(n)};return t&&kc.register(t,n),n}function Md(...e){return(...t)=>e.filter(e=>!!e).map(e=>e(...t))}function md(e){return e&&e.isA&&e.isA("vtkObject")}function Ad(e,t,n=[],r=[]){if(md(e)){if(r.indexOf(e)>=0)return n;r.push(e);const o=t(e);void 0!==o&&n.push(o);const i=e.get();Object.keys(i).forEach(e=>{const o=i[e];Array.isArray(o)?o.forEach(e=>{Ad(e,t,n,r)}):Ad(o,t,n,r)})}return n}function yd(e,t,n){let r;return(...o)=>{const i=this,a=n&&!r;clearTimeout(r),r=setTimeout(()=>{r=null,n||e.apply(i,o)},t),a&&e.apply(i,o)}}function Td(e,t){let n=!1,r=null;function o(){n=!1,null!==r&&(i(...r),r=null)}function i(...i){n?r=i:(n=!0,e(...i),setTimeout(o,t))}return i}function Dd(e,t,n={}){t.keystore=Object.assign(t.keystore||{},n),e.setKey=(e,n)=>{t.keystore[e]=n},e.getKey=e=>t.keystore[e],e.getAllKeys=()=>Object.keys(t.keystore),e.deleteKey=e=>delete t.keystore[e],e.clearKeystore=()=>e.getAllKeys().forEach(e=>delete t.keystore[e])}let Nd=1;function xd(e,t){Dd(e,t);const n=e.delete;t.proxyId=`${Nd++}`,t.ui=JSON.parse(JSON.stringify(t.ui||[])),od(e,t,["proxyId","proxyGroup","proxyName"]),ld(e,t,["proxyManager"]);const r={},o={};function i(e,t){o[t]||(o[t]=[]);const n=o[t];for(let o=0;o<e.length;o++)n.push(e[o].name),r[e[o].name]=e[o],e[o].children&&e[o].children.length&&i(e[o].children,e[o].name)}function a(n="__root__"){const r=[],i=t.proxyId,s=function(e="__root__"){return o[e]}(n)||[];for(let t=0;t<s.length;t++){const n=s[t],o=e[`get${Zc(n)}`],l={id:i,name:n,value:o?o():void 0},u=a(n);u.length&&(l.children=u),r.push(l)}return r}i(t.ui,"__root__"),e.updateUI=n=>{t.ui=JSON.parse(JSON.stringify(n||[])),Object.keys(r).forEach(e=>delete r[e]),Object.keys(o).forEach(e=>delete o[e]),i(t.ui,"__root__"),e.modified()},e.updateProxyProperty=(e,t)=>{const n=r[e];n?Object.assign(n,t):r[e]=Object.assign({},t)},e.activate=()=>{if(t.proxyManager){const n=`setActive${Zc(e.getProxyGroup().slice(0,-1))}`;t.proxyManager[n]&&t.proxyManager[n](e)}},t.propertyLinkSubscribers={},e.registerPropertyLinkForGC=(e,n)=>{n in t.propertyLinkSubscribers||(t.propertyLinkSubscribers[n]=[]),t.propertyLinkSubscribers[n].push(e)},e.gcPropertyLinks=n=>{const r=t.propertyLinkSubscribers[n]||[];for(;r.length;)r.pop().unbind(e)},t.propertyLinkMap={},e.getPropertyLink=(e,n=!1)=>{if(t.propertyLinkMap[e])return t.propertyLinkMap[e];let r=null;const o=[];let i=0,a=!1;function s(n,s=!1){if(a)return null;const l=[];let u=null;for(i=o.length;i--;){const e=o[i];e.instance===n?u=e:l.push(e)}if(!u)return null;const c=u.instance[`get${Zc(u.propertyName)}`]();if(c!==r||s){for(r=c,a=!0;l.length;){const e=l.pop();e.instance.set({[e.propertyName]:r})}a=!1}return t.propertyLinkMap[e].persistent&&(t.propertyLinkMap[e].value=c),c}function l(e,t){const n=[];for(i=o.length;i--;){const r=o[i];r.instance!==e||r.propertyName!==t&&void 0!==t||(r.subscription.unsubscribe(),n.push(i))}for(;n.length;)o.splice(n.pop(),1)}const u={bind:function(n,r,i=!1){const a=n.onModified(s),u=o[0];return o.push({instance:n,propertyName:r,subscription:a}),i&&(t.propertyLinkMap[e].persistent&&void 0!==t.propertyLinkMap[e].value?n.set({[r]:t.propertyLinkMap[e].value}):u&&s(u.instance,!0)),{unsubscribe:()=>l(n,r)}},unbind:l,unsubscribe:function(){for(;o.length;)o.pop().subscription.unsubscribe()},persistent:n};return t.propertyLinkMap[e]=u,u},e.listPropertyNames=()=>a().map(e=>e.name),e.getPropertyByName=e=>a().find(t=>t.name===e),e.getPropertyDomainByName=e=>r[e].domain,e.getProxySection=()=>({id:t.proxyId,name:t.proxyGroup,ui:t.ui,properties:a()}),e.delete=()=>{const r=Object.keys(t.propertyLinkMap);let o=r.length;for(;o--;)t.propertyLinkMap[r[o]].unsubscribe();Object.keys(t.propertyLinkSubscribers).forEach(e.gcPropertyLinks),n()},nd((function(){if(t.links)for(let n=0;n<t.links.length;n++){const{link:r,property:o,persistent:i,updateOnBind:a,type:s}=t.links[n];if("application"===s){const n=t.proxyManager.getPropertyLink(r,i);e.registerPropertyLinkForGC(n,"application"),n.bind(e,o,a)}}}))}function Id(e,t,n){const r=e.delete,o=[],i=Object.keys(n);let a=i.length;for(;a--;){const r=i[a],{modelKey:s,property:l,modified:u=!0}=n[r],c=Zc(l),d=Zc(r);e[`get${d}`]=t[s][`get${c}`],e[`set${d}`]=t[s][`set${c}`],u&&o.push(t[s].onModified(e.modified))}e.delete=()=>{for(;o.length;)o.pop().unsubscribe();r()}}function wd(e,t,n={},r={}){function o(e){const n=Object.keys(e);let r=n.length;for(;r--;){const o=n[r];t[o].set(e[o])}}t.this=e;const i=Object.keys(r);let a=i.length;for(;a--;){const s=i[a];t[s]=r[s];const l=n[s];e[`set${Zc(s)}`]=n=>{n!==t[s]&&(t[s]=n,o(l[n]),e.modified())}}i.length&&od(e,t,i)}function Cd(e){let t=0,n=0,r=0,o=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),r=10*t,o=10*n,"deltaY"in e&&(o=e.deltaY),"deltaX"in e&&(r=e.deltaX),(r||o)&&e.deltaMode&&(1===e.deltaMode?(r*=40,o*=40):(r*=800,o*=800)),r&&!t&&(t=r<1?-1:1),o&&!n&&(n=o<1?-1:1),{spinX:t,spinY:n,pixelX:r,pixelY:o}}var Ed={algo:gd,capitalize:Zc,chain:Md,debounce:yd,enumToString:function(e,t){return Object.keys(e).find(n=>e[n]===t)},event:fd,EVENT_ABORT:pd,formatBytesToProperUnit:$c,formatNumbersWithThousandSeparator:Jc,get:od,getArray:ud,getCurrentGlobalMTime:function(){return zc},getStateArrayMapFunc:td,isVtkObject:md,keystore:Dd,newInstance:hd,normalizeWheel:Cd,obj:rd,proxy:xd,proxyPropertyMapping:Id,proxyPropertyState:wd,safeArrays:ed,set:sd,setArray:cd,setGet:ld,setGetArray:dd,setImmediate:nd,setLoggerFunction:Uc,throttle:Td,traverseInstanceTree:Ad,TYPED_ARRAYS:Xc,uncapitalize:qc,VOID:Rc,vtkDebugMacro:Qc,vtkErrorMacro:Yc,vtkInfoMacro:Gc,vtkLogMacro:Fc,vtkOnceErrorMacro:Kc,vtkWarningMacro:Wc};n("YSVl");const{vtkErrorMacro:vd,vtkWarningMacro:Ld}=Ed;function bd(e){return()=>vd(`vtkMath::${e} - NOT IMPLEMENTED`)}function Od(e=3){const t=[];for(;t.length<e;)t.push(0);return t}function Sd(e){return e/180*Math.PI}function jd(e){return 180*e/Math.PI}function Pd(e){let t=1;for(;t<e;)t*=2;return t}function kd(e){return e===Pd(e)}function zd(e,t,n){n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2]}function Rd(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function _d(e,t,n){const r=e[2]*t[0]-e[0]*t[2],o=e[0]*t[1]-e[1]*t[0];n[0]=e[1]*t[2]-e[2]*t[1],n[1]=r,n[2]=o}function Vd(e,t=3){switch(t){case 1:return Math.abs(e);case 2:return Math.sqrt(e[0]*e[0]+e[1]*e[1]);case 3:return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);default:{let n=0;for(let r=0;r<t;r++)n+=e[r]*e[r];return Math.sqrt(n)}}}function Bd(e){const t=Vd(e);return 0!==t&&(e[0]/=t,e[1]/=t,e[2]/=t),t}function Ud(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])+(e[2]-t[2])*(e[2]-t[2])}function Fd(...e){return 2===e.length?e[0][0]*e[1][1]-e[1][0]*e[0][1]:4===e.length?e[0]*e[3]-e[1]*e[2]:Number.NaN}function Gd(e,t){const[n,r,o]=e;let i,a,s;n>1/6&&n<=1/3?(a=1,i=(1/3-n)/(1/6),s=0):n>1/3&&n<=.5?(a=1,s=(n-1/3)/(1/6),i=0):n>.5&&n<=2/3?(s=1,a=(2/3-n)/(1/6),i=0):n>2/3&&n<=5/6?(s=1,i=(n-2/3)/(1/6),a=0):n>5/6&&n<=1?(i=1,s=(1-n)/(1/6),a=0):(i=1,a=n/(1/6),s=0),i=r*i+(1-r),a=r*a+(1-r),s=r*s+(1-r),i*=o,a*=o,s*=o,t[0]=i,t[1]=a,t[2]=s}function Qd(e){e[0]=1,e[1]=-1,e[2]=1,e[3]=-1,e[4]=1,e[5]=-1}function Yd(e){return!(e[1]-e[0]<0)}function Wd(e,t,n){n[0]=Math.min(e[0],t[0]),n[1]=Math.max(e[0],t[0]),n[2]=Math.min(e[1],t[1]),n[3]=Math.max(e[1],t[1]),n[4]=Math.min(e[2],t[2]),n[5]=Math.max(e[2],t[2])}function Hd(e,t,n){return e<t?t:e>n?n:e}function Kd(e,t,n,r=[]){return r[0]=Hd(e[0],t[0],n[0]),r[1]=Hd(e[1],t[1],n[1]),r[2]=Hd(e[2],t[2],n[2]),r}function Xd(e,t=[]){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}Math,bd("ceilLog2"),bd("factorial"),bd("gaussian"),bd("GetScalarTypeFittingRange"),bd("GetAdjustedScalarRange");const{isNaN:Zd}=Number,qd=Zd;function $d(){return[].concat([Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE])}function Jd(e,t,n){return Math.abs(n[0]*(e[0]-t[0])+n[1]*(e[1]-t[1])+n[2]*(e[2]-t[2]))}function eg(e,t,n,r){const o=[];zd(e,t,o);const i=Rd(n,o);r[0]=e[0]-i*n[0],r[1]=e[1]-i*n[1],r[2]=e[2]-i*n[2]}function tg(e,t,n){const r=Rd(e,t);let o=Rd(t,t);0===o&&(o=1),n[0]=e[0]-r*t[0]/o,n[1]=e[1]-r*t[1]/o,n[2]=e[2]-r*t[2]/o}function ng(e,t,n,r){const o=[];zd(e,t,o);const i=Rd(n,o),a=Rd(n,n);0!==a?(r[0]=e[0]-i*n[0]/a,r[1]=e[1]-i*n[1]/a,r[2]=e[2]-i*n[2]/a):(r[0]=e[0],r[1]=e[1],r[2]=e[2])}function rg(e,t,n,r){const o={intersection:!1,betweenPoints:!1,t:Number.MAX_VALUE,x:[]},i=[],a=[];zd(t,e,i),zd(n,e,a);const s=Rd(r,a),l=Rd(r,i);let u,c;return u=l<0?-l:l,c=s<0?1e-6*-s:1e-6*s,u<=c||(o.t=s/l,o.x[0]=e[0]+o.t*i[0],o.x[1]=e[1]+o.t*i[1],o.x[2]=e[2]+o.t*i[2],o.intersection=!0,o.betweenPoints=o.t>=0&&o.t<=1),o}function og(e,t,n,r){const o={intersection:!1,l0:[],l1:[],error:null},i=[];_d(t,r,i);const a=i.map(e=>Math.abs(e));if(a[0]+a[1]+a[2]<1e-6){const r=[];return zd(e,n,r),o.error=0===Rd(t,r)?"coincide":"disjoint",o}let s;s=a[0]>a[1]&&a[0]>a[2]?"x":a[1]>a[2]?"y":"z";const l=[],u=-Rd(t,e),c=-Rd(r,n);switch(s){case"x":l[0]=0,l[1]=(c*t[2]-u*r[2])/i[0],l[2]=(u*r[1]-c*t[1])/i[0];break;case"y":l[0]=(u*r[2]-c*t[2])/i[1],l[1]=0,l[2]=(c*t[0]-u*r[0])/i[1];break;case"z":l[0]=(c*t[1]-u*r[1])/i[2],l[1]=(u*r[0]-c*t[0])/i[2],l[2]=0}return o.l0=l,(p=o.l1)[0]=(d=l)[0]+(g=i)[0],p[1]=d[1]+g[1],p[2]=d[2]+g[2],o.intersection=!0,o;var d,g,p}const ig={evaluate:function(e,t,n){return e[0]*(n[0]-t[0])+e[1]*(n[1]-t[1])+e[2]*(n[2]-t[2])},distanceToPlane:Jd,projectPoint:eg,projectVector:tg,generalizedProjectPoint:ng,intersectWithLine:rg,intersectWithPlane:og,DISJOINT:"disjoint",COINCIDE:"coincide"},ag={normal:[0,0,1],origin:[0,0,0]};function sg(e,t,n={}){Object.assign(t,ag,n),Ed.obj(e,t),Ed.setGetArray(e,t,["normal","origin"],3),function(e,t){t.classHierarchy.push("vtkPlane"),e.distanceToPlane=e=>Jd(e,t.origin,t.normal),e.projectPoint=(e,n)=>{eg(e,t.origin,t.normal,n)},e.projectVector=(e,n)=>{tg(e,t.normal,n)},e.push=e=>{if(0!==e)for(let n=0;n<3;n++)t.origin[n]+=e*t.normal[n]},e.generalizedProjectPoint=(e,n)=>{ng(e,t.origin,t.normal,n)},e.evaluateFunction=(e,n,r)=>Array.isArray(e)?t.normal[0]*(e[0]-t.origin[0])+t.normal[1]*(e[1]-t.origin[1])+t.normal[2]*(e[2]-t.origin[2]):t.normal[0]*(e-t.origin[0])+t.normal[1]*(n-t.origin[1])+t.normal[2]*(r-t.origin[2]),e.evaluateGradient=e=>[t.normal[0],t.normal[1],t.normal[2]],e.intersectWithLine=(e,n)=>rg(e,n,t.origin,t.normal),e.intersectWithPlane=(e,n)=>og(e,n,t.origin,t.normal)}(e,t)}const lg=Ed.newInstance(sg,"vtkPlane");var ug=Object.assign({newInstance:lg,extend:sg},ig);const cg=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE];function dg(e){return e[0]<=e[1]&&e[2]<=e[3]&&e[4]<=e[5]}function gg(e){return[.5*(e[0]+e[1]),.5*(e[2]+e[3]),.5*(e[4]+e[5])]}function pg(e,t){return e[2*t+1]-e[2*t]}function fg(e){return[pg(e,0),pg(e,1),pg(e,2)]}function hg(e){const t=fg(e);return t[0]>t[1]?t[0]>t[2]?t[0]:t[2]:t[1]>t[2]?t[1]:t[2]}function Mg(e){if(dg(e)){const t=fg(e);return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])}return null}function mg(e,t){return e<=0&&t>=0||e>=0&&t<=0}function Ag(e,t){let n=0;for(let r=0;r<2;r++)for(let o=2;o<4;o++)for(let i=4;i<6;i++)t[n]=[e[r],e[o],e[i]],n++}const yg={isValid:dg,getCenter:gg,getLength:pg,getLengths:fg,getMaxLength:hg,getDiagonalLength:Mg,getXRange:function(e){return e.slice(0,2)},getYRange:function(e){return e.slice(2,4)},getZRange:function(e){return e.slice(4,6)},getCorners:Ag,computeCornerPoints:function(e,t,n){e[0]=n[0],e[1]=n[2],e[2]=n[4],t[0]=n[1],t[1]=n[3],t[2]=n[5]},computeScale3:function(e,t=[]){const n=gg(e);return t[0]=e[1]-n[0],t[1]=e[3]-n[1],t[2]=e[5]-n[2],t},INIT_BOUNDS:cg},Tg={type:"vtkBoundingBox",bounds:[].concat(cg),corners:[]};function Dg(e,t,n={}){Object.assign(t,Tg,n),Ed.obj(e,t),Ed.setGet(e,t,["bounds"]),function(e,t){t.classHierarchy.push("vtkBoundingBox"),e.clone=()=>{const e=[].concat(t.bounds);return Ng({bounds:e})},e.equals=e=>{const n=t.bounds,r=e.getBounds();return n[0]===r[0]&&n[1]===r[1]&&n[2]===r[2]&&n[3]===r[3]&&n[4]===r[4]&&n[5]===r[5]},e.setMinPoint=(e,n,r)=>{const[o,i,a,s,l,u]=t.bounds;return t.bounds=[e,e>i?e:i,n,n>s?n:s,r,r>u?r:u],o!==e||a!==n||l!==r},e.setMaxPoint=(e,n,r)=>{const[o,i,a,s,l,u]=t.bounds;return t.bounds=[e<o?e:o,e,n<a?n:a,n,r<l?r:l,r],i!==e||s!==n||u!==r},e.addPoint=(...e)=>{t.bounds=t.bounds.map((t,n)=>{if(n%2==0){const r=n/2;return t<e[r]?t:e[r]}const r=(n-1)/2;return t>e[r]?t:e[r]})},e.addBounds=(e,n,r,o,i,a)=>{const[s,l,u,c,d,g]=t.bounds;t.bounds=void 0===a?[Math.min(e[0],s),Math.max(e[1],l),Math.min(e[2],u),Math.max(e[3],c),Math.min(e[4],d),Math.max(e[5],g)]:[Math.min(e,s),Math.max(n,l),Math.min(r,u),Math.max(o,c),Math.min(i,d),Math.max(a,g)]},e.addBox=t=>{e.addBounds(t.getBounds())},e.isValid=()=>dg(t.bounds),e.intersect=n=>{if(!e.isValid()||!n.isValid())return!1;const r=[0,0,0,0,0,0],o=n.getBounds();let i;for(let e=0;e<3;e++)if(i=!1,o[2*e]>=t.bounds[2*e]&&o[2*e]<=t.bounds[2*e+1]?(i=!0,r[2*e]=o[2*e]):t.bounds[2*e]>=o[2*e]&&t.bounds[2*e]<=o[2*e+1]&&(i=!0,r[2*e]=t.bounds[2*e]),o[2*e+1]>=t.bounds[2*e]&&o[2*e+1]<=t.bounds[2*e+1]?(i=!0,r[2*e+1]=n.MaxPnt[e]):t.bounds[2*e+1]>=n.MinPnt[2*e]&&t.bounds[2*e+1]<=n.MaxPnt[2*e+1]&&(i=!0,r[2*e+1]=t.bounds[2*e+1]),!i)return!1;return t.bounds=r,!0},e.intersects=n=>{if(!e.isValid()||!n.isValid())return!1;const r=n.getBounds();for(let e=0;e<3;e++)if(!(r[2*e]>=t.bounds[2*e]&&r[2*e]<=t.bounds[2*e+1]||t.bounds[2*e]>=r[2*e]&&t.bounds[2*e]<=r[2*e+1]||r[2*e+1]>=t.bounds[2*e]&&r[2*e+1]<=t.bounds[2*e+1]||t.bounds[2*e+1]>=n.MinPnt[2*e]&&t.bounds[2*e+1]<=n.MaxPnt[2*e+1]))return!1;return!0},e.intersectPlane=(e,n)=>{const r=[[0,1,2,3,4,5,6,7],[0,1,4,5,2,3,6,7],[0,2,4,6,1,3,5,7]],o=[0,0,0,0,0,0,0,0];let i=0;for(let d=0;d<2;d++)for(let r=2;r<4;r++)for(let a=4;a<6;a++)o[i++]=ug.evaluate(n,e,[t.bounds[d],t.bounds[r],t.bounds[a]]);let a=2;for(;a--&&!(mg(o[r[a][0]],o[r[a][4]])&&mg(o[r[a][1]],o[r[a][5]])&&mg(o[r[a][2]],o[r[a][6]])&&mg(o[r[a][3]],o[r[a][7]])););if(a<0)return!1;const s=Math.sign(n[a]),l=Math.abs((t.bounds[2*a+1]-t.bounds[2*a])*n[a]);let u=s>0?1:0;for(let t=0;t<4;t++){if(0===l)continue;const e=Math.abs(o[r[a][t]])/l;s>0&&e<u&&(u=e),s<0&&e>u&&(u=e)}const c=(1-u)*t.bounds[2*a]+u*t.bounds[2*a+1];return s>0?t.bounds[2*a]=c:t.bounds[2*a+1]=c,!0},e.containsPoint=(e,n,r)=>!(e<t.bounds[0]||e>t.bounds[1]||n<t.bounds[2]||n>t.bounds[3]||r<t.bounds[4]||r>t.bounds[5]),e.getMinPoint=()=>[t.bounds[0],t.bounds[2],t.bounds[4]],e.getMaxPoint=()=>[t.bounds[1],t.bounds[3],t.bounds[5]],e.getBound=e=>t.bound[e],e.contains=t=>!!e.intersects(t)&&!!e.containsPoint(...t.getMinPoint())&&(!!e.containsPoint(...t.getMaxPoint())||0),e.getCenter=()=>gg(t.bounds),e.getLength=e=>pg(t.bounds,e),e.getLengths=()=>fg(t.bounds),e.getMaxLength=()=>hg(t.bounds),e.getDiagonalLength=()=>Mg(t.bounds),e.reset=()=>e.setBounds([].concat(cg)),e.inflate=e=>{t.bounds=t.bounds.map((t,n)=>n%2==0?t-e:t+e)},e.getCorners=()=>(Ag(t.bounds,t.corners),t.corners),e.scale=(n,r,o)=>{if(e.isValid()){const e=[].concat(t.bounds);return n>=0?(e[0]*=n,e[1]*=n):(e[0]=n*t.bounds[1],e[1]=n*t.bounds[0]),r>=0?(e[2]*=r,e[3]*=r):(e[2]=r*t.bounds[3],e[3]=r*t.bounds[2]),o>=0?(e[4]*=o,e[5]*=o):(e[4]=o*t.bounds[5],e[5]=o*t.bounds[4]),t.bounds=e,!0}return!1}}(e,t)}const Ng=Ed.newInstance(Dg,"vtkBoundingBox");var xg=Object.assign({newInstance:Ng,extend:Dg},yg);function Ig(e){return()=>Ed.vtkErrorMacro(`vtkProp::${e} - NOT IMPLEMENTED`)}const wg={visibility:!0,pickable:!0,dragable:!0,useBounds:!0,allocatedRenderTime:10,estimatedRenderTime:0,savedEstimatedRenderTime:0,renderTimeMultiplier:1,paths:null,textures:[]};function Cg(e,t,n={}){Object.assign(t,wg,n),Ed.obj(e,t),Ed.get(e,t,["estimatedRenderTime","allocatedRenderTime"]),Ed.setGet(e,t,["visibility","pickable","dragable","useBounds","renderTimeMultiplier"]),function(e,t){t.classHierarchy.push("vtkProp"),e.getMTime=()=>{let e=t.mtime;for(let n=0;n<t.textures.length;++n){const r=t.textures[n].getMTime();r>e&&(e=r)}return e},e.getNestedProps=()=>null,e.getActors=()=>[],e.getActors2D=()=>[],e.getVolumes=()=>[],e.pick=Ig("pick"),e.hasKey=Ig("hasKey"),e.getRedrawMTime=()=>t.mtime,e.setEstimatedRenderTime=e=>{t.estimatedRenderTime=e,t.savedEstimatedRenderTime=e},e.restoreEstimatedRenderTime=()=>{t.estimatedRenderTime=t.savedEstimatedRenderTime},e.addEstimatedRenderTime=e=>{t.estimatedRenderTime+=e},e.setAllocatedRenderTime=e=>{t.allocatedRenderTime=e,t.savedEstimatedRenderTime=t.estimatedRenderTime,t.estimatedRenderTime=0},e.getSupportsSelection=()=>!1,e.getTextures=()=>t.textures,e.hasTexture=e=>-1!==t.textures.indexOf(e),e.addTexture=n=>{n&&!e.hasTexture(n)&&(t.textures=t.textures.concat(n),e.modified())},e.removeTexture=n=>{const r=t.textures.filter(e=>e!==n);t.textures.length!==r.length&&(t.textures=r,e.modified())},e.removeAllTextures=()=>{t.textures=[],e.modified()}}(e,t)}var Eg={newInstance:Ed.newInstance(Cg,"vtkProp"),extend:Cg};const vg={origin:[0,0,0],position:[0,0,0],orientation:[0,0,0],rotation:null,scale:[1,1,1],bounds:[1,-1,1,-1,1,-1],userMatrix:null,userMatrixMTime:null,cachedProp3D:null,isIdentity:!0,matrixMTime:null};function Lg(e,t,n={}){Object.assign(t,vg,n),Eg.extend(e,t,n),t.matrixMTime={},Ed.obj(t.matrixMTime),Ed.get(e,t,["bounds","isIdentity"]),Ed.getArray(e,t,["orientation"]),Ed.setGetArray(e,t,["origin","position","scale"],3),t.matrix=i.create(),t.rotation=i.create(),t.userMatrix=i.create(),t.transform=null,function(e,t){t.classHierarchy.push("vtkProp3D"),e.addPosition=n=>{t.position=t.position.map((e,t)=>e+n[t]),e.modified()},e.getOrientationWXYZ=()=>{const e=l.create();i.getRotation(e,t.rotation);const n=a.create();return[jd(l.getAxisAngle(n,e)),n[0],n[1],n[2]]},e.rotateX=n=>{0!==n&&(i.rotateX(t.rotation,t.rotation,Sd(n)),e.modified())},e.rotateY=n=>{0!==n&&(i.rotateY(t.rotation,t.rotation,Sd(n)),e.modified())},e.rotateZ=n=>{0!==n&&(i.rotateZ(t.rotation,t.rotation,Sd(n)),e.modified())},e.rotateWXYZ=(n,r,o,a)=>{if(0===n||0===r&&0===o&&0===a)return;const s=Sd(n),u=l.create();l.setAxisAngle(u,[r,o,a],s);const c=i.create();i.fromQuat(c,u),i.multiply(t.rotation,t.rotation,c),e.modified()},e.setOrientation=(n,r,o)=>(n!==t.orientation[0]||r!==t.orientation[1]||o!==t.orientation[2])&&(t.orientation=[n,r,o],i.identity(t.rotation),e.rotateZ(o),e.rotateX(n),e.rotateY(r),e.modified(),!0),e.setUserMatrix=n=>{i.copy(t.userMatrix,n),e.modified()},e.getMatrix=()=>(e.computeMatrix(),t.matrix),e.computeMatrix=()=>{if(e.getMTime()>t.matrixMTime.getMTime()){i.identity(t.matrix),t.userMatrix&&i.multiply(t.matrix,t.matrix,t.userMatrix),i.translate(t.matrix,t.matrix,t.origin),i.translate(t.matrix,t.matrix,t.position),i.multiply(t.matrix,t.matrix,t.rotation),i.scale(t.matrix,t.matrix,t.scale),i.translate(t.matrix,t.matrix,[-t.origin[0],-t.origin[1],-t.origin[2]]),i.transpose(t.matrix,t.matrix),t.isIdentity=!0;for(let e=0;e<4;++e)for(let n=0;n<4;++n)(e===n?1:0)!==t.matrix[e+4*n]&&(t.isIdentity=!1);t.matrixMTime.modified()}},e.getCenter=()=>xg.getCenter(t.bounds),e.getLength=()=>xg.getLength(t.bounds),e.getXRange=()=>xg.getXRange(t.bounds),e.getYRange=()=>xg.getYRange(t.bounds),e.getZRange=()=>xg.getZRange(t.bounds),e.getUserMatrix=()=>t.userMatrix,e.onModified((function(){e.computeMatrix()}))}(e,t)}var bg={newInstance:Ed.newInstance(Lg,"vtkProp3D"),extend:Lg};const Og={FLAT:0,GOURAUD:1,PHONG:2},Sg={POINTS:0,WIREFRAME:1,SURFACE:2};var jg={Shading:Og,Representation:Sg,Interpolation:Og};const{Representation:Pg,Interpolation:kg}=jg;function zg(e){return()=>Ed.vtkErrorMacro(`vtkProperty::${e} - NOT IMPLEMENTED`)}const Rg={color:[1,1,1],ambientColor:[1,1,1],diffuseColor:[1,1,1],specularColor:[1,1,1],edgeColor:[0,0,0],ambient:0,diffuse:1,specular:0,specularPower:1,opacity:1,interpolation:kg.GOURAUD,representation:Pg.SURFACE,edgeVisibility:!1,backfaceCulling:!1,frontfaceCulling:!1,pointSize:1,lineWidth:1,lighting:!0,shading:!1,materialName:null};function _g(e,t,n={}){Object.assign(t,Rg,n),Ed.obj(e,t),Ed.setGet(e,t,["lighting","interpolation","ambient","diffuse","specular","specularPower","opacity","edgeVisibility","lineWidth","pointSize","backfaceCulling","frontfaceCulling","representation"]),Ed.setGetArray(e,t,["ambientColor","specularColor","diffuseColor","edgeColor"],3),function(e,t){t.classHierarchy.push("vtkProperty"),e.setColor=(n,r,o)=>{Array.isArray(n)?t.color[0]===n[0]&&t.color[1]===n[1]&&t.color[2]===n[2]||(t.color[0]=n[0],t.color[1]=n[1],t.color[2]=n[2],e.modified()):t.color[0]===n&&t.color[1]===r&&t.color[2]===o||(t.color[0]=n,t.color[1]=r,t.color[2]=o,e.modified()),e.setDiffuseColor(t.color),e.setAmbientColor(t.color),e.setSpecularColor(t.color)},e.computeCompositeColor=zg("ComputeCompositeColor"),e.getColor=()=>{let e=0;t.ambient+t.diffuse+t.specular>0&&(e=1/(t.ambient+t.diffuse+t.specular));for(let n=0;n<3;n++)t.color[n]=e*(t.ambient*t.ambientColor[n]+t.diffuse*t.diffuseColor[n]+t.specular*t.specularColor[n]);return[].concat(t.color)},e.addShaderVariable=zg("AddShaderVariable"),e.setInterpolationToFlat=()=>e.setInterpolation(kg.FLAT),e.setInterpolationToGouraud=()=>e.setInterpolation(kg.GOURAUD),e.setInterpolationToPhong=()=>e.setInterpolation(kg.PHONG),e.getInterpolationAsString=()=>Ed.enumToString(kg,t.interpolation),e.setRepresentationToWireframe=()=>e.setRepresentation(Pg.WIREFRAME),e.setRepresentationToSurface=()=>e.setRepresentation(Pg.SURFACE),e.setRepresentationToPoints=()=>e.setRepresentation(Pg.POINTS),e.getRepresentationAsString=()=>Ed.enumToString(Pg,t.representation)}(e,t)}const Vg=Ed.newInstance(_g,"vtkProperty");var Bg=Object.assign({newInstance:Vg,extend:_g},jg);const{vtkDebugMacro:Ug}=Ed,Fg={mapper:null,property:null,backfaceProperty:null,forceOpaque:!1,forceTranslucent:!1,bounds:[1,-1,1,-1,1,-1]};function Gg(e,t,n={}){Object.assign(t,Fg,n),bg.extend(e,t,n),t.boundsMTime={},Ed.obj(t.boundsMTime),Ed.set(e,t,["property"]),Ed.setGet(e,t,["backfaceProperty","forceOpaque","forceTranslucent","mapper"]),function(e,t){t.classHierarchy.push("vtkActor");const n=Object.assign({},e);e.getActors=()=>e,e.getIsOpaque=()=>{if(t.forceOpaque)return!0;if(t.forceTranslucent)return!1;t.property||e.getProperty();let n=t.property.getOpacity()>=1;return n=n&&(!t.texture||!t.texture.isTranslucent()),n=n&&(!t.mapper||t.mapper.getIsOpaque()),n},e.hasTranslucentPolygonalGeometry=()=>null!==t.mapper&&(null===t.property&&e.setProperty(e.makeProperty()),!e.getIsOpaque()),e.makeProperty=Bg.newInstance,e.getProperty=()=>(null===t.property&&(t.property=e.makeProperty()),t.property),e.getBounds=()=>{if(null===t.mapper)return t.bounds;const n=t.mapper.getBounds();if(!n||6!==n.length)return n;if(n[0]>n[1])return t.mapperBounds=n.concat(),t.bounds=[1,-1,1,-1,1,-1],t.boundsMTime.modified(),n;if(!t.mapperBounds||n[0]!==t.mapperBounds[0]||n[1]!==t.mapperBounds[1]||n[2]!==t.mapperBounds[2]||n[3]!==t.mapperBounds[3]||n[4]!==t.mapperBounds[4]||n[5]!==t.mapperBounds[5]||e.getMTime()>t.boundsMTime.getMTime()){Ug("Recomputing bounds..."),t.mapperBounds=n.concat();const r=[a.fromValues(n[1],n[3],n[5]),a.fromValues(n[1],n[2],n[5]),a.fromValues(n[0],n[2],n[5]),a.fromValues(n[0],n[3],n[5]),a.fromValues(n[1],n[3],n[4]),a.fromValues(n[1],n[2],n[4]),a.fromValues(n[0],n[2],n[4]),a.fromValues(n[0],n[3],n[4])];e.computeMatrix();const o=i.create();i.transpose(o,t.matrix),r.forEach(e=>a.transformMat4(e,e,o)),t.bounds[0]=t.bounds[2]=t.bounds[4]=Number.MAX_VALUE,t.bounds[1]=t.bounds[3]=t.bounds[5]=-Number.MAX_VALUE,t.bounds=t.bounds.map((e,t)=>r.reduce(t%2==0?(e,n)=>e>n[t/2]?n[t/2]:e:(e,n)=>e<n[(t-1)/2]?n[(t-1)/2]:e,e)),t.boundsMTime.modified()}return t.bounds},e.getMTime=()=>{let e=n.getMTime();if(null!==t.property){const n=t.property.getMTime();e=n>e?n:e}if(null!==t.backfaceProperty){const n=t.backfaceProperty.getMTime();e=n>e?n:e}return e},e.getRedrawMTime=()=>{let e=t.mtime;if(null!==t.mapper){let n=t.mapper.getMTime();e=n>e?n:e,null!==t.mapper.getInput()&&(t.mapper.getInputAlgorithm().update(),n=t.mapper.getInput().getMTime(),e=n>e?n:e)}return e},e.getSupportsSelection=()=>!!t.mapper&&t.mapper.getSupportsSelection()}(e,t)}var Qg={newInstance:Ed.newInstance(Gg,"vtkActor"),extend:Gg};const Yg={VOID:"",CHAR:"Int8Array",SIGNED_CHAR:"Int8Array",UNSIGNED_CHAR:"Uint8Array",SHORT:"Int16Array",UNSIGNED_SHORT:"Uint16Array",INT:"Int32Array",UNSIGNED_INT:"Uint32Array",FLOAT:"Float32Array",DOUBLE:"Float64Array"};var Wg={DefaultDataType:Yg.FLOAT,DataTypeByteSize:{Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},VtkDataTypes:Yg};const{DefaultDataType:Hg}=Wg,Kg=[];function Xg(){let e=Number.MAX_VALUE,t=-Number.MAX_VALUE,n=0,r=0;return{add(o){e>o&&(e=o),t<o&&(t=o),n++,r+=o},get:()=>({min:e,max:t,count:n,sum:r,mean:r/n}),getRange:()=>({min:e,max:t})}}function Zg(e,t=0,n=1){const r=Xg(),o=e.length;let i=0;if(t<0&&n>1){for(let t=0;t<o;t+=n){i=0;for(let r=0;r<n;r++)i+=e[t+r]*e[t+r];i**=.5,r.add(i)}return r.getRange()}for(let a=t<0?0:t;a<o;a+=n)r.add(e[a]);return r.getRange()}function qg(e,t=0){const n=e||[];for(;n.length<=t;)n.push(null);return n}function $g(e){return Object.prototype.toString.call(e).slice(8,-1)}const Jg={computeRange:Zg,createRangeHelper:Xg,getDataType:$g,getMaxNorm:function(e){const t=e.getNumberOfComponents();let n=0;for(let r=0;r<e.getNumberOfTuples();++r){const o=Vd(e.getTuple(r),t);o>n&&(n=o)}return n}},ep={name:"",numberOfComponents:1,size:0,dataType:Hg,rangeTuple:[0,0]};function tp(e,t,n={}){if(Object.assign(t,ep,n),!t.empty&&!t.values&&!t.size)throw new TypeError("Cannot create vtkDataArray object without: size > 0, values");t.values?Array.isArray(t.values)&&(t.values=window[t.dataType].from(t.values)):t.values=new window[t.dataType](t.size),t.values&&(t.size=t.values.length,t.dataType=$g(t.values)),Ed.obj(e,t),Ed.set(e,t,["name","numberOfComponents"]),function(e,t){function n(){t.ranges=null,e.modified()}t.classHierarchy.push("vtkDataArray"),e.getElementComponentSize=()=>t.values.BYTES_PER_ELEMENT,e.getComponent=(e,n=0)=>t.values[e*t.numberOfComponents+n],e.setComponent=(e,r,o)=>{o!==t.values[e*t.numberOfComponents+r]&&(t.values[e*t.numberOfComponents+r]=o,n())},e.getData=()=>t.values,e.getRange=(e=-1)=>{const n=e<0?t.numberOfComponents:e;let r=null;return t.ranges||(t.ranges=qg(t.ranges,t.numberOfComponents)),r=t.ranges[n],r?(t.rangeTuple[0]=r.min,t.rangeTuple[1]=r.max,t.rangeTuple):(r=Zg(t.values,e,t.numberOfComponents),t.ranges[n]=r,t.rangeTuple[0]=r.min,t.rangeTuple[1]=r.max,t.rangeTuple)},e.setRange=(e,n)=>{t.ranges||(t.ranges=qg(t.ranges,t.numberOfComponents));const r={min:e.min,max:e.max};return t.ranges[n]=r,t.rangeTuple[0]=r.min,t.rangeTuple[1]=r.max,t.rangeTuple},e.setTuple=(e,n)=>{const r=e*t.numberOfComponents;for(let o=0;o<t.numberOfComponents;o++)t.values[r+o]=n[o]},e.getTuple=(e,n=Kg)=>{const r=t.numberOfComponents||1;n.length!==r&&(n.length=r);const o=e*r;if(1===r)n[0]=t.values[o];else if(2===r)n[0]=t.values[o],n[1]=t.values[o+1];else if(3===r)n[0]=t.values[o],n[1]=t.values[o+1],n[2]=t.values[o+2];else if(4===r)n[0]=t.values[o],n[1]=t.values[o+1],n[2]=t.values[o+2],n[3]=t.values[o+3];else for(let i=0;i<r;i++)n[i]=t.values[o+i];return n},e.getTupleLocation=(e=1)=>e*t.numberOfComponents,e.getNumberOfComponents=()=>t.numberOfComponents,e.getNumberOfValues=()=>t.values.length,e.getNumberOfTuples=()=>t.values.length/t.numberOfComponents,e.getDataType=()=>t.dataType,e.newClone=()=>np({empty:!0,name:t.name,dataType:t.dataType,numberOfComponents:t.numberOfComponents}),e.getName=()=>(t.name||(e.modified(),t.name=`vtkDataArray${e.getMTime()}`),t.name),e.setData=(e,r)=>{t.values=e,t.size=e.length,t.dataType=$g(e),r&&(t.numberOfComponents=r),t.size%t.numberOfComponents!=0&&(t.numberOfComponents=1),n()},e.getState=()=>{const n=Object.assign({},t,{vtkClass:e.getClassName()});n.values=Array.from(n.values),delete n.buffer,Object.keys(n).forEach(e=>{n[e]||delete n[e]});const r={};return Object.keys(n).sort().forEach(e=>{r[e]=n[e]}),r.mtime&&delete r.mtime,r}}(e,t)}const np=Ed.newInstance(tp,"vtkDataArray");var rp=Object.assign({newInstance:np,extend:tp},Jg,Wg);function op(e){let t=0;return e.filter((e,n)=>n===t&&(t+=e+1,!0))}const ip={extractCellSizes:op,getNumberOfCells:function(e){return op(e).length}},ap={empty:!0,numberOfComponents:1,dataType:Yg.UNSIGNED_INT};function sp(e,t,n={}){Object.assign(t,ap,n),rp.extend(e,t,n),function(e,t){t.classHierarchy.push("vtkCellArray"),e.getNumberOfCells=e=>void 0===t.numberOfCells||e?(t.cellSizes=op(t.values),t.numberOfCells=t.cellSizes.length,t.numberOfCells):t.numberOfCells,e.getCellSizes=e=>void 0===t.cellSizes||e?(t.cellSizes=op(t.values),t.cellSizes):t.cellSizes;const n=e.setData;e.setData=e=>{n(e,1),t.numberOfCells=void 0,t.cellSizes=void 0},e.getCell=e=>{let n=e;const r=t.values[n++];return t.values.subarray(n,n+r)}}(e,t)}const lp=Ed.newInstance(sp,"vtkCellArray");var up=Object.assign({newInstance:lp,extend:sp},ip);const{vtkErrorMacro:cp}=Ed,dp=[1,-1,1,-1,1,-1],gp={empty:!0,numberOfComponents:3,dataType:Yg.FLOAT,bounds:[1,-1,1,-1,1,-1]};function pp(e,t,n={}){Object.assign(t,gp,n),rp.extend(e,t,n),function(e,t){t.classHierarchy.push("vtkPoints"),e.getNumberOfPoints=e.getNumberOfTuples,e.setNumberOfPoints=(n,r=3)=>{e.getNumberOfPoints()!==n&&(t.size=n*r,t.values=new window[t.dataType](t.size),e.setNumberOfComponents(r),e.modified())},e.setPoint=(e,...n)=>{const r=e*t.numberOfComponents;for(let o=0;o<t.numberOfComponents;o++)t.values[r+o]=n[o]},e.getPoint=e.getTuple,e.getBounds=()=>{if(3===e.getNumberOfComponents()){const n=e.getRange(0);t.bounds[0]=n[0],t.bounds[1]=n[1];const r=e.getRange(1);t.bounds[2]=r[0],t.bounds[3]=r[1];const o=e.getRange(2);return t.bounds[4]=o[0],t.bounds[5]=o[1],t.bounds}if(2!==e.getNumberOfComponents())return cp(`getBounds called on an array with components of\n        ${e.getNumberOfComponents()}`),dp;const n=e.getRange(0);t.bounds[0]=n[0],t.bounds[1]=n[1];const r=e.getRange(1);return t.bounds[2]=r[0],t.bounds[3]=r[1],t.bounds[4]=0,t.bounds[5]=0,t.bounds},e.computeBounds=e.getBounds,e.setNumberOfComponents(t.numberOfComponents<2?3:t.numberOfComponents)}(e,t)}var fp={newInstance:Ed.newInstance(pp,"vtkPoints"),extend:pp};const hp={bounds:[-1,-1,-1,-1,-1,-1],pointsIds:[]};function Mp(e,t,n={}){Object.assign(t,hp,n),Ed.obj(e,t),t.points||(t.points=fp.newInstance()),Ed.get(e,t,["points","pointsIds"]),function(e,t){t.classHierarchy.push("vtkCell"),e.initialize=(e,n=null)=>{if(n){t.pointsIds=n;let r=t.points.getData();r.length!==3*t.pointsIds.length&&(r=new(window[e.getDataType()])(3*t.pointsIds.length));const o=e.getData();t.pointsIds.forEach((e,t)=>{let n=3*e,i=3*t;r[i]=o[n],r[++i]=o[++n],r[++i]=o[++n]}),t.points.setData(r)}else{t.points=e,t.pointsIds=new Array(e.getNumberOfPoints());for(let n=e.getNumberOfPoints()-1;n>=0;--n)t.pointsIds[n]=n}},e.getBounds=()=>{const e=t.points.getNumberOfPoints(),n=[];if(e){t.points.getPoint(0,n),t.bounds[0]=n[0],t.bounds[1]=n[0],t.bounds[2]=n[1],t.bounds[3]=n[1],t.bounds[4]=n[2],t.bounds[5]=n[2];for(let r=1;r<e;r++)t.points.getPoint(r,n),t.bounds[0]=n[0]<t.bounds[0]?n[0]:t.bounds[0],t.bounds[1]=n[0]>t.bounds[1]?n[0]:t.bounds[1],t.bounds[2]=n[1]<t.bounds[2]?n[1]:t.bounds[2],t.bounds[3]=n[1]>t.bounds[3]?n[1]:t.bounds[3],t.bounds[4]=n[2]<t.bounds[4]?n[2]:t.bounds[4],t.bounds[5]=n[2]>t.bounds[5]?n[2]:t.bounds[5]}else Qd(t.bounds);return t.bounds},e.getLength2=()=>{e.getBounds();let n=0,r=0;for(let e=0;e<3;e++)r=t.bounds[2*e+1]-t.bounds[2*e],n+=r*r;return n},e.getParametricDistance=e=>{let t,n=0;for(let r=0;r<3;r++)t=e[r]<0?-e[r]:e[r]>1?e[r]-1:0,t>n&&(n=t);return n},e.getNumberOfPoints=()=>t.points.getNumberOfPoints(),e.deepCopy=e=>{e.initialize(t.points,t.pointsIds)},e.getCellDimension=()=>{},e.intersectWithLine=(e,t,n,r,o,i,a)=>{},e.evaluatePosition=(e,t,n,r,o,i)=>{}}(e,t)}const mp=Ed.newInstance(Mp,"vtkCell");var Ap=Object.assign({newInstance:mp,extend:Mp});const yp={array:null,maxId:0,extend:0};function Tp(e,t,n={}){Object.assign(t,yp,n),Ed.obj(e,t),function(e,t){t.classHierarchy.push("vtkCellLinks"),e.buildLinks=n=>{const r=n.getPoints().getNumberOfPoints(),o=n.getNumberOfCells(),i=new Uint32Array(r);if(n.isA("vtkPolyData")){for(let t=0;t<o;++t){const{cellPointIds:r}=n.getCellPoints(t);r.forEach(t=>{e.incrementLinkCount(t)})}e.allocateLinks(r),t.maxId=r-1;for(let t=0;t<o;++t){const{cellPointIds:r}=n.getCellPoints(t);r.forEach(n=>{e.insertCellReference(n,i[n]++,t)})}}else{for(let t=0;t<o;t++)Ap.newInstance().getPointsIds().forEach(t=>{e.incrementLinkCount(t)});e.allocateLinks(r),t.maxId=r-1;for(let t=0;t<o;++t)Ap.newInstance().getPointsIds().forEach(n=>{e.insertCellReference(n,i[n]++,t)})}},e.allocate=(e,n=1e3)=>{t.array=Array(e).fill().map(()=>({ncells:0,cells:null})),t.extend=n,t.maxId=-1},e.initialize=()=>{t.array=null},e.getLink=e=>t.array[e],e.getNcells=e=>t.array[e].ncells,e.getCells=e=>t.array[e].cells,e.insertNextPoint=e=>{t.array.push({ncells:e,cells:Array(e)}),++t.maxId},e.insertNextCellReference=(e,n)=>{t.array[e].cells[t.array[e].ncells++]=n},e.deletePoint=e=>{t.array[e].ncells=0,t.array[e].cells=null},e.removeCellReference=(e,n)=>{t.array[n].cells=t.array[n].cells.filter(t=>t!==e),t.array[n].ncells=t.array[n].cells.length},e.addCellReference=(e,n)=>{t.array[n].cells[t.array[n].ncells++]=e},e.resizeCellList=(e,n)=>{t.array[e].cells.length=n},e.squeeze=()=>{!function(e,t){let n=t;for(t>=e.array.length&&(n+=e.array.length);n>e.array.length;)e.array.push({ncells:0,cells:null});e.array.length=n}(t,t.maxId+1)},e.reset=()=>{t.maxId=-1},e.deepCopy=e=>{t.array=[...e.array],t.extend=e.extend,t.maxId=e.maxId},e.incrementLinkCount=e=>{++t.array[e].ncells},e.allocateLinks=e=>{for(let n=0;n<e;++n)t.array[n].cells=new Array(t.array[n].ncells)},e.insertCellReference=(e,n,r)=>{t.array[e].cells[n]=r}}(e,t)}const Dp=Ed.newInstance(Tp,"vtkCellLinks");var Np=Object.assign({newInstance:Dp,extend:Tp});const xp=["vtkEmptyCell","vtkVertex","vtkPolyVertex","vtkLine","vtkPolyLine","vtkTriangle","vtkTriangleStrip","vtkPolygon","vtkPixel","vtkQuad","vtkTetra","vtkVoxel","vtkHexahedron","vtkWedge","vtkPyramid","vtkPentagonalPrism","vtkHexagonalPrism","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkQuadraticEdge","vtkQuadraticTriangle","vtkQuadraticQuad","vtkQuadraticTetra","vtkQuadraticHexahedron","vtkQuadraticWedge","vtkQuadraticPyramid","vtkBiQuadraticQuad","vtkTriQuadraticHexahedron","vtkQuadraticLinearQuad","vtkQuadraticLinearWedge","vtkBiQuadraticQuadraticWedge","vtkBiQuadraticQuadraticHexahedron","vtkBiQuadraticTriangle","vtkCubicLine","vtkQuadraticPolygon","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkConvexPointSet","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkParametricCurve","vtkParametricSurface","vtkParametricTriSurface","vtkParametricQuadSurface","vtkParametricTetraRegion","vtkParametricHexRegion","UnknownClass","UnknownClass","UnknownClass","vtkHigherOrderEdge","vtkHigherOrderTriangle","vtkHigherOrderQuad","vtkHigherOrderPolygon","vtkHigherOrderTetrahedron","vtkHigherOrderWedge","vtkHigherOrderPyramid","vtkHigherOrderHexahedron"],Ip={getClassNameFromTypeId:function(e){return e<xp.length?xp[e]:"UnknownClass"},getTypeIdFromClassName:function(e){return xp.findIndex(e)},isLinear:function(e){return e<21||41===e||42===e}},wp={size:0,maxId:-1,extend:1e3};function Cp(e,t,n={}){Object.assign(t,wp,n),Ed.obj(e,t),Ed.get(e,t,["size","maxId","extend"]),Ed.getArray(e,t,["typeArray","locationArray"]),function(e,t){t.classHierarchy.push("vtkCellTypes"),e.allocate=(e=512,n=1e3)=>{t.size=e>0?e:1,t.extend=n>0?n:1,t.maxId=-1,t.typeArray=new Uint8Array(e),t.locationArray=new Uint32Array(e)},e.insertCell=(e,n,r)=>{t.typeArray[e]=n,t.locationArray[e]=r,e>t.maxId&&(t.maxId=e)},e.insertNextCell=(n,r)=>(e.insertCell(++t.maxId,n,r),t.maxId),e.setCellTypes=(e,n,r)=>{t.size=e,t.typeArray=n,t.locationArray=r,t.maxId=e-1},e.getCellLocation=e=>t.locationArray[e],e.deleteCell=e=>{t.typeArray[e]=0},e.getNumberOfTypes=()=>t.maxId+1,e.isType=t=>{const n=e.getNumberOfTypes();for(let r=0;r<n;++r)if(t===e.getCellType(r))return!0;return!1},e.insertNextType=t=>e.insertNextCell(t,-1),e.getCellType=e=>t.typeArray[e],e.reset=()=>{t.maxId=-1},e.deepCopy=n=>{e.allocate(n.getSize(),n.getExtend()),t.typeArray.set(n.getTypeArray()),t.locationArray.set(n.getLocationArray()),t.maxId=n.getMaxId()}}(e,t)}const Ep=Ed.newInstance(Cp,"vtkCellTypes");var vp=Object.assign({newInstance:Ep,extend:Cp},Ip);const Lp={arrays:[],copyFieldFlags:[],doCopyAllOn:!0,doCopyAllOff:!1};function bp(e,t,n={}){Object.assign(t,Lp,n),Ed.obj(e,t),function(e,t){t.classHierarchy.push("vtkFieldData");const n=e.getState;t.arrays&&(t.arrays=t.arrays.map(e=>({data:kc(e.data)}))),e.initialize=()=>{e.initializeFields(),e.copyAllOn(),e.clearFieldFlags()},e.initializeFields=()=>{t.arrays=[],t.copyFieldFlags={},e.modified()},e.copyStructure=n=>{e.initializeFields(),t.copyFieldFlags=n.getCopyFieldFlags().map(e=>e),t.arrays=n.arrays().map(e=>({array:e}))},e.getNumberOfArrays=()=>t.arrays.length,e.getNumberOfActiveArrays=()=>t.arrays.length,e.addArray=e=>(t.arrays=[].concat(t.arrays,{data:e}),t.arrays.length-1),e.removeAllArrays=()=>{t.arrays=[]},e.removeArray=e=>{t.arrays=t.arrays.filter(t=>e!==t.data.getName())},e.removeArrayByIndex=e=>{t.arrays=t.arrays.filter((t,n)=>n!==e)},e.getArrays=()=>t.arrays.map(e=>e.data),e.getArray=t=>"number"==typeof t?e.getArrayByIndex(t):e.getArrayByName(t),e.getArrayByName=e=>t.arrays.reduce((t,n,r)=>n.data.getName()===e?n.data:t,null),e.getArrayWithIndex=e=>t.arrays.reduce((t,n,r)=>n.data&&n.data.getName()===e?{array:n.data,index:r}:t,{array:null,index:-1}),e.getArrayByIndex=e=>e>=0&&e<t.arrays.length?t.arrays[e].data:null,e.hasArray=t=>e.getArrayWithIndex(t).index>=0,e.getArrayName=e=>{const n=t.arrays[e];return n?n.data.getName():""},e.getCopyFieldFlags=()=>t.copyFieldFlags,e.getFlag=e=>t.copyFieldFlags[e],e.passData=(n,r=-1,o=-1)=>{n.getArrays().forEach(n=>{const i=e.getFlag(n.getName());if(!1!==i&&(!t.doCopyAllOff||!0===i)&&n){let t=e.getArrayByName(n.getName());if(t){if(n.getNumberOfComponents()===t.getNumberOfComponents())if(r>-1&&r<n.getNumberOfTuples())t.setTuple(o>-1?o:r,n.getTuple(r));else for(let e=0;e<n.getNumberOfTuples();++e)t.setTuple(e,n.getTuple(e))}else if(r<0||r>n.getNumberOfTuples())e.addArray(n);else{const i=n.getNumberOfComponents();let a=n.getNumberOfValues();const s=o>-1?o:r;a<s*i&&(a=(s+1)*i),t=rp.newInstance({name:n.getName(),dataType:n.getDataType(),numberOfComponents:n.getNumberOfComponents(),size:a}),t.setTuple(s,n.getTuple(r)),e.addArray(t)}}})},e.copyFieldOn=e=>{t.copyFieldFlags[e]=!0},e.copyFieldOff=e=>{t.copyFieldFlags[e]=!1},e.copyAllOn=()=>{t.doCopyAllOn&&!t.doCopyAllOff||(t.doCopyAllOn=!0,t.doCopyAllOff=!1,e.modified())},e.copyAllOff=()=>{!t.doCopyAllOn&&t.doCopyAllOff||(t.doCopyAllOn=!1,t.doCopyAllOff=!0,e.modified())},e.clearFieldFlags=()=>{t.copyFieldFlags={}},e.deepCopy=e=>{t.arrays=e.getArrays().map(e=>{const t=e.newClone();return t.deepCopy(e),{data:t}})},e.copyFlags=e=>e.getCopyFieldFlags().map(e=>e),e.reset=()=>t.arrays.forEach(e=>e.data.reset()),e.getMTime=()=>t.arrays.reduce((e,t)=>t.data.getMTime()>e?t.data.getMTime():e,t.mtime),e.getNumberOfComponents=()=>t.arrays.reduce((e,t)=>e+t.data.getNumberOfComponents(),0),e.getNumberOfTuples=()=>t.arrays.length>0?t.arrays[0].getNumberOfTuples():0,e.getState=()=>{const e=n();return e.arrays=t.arrays.map(e=>({data:e.data.getState()})),e}}(e,t)}var Op={newInstance:Ed.newInstance(bp,"vtkFieldData"),extend:bp};const Sp={SCALARS:0,VECTORS:1,NORMALS:2,TCOORDS:3,TENSORS:4,GLOBALIDS:5,PEDIGREEIDS:6,EDGEFLAG:7,NUM_ATTRIBUTES:8},jp={DEFAULT:0,SINGLE:1,DOUBLE:2};var Pp={AttributeCopyOperations:{COPYTUPLE:0,INTERPOLATE:1,PASSDATA:2,ALLCOPY:3},AttributeLimitTypes:{MAX:0,EXACT:1,NOLIMIT:2},AttributeTypes:Sp,CellGhostTypes:{DUPLICATECELL:1,HIGHCONNECTIVITYCELL:2,LOWCONNECTIVITYCELL:4,REFINEDCELL:8,EXTERIORCELL:16,HIDDENCELL:32},DesiredOutputPrecision:jp,PointGhostTypes:{DUPLICATEPOINT:1,HIDDENPOINT:2},ghostArrayName:"vtkGhostType"};const{AttributeTypes:kp,AttributeCopyOperations:zp}=Pp,{vtkWarningMacro:Rp}=Ed,_p={activeScalars:-1,activeVectors:-1,activeTensors:-1,activeNormals:-1,activeTCoords:-1,activeGlobalIds:-1,activePedigreeIds:-1};function Vp(e,t,n={}){Object.assign(t,_p,n),Op.extend(e,t,n),Ed.setGet(e,t,["activeScalars","activeNormals","activeTCoords","activeVectors","activeTensors","activeGlobalIds","activePedigreeIds"]),t.arrays||(t.arrays={}),function(e,t){const n=["Scalars","Vectors","Normals","TCoords","Tensors","GlobalIds","PedigreeIds"];function r(e){let t=n.find(t=>kp[t.toUpperCase()]===e||"number"!=typeof e&&t.toLowerCase()===e.toLowerCase());return void 0===t&&(t=null),t}t.classHierarchy.push("vtkDataSetAttributes"),e.checkNumberOfComponents=e=>!0,e.setAttribute=(n,o)=>{const i=r(o);if(n&&"PEDIGREEIDS"===i.toUpperCase()&&!n.isA("vtkDataArray"))return Rp(`Cannot set attribute ${i}. The attribute must be a vtkDataArray.`),-1;if(n&&!e.checkNumberOfComponents(n,i))return Rp(`Cannot set attribute ${i}. Incorrect number of components.`),-1;let a=t[`active${i}`];if(a>=0&&a<t.arrays.length){if(t.arrays[a]===n)return a;e.removeArrayByIndex(a)}return n?(a=e.addArray(n),t[`active${i}`]=a):t[`active${i}`]=-1,e.modified(),t[`active${i}`]},e.setActiveAttributeByName=(t,n)=>e.setActiveAttributeByIndex(e.getArrayWithIndex(t).index,n),e.setActiveAttributeByIndex=(n,o)=>{const i=r(o);if(n>=0&&n<t.arrays.length){if("PEDIGREEIDS"!==i.toUpperCase()){const t=e.getArrayByIndex(n);if(!t.isA("vtkDataArray"))return Rp(`Cannot set attribute ${i}. Only vtkDataArray subclasses can be set as active attributes.`),-1;if(!e.checkNumberOfComponents(t,i))return Rp(`Cannot set attribute ${i}. Incorrect number of components.`),-1}return t[`active${i}`]=n,e.modified(),n}return-1===n&&(t[`active${i}`]=n,e.modified()),-1},e.getActiveAttribute=t=>{const n=r(t);return e[`get${n}`]()},e.removeAllArrays=()=>{t.arrays=[],n.forEach(e=>{t[`active${e}`]=-1})},e.removeArray=e=>{t.arrays=t.arrays.filter((r,o)=>e!==r.data.getName()||(n.forEach(e=>{o===t[`active${e}`]&&(t[`active${e}`]=-1)}),!1))},e.removeArrayByIndex=e=>{t.arrays=t.arrays.filter((t,n)=>n!==e),n.forEach(n=>{e===t[`active${n}`]&&(t[`active${n}`]=-1)})},n.forEach(n=>{const r=`active${n}`;e[`get${n}`]=()=>e.getArrayByIndex(t[r]),e[`set${n}`]=t=>e.setAttribute(t,n),e[`setActive${n}`]=t=>e.setActiveAttributeByIndex(e.getArrayWithIndex(t).index,n),e[`copy${n}Off`]=()=>{e.initialize();const r=n.toUpperCase();t.copyAttributeFlags[zp.PASSDATA][kp[r]]=!1}}),e.initialize=Ed.chain(e.initialize,()=>{t.copyAttributeFlags=[],Object.keys(zp).filter(e=>"ALLCOPY"!==e).forEach(e=>{t.copyAttributeFlags[zp[e]]=Object.keys(kp).filter(e=>"NUM_ATTRIBUTES"!==e).reduce((e,t)=>(e[kp[t]]=!0,e),[])}),t.copyAttributeFlags[zp.COPYTUPLE][kp.GLOBALIDS]=!1,t.copyAttributeFlags[zp.INTERPOLATE][kp.GLOBALIDS]=!1,t.copyAttributeFlags[zp.COPYTUPLE][kp.PEDIGREEIDS]=!1}),t.dataArrays&&Object.keys(t.dataArrays).length&&Object.keys(t.dataArrays).forEach(n=>{t.dataArrays[n].ref||"vtkDataArray"!==t.dataArrays[n].type||e.addArray(rp.newInstance(t.dataArrays[n]))});const o=e.shallowCopy;e.shallowCopy=(e,n)=>{o(e,n),t.arrays=e.getArrays().map(e=>{const t=e.newClone();return t.shallowCopy(e,n),{data:t}})}}(e,t)}const Bp=Ed.newInstance(Vp,"vtkDataSetAttributes");var Up=Object.assign({newInstance:Bp,extend:Vp},Pp);const Fp={UNIFORM:0,DATA_OBJECT_FIELD:0,COORDINATE:1,POINT_DATA:1,POINT:2,POINT_FIELD_DATA:2,CELL:3,CELL_FIELD_DATA:3,VERTEX:4,VERTEX_FIELD_DATA:4,EDGE:5,EDGE_FIELD_DATA:5,ROW:6,ROW_DATA:6};var Gp={FieldDataTypes:Fp,FieldAssociations:{FIELD_ASSOCIATION_POINTS:0,FIELD_ASSOCIATION_CELLS:1,FIELD_ASSOCIATION_NONE:2,FIELD_ASSOCIATION_POINTS_THEN_CELLS:3,FIELD_ASSOCIATION_VERTICES:4,FIELD_ASSOCIATION_EDGES:5,FIELD_ASSOCIATION_ROWS:6,NUMBER_OF_ASSOCIATIONS:7}};const Qp=["pointData","cellData","fieldData"],Yp={};function Wp(e,t,n={}){Object.assign(t,Yp,n),Ed.obj(e,t),Ed.setGet(e,t,Qp),function(e,t){t.classHierarchy.push("vtkDataSet"),Qp.forEach(e=>{t[e]=t[e]?kc(t[e]):Up.newInstance()});const n=e.shallowCopy;e.shallowCopy=(e,r=!1)=>{n(e,r),Qp.forEach(n=>{t[n]=Up.newInstance(),t[n].shallowCopy(e.getReferenceByName(n))})}}(e,t)}const Hp=Ed.newInstance(Wp,"vtkDataSet");var Kp=Object.assign({newInstance:Hp,extend:Wp},Gp);const Xp={};function Zp(e,t,n={}){Object.assign(t,Xp,n),Kp.extend(e,t,n),Ed.setGet(e,t,["points"]),function(e,t){t.classHierarchy.push("vtkPointSet"),t.points=t.points?kc(t.points):fp.newInstance(),e.getNumberOfPoints=()=>t.points.getNumberOfPoints(),e.getBounds=()=>t.points.getBounds(),e.computeBounds=()=>{e.getBounds()};const n=e.shallowCopy;e.shallowCopy=(e,r=!1)=>{n(e,r),t.points=fp.newInstance(),t.points.shallowCopy(e.getPoints())}}(e,t)}var qp={newInstance:Ed.newInstance(Zp,"vtkPointSet"),extend:Zp},$p={IntersectionState:{NO_INTERSECTION:0,YES_INTERSECTION:1,ON_LINE:2}};const{IntersectionState:Jp}=$p;function ef(e,t,n,r=null){const o={t:Number.MIN_VALUE,distance:0},i=[];let a;i[0]=n[0]-t[0],i[1]=n[1]-t[1],i[2]=n[2]-t[2];const s=i[0]*(e[0]-t[0])+i[1]*(e[1]-t[1])+i[2]*(e[2]-t[2]),l=Rd(i,i);let u=1e-5*s;return 0!==l&&(o.t=s/l),u<0&&(u=-u),-u<l&&l<u||l<=0||o.t<0?a=t:o.t>1?a=n:(a=i,i[0]=t[0]+o.t*i[0],i[1]=t[1]+o.t*i[1],i[2]=t[2]+o.t*i[2]),r&&(r[0]=a[0],r[1]=a[1],r[2]=a[2]),o.distance=Ud(a,e),o}function tf(e,t,n,r,o,i){const a=[],s=[],l=[];o[0]=0,i[0]=0,a[0]=t[0]-e[0],a[1]=t[1]-e[1],a[2]=t[2]-e[2],s[0]=r[0]-n[0],s[1]=r[1]-n[1],s[2]=r[2]-n[2],l[0]=n[0]-e[0],l[1]=n[1]-e[1],l[2]=n[2]-e[2];const u=[];u[0]=[Rd(a,a),-Rd(a,s)],u[1]=[u[0][1],Rd(s,s)];const c=[];if(c[0]=Rd(a,l),c[1]=-Rd(s,l),0===function(e,t,n){if(2===n){const n=Od(2),r=Fd(e[0][0],e[0][1],e[1][0],e[1][1]);return 0===r?0:(n[0]=(e[1][1]*t[0]-e[0][1]*t[1])/r,n[1]=(-e[1][0]*t[0]+e[0][0]*t[1])/r,t[0]=n[0],t[1]=n[1],1)}if(1===n)return 0===e[0][0]?0:(t[0]/=e[0][0],1);const r=Od(n);return 0===function(e,t,n){let r,o,i,a,s,l,u,c=0;const d=Od(n);for(r=0;r<n;r++){for(a=0,o=0;o<n;o++)(u=Math.abs(e[r][o]))>a&&(a=u);if(0===a)return Ld("Unable to factor linear system"),0;d[r]=1/a}for(o=0;o<n;o++){for(r=0;r<o;r++){for(s=e[r][o],i=0;i<r;i++)s-=e[r][i]*e[i][o];e[r][o]=s}for(a=0,r=o;r<n;r++){for(s=e[r][o],i=0;i<o;i++)s-=e[r][i]*e[i][o];e[r][o]=s,(l=d[r]*Math.abs(s))>=a&&(a=l,c=r)}if(o!==c){for(i=0;i<n;i++)l=e[c][i],e[c][i]=e[o][i],e[o][i]=l;d[c]=d[o]}if(t[o]=c,Math.abs(e[o][o])<=1e-12)return Ld("Unable to factor linear system"),0;if(o!==n-1)for(l=1/e[o][o],r=o+1;r<n;r++)e[r][o]*=l}return 1}(e,r,n)?0:(function(e,t,n,r){let o,i,a,s,l;for(a=-1,o=0;o<r;o++){if(s=t[o],l=n[s],n[s]=n[o],a>=0)for(i=a;i<=o-1;i++)l-=e[o][i]*n[i];else 0!==l&&(a=o);n[o]=l}for(o=r-1;o>=0;o--){for(l=n[o],i=o+1;i<r;i++)l-=e[o][i]*n[i];n[o]=l/e[o][o]}}(e,r,t,n),1)}(u,c,2)){let a=Number.MAX_VALUE;const s=[e,t,n,r],l=[n,n,e,e],u=[r,r,t,t],c=[i[0],i[0],o[0],o[0]],d=[o[0],o[0],i[0],i[0]];let g;for(let e=0;e<4;e++)g=ef(s[e],l[e],u[e]),g.distance<a&&(a=g.distance,c[e]=g.t,d[e]=e%2);return Jp.ON_LINE}return o[0]=c[0],i[0]=c[1],o[0]>=0&&o[0]<=1&&i[0]>=0&&i[0]<=1?Jp.YES_INTERSECTION:Jp.NO_INTERSECTION}const nf={distanceToLine:ef,intersection:tf},rf={};function of(e,t,n={}){Object.assign(t,rf,n),Ap.extend(e,t,n),function(e,t){t.classHierarchy.push("vtkLine"),e.getCellDimension=()=>1,e.intersectWithLine=(e,n,r,o,i)=>{const a={intersect:0,t:Number.MIN_VALUE,subId:0};i[1]=0,i[2]=0;const s=[],l=[],u=[];t.points.getPoint(0,l),t.points.getPoint(1,u);const c=[],d=[],g=tf(e,n,l,u,c,d);if(a.t=c[0],i[0]=d[0],g===Jp.YES_INTERSECTION){for(let t=0;t<3;t++)o[t]=l[t]+i[0]*(u[t]-l[t]),s[t]=e[t]+a.t*(n[t]-e[t]);if(Ud(o,s)<=r*r)return a.intersect=1,a}else{let t;if(a.t<0)return a.t=0,t=ef(e,l,u,o),i[0]=t.t,t.distance<=r*r?(a.intersect=1,a):a;if(a.t>1)return a.t=1,t=ef(n,l,u,o),i[0]=t.t,t.distance<=r*r?(a.intersect=1,a):a;if(i[0]<0)return i[0]=0,t=ef(l,e,n,o),a.t=t.t,t.distance<=r*r?(a.intersect=1,a):a;if(i[1]>1)return i[1]=1,t=ef(u,e,n,o),a.t=t.t,t.distance<=r*r?(a.intersect=1,a):a}return a},e.evaluatePosition=(e,t,n,r,o,i)=>{}}(e,t)}const af=Ed.newInstance(of,"vtkLine");var sf=Object.assign({newInstance:af,extend:of},nf,$p);function lf(e,t,n,r){const o=n[0]-t[0],i=n[1]-t[1],a=n[2]-t[2],s=e[0]-t[0],l=e[1]-t[1],u=e[2]-t[2];r[0]=i*u-a*l,r[1]=a*s-o*u,r[2]=o*l-i*s}function uf(e,t,n,r){lf(e,t,n,r);const o=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);0!==o&&(r[0]/=o,r[1]/=o,r[2]/=o)}const cf={computeNormalDirection:lf,computeNormal:uf},df={};function gf(e,t,n={}){Object.assign(t,df,n),Ap.extend(e,t,n),function(e,t){t.classHierarchy.push("vtkTriangle"),e.getCellDimension=()=>2,e.intersectWithLine=(n,r,o,i,a)=>{const s={subId:0,t:0,intersect:-1};a[2]=0;const l=[],u=o*o,c=[],d=[],g=[];t.points.getPoint(0,c),t.points.getPoint(1,d),t.points.getPoint(2,g);const p=[],f=[];if(uf(c,d,g,p),0!==p[0]||0!==p[1]||0!==p[2]){const t=ug.intersectWithLine(n,r,c,p);if(s.t=t.t,i[0]=t.x[0],i[1]=t.x[1],i[2]=t.x[2],!t.intersection)return a[0]=0,a[1]=0,s.intersect=0,s;const o=e.evaluatePosition(i,l,a,f);if(o.evaluation>=0)return o.dist2<=u?(s.intersect=1,s):(s.intersect=o.evaluation,s)}const h=Ud(c,d),M=Ud(d,g),m=Ud(g,c);if(t.line||(t.line=sf.newInstance()),h>M&&h>m?(t.line.getPoints().setPoint(0,c),t.line.getPoints().setPoint(1,d)):M>m&&M>h?(t.line.getPoints().setPoint(0,d),t.line.getPoints().setPoint(1,g)):(t.line.getPoints().setPoint(0,g),t.line.getPoints().setPoint(1,c)),t.line.intersectWithLine(n,r,o,i,a).intersect){const e=[],t=[],n=[];for(let r=0;r<3;r++)e[r]=c[r]-g[r],t[r]=d[r]-g[r],n[r]=i[r]-g[r];return a[0]=Rd(n,e)/m,a[1]=Rd(n,t)/M,s.evaluation=1,s}return a[0]=0,a[1]=0,s.evaluation=0,s},e.evaluatePosition=(e,n,r,o)=>{const i={subId:0,dist2:0,evaluation:-1};let a,s;const l=[],u=[],c=[],d=[];let g;const p=[],f=[],h=[];let M=0,m=0;const A=[];let y,T,D,N=[];const x=[],I=[],w=[];i.subId=0,r[2]=0,t.points.getPoint(1,l),t.points.getPoint(2,u),t.points.getPoint(0,c),lf(l,u,c,d),ug.generalizedProjectPoint(e,l,d,w);let C=0;for(a=0;a<3;a++)g=d[a]<0?-d[a]:d[a],g>C&&(C=g,m=a);for(s=0,a=0;a<3;a++)a!==m&&(A[s++]=a);for(a=0;a<2;a++)p[a]=w[A[a]]-c[A[a]],f[a]=l[A[a]]-c[A[a]],h[a]=u[A[a]]-c[A[a]];if(M=Fd(f,h),0===M)return r[0]=0,r[1]=0,i.evaluation=-1,i;if(r[0]=Fd(p,h)/M,r[1]=Fd(f,p)/M,o[0]=1-(r[0]+r[1]),o[1]=r[0],o[2]=r[1],o[0]>=0&&o[0]<=1&&o[1]>=0&&o[1]<=1&&o[2]>=0&&o[2]<=1)n&&(i.dist2=Ud(w,e),n[0]=w[0],n[1]=w[1],n[2]=w[2]),i.evaluation=1;else{let t;if(n)if(o[1]<0&&o[2]<0)for(y=Ud(e,c),T=sf.distanceToLine(e,l,c,t,x),D=sf.distanceToLine(e,c,u,t,I),y<T?(i.dist2=y,N=c):(i.dist2=T,N=x),D<i.dist2&&(i.dist2=D,N=I),a=0;a<3;a++)n[a]=N[a];else if(o[2]<0&&o[0]<0)for(y=Ud(e,l),T=sf.distanceToLine(e,l,c,t,x),D=sf.distanceToLine(e,l,u,t,I),y<T?(i.dist2=y,N=l):(i.dist2=T,N=x),D<i.dist2&&(i.dist2=D,N=I),a=0;a<3;a++)n[a]=N[a];else if(o[1]<0&&o[0]<0)for(y=Ud(e,u),T=sf.distanceToLine(e,u,c,t,x),D=sf.distanceToLine(e,l,u,t,I),y<T?(i.dist2=y,N=u):(i.dist2=T,N=x),D<i.dist2&&(i.dist2=D,N=I),a=0;a<3;a++)n[a]=N[a];else if(o[0]<0){const t=sf.distanceToLine(e,l,u,n);i.dist2=t.distance}else if(o[1]<0){const t=sf.distanceToLine(e,u,c,n);i.dist2=t.distance}else if(o[2]<0){const t=sf.distanceToLine(e,l,c,n);i.dist2=t.distance}i.evaluation=0}return i},e.evaluateLocation=(e,n,r)=>{const o=[],i=[],a=[];t.points.getPoint(0,o),t.points.getPoint(1,i),t.points.getPoint(2,a);const s=1-e[0]-e[1];for(let t=0;t<3;t++)n[t]=o[t]*s+i[t]*e[0]+a[t]*e[1];r[0]=s,r[1]=e[0],r[2]=e[1]},e.getParametricDistance=e=>{let t,n=0;const r=[];r[0]=e[0],r[1]=e[1],r[2]=1-e[0]-e[1];for(let o=0;o<3;o++)t=r[o]<0?-r[o]:r[o]>1?r[o]-1:0,t>n&&(n=t);return n}}(e,t)}const pf=Ed.newInstance(gf,"vtkTriangle");var ff=Object.assign({newInstance:pf,extend:gf},cf);const hf=["verts","lines","polys","strips"],Mf={};function mf(e,t,n={}){Object.assign(t,Mf,n),qp.extend(e,t,n),Ed.get(e,t,["cells","links"]),Ed.setGet(e,t,["verts","lines","polys","strips"]),function(e,t){t.classHierarchy.push("vtkPolyData"),hf.forEach(n=>{e[`getNumberOf${function(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,e=>e.toUpperCase()).replace(/\s+/g,"")}(n)}`]=()=>t[n].getNumberOfCells(),t[n]=t[n]?kc(t[n]):up.newInstance()}),e.getNumberOfCells=()=>hf.reduce((e,n)=>e+t[n].getNumberOfCells(),0);const n=e.shallowCopy;e.shallowCopy=(e,r=!1)=>{n(e,r),hf.forEach(n=>{t[n]=up.newInstance(),t[n].shallowCopy(e.getReferenceByName(n))})},e.buildCells=()=>{const n=e.getNumberOfVerts(),r=e.getNumberOfLines(),o=e.getNumberOfPolys(),i=e.getNumberOfStrips(),a=n+r+o+i,s=new Uint8Array(a);let l=s;const u=new Uint32Array(a);let c=u,d=0;n&&(t.verts.getCellSizes().forEach((e,t)=>{c[t]=d,l[t]=e>1?2:1,d+=e+1}),c=c.subarray(n),l=l.subarray(n)),r&&(t.lines.getCellSizes().forEach((e,t)=>{c[t]=d,l[t]=e>2?4:3,1===e&&console.log("Building VTK_LINE ",t," with only one point, but VTK_LINE needs at least two points. Check the input."),d+=e+1}),c=c.subarray(r),l=l.subarray(r)),o&&(t.polys.getCellSizes().forEach((e,t)=>{switch(c[t]=d,e){case 3:l[t]=5;break;case 4:l[t]=9;break;default:l[t]=7}e<3&&console.log("Building VTK_TRIANGLE ",t," with less than three points, but VTK_TRIANGLE needs at least three points. Check the input."),d+=e+1}),c+=c.subarray(o),l+=l.subarray(o)),i&&(l.fill(6,0,i),t.strips.getCellSizes().forEach((e,t)=>{c[t]=d,d+=e+1})),t.cells=vp.newInstance(),t.cells.setCellTypes(a,s,u)},e.buildLinks=(n=0)=>{void 0===t.cells&&e.buildCells(),t.links=Np.newInstance(),t.links.allocate(n>0?n:e.getPoints().getNumberOfPoints()),t.links.buildLinks(e)},e.getCellPoints=e=>{const n=t.cells.getCellType(e);let r=null;switch(n){case 1:case 2:r=t.verts;break;case 3:case 4:r=t.lines;break;case 5:case 9:case 7:r=t.polys;break;case 6:r=t.strips;break;default:return r=null,{type:0,cellPointIds:null}}const o=t.cells.getCellLocation(e);return{cellType:n,cellPointIds:r.getCell(o)}},e.getPointCells=e=>t.links.getCells(e),e.getCellEdgeNeighbors=(e,n,r)=>{const o=t.links.getLink(n),i=t.links.getLink(r);return o.cells.filter(t=>t!==e&&-1!==i.cells.indexOf(t))},e.getCell=(t,n=null)=>{const r=e.getCellPoints(t);if(5===r.cellType){const t=n||ff.newInstance();return t.initialize(e.getPoints(),r.cellPointIds),t}return null}}(e,t)}var Af={newInstance:Ed.newInstance(mf,"vtkPolyData"),extend:mf};const yf=e=>e,Tf=new Float64Array(16);i.identity(Tf);class Df{constructor(e=!1){this.matrix=new Float64Array(16),i.identity(this.matrix),this.tmp=new Float64Array(3),this.angleConv=e?r.toRadian:yf}rotateFromDirections(e,t){const n=new Float64Array(3),r=new Float64Array(3),o=new Float64Array(16);a.set(n,e[0],e[1],e[2]),a.set(r,t[0],t[1],t[2]),a.normalize(n,n),a.normalize(r,r);const s=a.dot(n,r);return s>=1||(a.cross(this.tmp,n,r),a.length(this.tmp)<1e-6&&(a.cross(this.tmp,[1,0,0],e),a.length(this.tmp)<1e-6&&a.cross(this.tmp,[0,1,0],e)),i.fromRotation(o,Math.acos(s),this.tmp),i.multiply(this.matrix,this.matrix,o)),this}rotate(e,t){return a.set(this.tmp,...t),a.normalize(this.tmp,this.tmp),i.rotate(this.matrix,this.matrix,this.angleConv(e),this.tmp),this}rotateX(e){return i.rotateX(this.matrix,this.matrix,this.angleConv(e)),this}rotateY(e){return i.rotateY(this.matrix,this.matrix,this.angleConv(e)),this}rotateZ(e){return i.rotateZ(this.matrix,this.matrix,this.angleConv(e)),this}translate(e,t,n){return a.set(this.tmp,e,t,n),i.translate(this.matrix,this.matrix,this.tmp),this}scale(e,t,n){return a.set(this.tmp,e,t,n),i.scale(this.matrix,this.matrix,this.tmp),this}identity(){return i.identity(this.matrix),this}apply(e,t=0,n=-1){if(!(r=Tf).length!==(o=this.matrix).length&&r.every((function(e,t){return e===o[t]})))return this;var r,o;const i=-1===n?e.length:t+3*n;for(let s=t;s<i;s+=3)a.set(this.tmp,e[s],e[s+1],e[s+2]),a.transformMat4(this.tmp,this.tmp,this.matrix),e[s]=this.tmp[0],e[s+1]=this.tmp[1],e[s+2]=this.tmp[2];return this}getMatrix(){return this.matrix}setMatrix(e){return e&&16===e.length&&i.copy(this.matrix,e),this}}var Nf=function(){return new Df(!1)};const xf={height:1,radius:.5,resolution:6,center:[0,0,0],direction:[1,0,0],capping:!0,pointType:"Float32Array"};function If(e,t,n={}){Object.assign(t,xf,n),Ed.obj(e,t),Ed.setGet(e,t,["height","radius","resolution","capping"]),Ed.setGetArray(e,t,["center","direction"],3),Ed.algo(e,t,0,1),function(e,t){t.classHierarchy.push("vtkConeSource"),e.requestData=function(e,n){if(t.deleted)return;let r=n[0];const o=2*Math.PI/t.resolution,i=-t.height/2,a=4*t.resolution+1+t.resolution;let s=0;const l=new window[t.pointType](3*(t.resolution+1));let u=0;const c=new Uint32Array(a);l[0]=t.height/2,l[1]=0,l[2]=0,t.capping&&(c[u++]=t.resolution);for(let d=0;d<t.resolution;d++)s++,l[3*s+0]=i,l[3*s+1]=t.radius*Math.cos(d*o),l[3*s+2]=t.radius*Math.sin(d*o),t.capping&&(c[t.resolution-u+++1]=s);for(let d=0;d<t.resolution;d++)c[u++]=3,c[u++]=0,c[u++]=d+1,c[u++]=d+2>t.resolution?1:d+2;Nf().translate(...t.center).rotateFromDirections([1,0,0],t.direction).apply(l),r=Af.newInstance(),r.getPoints().setData(l,3),r.getPolys().setData(c,1),n[0]=r}}(e,t)}var wf={newInstance:Ed.newInstance(If,"vtkConeSource"),extend:If};const Cf={clippingPlanes:[]};const Ef={bounds:[1,-1,1,-1,1,-1],center:[0,0,0]};var vf=function(e,t,n={}){Object.assign(t,Ef,n),function(e,t,n={}){Object.assign(t,Cf,n),Ed.obj(e,t),Ed.algo(e,t,1,0),t.clippingPlanes||(t.clippingPlanes=[]),function(e,t){e.update=()=>{e.getInputData()},e.addClippingPlane=e=>{"vtkPlane"===e.getClassName()&&t.clippingPlanes.push(e)},e.getNumberOfClippingPlanes=()=>t.clippingPlanes.length,e.removeAllClippingPlanes=()=>{t.clippingPlanes.length=0},e.removeClippingPlane=e=>{e<0||e>=6||t.clippingPlanes.splice(e,1)},e.getClippingPlanes=()=>t.clippingPlanes,e.setClippingPlanes=t=>{if(t)if(Array.isArray(t)){const n=t.length;for(let r=0;r<n&&r<6;r++)e.addClippingPlane(t[r])}else e.addClippingPlane(t)}}(e,t)}(e,t,n),t.bounds||Qd(t.bounds),t.center||(t.center=[0,0,0]),function(e,t){e.getBounds=()=>0,e.getBounds=n=>{e.getBounds();for(let e=0;e<6;e++)n[e]=t.bounds[e]},e.getCenter=()=>{e.getBounds();for(let e=0;e<3;e++)t.center[e]=(t.bounds[2*e+1]+t.bounds[2*e])/2;return t.center.slice()},e.getLength=()=>{let n=0,r=0;e.getBounds();for(let e=0;e<3;e++)n=t.bounds[2*e+1]-t.bounds[2*e],r+=n*n;return Math.sqrt(r)},e.getClippingPlaneInDataCoords=(e,n,r)=>{const o=t.clippingPlanes,i=e;if(o){const e=o.length;if(n>=0&&n<e){const e=o[n],t=e.getNormal(),a=e.getOrigin(),s=t[0],l=t[1],u=t[2],c=-(s*a[0]+l*a[1]+u*a[2]);return r[0]=s*i[0]+l*i[4]+u*i[8]+c*i[12],r[1]=s*i[1]+l*i[5]+u*i[9]+c*i[13],r[2]=s*i[2]+l*i[6]+u*i[10]+c*i[14],void(r[3]=s*i[3]+l*i[7]+u*i[11]+c*i[15])}}Ed.vtkErrorMacro(`Clipping plane index ${n} is out of range.`)}}(e,t)};const Lf={UNCHANGED:0,SINGLE_POINT:1,X_LINE:2,Y_LINE:3,Z_LINE:4,XY_PLANE:5,YZ_PLANE:6,XZ_PLANE:7,XYZ_GRID:8,EMPTY:9};var bf={StructuredType:Lf};const{StructuredType:Of}=bf;var Sf=Object.assign({getDataDescriptionFromExtent:function(e){let t=0;for(let n=0;n<3;++n)e[2*n]<e[2*n+1]&&t++;return e[0]>e[1]||e[2]>e[3]||e[4]>e[5]?Of.EMPTY:3===t?Of.XYZ_GRID:2===t?e[0]===e[1]?Of.YZ_PLANE:e[2]===e[3]?Of.XZ_PLANE:Of.XY_PLANE:1===t?e[0]<e[1]?Of.X_LINE:e[2]<e[3]?Of.Y_LINE:Of.Z_LINE:Of.SINGLE_POINT}},bf);const{vtkErrorMacro:jf}=Ed,Pf={direction:null,indexToWorld:null,worldToIndex:null,spacing:[1,1,1],origin:[0,0,0],extent:[0,-1,0,-1,0,-1],dataDescription:Lf.EMPTY};function kf(e,t,n={}){if(Object.assign(t,Pf,n),Kp.extend(e,t,n),t.direction){if(Array.isArray(t.direction)){const e=t.direction.slice(0);t.direction=o.create();for(let n=0;n<9;++n)t.direction[n]=e[n]}}else t.direction=o.create();t.indexToWorld=new Float64Array(16),t.worldToIndex=new Float64Array(16),Ed.get(e,t,["direction","indexToWorld","worldToIndex"]),Ed.setGetArray(e,t,["origin","spacing"],3),Ed.getArray(e,t,["extent"],6),function(e,t){t.classHierarchy.push("vtkImageData"),e.setExtent=(...n)=>{if(t.deleted)return jf("instance deleted - cannot call any method"),!1;const r=1===n.length?n[0]:n;if(6!==r.length)return!1;let o=!1;return t.extent.forEach((e,t)=>{if(e!==r[t]){if(o)return;o=!0}}),o&&(t.extent=r.slice(),t.dataDescription=Sf.getDataDescriptionFromExtent(t.extent),e.modified()),o},e.setDimensions=(...n)=>{let r,o,i;if(t.deleted)jf("instance deleted - cannot call any method");else{if(1===n.length){const e=n[0];r=e[0],o=e[1],i=e[2]}else{if(3!==n.length)return void jf("Bad dimension specification");r=n[0],o=n[1],i=n[2]}e.setExtent(0,r-1,0,o-1,0,i-1)}},e.getDimensions=()=>[t.extent[1]-t.extent[0]+1,t.extent[3]-t.extent[2]+1,t.extent[5]-t.extent[4]+1],e.getNumberOfCells=()=>{const t=e.getDimensions();let n=1;for(let e=0;e<3;e++){if(0===t[e])return 0;t[e]>1&&(n*=t[e]-1)}return n},e.getNumberOfPoints=()=>{const t=e.getDimensions();return t[0]*t[1]*t[2]},e.getPoint=n=>{const r=e.getDimensions(),o=a.fromValues(0,0,0),i=[0,0,0];if(0===r[0]||0===r[1]||0===r[2])return jf("Requesting a point from an empty image."),null;switch(t.dataDescription){case Lf.EMPTY:return null;case Lf.SINGLE_POINT:break;case Lf.X_LINE:o[0]=n;break;case Lf.Y_LINE:o[1]=n;break;case Lf.Z_LINE:o[2]=n;break;case Lf.XY_PLANE:o[0]=n%r[0],o[1]=n/r[0];break;case Lf.YZ_PLANE:o[1]=n%r[1],o[2]=n/r[1];break;case Lf.XZ_PLANE:o[0]=n%r[0],o[2]=n/r[0];break;case Lf.XYZ_GRID:o[0]=n%r[0],o[1]=n/r[0]%r[1],o[2]=n/(r[0]*r[1]);break;default:jf("Invalid dataDescription")}const s=a.create();return e.indexToWorldVec3(o,s),a.copy(i,s),i},e.getBounds=()=>e.extentToBounds(t.extent),e.extentToBounds=t=>{const n=[t[0],t[2],t[4],t[1],t[2],t[4],t[0],t[3],t[4],t[1],t[3],t[4],t[0],t[2],t[5],t[1],t[2],t[5],t[0],t[3],t[5],t[1],t[3],t[5]],r=a.fromValues(n[0],n[1],n[2]),o=a.create();e.indexToWorldVec3(r,o);const i=[o[0],o[0],o[1],o[1],o[2],o[2]];for(let s=3;s<24;s+=3)a.set(r,n[s],n[s+1],n[s+2]),e.indexToWorldVec3(r,o),o[0]<i[0]&&(i[0]=o[0]),o[1]<i[2]&&(i[2]=o[1]),o[2]<i[4]&&(i[4]=o[2]),o[0]>i[1]&&(i[1]=o[0]),o[1]>i[3]&&(i[3]=o[1]),o[2]>i[5]&&(i[5]=o[2]);return i},e.computeTransforms=()=>{const e=a.fromValues(t.origin[0],t.origin[1],t.origin[2]);i.fromTranslation(t.indexToWorld,e),t.indexToWorld[0]=t.direction[0],t.indexToWorld[1]=t.direction[1],t.indexToWorld[2]=t.direction[2],t.indexToWorld[4]=t.direction[3],t.indexToWorld[5]=t.direction[4],t.indexToWorld[6]=t.direction[5],t.indexToWorld[8]=t.direction[6],t.indexToWorld[9]=t.direction[7],t.indexToWorld[10]=t.direction[8];const n=a.fromValues(t.spacing[0],t.spacing[1],t.spacing[2]);i.scale(t.indexToWorld,t.indexToWorld,n),i.invert(t.worldToIndex,t.indexToWorld)},e.setDirection=(...n)=>{if(t.deleted)return jf("instance deleted - cannot call any method"),!1;let r=n;if(1!==r.length||!Array.isArray(r[0])&&r[0].constructor!==Float32Array&&r[0].constructor!==Float64Array||(r=r[0]),9!==r.length)throw new RangeError("Invalid number of values for array setter");let o=!1;if(t.direction.forEach((e,t)=>{if(e!==r[t]){if(o)return;o=!0}}),o){for(let e=0;e<9;++e)t.direction[e]=r[e];e.modified()}return!0},e.indexToWorldVec3=(e,n)=>(a.transformMat4(n,e,t.indexToWorld),n),e.indexToWorld=(e,n=[])=>{const r=a.fromValues(e[0],e[1],e[2]),o=a.create();return a.transformMat4(o,r,t.indexToWorld),a.copy(n,o),n},e.worldToIndexVec3=(e,n)=>(a.transformMat4(n,e,t.worldToIndex),n),e.worldToIndex=(e,n=[])=>{const r=a.fromValues(e[0],e[1],e[2]),o=a.create();return a.transformMat4(o,r,t.worldToIndex),a.copy(n,o),n},e.indexToWorldBounds=(e,n=[])=>{const r=[0,0,0],o=[0,0,0];xg.computeCornerPoints(r,o,e);const i=[0,0,0],s=[0,0,0];return a.transformMat4(i,r,t.indexToWorld),a.transformMat4(s,o,t.indexToWorld),Wd(i,s,n),n},e.worldToIndexBounds=(e,n=[])=>{const r=[0,0,0],o=[0,0,0];xg.computeCornerPoints(r,o,e);const i=[0,0,0],s=[0,0,0];return a.transformMat4(i,r,t.worldToIndex),a.transformMat4(s,o,t.worldToIndex),Wd(i,s,n),n},e.onModified(e.computeTransforms),e.computeTransforms(),e.getCenter=()=>{const t=e.getBounds(),n=[];for(let e=0;e<3;e++)n[e]=(t[2*e+1]+t[2*e])/2;return n},e.computeHistogram=(t,n=null)=>{const r=[0,0,0,0,0,0];e.worldToIndexBounds(t,r);const o=[0,0,0],i=[0,0,0];xg.computeCornerPoints(o,i,r),Xd(o,o),Xd(i,i);const a=e.getDimensions();Kd(o,[0,0,0],[a[0]-1,a[1]-1,a[2]-1],o),Kd(i,[0,0,0],[a[0]-1,a[1]-1,a[2]-1],i);const s=a[0],l=a[0]*a[1],u=e.getPointData().getScalars().getData();let c=-1/0,d=1/0,g=0,p=0,f=0;for(let e=o[2];e<=i[2];e++)for(let t=o[1];t<=i[1];t++){let a=o[0]+t*s+e*l;for(let s=o[0];s<=i[0];s++){if(!n||n([s,t,e],r)){const e=u[a];e>c&&(c=e),e<d&&(d=e),g+=e*e,p+=e,f+=1}++a}}const h=f>0?p/f:0,M=g-h*h;return{minimum:d,maximum:c,average:h,variance:M,sigma:Math.sqrt(M)}},e.computeIncrements=(e,t=1)=>{const n=[];let r=t;for(let o=0;o<3;++o)n[o]=r,r*=e[2*o+1]-e[2*o]+1;return n},e.computeOffsetIndex=([t,n,r])=>{const o=e.getExtent(),i=e.getPointData().getScalars().getNumberOfComponents(),a=e.computeIncrements(o,i);return Math.floor((Math.round(t)-o[0])*a[0]+(Math.round(n)-o[2])*a[1]+(Math.round(r)-o[4])*a[2])},e.getOffsetIndexFromWorld=t=>{const n=e.getExtent(),r=e.worldToIndex(t);for(let e=0;e<3;++e)if(r[e]<n[2*e]||r[e]>n[2*e+1])return jf(`GetScalarPointer: Pixel ${r} is not in memory. Current extent = ${n}`),NaN;return e.computeOffsetIndex(r)},e.getScalarValueFromWorld=(t,n=0)=>{const r=e.getPointData().getScalars().getNumberOfComponents();if(n<0||n>=r)return jf(`GetScalarPointer: Scalar Component ${n} is not within bounds. Current Scalar numberOfComponents: ${r}`),NaN;const o=e.getOffsetIndexFromWorld(t);return Number.isNaN(o)?o:e.getPointData().getScalars().getComponent(o,n)}}(e,t)}var zf={newInstance:Ed.newInstance(kf,"vtkImageData"),extend:kf};const Rf={LUMINANCE:1,LUMINANCE_ALPHA:2,RGB:3,RGBA:4};var _f={VectorMode:{MAGNITUDE:0,COMPONENT:1,RGBCOLORS:2},ScalarMappingTarget:Rf},Vf={ColorMode:{DEFAULT:0,MAP_SCALARS:1,DIRECT_SCALARS:2},GetArray:{BY_ID:0,BY_NAME:1},ScalarMode:{DEFAULT:0,USE_POINT_DATA:1,USE_CELL_DATA:2,USE_POINT_FIELD_DATA:3,USE_CELL_FIELD_DATA:4,USE_FIELD_DATA:5}};const{ScalarMappingTarget:Bf,VectorMode:Uf}=_f,{VtkDataTypes:Ff}=rp,{ColorMode:Gf}=Vf,{vtkErrorMacro:Qf}=Ed;function Yf(e){return e}function Wf(e){return Math.floor(255*e+.5)}const Hf={alpha:1,vectorComponent:0,vectorSize:-1,vectorMode:Uf.COMPONENT,mappingRange:null,annotationArray:null,annotatedValueMap:null,indexedLookup:!1};function Kf(e,t,n={}){Object.assign(t,Hf,n),Ed.obj(e,t),t.mappingRange=[0,255],t.annotationArray=[],t.annotatedValueMap=[],Ed.setGet(e,t,["vectorSize","vectorComponent","vectorMode","alpha","indexedLookup"]),Ed.setArray(e,t,["mappingRange"],2),Ed.getArray(e,t,["mappingRange"]),function(e,t){t.classHierarchy.push("vtkScalarsToColors"),e.setVectorModeToMagnitude=()=>e.setVectorMode(Uf.MAGNITUDE),e.setVectorModeToComponent=()=>e.setVectorMode(Uf.COMPONENT),e.setVectorModeToRGBColors=()=>e.setVectorMode(Uf.RGBCOLORS),e.build=()=>{},e.isOpaque=()=>!0,e.setAnnotations=(n,r)=>{if(!(n&&!r||!n&&r))if(n&&r&&n.length!==r.length)Qf("Values and annotations do not have the same number of tuples so ignoring");else{if(t.annotationArray=[],r&&n){const e=r.length;for(let o=0;o<e;o++)t.annotationArray.push({value:n[o],annotation:String(r[o])})}e.updateAnnotatedValueMap(),e.modified()}},e.setAnnotation=(n,r)=>{let o=e.checkForAnnotatedValue(n),i=!1;return o>=0?t.annotationArray[o].annotation!==r&&(t.annotationArray[o].annotation=r,i=!0):(t.annotationArray.push({value:n,annotation:r}),o=t.annotationArray.length-1,i=!0),i&&(e.updateAnnotatedValueMap(),e.modified()),o},e.getNumberOfAnnotatedValues=()=>t.annotationArray.length,e.getAnnotatedValue=e=>e<0||e>=t.annotationArray.length?null:t.annotationArray[e].value,e.getAnnotation=e=>void 0===t.annotationArray[e]?null:t.annotationArray[e].annotation,e.getAnnotatedValueIndex=n=>t.annotationArray.length?e.checkForAnnotatedValue(n):-1,e.removeAnnotation=n=>{const r=e.checkForAnnotatedValue(n),o=r>=0;return o&&(t.annotationArray.splice(r,1),e.updateAnnotatedValueMap(),e.modified()),o},e.resetAnnotations=()=>{t.annotationArray=[],t.annotatedValueMap=[],e.modified()},e.getAnnotationColor=(n,r)=>{if(t.indexedLookup){const t=e.getAnnotatedValueIndex(n);e.getIndexedColor(t,r)}else e.getColor(parseFloat(n),r),r[3]=1},e.checkForAnnotatedValue=t=>e.getAnnotatedValueIndexInternal(t),e.getAnnotatedValueIndexInternal=e=>void 0!==t.annotatedValueMap[e]?t.annotatedValueMap[e]%t.annotationArray.length:-1,e.getIndexedColor=(e,t)=>{t[0]=0,t[1]=0,t[2]=0,t[3]=0},e.updateAnnotatedValueMap=()=>{t.annotatedValueMap=[];const e=t.annotationArray.length;for(let n=0;n<e;n++)t.annotatedValueMap[t.annotationArray[n].value]=n},e.mapScalars=(t,n,r)=>{const o=t.getNumberOfComponents();let i=null;if(n===Gf.DEFAULT&&t.getDataType()===Ff.UNSIGNED_CHAR||n===Gf.DIRECT_SCALARS&&t)i=e.convertToRGBA(t,o,t.getNumberOfTuples());else{const n={type:"vtkDataArray",name:"temp",numberOfComponents:4,dataType:Ff.UNSIGNED_CHAR},a=new window[n.dataType](4*t.getNumberOfTuples());n.values=a,n.size=a.length,i=rp.newInstance(n);let s=r;s<0&&o>1?e.mapVectorsThroughTable(t,i,Bf.RGBA,-1,-1):(s<0&&(s=0),s>=o&&(s=o-1),e.mapScalarsThroughTable(t,i,Bf.RGBA,s))}return i},e.mapVectorsToMagnitude=(e,t,n)=>{const r=e.getNumberOfTuples(),o=e.getNumberOfComponents(),i=t.getData(),a=e.getData();for(let s=0;s<r;s++){let e=0;for(let t=0;t<n;t++)e+=a[s*o+t]*a[s*o+t];i[s]=Math.sqrt(e)}},e.mapVectorsThroughTable=(t,n,r,o,i)=>{let a=e.getVectorMode(),s=i,l=o;const u=t.getNumberOfComponents();a===Uf.COMPONENT?(-1===l&&(l=e.getVectorComponent()),l<0&&(l=0),l>=u&&(l=u-1)):(-1===s&&(s=e.getVectorSize()),s<=0?(l=0,s=u):(l<0&&(l=0),l>=u&&(l=u-1),l+s>u&&(s=u-l)),a!==Uf.MAGNITUDE||1!==u&&1!==s||(a=Uf.COMPONENT));let c=0;switch(l>0&&(c=l),a){case Uf.COMPONENT:e.mapScalarsThroughTable(t,n,r,c);break;default:case Uf.MAGNITUDE:{const o=rp.newInstance({numberOfComponents:1,values:new Float32Array(t.getNumberOfTuples())});e.mapVectorsToMagnitude(t,o,s),e.mapScalarsThroughTable(o,n,r,0);break}case Uf.RGBCOLORS:}},e.luminanceToRGBA=(e,t,n,r)=>{const o=r(n),i=t.getData(),a=e.getData(),s=i.length;let l=0;for(let u=0;u<s;u+=1){const e=r(i[u]);a[4*l]=e,a[4*l+1]=e,a[4*l+2]=e,a[4*l+3]=o,l++}},e.luminanceAlphaToRGBA=(e,t,n,r)=>{const o=t.getData(),i=e.getData(),a=o.length;let s=0;for(let l=0;l<a;l+=2){const e=r(o[l]);i[s]=e,i[s+1]=e,i[s+2]=e,i[s+3]=r(o[l+1])*n,s+=4}},e.rGBToRGBA=(e,t,n,r)=>{const o=Wf(n),i=t.getData(),a=e.getData(),s=i.length;let l=0;for(let u=0;u<s;u+=3)a[4*l]=r(i[u]),a[4*l+1]=r(i[u+1]),a[4*l+2]=r(i[u+2]),a[4*l+3]=o,l++},e.rGBAToRGBA=(e,t,n,r)=>{const o=t.getData(),i=e.getData(),a=o.length;let s=0;for(let l=0;l<a;l+=4)i[4*s]=r(o[l]),i[4*s+1]=r(o[l+1]),i[4*s+2]=r(o[l+2]),i[4*s+3]=r(o[l+3])*n,s++},e.convertToRGBA=(n,r,o)=>{let{alpha:i}=t;if(4===r&&i>=1&&n.getDataType()===Ff.UNSIGNED_CHAR)return n;const a=rp.newInstance({numberOfComponents:4,empty:!0,size:4*o,dataType:Ff.UNSIGNED_CHAR});if(o<=0)return a;i=i>0?i:0,i=i<1?i:1;let s=Yf;switch(n.getDataType()!==Ff.FLOAT&&n.getDataType()!==Ff.DOUBLE||(s=Wf),r){case 1:e.luminanceToRGBA(a,n,i,s);break;case 2:e.luminanceAlphaToRGBA(a,n,s);break;case 3:e.rGBToRGBA(a,n,i,s);break;case 4:e.rGBAToRGBA(a,n,i,s);break;default:return Qf("Cannot convert colors"),null}return a},e.usingLogScale=()=>!1,e.getNumberOfAvailableColors=()=>16777216,e.setRange=(t,n)=>e.setMappingRange(t,n),e.getRange=(t,n)=>e.getMappingRange()}(e,t)}const Xf=Ed.newInstance(Kf,"vtkScalarsToColors");var Zf=Object.assign({newInstance:Xf,extend:Kf},_f);const{vtkErrorMacro:qf}=Ed,$f={numberOfColors:256,hueRange:[0,.66667],saturationRange:[1,1],valueRange:[1,1],alphaRange:[1,1],nanColor:[.5,0,0,1],belowRangeColor:[0,0,0,1],aboveRangeColor:[1,1,1,1],useAboveRangeColor:!1,useBelowRangeColor:!1,alpha:1};function Jf(e,t,n={}){Object.assign(t,$f,n),Zf.extend(e,t,n),t.table||(t.table=[]),t.buildTime={},Ed.obj(t.buildTime),t.opaqueFlagBuildTime={},Ed.obj(t.opaqueFlagBuildTime,{mtime:0}),t.insertTime={},Ed.obj(t.insertTime,{mtime:0}),Ed.get(e,t,["buildTime"]),Ed.setGet(e,t,["numberOfColors","useAboveRangeColor","useBelowRangeColor"]),Ed.setArray(e,t,["alphaRange","hueRange","saturationRange","valueRange"],2),Ed.setArray(e,t,["nanColor","belowRangeColor","aboveRangeColor"],4),Ed.getArray(e,t,["hueRange","saturationRange","valueRange","alphaRange","nanColor","belowRangeColor","aboveRangeColor"]),function(e,t){t.classHierarchy.push("vtkLookupTable"),e.isOpaque=()=>{if(t.opaqueFlagBuildTime.getMTime()<e.getMTime()){let e=!0;t.nanColor[3]<1&&(e=0),t.useBelowRangeColor&&t.belowRangeColor[3]<1&&(e=0),t.useAboveRangeColor&&t.aboveRangeColor[3]<1&&(e=0);for(let n=3;n<t.table.length&&e;n+=4)t.table[n]<255&&(e=!1);t.opaqueFlag=e,t.opaqueFlagBuildTime.modified()}return t.opaqueFlag},e.usingLogScale=()=>!1,e.getNumberOfAvailableColors=()=>t.table.length,e.linearIndexLookup=(e,t)=>{let n=0;return e<t.range[0]?n=t.maxIndex+0+1.5:e>t.range[1]?n=t.maxIndex+1+1.5:(n=(e+t.shift)*t.scale,n=n<t.maxIndex?n:t.maxIndex),Math.floor(n)},e.linearLookup=(t,n,r)=>{let o=0;o=qd(t)?Math.floor(r.maxIndex+1.5+2):e.linearIndexLookup(t,r);const i=4*o;return[n[i],n[i+1],n[i+2],n[i+3]]},e.indexedLookupFunction=(n,r,o)=>{let i=e.getAnnotatedValueIndexInternal(n);-1===i&&(i=t.numberOfColors+2);const a=4*i;return[r[a],r[a+1],r[a+2],r[a+3]]},e.lookupShiftAndScale=(e,t)=>{t.shift=-e[0],t.scale=Number.MAX_VALUE,e[1]>e[0]&&(t.scale=(t.maxIndex+1)/(e[1]-e[0]))},e.mapScalarsThroughTable=(n,r,o,i)=>{let a=e.linearLookup;t.indexedLookup&&(a=e.indexedLookupFunction);const s=e.getMappingRange(),l={maxIndex:e.getNumberOfColors()-1,range:s,shift:0,scale:0};e.lookupShiftAndScale(s,l);const u=e.getAlpha(),c=n.getNumberOfTuples(),d=n.getNumberOfComponents(),g=r.getData(),p=n.getData();if(u>=1){if(o===Rf.RGBA)for(let e=0;e<c;e++){const n=a(p[e*d+i],t.table,l);g[4*e]=n[0],g[4*e+1]=n[1],g[4*e+2]=n[2],g[4*e+3]=n[3]}}else if(o===Rf.RGBA)for(let e=0;e<c;e++){const n=a(p[e*d+i],t.table,l);g[4*e]=n[0],g[4*e+1]=n[1],g[4*e+2]=n[2],g[4*e+3]=Math.floor(n[3]*u+.5)}},e.forceBuild=()=>{let n=0,r=0,o=0,i=0;const a=t.numberOfColors-1;a&&(n=(t.hueRange[1]-t.hueRange[0])/a,r=(t.saturationRange[1]-t.saturationRange[0])/a,o=(t.valueRange[1]-t.valueRange[0])/a,i=(t.alphaRange[1]-t.alphaRange[0])/a);const s=[],l=[];for(let e=0;e<=a;e++)s[0]=t.hueRange[0]+e*n,s[1]=t.saturationRange[0]+e*r,s[2]=t.valueRange[0]+e*o,Gd(s,l),l[3]=t.alphaRange[0]+e*i,t.table[4*e]=255*l[0]+.5,t.table[4*e+1]=255*l[1]+.5,t.table[4*e+2]=255*l[2]+.5,t.table[4*e+3]=255*l[3]+.5;e.buildSpecialColors(),t.buildTime.modified()},e.setTable=n=>{if(4!==n.getNumberOfComponents())return void qf("Expected 4 components for RGBA colors");if(n.getDataType()!==Yg.UNSIGNED_CHAR)return void qf("Expected unsigned char values for RGBA colors");t.numberOfColors=n.getNumberOfTuples();const r=n.getData();for(let e=0;e<r.length;e++)t.table[e]=r[e];e.buildSpecialColors(),t.insertTime.modified(),e.modified()},e.buildSpecialColors=()=>{const{numberOfColors:e}=t,n=t.table;let r=4*(e+0);t.useBelowRangeColor||0===e?(n[r]=255*t.belowRangeColor[0]+.5,n[r+1]=255*t.belowRangeColor[1]+.5,n[r+2]=255*t.belowRangeColor[2]+.5,n[r+3]=255*t.belowRangeColor[3]+.5):(n[r]=n[0],n[r+1]=n[1],n[r+2]=n[2],n[r+3]=n[3]),r=4*(e+1),t.useAboveRangeColor||0===e?(n[r]=255*t.aboveRangeColor[0]+.5,n[r+1]=255*t.aboveRangeColor[1]+.5,n[r+2]=255*t.aboveRangeColor[2]+.5,n[r+3]=255*t.aboveRangeColor[3]+.5):(n[r]=n[4*(e-1)+0],n[r+1]=n[4*(e-1)+1],n[r+2]=n[4*(e-1)+2],n[r+3]=n[4*(e-1)+3]),r=4*(e+2),n[r]=255*t.nanColor[0]+.5,n[r+1]=255*t.nanColor[1]+.5,n[r+2]=255*t.nanColor[2]+.5,n[r+3]=255*t.nanColor[3]+.5},e.build=()=>{(t.table.length<1||e.getMTime()>t.buildTime.getMTime()&&t.insertTime.getMTime()<=t.buildTime.getMTime())&&e.forceBuild()},t.table.length>0&&t.insertTime.modified()}(e,t)}const eh=Ed.newInstance(Jf,"vtkLookupTable");var th=Object.assign({newInstance:eh,extend:Jf});let nh=1,rh=0;const oh=["VTK_RESOLVE_OFF","VTK_RESOLVE_POLYGON_OFFSET"];function ih(e=0){rh=e}var ah={getResolveCoincidentTopologyAsString:function(){return oh[rh]},getResolveCoincidentTopologyPolygonOffsetFaces:function(){return nh},getResolveCoincidentTopology:function(){return rh},setResolveCoincidentTopology:ih,setResolveCoincidentTopologyPolygonOffsetFaces:function(e){nh=e},setResolveCoincidentTopologyToDefault:function(){ih(0)},setResolveCoincidentTopologyToOff:function(){ih(0)},setResolveCoincidentTopologyToPolygonOffset:function(){ih(1)}};function sh(e,t,n){n.forEach(n=>{e[`get${n.method}`]=()=>t[n.key],e[`set${n.method}`]=(e,r)=>{t[n.key]={factor:e,offset:r}}})}const lh=["Polygon","Line","Point"],uh={};sh(uh,{Polygon:{factor:2,offset:0},Line:{factor:1,offset:-1},Point:{factor:0,offset:-2}},lh.map(e=>({key:e,method:`ResolveCoincidentTopology${e}OffsetParameters`})));var ch={implementCoincidentTopologyMethods:function(e,t){void 0===t.resolveCoincidentTopology&&(t.resolveCoincidentTopology=!1),Ed.setGet(e,t,["resolveCoincidentTopology"]),t.topologyOffset={Polygon:{factor:0,offset:0},Line:{factor:0,offset:0},Point:{factor:0,offset:0}},Object.keys(ah).forEach(t=>{e[t]=ah[t]}),Object.keys(uh).forEach(t=>{e[t]=uh[t]}),sh(e,t.topologyOffset,lh.map(e=>({key:e,method:`RelativeCoincidentTopology${e}OffsetParameters`}))),e.getCoincidentTopologyPolygonOffsetParameters=()=>{const t=uh.getResolveCoincidentTopologyPolygonOffsetParameters(),n=e.getRelativeCoincidentTopologyPolygonOffsetParameters();return{factor:t.factor+n.factor,offset:t.offset+n.offset}},e.getCoincidentTopologyLineOffsetParameters=()=>{const t=uh.getResolveCoincidentTopologyLineOffsetParameters(),n=e.getRelativeCoincidentTopologyLineOffsetParameters();return{factor:t.factor+n.factor,offset:t.offset+n.offset}},e.getCoincidentTopologyPointOffsetParameter=()=>{const t=uh.getResolveCoincidentTopologyPointOffsetParameters(),n=e.getRelativeCoincidentTopologyPointOffsetParameters();return{factor:t.factor+n.factor,offset:t.offset+n.offset}}},staticOffsetAPI:uh,otherStaticMethods:ah,CATEGORIES:lh};const{staticOffsetAPI:dh,otherStaticMethods:gh}=ch,{ColorMode:ph,ScalarMode:fh,GetArray:hh}=Vf,{VectorMode:Mh}=_f,{VtkDataTypes:mh}=rp;function Ah(e){return()=>Ed.vtkErrorMacro(`vtkMapper::${e} - NOT IMPLEMENTED`)}const yh={colorMapColors:null,static:!1,lookupTable:null,scalarVisibility:!0,scalarRange:[0,1],useLookupTableScalarRange:!1,colorMode:0,scalarMode:0,arrayAccessMode:1,renderTime:0,colorByArrayName:null,fieldDataTupleId:-1,interpolateScalarsBeforeMapping:!1,colorCoordinates:null,colorTextureMap:null,forceCompileOnly:0,useInvertibleColors:!1,invertibleScalars:null,viewSpecificProperties:null,customShaderAttributes:[]};function Th(e,t,n={}){Object.assign(t,yh,n),vf(e,t,n),Ed.get(e,t,["colorCoordinates","colorMapColors","colorTextureMap"]),Ed.setGet(e,t,["colorByArrayName","arrayAccessMode","colorMode","fieldDataTupleId","interpolateScalarsBeforeMapping","lookupTable","renderTime","scalarMode","scalarVisibility","static","useLookupTableScalarRange","viewSpecificProperties","customShaderAttributes"]),Ed.setGetArray(e,t,["scalarRange"],2),t.viewSpecificProperties||(t.viewSpecificProperties={}),ch.implementCoincidentTopologyMethods(e,t),function(e,t){t.classHierarchy.push("vtkMapper"),e.getBounds=()=>{const n=e.getInputData();return n?(t.static||e.update(),t.bounds=n.getBounds()):t.bounds=$d(),t.bounds},e.setForceCompileOnly=e=>{t.forceCompileOnly=e},e.createDefaultLookupTable=()=>{t.lookupTable=th.newInstance()},e.getColorModeAsString=()=>Ed.enumToString(ph,t.colorMode),e.setColorModeToDefault=()=>e.setColorMode(0),e.setColorModeToMapScalars=()=>e.setColorMode(1),e.setColorModeToDirectScalars=()=>e.setColorMode(2),e.getScalarModeAsString=()=>Ed.enumToString(fh,t.scalarMode),e.setScalarModeToDefault=()=>e.setScalarMode(0),e.setScalarModeToUsePointData=()=>e.setScalarMode(1),e.setScalarModeToUseCellData=()=>e.setScalarMode(2),e.setScalarModeToUsePointFieldData=()=>e.setScalarMode(3),e.setScalarModeToUseCellFieldData=()=>e.setScalarMode(4),e.setScalarModeToUseFieldData=()=>e.setScalarMode(5),e.getAbstractScalars=(e,n,r,o,i)=>{if(!e||!t.scalarVisibility)return{scalars:null,cellFLag:!1};let a=null,s=!1;if(n===fh.DEFAULT)a=e.getPointData().getScalars(),a||(a=e.getCellData().getScalars(),s=!0);else if(n===fh.USE_POINT_DATA)a=e.getPointData().getScalars();else if(n===fh.USE_CELL_DATA)a=e.getCellData().getScalars(),s=!0;else if(n===fh.USE_POINT_FIELD_DATA){const t=e.getPointData();a=r===hh.BY_ID?t.getArrayByIndex(o):t.getArrayByName(i)}else if(n===fh.USE_CELL_FIELD_DATA){const t=e.getCellData();s=!0,a=r===hh.BY_ID?t.getArrayByIndex(o):t.getArrayByName(i)}else if(n===fh.USE_FIELD_DATA){const t=e.getFieldData();a=r===hh.BY_ID?t.getArrayByIndex(o):t.getArrayByName(i)}return{scalars:a,cellFlag:s}},e.mapScalars=(n,r)=>{const o=e.getAbstractScalars(n,t.scalarMode,t.arrayAccessMode,t.arrayId,t.colorByArrayName).scalars;if(!o)return t.colorCoordinates=null,t.colorTextureMap=null,void(t.colorMapColors=null);if(t.useLookupTableScalarRange||e.getLookupTable().setRange(t.scalarRange[0],t.scalarRange[1]),e.canUseTextureMapForColoring(n))return void e.mapScalarsToTexture(o,r);t.colorCoordinates=null,t.colorTextureMap=null;const i=e.getLookupTable();i&&(i.build(),t.colorMapColors=i.mapScalars(o,t.colorMode,-1))},e.scalarToTextureCoordinate=(e,t,n)=>{let r=.5,o=1;return qd(e)||(o=.49,r=(e-t)*n,r>1e3?r=1e3:r<-1e3&&(r=-1e3)),{texCoordS:r,texCoordT:o}},e.createColorTextureCoordinates=(t,n,r,o,i,a,s,l,u)=>{const c=(a[1]-a[0])/l,d=[];d[0]=a[0]-c,d[1]=a[1]+c;const g=1/(d[1]-d[0]),p=n.getData(),f=t.getData();let h=0,M=0;if(i<0||i>=o)for(let m=0;m<r;++m){let t=0;for(let e=0;e<o;++e)t+=f[h]*f[h],h++;let n=Math.sqrt(t);u&&(n=th.applyLogScale(n,s,a));const r=e.scalarToTextureCoordinate(n,d[0],g);p[M]=r.texCoordS,p[M+1]=r.texCoordT,M+=2}else{h+=i;for(let t=0;t<r;++t){let t=f[h];u&&(t=th.applyLogScale(t,s,a));const n=e.scalarToTextureCoordinate(t,d[0],g);p[M]=n.texCoordS,p[M+1]=n.texCoordT,M+=2,h+=o}}},e.mapScalarsToTexture=(n,r)=>{const o=t.lookupTable.getRange(),i=t.lookupTable.usingLogScale();i&&th.getLogRange(o,o);const a=t.lookupTable.getAlpha();if(t.colorMapColors=null,null==t.colorTextureMap||e.getMTime()>t.colorTextureMap.getMTime()||t.lookupTable.getMTime()>t.colorTextureMap.getMTime()||t.lookupTable.getAlpha()!==r){t.lookupTable.setAlpha(r),t.colorTextureMap=null,t.lookupTable.build();let e=t.lookupTable.getNumberOfAvailableColors();e>4094&&(e=4094),e+=2;const n=(o[1]-o[0])/(e-1-2),s=new Float64Array(2*e);for(let t=0;t<e;++t)s[t]=o[0]+t*n-n,i&&(s[t]=10**s[t]);for(let t=0;t<e;++t)s[t+e]=NaN;t.colorTextureMap=zf.newInstance(),t.colorTextureMap.setExtent(0,e-1,0,1,0,0);const l=rp.newInstance({numberOfComponents:1,values:s});t.colorTextureMap.getPointData().setScalars(t.lookupTable.mapScalars(l,t.colorMode,0)),t.lookupTable.setAlpha(a)}if(!t.colorCoordinates||e.getMTime()>t.colorCoordinates.getMTime()||e.getInputData(0).getMTime()>t.colorCoordinates.getMTime()||t.lookupTable.getMTime()>t.colorCoordinates.getMTime()){t.colorCoordinates=null;const r=n.getNumberOfComponents(),a=n.getNumberOfTuples();t.colorCoordinates=rp.newInstance({numberOfComponents:2,values:new Float32Array(2*a)});let s=t.lookupTable.getVectorComponent();t.lookupTable.getVectorMode()===Mh.MAGNITUDE&&n.getNumberOfComponents()>1&&(s=-1),e.createColorTextureCoordinates(n,t.colorCoordinates,a,r,s,o,t.lookupTable.getRange(),t.colorTextureMap.getPointData().getScalars().getNumberOfTuples()/2-2,i)}},e.getIsOpaque=()=>{const t=e.getLookupTable();return!t||(t.build(),t.isOpaque())},e.canUseTextureMapForColoring=n=>{if(!t.interpolateScalarsBeforeMapping)return!1;if(t.lookupTable&&t.lookupTable.getIndexedLookup())return!1;const r=e.getAbstractScalars(n,t.scalarMode,t.arrayAccessMode,t.arrayId,t.colorByArrayName),o=r.scalars;return!(!o||r.cellFlag||t.colorMode===ph.DEFAULT&&o.getDataType()===mh.UNSIGNED_CHAR||t.colorMode===ph.DIRECT_SCALARS)},e.clearColorArrays=()=>{t.colorMapColors=null,t.colorCoordinates=null,t.colorTextureMap=null},e.getLookupTable=()=>(t.lookupTable||e.createDefaultLookupTable(),t.lookupTable),e.getMTime=()=>{let e=t.mtime;if(null!==t.lookupTable){const n=t.lookupTable.getMTime();e=n>e?n:e}return e},e.getPrimitiveCount=()=>{const t=e.getInputData();return{points:t.getPoints().getNumberOfValues()/3,verts:t.getVerts().getNumberOfValues()-t.getVerts().getNumberOfCells(),lines:t.getLines().getNumberOfValues()-2*t.getLines().getNumberOfCells(),triangles:t.getPolys().getNumberOfValues()-3*t.getLines().getNumberOfCells()}},e.acquireInvertibleLookupTable=Ah("AcquireInvertibleLookupTable"),e.valueToColor=Ah("ValueToColor"),e.colorToValue=Ah("ColorToValue"),e.useInvertibleColorFor=Ah("UseInvertibleColorFor"),e.clearInvertibleColor=Ah("ClearInvertibleColor")}(e,t)}const Dh=Ed.newInstance(Th,"vtkMapper");var Nh=Object.assign({newInstance:Dh,extend:Th},dh,gh,Vf);const xh={CLAMP_TO_EDGE:0,REPEAT:1,MIRRORED_REPEAT:2},Ih={NEAREST:0,LINEAR:1,NEAREST_MIPMAP_NEAREST:2,NEAREST_MIPMAP_LINEAR:3,LINEAR_MIPMAP_NEAREST:4,LINEAR_MIPMAP_LINEAR:5};var wh={Wrap:xh,Filter:Ih};const{vtkErrorMacro:Ch}=Ed,Eh={parent:null,renderable:null,myFactory:null,children:[],visited:!1};function vh(e,t,n={}){Object.assign(t,Eh,n),Ed.obj(e,t),Ed.event(e,t,"event"),t.renderableChildMap=new Map,Ed.get(e,t,["visited"]),Ed.setGet(e,t,["parent","renderable","myFactory"]),Ed.getArray(e,t,["children"]),function(e,t){t.classHierarchy.push("vtkViewNode"),e.build=e=>{},e.render=e=>{},e.traverse=n=>{const r=n.getTraverseOperation(),o=e[r];if(o)o(n);else{e.apply(n,!0);for(let e=0;e<t.children.length;e++)t.children[e].traverse(n);e.apply(n,!1)}},e.apply=(t,n)=>{const r=e[t.getOperation()];r&&r(n,t)},e.getViewNodeFor=n=>{if(t.renderable===n)return e;for(let e=0;e<t.children.length;++e){const r=t.children[e].getViewNodeFor(n);if(r)return r}},e.getFirstAncestorOfType=e=>t.parent?t.parent.isA(e)?t.parent:t.parent.getFirstAncestorOfType(e):null,e.addMissingNode=n=>{if(!n)return;const r=t.renderableChildMap.get(n);if(void 0!==r)r.setVisited(!0);else{const r=e.createViewNode(n);r&&(r.setParent(e),r.setVisited(!0),t.renderableChildMap.set(n,r),t.children.push(r))}},e.addMissingNodes=n=>{if(n&&n.length)for(let r=0;r<n.length;++r){const o=n[r],i=t.renderableChildMap.get(o);if(void 0!==i)i.setVisited(!0);else{const n=e.createViewNode(o);n&&(n.setParent(e),n.setVisited(!0),t.renderableChildMap.set(o,n),t.children.push(n))}}},e.prepareNodes=()=>{for(let e=0;e<t.children.length;++e)t.children[e].setVisited(!1)},e.setVisited=e=>{t.visited=e},e.removeUnusedNodes=()=>{let e=null;for(let n=0;n<t.children.length;++n){const r=t.children[n];if(r.getVisited())r.setVisited(!1);else{const n=r.getRenderable();n&&t.renderableChildMap.delete(n),e||(e=[]),e.push(r)}}e&&(t.children=t.children.filter(t=>!e.includes(t)))},e.createViewNode=e=>{if(!t.myFactory)return Ch("Cannot create view nodes without my own factory"),null;const n=t.myFactory.createNode(e);return n&&n.setRenderable(e),n}}(e,t)}var Lh={newInstance:Ed.newInstance(vh,"vtkViewNode"),extend:vh,PASS_TYPES:["Build","Render"]};const{Wrap:bh,Filter:Oh}=wh,{VtkDataTypes:Sh}=rp,{vtkDebugMacro:jh,vtkErrorMacro:Ph,vtkWarningMacro:kh}=Ed,zh={openGLRenderWindow:null,context:null,handle:0,sendParametersTime:null,textureBuildTime:null,numberOfDimensions:0,target:0,format:0,openGLDataType:0,components:0,width:0,height:0,depth:0,autoParameters:!0,wrapS:bh.CLAMP_TO_EDGE,wrapT:bh.CLAMP_TO_EDGE,wrapR:bh.CLAMP_TO_EDGE,minificationFilter:Oh.NEAREST,magnificationFilter:Oh.NEAREST,minLOD:-1e3,maxLOD:1e3,baseLevel:0,maxLevel:1e3,generateMipmap:!1};function Rh(e,t,n={}){Object.assign(t,zh,n),Lh.extend(e,t,n),t.sendParametersTime={},Ed.obj(t.sendParametersTime,{mtime:0}),t.textureBuildTime={},Ed.obj(t.textureBuildTime,{mtime:0}),Ed.set(e,t,["format","openGLDataType"]),Ed.setGet(e,t,["keyMatrixTime","minificationFilter","magnificationFilter","wrapS","wrapT","wrapR","generateMipmap"]),Ed.get(e,t,["width","height","volumeInfo","components","handle","target"]),function(e,t){function n(e,n){const r=[];if(e!==Sh.FLOAT&&t.openGLDataType===t.context.FLOAT){const e=t.width*t.height*t.components;for(let t=0;t<n.length;t++){const o=new Float32Array(e);for(let r=0;r<e;r++)o[r]=n[t][r];r.push(o)}}if(e!==Sh.UNSIGNED_CHAR&&t.openGLDataType===t.context.UNSIGNED_BYTE){const e=t.width*t.height*t.components;for(let t=0;t<n.length;t++){const o=new Uint8Array(e);for(let r=0;r<e;r++)o[r]=n[t][r];r.push(o)}}if(0===r.length)for(let t=0;t<n.length;t++)r.push(n[t]);return r}function r(e){if(t.openGLRenderWindow.getWebgl2())return e;const n=[],r=t.width,o=t.height,i=t.components;if(e&&(!kd(r)||!kd(o))){const a=Pd(r),s=Pd(o),l=a*s*t.components;for(let u=0;u<e.length;u++)if(null!==e[u]){let c=null;switch(t.openGLDataType){case t.context.FLOAT:c=new Float32Array(l);break;default:case t.context.UNSIGNED_BYTE:c=new Uint8Array(l)}const d=o/s,g=r/a;for(let t=0;t<s;t++){const n=t*a*i,s=t*d;let l=Math.floor(s),p=Math.ceil(s);p>=o&&(p=o-1);const f=s-l,h=1-f;l=l*r*i,p=p*r*i;for(let t=0;t<a;t++){const o=t*i,a=t*g;let s=Math.floor(a),d=Math.ceil(a);d>=r&&(d=r-1);const M=a-s;s*=i,d*=i;for(let t=0;t<i;t++)c[n+o+t]=e[u][l+s+t]*h*(1-M)+e[u][l+d+t]*h*M+e[u][p+s+t]*f*(1-M)+e[u][p+d+t]*f*M}}n.push(c),t.width=a,t.height=s}else n.push(null)}if(0===n.length)for(let t=0;t<e.length;t++)n.push(e[t]);return n}function o(e,t,n){const r=[],o=[];for(let l=0;l<e;++l)r[l]=n[l],o[l]=n[l];let i=0;for(let l=0;l<t;++l)for(let t=0;t<e;++t)n[i]<r[t]&&(r[t]=n[i]),n[i]>o[t]&&(o[t]=n[i]),i++;const a=[],s=[];for(let l=0;l<e;++l)r[l]===o[l]&&(o[l]=r[l]+1),a[l]=r[l],s[l]=o[l]-r[l];return{scale:s,offset:a}}t.classHierarchy.push("vtkOpenGLTexture"),e.render=(n=null)=>{if(n?t.openGLRenderWindow=n:(t.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t.openGLRenderWindow=t.openGLRenderer.getParent()),t.context=t.openGLRenderWindow.getContext(),t.renderable.getInterpolate()?(e.setMinificationFilter(t.generateMipmap?Oh.LINEAR_MIPMAP_LINEAR:Oh.LINEAR),e.setMagnificationFilter(Oh.LINEAR)):(e.setMinificationFilter(Oh.NEAREST),e.setMagnificationFilter(Oh.NEAREST)),t.renderable.getRepeat()&&(e.setWrapR(bh.REPEAT),e.setWrapS(bh.REPEAT),e.setWrapT(bh.REPEAT)),t.renderable.getInputData()&&t.renderable.setImage(null),!t.handle||t.renderable.getMTime()>t.textureBuildTime.getMTime()){null!==t.renderable.getImage()&&(t.renderable.getInterpolate()&&(t.generateMipmap=!0,e.setMinificationFilter(Oh.LINEAR_MIPMAP_LINEAR)),t.renderable.getImage()&&t.renderable.getImageLoaded()&&(e.create2DFromImage(t.renderable.getImage()),e.activate(),e.sendParameters(),t.textureBuildTime.modified()));const n=t.renderable.getInputData(0);if(n&&n.getPointData().getScalars()){const r=n.getExtent(),o=n.getPointData().getScalars(),i=[];for(let e=0;e<t.renderable.getNumberOfInputPorts();++e){const n=t.renderable.getInputData(e),r=n?n.getPointData().getScalars().getData():null;r&&i.push(r)}t.renderable.getInterpolate()&&4===o.getNumberOfComponents()&&(t.generateMipmap=!0,e.setMinificationFilter(Oh.LINEAR_MIPMAP_LINEAR)),i.length%6==0?e.createCubeFromRaw(r[1]-r[0]+1,r[3]-r[2]+1,o.getNumberOfComponents(),o.getDataType(),i):e.create2DFromRaw(r[1]-r[0]+1,r[3]-r[2]+1,o.getNumberOfComponents(),o.getDataType(),o.getData()),e.activate(),e.sendParameters(),t.textureBuildTime.modified()}}t.handle&&e.activate()},e.destroyTexture=()=>{e.deactivate(),t.context&&t.handle&&t.context.deleteTexture(t.handle),t.handle=0,t.numberOfDimensions=0,t.target=0,t.components=0,t.width=0,t.height=0,t.depth=0,e.resetFormatAndType()},e.createTexture=()=>{t.handle||(t.handle=t.context.createTexture(),t.target&&(t.context.bindTexture(t.target,t.handle),t.context.texParameteri(t.target,t.context.TEXTURE_MIN_FILTER,e.getOpenGLFilterMode(t.minificationFilter)),t.context.texParameteri(t.target,t.context.TEXTURE_MAG_FILTER,e.getOpenGLFilterMode(t.magnificationFilter)),t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_S,e.getOpenGLWrapMode(t.wrapS)),t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_T,e.getOpenGLWrapMode(t.wrapT)),t.openGLRenderWindow.getWebgl2()&&t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_R,e.getOpenGLWrapMode(t.wrapR)),t.context.bindTexture(t.target,null)))},e.getTextureUnit=()=>t.openGLRenderWindow?t.openGLRenderWindow.getTextureUnitForTexture(e):-1,e.activate=()=>{t.openGLRenderWindow.activateTexture(e),e.bind()},e.deactivate=()=>{t.openGLRenderWindow&&t.openGLRenderWindow.deactivateTexture(e)},e.releaseGraphicsResources=n=>{n&&t.handle&&(n.activateTexture(e),n.deactivateTexture(e),t.context.deleteTexture(t.handle),t.handle=0,t.numberOfDimensions=0,t.target=0,t.internalFormat=0,t.format=0,t.openGLDataType=0,t.components=0,t.width=0,t.height=0,t.depth=0),t.shaderProgram&&(t.shaderProgram.releaseGraphicsResources(n),t.shaderProgram=null)},e.bind=()=>{t.context.bindTexture(t.target,t.handle),t.autoParameters&&e.getMTime()>t.sendParametersTime.getMTime()&&e.sendParameters()},e.isBound=()=>{let e=!1;if(t.context&&t.handle){let n=0;switch(t.target){case t.context.TEXTURE_2D:n=t.context.TEXTURE_BINDING_2D;break;default:kh("impossible case")}e=t.context.getIntegerv(n)===t.handle}return e},e.sendParameters=()=>{t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_S,e.getOpenGLWrapMode(t.wrapS)),t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_T,e.getOpenGLWrapMode(t.wrapT)),t.openGLRenderWindow.getWebgl2()&&t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_R,e.getOpenGLWrapMode(t.wrapR)),t.context.texParameteri(t.target,t.context.TEXTURE_MIN_FILTER,e.getOpenGLFilterMode(t.minificationFilter)),t.context.texParameteri(t.target,t.context.TEXTURE_MAG_FILTER,e.getOpenGLFilterMode(t.magnificationFilter)),t.openGLRenderWindow.getWebgl2()&&(t.context.texParameteri(t.target,t.context.TEXTURE_BASE_LEVEL,t.baseLevel),t.context.texParameteri(t.target,t.context.TEXTURE_MAX_LEVEL,t.maxLevel)),t.sendParametersTime.modified()},e.getInternalFormat=(n,r)=>(t.internalFormat=e.getDefaultInternalFormat(n,r),t.internalFormat||jh(`Unable to find suitable internal format for T=${n} NC= ${r}`),t.internalFormat),e.getDefaultInternalFormat=(e,n)=>{let r=0;return r=t.openGLRenderWindow.getDefaultTextureInternalFormat(e,n,!1),r||(r=this.openGLRenderWindow.getDefaultTextureInternalFormat(e,n,!0),r||(jh("Unsupported internal texture type!"),jh(`Unable to find suitable internal format for T=${e} NC= ${n}`)),r)},e.setInternalFormat=n=>{n!==t.context.InternalFormat&&(t.internalFormat=n,e.modified())},e.getFormat=(n,r)=>(t.format=e.getDefaultFormat(n,r),t.format),e.getDefaultFormat=(e,n)=>{if(t.openGLRenderWindow.getWebgl2())switch(n){case 1:return t.context.RED;case 2:return t.context.RG;case 3:return t.context.RGB;case 4:return t.context.RGBA;default:return t.context.RGB}else switch(n){case 1:return t.context.LUMINANCE;case 2:return t.context.LUMINANCE_ALPHA;case 3:return t.context.RGB;case 4:return t.context.RGBA;default:return t.context.RGB}},e.resetFormatAndType=()=>{t.format=0,t.internalFormat=0,t.openGLDataType=0},e.getDefaultDataType=e=>{if(t.openGLRenderWindow.getWebgl2())switch(e){case Sh.UNSIGNED_CHAR:return t.context.UNSIGNED_BYTE;case Sh.FLOAT:case Sh.VOID:default:return t.context.FLOAT}switch(e){case Sh.UNSIGNED_CHAR:return t.context.UNSIGNED_BYTE;case Sh.FLOAT:case Sh.VOID:default:return t.context.getExtension("OES_texture_float")&&t.context.getExtension("OES_texture_float_linear")?t.context.FLOAT:t.context.UNSIGNED_BYTE}},e.getOpenGLDataType=n=>(t.openGLDataType=e.getDefaultDataType(n),t.openGLDataType),e.getShiftAndScale=()=>{let e=0,n=1;switch(t.openGLDataType){case t.context.BYTE:n=127.5,e=n-128;break;case t.context.UNSIGNED_BYTE:n=255,e=0;break;case t.context.SHORT:n=32767.5,e=n-32768;break;case t.context.UNSIGNED_SHORT:n=65536,e=0;break;case t.context.INT:n=2147483647.5,e=n-2147483648;break;case t.context.UNSIGNED_INT:n=4294967295,e=0}return{shift:e,scale:n}},e.getOpenGLFilterMode=e=>{switch(e){case Oh.NEAREST:return t.context.NEAREST;case Oh.LINEAR:return t.context.LINEAR;case Oh.NEAREST_MIPMAP_NEAREST:return t.context.NEAREST_MIPMAP_NEAREST;case Oh.NEAREST_MIPMAP_LINEAR:return t.context.NEAREST_MIPMAP_LINEAR;case Oh.LINEAR_MIPMAP_NEAREST:return t.context.LINEAR_MIPMAP_NEAREST;case Oh.LINEAR_MIPMAP_LINEAR:return t.context.LINEAR_MIPMAP_LINEAR;default:return t.context.NEAREST}},e.getOpenGLWrapMode=e=>{switch(e){case bh.CLAMP_TO_EDGE:return t.context.CLAMP_TO_EDGE;case bh.REPEAT:return t.context.REPEAT;case bh.MIRRORED_REPEAT:return t.context.MIRRORED_REPEAT;default:return t.context.CLAMP_TO_EDGE}},e.create2DFromRaw=(o,i,a,s,l)=>{if(e.getOpenGLDataType(s),e.getInternalFormat(s,a),e.getFormat(s,a),!t.internalFormat||!t.format||!t.openGLDataType)return Ph("Failed to determine texture parameters."),!1;t.target=t.context.TEXTURE_2D,t.components=a,t.width=o,t.height=i,t.depth=1,t.numberOfDimensions=2,t.openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind();const u=r(n(s,[l]));return t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1),t.context.texImage2D(t.target,0,t.internalFormat,t.width,t.height,0,t.format,t.openGLDataType,u[0]),t.generateMipmap&&t.context.generateMipmap(t.target),e.deactivate(),!0},e.createCubeFromRaw=(o,i,a,s,l)=>{if(e.getOpenGLDataType(s),e.getInternalFormat(s,a),e.getFormat(s,a),!t.internalFormat||!t.format||!t.openGLDataType)return Ph("Failed to determine texture parameters."),!1;t.target=t.context.TEXTURE_CUBE_MAP,t.components=a,t.width=o,t.height=i,t.depth=1,t.numberOfDimensions=2,t.openGLRenderWindow.activateTexture(e),t.maxLevel=l.length/6-1,e.createTexture(),e.bind();const u=r(n(s,l)),c=[];let d=t.width,g=t.height;for(let e=0;e<u.length;e++){e%6==0&&0!==e&&(d/=2,g/=2),c[e]=new window[s](g*d*t.components);for(let n=0;n<g;++n){const r=n*d*t.components,o=(g-n-1)*d*t.components;c[e].set(u[e].slice(o,o+d*t.components),r)}}t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1);for(let e=0;e<6;e++){let n=0,r=t.width,o=t.height;for(;r>=1&&o>=1;){let i=null;n<=t.maxLevel&&(i=c[6*n+e]),t.context.texImage2D(t.context.TEXTURE_CUBE_MAP_POSITIVE_X+e,n,t.internalFormat,r,o,0,t.format,t.openGLDataType,i),n++,r/=2,o/=2}}return e.deactivate(),!0},e.createDepthFromRaw=(n,r,o,i)=>(e.getOpenGLDataType(o),t.format=t.context.DEPTH_COMPONENT,t.internalFormat=t.context.DEPTH_COMPONENT,t.internalFormat&&t.format&&t.openGLDataType?(t.target=t.context.TEXTURE_2D,t.components=1,t.width=n,t.height=r,t.depth=1,t.numberOfDimensions=2,t.openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind(),t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1),t.context.texImage2D(t.target,0,t.internalFormat,t.width,t.height,0,t.format,t.openGLDataType,i),t.generateMipmap&&t.context.generateMipmap(t.target),e.deactivate(),!0):(Ph("Failed to determine texture parameters."),!1)),e.create2DFromImage=n=>{if(e.getOpenGLDataType(Sh.UNSIGNED_CHAR),e.getInternalFormat(Sh.UNSIGNED_CHAR,4),e.getFormat(Sh.UNSIGNED_CHAR,4),!t.internalFormat||!t.format||!t.openGLDataType)return Ph("Failed to determine texture parameters."),!1;t.target=t.context.TEXTURE_2D,t.components=4,t.width=n.width,t.height=n.height,t.depth=1,t.numberOfDimensions=2,t.openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind(),t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1);const r=!kd(n.width)||!kd(n.height),o=document.createElement("canvas");o.width=r?Pd(n.width):n.width,o.height=r?Pd(n.height):n.height;const i=o.getContext("2d");return i.translate(0,o.height),i.scale(1,-1),i.drawImage(n,0,0,n.width,n.height,0,0,o.width,o.height),navigator.userAgent.indexOf("Chrome/69")>=0&&i.getImageData(0,0,1,1),t.context.texImage2D(t.target,0,t.internalFormat,t.format,t.openGLDataType,o),t.generateMipmap&&t.context.generateMipmap(t.target),e.deactivate(),!0},e.create3DFromRaw=(n,r,o,i,a,s)=>(e.getOpenGLDataType(a),e.getInternalFormat(a,i),e.getFormat(a,i),t.internalFormat&&t.format&&t.openGLDataType?(t.target=t.context.TEXTURE_3D,t.components=i,t.width=n,t.height=r,t.depth=o,t.numberOfDimensions=3,t.openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind(),t.context.texImage3D(t.target,0,t.internalFormat,t.width,t.height,t.depth,0,t.format,t.openGLDataType,s),t.generateMipmap&&t.context.generateMipmap(t.target),e.deactivate(),!0):(Ph("Failed to determine texture parameters."),!1)),e.create3DFilterableFromRaw=(n,r,i,a,s,l)=>{const u=n*r*i,c=[],d=[];for(let e=0;e<a;++e)c[e]=0,d[e]=1;if(t.volumeInfo={scale:d,offset:c,width:n,height:r,depth:i},t.openGLRenderWindow.getWebgl2()){if(s===Sh.FLOAT)return e.create3DFromRaw(n,r,i,a,s,l);if(s===Sh.UNSIGNED_CHAR){for(let e=0;e<a;++e)t.volumeInfo.scale[e]=255;return e.create3DFromRaw(n,r,i,a,s,l)}const c=new Float32Array(u*a),d=o(a,u,l);t.volumeInfo.offset=d.offset,t.volumeInfo.scale=d.scale;let g=0;for(let e=0;e<u;++e)for(let n=0;n<a;++n)c[g]=(l[g]-t.volumeInfo.offset[n])/t.volumeInfo.scale[n],g++;return e.create3DFromRaw(n,r,i,a,Sh.FLOAT,c)}const g=o(a,u,l);let p=(e,t,n,r,o)=>{e[t]=n},f=Sh.UNSIGNED_CHAR;if(s===Sh.UNSIGNED_CHAR)for(let e=0;e<a;++e)g.offset[e]=0,g.scale[e]=255;else t.context.getExtension("OES_texture_float")&&t.context.getExtension("OES_texture_float_linear")?(f=Sh.FLOAT,p=(e,t,n,r,o)=>{e[t]=(n-r)/o}):(f=Sh.UNSIGNED_CHAR,p=(e,t,n,r,o)=>{e[t]=255*(n-r)/o});if(e.getOpenGLDataType(f),e.getInternalFormat(f,a),e.getFormat(f,a),!t.internalFormat||!t.format||!t.openGLDataType)return Ph("Failed to determine texture parameters."),!1;t.target=t.context.TEXTURE_2D,t.components=a,t.depth=1,t.numberOfDimensions=2;let h=t.context.getParameter(t.context.MAX_TEXTURE_SIZE);h>4096&&(f===Sh.FLOAT||a>=3)&&(h=4096);let M=1,m=1;u>h*h&&(M=Math.ceil(Math.sqrt(u/(h*h))),m=M);let A=Math.sqrt(u)/M;A=Pd(A);const y=Math.floor(A*M/n),T=Math.ceil(i/y),D=Pd(r*T/m);let N;t.width=A,t.height=D,t.openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind(),t.volumeInfo.xreps=y,t.volumeInfo.yreps=T,t.volumeInfo.xstride=M,t.volumeInfo.ystride=m,t.volumeInfo.offset=g.offset,t.volumeInfo.scale=g.scale;const x=A*D*a;N=f===Sh.FLOAT?new Float32Array(x):new Uint8Array(x);let I=0;for(let e=0;e<T;e++){const o=Math.min(y,i-e*y),s=t.width-o*Math.floor(n/M);for(let t=0;t<r;t+=m){for(let i=0;i<o;i++){const o=a*((e*y+i)*n*r+t*n);for(let e=0;e<n;e+=M)for(let t=0;t<a;t++)p(N,I,l[o+e*a+t],g.offset[t],g.scale[t]),I++}I+=s*a}}return t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1),t.context.texImage2D(t.target,0,t.internalFormat,t.width,t.height,0,t.format,t.openGLDataType,N),e.deactivate(),!0},e.setOpenGLRenderWindow=n=>{t.openGLRenderWindow!==n&&(e.releaseGraphicsResources(),t.openGLRenderWindow=n,t.context=null,n&&(t.context=t.openGLRenderWindow.getContext()))},e.getMaximumTextureSize=e=>e&&e.isCurrent()?e.getIntegerv(e.MAX_TEXTURE_SIZE):-1}(e,t)}const _h=Ed.newInstance(Rh,"vtkOpenGLTexture");var Vh=Object.assign({newInstance:_h,extend:Rh},wh);const Bh={openGLRenderWindow:null,glFramebuffer:null,colorTexture:null,depthTexture:null,previousDrawBinding:0,previousReadBinding:0,previousDrawBuffer:0,previousReadBuffer:0,previousActiveFramebuffer:null};function Uh(e,t,n={}){Object.assign(t,Bh,n),rd(e,t),ld(e,t,["colorTexture"]),function(e,t){t.classHierarchy.push("vtkFramebuffer"),e.getBothMode=()=>t.context.FRAMEBUFFER,e.saveCurrentBindingsAndBuffers=t=>{const n=void 0!==t?t:e.getBothMode();e.saveCurrentBindings(n),e.saveCurrentBuffers(n)},e.saveCurrentBindings=e=>{t.previousDrawBinding=t.context.getParameter(t.context.FRAMEBUFFER_BINDING),t.previousActiveFramebuffer=t.openGLRenderWindow.getActiveFramebuffer()},e.saveCurrentBuffers=e=>{},e.restorePreviousBindingsAndBuffers=t=>{const n=void 0!==t?t:e.getBothMode();e.restorePreviousBindings(n),e.restorePreviousBuffers(n)},e.restorePreviousBindings=e=>{const n=t.context;n.bindFramebuffer(n.FRAMEBUFFER,t.previousDrawBinding),t.openGLRenderWindow.setActiveFramebuffer(t.previousActiveFramebuffer)},e.restorePreviousBuffers=e=>{},e.bind=()=>{t.context.bindFramebuffer(t.context.FRAMEBUFFER,t.glFramebuffer),t.colorTexture&&t.colorTexture.bind(),t.openGLRenderWindow.setActiveFramebuffer(e)},e.create=(e,n)=>{t.glFramebuffer=t.context.createFramebuffer(),t.glFramebuffer.width=e,t.glFramebuffer.height=n},e.setColorBuffer=(e,n)=>{const r=t.context;t.colorTexture=e,r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e.getHandle(),0)},e.getGLFramebuffer=()=>t.glFramebuffer,e.setOpenGLRenderWindow=n=>{t.openGLRenderWindow!==n&&(e.releaseGraphicsResources(),t.openGLRenderWindow=n,t.context=null,n&&(t.context=t.openGLRenderWindow.getContext()))},e.releaseGraphicsResources=()=>{t.glFramebuffer&&t.context.deleteFramebuffer(t.glFramebuffer),t.depthTexture&&t.depthTexture.releaseGraphicsResources(),t.colorTexture&&t.colorTexture.releaseGraphicsResources()},e.getSize=()=>{const e=[0,0];return null!==t.glFramebuffer&&(e[0]=t.glFramebuffer.width,e[1]=t.glFramebuffer.height),e},e.populateFramebuffer=()=>{e.bind();const n=t.context,r=Vh.newInstance();r.setOpenGLRenderWindow(t.openGLRenderWindow),r.setMinificationFilter(Ih.LINEAR),r.setMagnificationFilter(Ih.LINEAR),r.create2DFromRaw(t.glFramebuffer.width,t.glFramebuffer.height,4,Yg.UNSIGNED_CHAR,null),e.setColorBuffer(r),t.depthTexture=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,t.depthTexture),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,t.glFramebuffer.width,t.glFramebuffer.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,t.depthTexture)}}(e,t)}const Fh=hd(Uh,"vtkFramebuffer");var Gh=Object.assign({newInstance:Fh,extend:Uh});const Qh={delegates:[],currentOperation:null,preDelegateOperations:[],postDelegateOperations:[],currentParent:null};function Yh(e,t,n={}){Object.assign(t,Qh,n),Ed.obj(e,t),Ed.get(e,t,["currentOperation"]),Ed.setGet(e,t,["delegates","currentParent","preDelegateOperations","postDelegateOperations"]),function(e,t){t.classHierarchy.push("vtkRenderPass"),e.getOperation=()=>t.currentOperation,e.setCurrentOperation=e=>{t.currentOperation=e,t.currentTraverseOperation=`traverse${Ed.capitalize(t.currentOperation)}`},e.getTraverseOperation=()=>t.currentTraverseOperation,e.traverse=(n,r=null)=>{t.deleted||(t.currentParent=r,t.preDelegateOperations.forEach(t=>{e.setCurrentOperation(t),n.traverse(e)}),t.delegates.forEach(t=>{t.traverse(n,e)}),t.postDelegateOperations.forEach(t=>{e.setCurrentOperation(t),n.traverse(e)}))}}(e,t)}var Wh={newInstance:Ed.newInstance(Yh,"vtkRenderPass"),extend:Yh};const Hh={opaqueActorCount:0,translucentActorCount:0,volumeCount:0,framebuffer:null,depthRequested:!1};function Kh(e,t,n={}){Object.assign(t,Hh,n),Wh.extend(e,t,n),Ed.get(e,t,["framebuffer"]),Ed.setGet(e,t,["depthRequested"]),function(e,t){t.classHierarchy.push("vtkForwardPass"),e.traverse=(n,r=null)=>{if(t.deleted)return;t.currentParent=r,e.setCurrentOperation("buildPass"),n.traverse(e);const o=n.getRenderable().getNumberOfLayers(),i=n.getChildren();for(let a=0;a<o;a++)for(let r=0;r<i.length;r++){const o=i[r];if(n.getRenderable().getRenderers()[r].getLayer()===a){if(t.opaqueActorCount=0,t.translucentActorCount=0,t.volumeCount=0,e.setCurrentOperation("queryPass"),o.traverse(e),t.opaqueActorCount>0&&t.volumeCount>0||t.depthRequested){const r=n.getFramebufferSize();null===t.framebuffer&&(t.framebuffer=Gh.newInstance()),t.framebuffer.setOpenGLRenderWindow(n),t.framebuffer.saveCurrentBindingsAndBuffers();const i=t.framebuffer.getSize();null!==i&&i[0]===r[0]&&i[1]===r[1]||(t.framebuffer.create(r[0],r[1]),t.framebuffer.populateFramebuffer()),t.framebuffer.bind(),e.setCurrentOperation("opaqueZBufferPass"),o.traverse(e),t.framebuffer.restorePreviousBindingsAndBuffers()}e.setCurrentOperation("cameraPass"),o.traverse(e),t.opaqueActorCount>0&&(e.setCurrentOperation("opaquePass"),o.traverse(e)),t.translucentActorCount>0&&(e.setCurrentOperation("translucentPass"),o.traverse(e)),t.volumeCount>0&&(e.setCurrentOperation("volumePass"),o.traverse(e))}}},e.getZBufferTexture=()=>t.framebuffer?t.framebuffer.getColorTexture():null,e.incrementOpaqueActorCount=()=>t.opaqueActorCount++,e.incrementTranslucentActorCount=()=>t.translucentActorCount++,e.incrementVolumeCount=()=>t.volumeCount++}(e,t)}var Xh={newInstance:Ed.newInstance(Kh,"vtkForwardPass"),extend:Kh};const Zh={};function qh(e,t,n={}){Object.assign(t,Zh,n),Lh.extend(e,t,n),function(e,t){t.classHierarchy.push("vtkGenericWidgetRepresentation")}(0,t)}var $h={newInstance:Ed.newInstance(qh),extend:qh};const Jh={context:null,keyMatrixTime:null,keyMatrices:null,activeTextures:null};function eM(e,t,n={}){Object.assign(t,Jh,n),Lh.extend(e,t,n),t.keyMatrixTime={},Ed.obj(t.keyMatrixTime,{mtime:0}),t.keyMatrices={normalMatrix:o.create(),mcwc:i.create()},Ed.setGet(e,t,["context"]),Ed.get(e,t,["activeTextures"]),function(e,t){t.classHierarchy.push("vtkOpenGLActor"),e.buildPass=n=>{if(n){t.openGLRenderWindow=e.getFirstAncestorOfType("vtkOpenGLRenderWindow"),t.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t.context=t.openGLRenderWindow.getContext(),e.prepareNodes(),e.addMissingNodes(t.renderable.getTextures()),e.addMissingNode(t.renderable.getMapper()),e.removeUnusedNodes(),t.ogltextures=null,t.activeTextures=null;for(let e=0;e<t.children.length;e++){const n=t.children[e];n.isA("vtkOpenGLTexture")?(t.ogltextures||(t.ogltextures=[]),t.ogltextures.push(n)):t.oglmapper=n}}},e.traverseOpaqueZBufferPass=t=>{e.traverseOpaquePass(t)},e.traverseOpaquePass=n=>{t.renderable&&t.renderable.getVisibility()&&t.renderable.getIsOpaque()&&(!t.openGLRenderer.getSelector()||t.renderable.getPickable())&&(e.apply(n,!0),t.oglmapper.traverse(n),e.apply(n,!1))},e.traverseTranslucentPass=n=>{!t.renderable||!t.renderable.getVisibility()||t.renderable.getIsOpaque()||t.openGLRenderer.getSelector()&&!t.renderable.getPickable()||(e.apply(n,!0),t.oglmapper.traverse(n),e.apply(n,!1))},e.activateTextures=()=>{if(t.ogltextures){t.activeTextures=[];for(let e=0;e<t.ogltextures.length;e++){const n=t.ogltextures[e];n.render(),n.getHandle()&&t.activeTextures.push(n)}}},e.queryPass=(e,n)=>{if(e){if(!t.renderable||!t.renderable.getVisibility())return;t.renderable.getIsOpaque()?n.incrementOpaqueActorCount():n.incrementTranslucentActorCount()}},e.opaqueZBufferPass=(t,n)=>e.opaquePass(t,n),e.opaquePass=(n,r)=>{if(n)t.openGLRenderWindow.enableDepthMask(),e.activateTextures();else if(t.activeTextures)for(let e=0;e<t.activeTextures.length;e++)t.activeTextures[e].deactivate()},e.translucentPass=(n,r)=>{if(n)t.openGLRenderWindow.disableDepthMask(),e.activateTextures();else if(t.activeTextures)for(let e=0;e<t.activeTextures.length;e++)t.activeTextures[e].deactivate()},e.getKeyMatrices=()=>(t.renderable.getMTime()>t.keyMatrixTime.getMTime()&&(t.renderable.computeMatrix(),i.copy(t.keyMatrices.mcwc,t.renderable.getMatrix()),i.transpose(t.keyMatrices.mcwc,t.keyMatrices.mcwc),t.renderable.getIsIdentity()?o.identity(t.keyMatrices.normalMatrix):(o.fromMat4(t.keyMatrices.normalMatrix,t.keyMatrices.mcwc),o.invert(t.keyMatrices.normalMatrix,t.keyMatrices.normalMatrix),o.transpose(t.keyMatrices.normalMatrix,t.keyMatrices.normalMatrix)),t.keyMatrixTime.modified()),t.keyMatrices)}(e,t)}var tM={newInstance:Ed.newInstance(eM),extend:eM};const nM={context:null,activeTextures:[]};function rM(e,t,n={}){Object.assign(t,nM,n),Lh.extend(e,t,n),ld(e,t,["context"]),od(e,t,["activeTextures"]),function(e,t){t.classHierarchy.push("vtkOpenGLActor2D"),e.buildPass=n=>{if(n){if(!t.renderable)return;t.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),e.prepareNodes(),e.addMissingNodes(t.renderable.getTextures()),e.addMissingNode(t.renderable.getMapper()),e.removeUnusedNodes()}},e.traverseOpaquePass=n=>{t.renderable&&t.renderable.getVisibility()&&t.renderable.getIsOpaque()&&(!t.openGLRenderer.getSelector()||t.renderable.getPickable())&&(e.apply(n,!0),t.children.forEach(e=>{e.isA("vtkOpenGLTexture")||e.traverse(n)}),e.apply(n,!1))},e.traverseTranslucentPass=n=>{!t.renderable||!t.renderable.getVisibility()||t.renderable.getIsOpaque()||t.openGLRenderer.getSelector()&&!t.renderable.getPickable()||(e.apply(n,!0),t.children.forEach(e=>{e.isA("vtkOpenGLTexture")||e.traverse(n)}),e.apply(n,!1))},e.activateTextures=()=>{t.activeTextures=[],t.children.forEach(e=>{e.isA("vtkOpenGLTexture")&&(e.render(),e.getHandle()&&t.activeTextures.push(e))})},e.opaquePass=(n,r)=>{n?(t.context=e.getFirstAncestorOfType("vtkOpenGLRenderWindow").getContext(),t.context.depthMask(!0),e.activateTextures()):t.activeTextures.forEach(e=>{e.deactivate()})},e.translucentPass=(n,r)=>{n?(t.context=e.getFirstAncestorOfType("vtkOpenGLRenderWindow").getContext(),t.context.depthMask(!1),e.activateTextures()):(t.activeTextures.forEach(e=>{e.deactivate()}),t.context.depthMask(!0))}}(e,t)}var oM={newInstance:hd(rM),extend:rM};const iM={context:null,lastRenderer:null,keyMatrixTime:null,keyMatrices:null};function aM(e,t,n={}){Object.assign(t,iM,n),Lh.extend(e,t,n),t.keyMatrixTime={},rd(t.keyMatrixTime),t.keyMatrices={normalMatrix:o.create(),vcpc:i.create(),wcvc:i.create(),wcpc:i.create()},ld(e,t,["context","keyMatrixTime"]),function(e,t){t.classHierarchy.push("vtkOpenGLCamera"),e.buildPass=n=>{n&&(t.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t.openGLRenderWindow=t.openGLRenderer.getParent(),t.context=t.openGLRenderWindow.getContext())},e.opaquePass=e=>{if(e){const e=t.openGLRenderer.getTiledSizeAndOrigin();t.context.viewport(e.lowerLeftU,e.lowerLeftV,e.usize,e.vsize),t.context.scissor(e.lowerLeftU,e.lowerLeftV,e.usize,e.vsize)}},e.translucentPass=e.opaquePass,e.opaqueZBufferPass=e.opaquePass,e.volumePass=e.opaquePass,e.getKeyMatrices=n=>{if(n!==t.lastRenderer||t.openGLRenderWindow.getMTime()>t.keyMatrixTime.getMTime()||e.getMTime()>t.keyMatrixTime.getMTime()||n.getMTime()>t.keyMatrixTime.getMTime()||t.renderable.getMTime()>t.keyMatrixTime.getMTime()){i.copy(t.keyMatrices.wcvc,t.renderable.getViewMatrix()),o.fromMat4(t.keyMatrices.normalMatrix,t.keyMatrices.wcvc),o.invert(t.keyMatrices.normalMatrix,t.keyMatrices.normalMatrix),i.transpose(t.keyMatrices.wcvc,t.keyMatrices.wcvc);const e=t.openGLRenderer.getAspectRatio();i.copy(t.keyMatrices.vcpc,t.renderable.getProjectionMatrix(e,-1,1)),i.transpose(t.keyMatrices.vcpc,t.keyMatrices.vcpc),i.multiply(t.keyMatrices.wcpc,t.keyMatrices.vcpc,t.keyMatrices.wcvc),t.keyMatrixTime.modified(),t.lastRenderer=n}return t.keyMatrices}}(e,t)}var sM={newInstance:hd(aM),extend:aM};const lM={ARRAY_BUFFER:0,ELEMENT_ARRAY_BUFFER:1,TEXTURE_BUFFER:2};var uM={ObjectType:lM};const{ObjectType:cM}=uM,dM={objectType:cM.ARRAY_BUFFER,openGLRenderWindow:null,context:null};function gM(e,t,n={}){Object.assign(t,dM,n),Ed.obj(e,t),Ed.get(e,t,["openGLRenderWindow"]),function(e,t){function n(e){switch(e){case cM.ELEMENT_ARRAY_BUFFER:return t.context.ELEMENT_ARRAY_BUFFER;case cM.TEXTURE_BUFFER:if("TEXTURE_BUFFER"in t.context)return t.context.TEXTURE_BUFFER;default:case cM.ARRAY_BUFFER:return t.context.ARRAY_BUFFER}}t.classHierarchy.push("vtkOpenGLBufferObject");let r=null,o=null,i=!0,a="";e.getType=()=>r,e.setType=e=>{r=e},e.getHandle=()=>o,e.isReady=()=>!1===i,e.generateBuffer=e=>{const i=n(e);return null===o&&(o=t.context.createBuffer(),r=e),n(r)===i},e.upload=(s,l)=>e.generateBuffer(l)?(t.context.bindBuffer(n(r),o),t.context.bufferData(n(r),s,t.context.STATIC_DRAW),i=!1,!0):(a="Trying to upload array buffer to incompatible buffer.",!1),e.bind=()=>!!o&&(t.context.bindBuffer(n(r),o),!0),e.release=()=>!!o&&(t.context.bindBuffer(n(r),null),!0),e.releaseGraphicsResources=()=>{null!==o&&(t.context.bindBuffer(n(r),null),t.context.deleteBuffer(o),o=null)},e.setOpenGLRenderWindow=n=>{t.openGLRenderWindow!==n&&(e.releaseGraphicsResources(),t.openGLRenderWindow=n,t.context=null,n&&(t.context=t.openGLRenderWindow.getContext()))},e.getError=()=>a}(e,t)}const pM=Ed.newInstance(gM);var fM=Object.assign({newInstance:pM,extend:gM},{},uM),hM={PassTypes:{MIN_KNOWN_PASS:0,ACTOR_PASS:0,COMPOSITE_INDEX_PASS:1,ID_LOW24:2,MAX_KNOWN_PASS:2}};const MM={contentType:-1,fieldType:-1,properties:null,selectionList:[]};function mM(e,t,n={}){Object.assign(t,MM,n),Ed.obj(e,t),t.properties={},Ed.setGet(e,t,["contentType","fieldType","properties","selectionList"]),function(e,t){t.classHierarchy.push("vtkSelectionNode"),e.getBounds=()=>t.points.getBounds()}(e,t)}const AM=Ed.newInstance(mM,"vtkSelectionNode");var yM=Object.assign({newInstance:AM,extend:mM},{SelectionContent:{GLOBALIDS:0,PEDIGREEIDS:1,VALUES:2,INDICES:3,FRUSTUM:4,LOCATIONS:5,THRESHOLDS:6,BLOCKS:7,QUERY:8},SelectionField:{CELL:0,POINT:1,FIELD:2,VERTEX:3,EDGE:4,ROW:5}});const{PassTypes:TM}=hM,{SelectionContent:DM,SelectionField:NM}=yM,{FieldAssociations:xM}=Kp,{vtkErrorMacro:IM}=Ed,wM={fieldAssociation:xM.FIELD_ASSOCIATION_CELLS,renderer:null,area:null,openGLRenderWindow:null,openGLRenderer:null,currentPass:-1,propColorValue:null,props:null,idOffset:1,captureZValues:!1};function CM(e,t,n={}){Object.assign(t,wM,n),Ed.obj(e,t),t.area=[0,0,0,0],t.propColorValue=[0,0,0],t.props=[],Ed.setGet(e,t,["fieldAssociation","renderer","currentPass","captureZValues"]),Ed.setGetArray(e,t,["area"],4),Ed.setGetArray(e,t,["propColorValue"],3),Ed.event(e,t,"event"),function(e,t){t.classHierarchy.push("vtkOpenGLHardwareSelector"),e.releasePixBuffers=()=>{t.pixBuffer=[],t.zBuffer=null},e.beginSelection=()=>{t.openGLRenderer=t.openGLRenderWindow.getViewNodeFor(t.renderer),t.maxAttributeId=0;const n=t.openGLRenderWindow.getSize();if(t.framebuffer){t.framebuffer.setOpenGLRenderWindow(t.openGLRenderWindow),t.framebuffer.saveCurrentBindingsAndBuffers();const e=t.framebuffer.getSize();e[0]!==n[0]||e[1]!==n[1]?(t.framebuffer.create(n[0],n[1]),t.framebuffer.populateFramebuffer()):t.framebuffer.bind()}else t.framebuffer=Gh.newInstance(),t.framebuffer.setOpenGLRenderWindow(t.openGLRenderWindow),t.framebuffer.saveCurrentBindingsAndBuffers(),t.framebuffer.create(n[0],n[1]),t.framebuffer.populateFramebuffer();t.openGLRenderer.clear(),t.openGLRenderer.setSelector(e),t.hitProps={},t.props=[],e.releasePixBuffers()},e.endSelection=()=>{t.hitProps={},t.openGLRenderer.setSelector(null),t.framebuffer.restorePreviousBindingsAndBuffers()},e.preCapturePass=()=>{},e.postCapturePass=()=>{},e.select=()=>{let n=null;return e.captureBuffers()&&(n=e.generateSelection(t.area[0],t.area[1],t.area[2],t.area[3]),e.releasePixBuffers()),n},e.captureBuffers=()=>{if(!t.renderer||!t.openGLRenderWindow)return IM("Renderer and view must be set before calling Select."),!1;t.openGLRenderer=t.openGLRenderWindow.getViewNodeFor(t.renderer),e.invokeEvent({type:"StartEvent"}),t.originalBackground=t.renderer.getBackgroundByReference(),t.renderer.setBackground(0,0,0);const n=t.openGLRenderWindow.getRenderPasses();for(e.beginSelection(),t.currentPass=TM.MIN_KNOWN_PASS;t.currentPass<=TM.COMPOSITE_INDEX_PASS;t.currentPass++)e.passRequired(t.currentPass)&&(e.preCapturePass(t.currentPass),t.captureZValues&&t.currentPass===TM.ACTOR_PASS&&"function"==typeof n[0].setDepthRequested&&"function"==typeof n[0].getFramebuffer?(n[0].setDepthRequested(!0),t.openGLRenderWindow.traverseAllPasses(),n[0].setDepthRequested(!1)):t.openGLRenderWindow.traverseAllPasses(),e.postCapturePass(t.currentPass),e.savePixelBuffer(t.currentPass));return e.endSelection(),t.renderer.setBackground(t.originalBackground),e.invokeEvent({type:"EndEvent"}),!0},e.passRequired=e=>!0,e.savePixelBuffer=n=>{if(t.pixBuffer[n]=t.openGLRenderWindow.getPixelData(t.area[0],t.area[1],t.area[2],t.area[3]),n===TM.ACTOR_PASS){if(t.captureZValues){const e=t.openGLRenderWindow.getRenderPasses();if("function"==typeof e[0].setDepthRequested&&"function"==typeof e[0].getFramebuffer){const n=e[0].getFramebuffer();n.saveCurrentBindingsAndBuffers(),n.bind(),t.zBuffer=t.openGLRenderWindow.getPixelData(t.area[0],t.area[1],t.area[2],t.area[3]),n.restorePreviousBindingsAndBuffers()}}e.buildPropHitList(t.pixBuffer[n])}},e.buildPropHitList=n=>{for(let r=0;r<=t.area[3]-t.area[1];r++)for(let o=0;o<=t.area[2]-t.area[0];o++){let i=e.convert(o,r,n);i>0&&(i--,i in t.hitProps||(t.hitProps[i]=!0))}},e.renderProp=n=>{t.currentPass===TM.ACTOR_PASS&&(e.setPropColorValueFromInt(t.props.length+t.idOffset),t.props.push(n))},e.renderCompositeIndex=n=>{t.currentPass===TM.COMPOSITE_INDEX_PASS&&e.setPropColorValueFromInt(n+t.idOffset)},e.renderAttributeId=e=>{e<0||(t.maxAttributeId=e>t.maxAttributeId?e:t.maxAttributeId)},e.getPropFromID=e=>e>=0&&e<t.props.length?t.props[e]:null,e.passTypeToString=e=>Ed.enumToString(TM,e),e.isPropHit=e=>Boolean(t.hitProps[e]),e.convert=(e,n,r)=>{if(!r)return 0;const o=4*(n*(t.area[2]-t.area[0]+1)+e),i=[];i[0]=r[o],i[1]=r[o+1],i[2]=r[o+2];let a=i[2];return a*=256,a+=i[1],a*=256,a+=i[0],a},e.setPropColorValueFromInt=e=>{t.propColorValue[0]=e%256/255,t.propColorValue[1]=Math.floor(e/256)%256/255,t.propColorValue[2]=Math.floor(e/65536)%256/255},e.getPixelInformation=(n,r,o)=>{const i=r<0?0:r;if(0===i){if(o[0]=n[0],o[1]=n[1],n[0]<t.area[0]||n[0]>t.area[2]||n[1]<t.area[1]||n[1]>t.area[3])return null;const r=[n[0]-t.area[0],n[1]-t.area[1]],i=e.convert(r[0],r[1],t.pixBuffer[TM.ACTOR_PASS]);if(i<=0)return null;const a={valid:!0};a.propID=i-t.idOffset,a.prop=e.getPropFromID(a.propID);let s=e.convert(r[0],r[1],t.pixBuffer[TM.COMPOSITE_INDEX_PASS]);if((s<0||s>16777215)&&(s=0),a.compositeID=s-t.idOffset,t.captureZValues){const e=4*(r[1]*(t.area[2]-t.area[0]+1)+r[0]);a.zValue=(256*t.zBuffer[e]+t.zBuffer[e+1])/65535,a.displayPosition=n}return a}const a=[n[0],n[1]],s=[0,0];let l=e.getPixelInformation(n,0,o);if(l&&l.valid)return l;for(let t=1;t<i;++t){for(let n=a[1]>t?a[1]-t:0;n<=a[1]+t;++n){if(s[1]=n,a[0]>=t&&(s[0]=a[0]-t,l=e.getPixelInformation(s,0,o),l&&l.valid))return l;if(s[0]=a[0]+t,l=e.getPixelInformation(s,0,o),l&&l.valid)return l}for(let n=a[0]>=t?a[0]-(t-1):0;n<=a[0]+(t-1);++n){if(s[0]=n,a[1]>=t&&(s[1]=a[1]-t,l=e.getPixelInformation(s,0,o),l&&l.valid))return l;if(s[1]=a[1]+t,l=e.getPixelInformation(s,0,o),l&&l.valid)return l}}return o[0]=n[0],o[1]=n[1],null},e.convertSelection=(e,n)=>{const r=[];let o=0;return n.forEach((n,i)=>{const a=yM.newInstance();switch(a.setContentType(DM.INDICES),e){case xM.FIELD_ASSOCIATION_CELLS:a.setFieldType(NM.CELL);break;case xM.FIELD_ASSOCIATION_POINTS:a.setFieldType(NM.POINT);break;default:IM("Unknown field association")}a.getProperties().propID=n.info.propID,a.getProperties().prop=n.info.prop,a.getProperties().compositeID=n.info.compositeID,a.getProperties().pixelCount=n.pixelCount,t.captureZValues&&(a.getProperties().displayPosition=[n.info.displayPosition[0],n.info.displayPosition[1],n.info.zValue],a.getProperties().worldPosition=t.openGLRenderWindow.displayToWorld(n.info.displayPosition[0],n.info.displayPosition[1],n.info.zValue,t.renderer)),a.setSelectionList(n.attributeIDs),r[o]=a,o++}),r},e.getInfoHash=e=>`${e.propID} ${e.compositeID}`,e.generateSelection=(n,r,o,i)=>{const a=Math.floor(n),s=Math.floor(r),l=Math.floor(o),u=Math.floor(i),c=new Map,d=[0,0];for(let g=s;g<=u;g++)for(let n=a;n<=l;n++){const r=e.getPixelInformation([n,g],0,d);if(r&&r.valid){const n=e.getInfoHash(r);if(c.has(n)){const e=c.get(n);e.pixelCount++,t.captureZValues&&r.zValue<e.info.zValue&&(e.info=r),-1===e.attributeIDs.indexOf(r.attributeID)&&e.attributeIDs.push(r.attributeID)}else c.set(n,{info:r,pixelCount:1,attributeIDs:[r.attributeID]})}}return e.convertSelection(t.fieldAssociation,c)},e.attach=(e,n)=>{t.openGLRenderWindow=e,t.renderer=n};const n=e.setArea;e.setArea=(...e)=>!!n(...e)&&(t.area[0]=Math.floor(t.area[0]),t.area[1]=Math.floor(t.area[1]),t.area[2]=Math.floor(t.area[2]),t.area[3]=Math.floor(t.area[3]),!0)}(e,t)}const EM=Ed.newInstance(CM,"vtkOpenGLHardwareSelector");var vM=Object.assign({newInstance:EM,extend:CM},hM);const{vtkDebugMacro:LM,vtkErrorMacro:bM}=Ed,OM={elementCount:0,stride:0,colorBOStride:0,vertexOffset:0,normalOffset:0,tCoordOffset:0,tCoordComponents:0,colorOffset:0,colorComponents:0,tcoordBO:null,customData:[],coordShift:null,coordScale:null,coordShiftAndScaleEnabled:!1,inverseShiftAndScaleMatrix:null};function SM(e,t,n={}){Object.assign(t,OM,n),fM.extend(e,t,n),Ed.setGet(e,t,["colorBO","elementCount","stride","colorBOStride","vertexOffset","normalOffset","tCoordOffset","tCoordComponents","colorOffset","colorComponents","customData"]),Ed.get(e,t,["coordShift","coordScale","coordShiftAndScaleEnabled","inverseShiftAndScaleMatrix"]),function(e,t){t.classHierarchy.push("vtkOpenGLCellArrayBufferObject"),e.setType(lM.ARRAY_BUFFER),e.createVBO=(n,r,o,i)=>{if(!n.getData()||!n.getData().length)return t.elementCount=0,0;t.blockSize=3,t.vertexOffset=0,t.normalOffset=0,t.tCoordOffset=0,t.tCoordComponents=0,t.colorComponents=0,t.colorOffset=0,t.customData=[];const s=i.points.getData();let l=null,u=null,c=null;const d=i.colors?i.colors.getNumberOfComponents():0,g=i.tcoords?i.tcoords.getNumberOfComponents():0;i.normals&&(t.normalOffset=4*t.blockSize,t.blockSize+=3,l=i.normals.getData()),i.customAttributes&&i.customAttributes.forEach(e=>{e&&(t.customData.push({data:e.getData(),offset:4*t.blockSize,components:e.getNumberOfComponents(),name:e.getName()}),t.blockSize+=e.getNumberOfComponents())}),i.tcoords&&(t.tCoordOffset=4*t.blockSize,t.tCoordComponents=g,t.blockSize+=g,u=i.tcoords.getData()),i.colors?(t.colorComponents=i.colors.getNumberOfComponents(),t.colorOffset=0,c=i.colors.getData(),t.colorBO||(t.colorBO=fM.newInstance()),t.colorBO.setOpenGLRenderWindow(t.openGLRenderWindow)):t.colorBO=null,t.stride=4*t.blockSize;let p,f=0,h=0,M=0,m=0,A=0,y=0;const T={anythingToPoints(e,t,n){for(let r=0;r<e;++r)p(t[n+r])},linesToWireframe(e,t,n){for(let r=0;r<e-1;++r)p(t[n+r]),p(t[n+r+1])},polysToWireframe(e,t,n){for(let r=0;r<e;++r)p(t[n+r]),p(t[n+(r+1)%e])},stripsToWireframe(e,t,n){for(let r=0;r<e-1;++r)p(t[n+r]),p(t[n+r+1]);for(let r=0;r<e-2;r++)p(t[n+r]),p(t[n+r+2])},polysToSurface(e,t,n){if(e<3)LM("skipping degenerate triangle");else for(let r=0;r<e-2;r++)p(t[n+0]),p(t[n+r+1]),p(t[n+r+2])},stripsToSurface(e,t,n){for(let r=0;r<e-2;r++)p(t[n+r]),p(t[n+r+1+r%2]),p(t[n+r+1+(r+1)%2])}},D={anythingToPoints:(e,t)=>e,linesToWireframe:(e,t)=>2*(e-1),polysToWireframe:(e,t)=>2*e,stripsToWireframe:(e,t)=>4*e-6,polysToSurface:(e,t)=>e<3?0:3*(e-2),stripsToSurface:(e,t,n)=>3*(e-2)};let N=null,x=null;o===Sg.POINTS||"verts"===r?(N=T.anythingToPoints,x=D.anythingToPoints):o===Sg.WIREFRAME||"lines"===r?(N=T[`${r}ToWireframe`],x=D[`${r}ToWireframe`]):(N=T[`${r}ToSurface`],x=D[`${r}ToSurface`]);const I=n.getData(),w=I.length;let C=0;for(let e=0;e<w;)C+=x(I[e],I),e+=I[e]+1;let E=null;const v=new Float32Array(C*t.blockSize);c&&(E=new Uint8Array(4*C));let L=0,b=0,O=0,S=0;for(let e=0;e<3;++e){const t=i.points.getRange(e),n=t[1]-t[0];O+=n*n;const r=.5*(t[1]+t[0]);S+=r*r}if(O>0&&(Math.abs(S)/O>1e6||Math.abs(Math.log10(O))>3||0===O&&S>1e6)){const t=a.create(),n=a.create();for(let e=0;e<3;++e){const r=i.points.getRange(e),o=r[1]-r[0];t[e]=.5*(r[1]+r[0]),n[e]=o>0?1/o:1}e.setCoordShiftAndScale(t,n)}else!0===t.coordShiftAndScaleEnabled&&e.setCoordShiftAndScale(null,null);p=function(e){if(f=3*e,t.coordShiftAndScaleEnabled?(v[L++]=(s[f++]-t.coordShift[0])*t.coordScale[0],v[L++]=(s[f++]-t.coordShift[1])*t.coordScale[1],v[L++]=(s[f++]-t.coordShift[2])*t.coordScale[2]):(v[L++]=s[f++],v[L++]=s[f++],v[L++]=s[f++]),null!==l&&(h=i.haveCellNormals?3*(y+i.cellOffset):3*e,v[L++]=l[h++],v[L++]=l[h++],v[L++]=l[h++]),t.customData.forEach(t=>{A=e*t.components;for(let e=0;e<t.components;++e)v[L++]=t.data[A++]}),null!==u){M=e*g;for(let e=0;e<g;++e)v[L++]=u[M++]}null!==c&&(m=i.haveCellScalars?(y+i.cellOffset)*d:e*d,E[b++]=c[m++],E[b++]=c[m++],E[b++]=c[m++],E[b++]=4===d?c[m++]:255)};for(let e=0;e<w;)N(I[e],I,e+1),e+=I[e]+1,y++;return t.elementCount=C,e.upload(v,lM.ARRAY_BUFFER),t.colorBO&&(t.colorBOStride=4,t.colorBO.upload(E,lM.ARRAY_BUFFER)),y},e.setCoordShiftAndScale=(e,n)=>{null===e||e.constructor===Float32Array&&3===e.length?null===n||n.constructor===Float32Array&&3===n.length?(null!==t.coordShift&&null!==e&&a.equals(e,t.coordShift)||(t.coordShift=e),null!==t.coordScale&&null!==n&&a.equals(n,t.coordScale)||(t.coordScale=n),t.coordShiftAndScaleEnabled=function(e,t){return null!==e&&null!==t&&!(a.exactEquals(e,[0,0,0])&&a.exactEquals(t,[1,1,1]))}(t.coordShift,t.coordScale),t.inverseShiftAndScaleMatrix=t.coordShiftAndScaleEnabled?function(e,t){const n=a.create();a.inverse(n,t);const r=i.create();return i.fromRotationTranslationScale(r,l.create(),e,n),r}(t.coordShift,t.coordScale):null):bM("Wrong type for coordScale, expected vec3 or null"):bM("Wrong type for coordShift, expected vec3 or null")}}(e,t)}var jM={newInstance:Ed.newInstance(SM),extend:SM};const{vtkErrorMacro:PM}=Ed,kM={shaderType:"Unknown",source:"",error:"",handle:0,dirty:!1,context:null};function zM(e,t,n={}){Object.assign(t,kM,n),Ed.obj(e,t),Ed.setGet(e,t,["shaderType","source","error","handle","context"]),function(e,t){t.classHierarchy.push("vtkShader"),e.compile=()=>{let e=t.context.VERTEX_SHADER;if(!t.source||!t.source.length||"Unknown"===t.shaderType)return!1;switch(0!==t.handle&&(t.context.deleteShader(t.handle),t.handle=0),t.shaderType){case"Fragment":e=t.context.FRAGMENT_SHADER;break;case"Vertex":default:e=t.context.VERTEX_SHADER}if(t.handle=t.context.createShader(e),t.context.shaderSource(t.handle,t.source),t.context.compileShader(t.handle),!t.context.getShaderParameter(t.handle,t.context.COMPILE_STATUS)){const e=t.context.getShaderInfoLog(t.handle);return PM(`Error compiling shader '${t.source}': ${e}`),t.context.deleteShader(t.handle),t.handle=0,!1}return!0},e.cleanup=()=>{"Unknown"!==t.shaderType&&0!==t.handle&&(t.context.deleteShader(t.handle),t.handle=0,t.dirty=!0)}}(e,t)}var RM={newInstance:Ed.newInstance(zM,"vtkShader"),extend:zM};const{vtkErrorMacro:_M}=Ed,VM={vertexShaderHandle:0,fragmentShaderHandle:0,geometryShaderHandle:0,vertexShader:null,fragmentShader:null,geometryShader:null,linked:!1,bound:!1,compiled:!1,error:"",handle:0,numberOfOutputs:0,attributesLocs:null,uniformLocs:null,md5Hash:0,context:null,lastCameraMTime:null};function BM(e,t,n={}){Object.assign(t,VM,n),t.attributesLocs={},t.uniformLocs={},t.vertexShader=RM.newInstance(),t.vertexShader.setShaderType("Vertex"),t.fragmentShader=RM.newInstance(),t.fragmentShader.setShaderType("Fragment"),t.geometryShader=RM.newInstance(),t.geometryShader.setShaderType("Geometry"),Ed.obj(e,t),Ed.get(e,t,["lastCameraMTime"]),Ed.setGet(e,t,["error","handle","compiled","bound","md5Hash","vertexShader","fragmentShader","geometryShader","linked"]),function(e,t){t.classHierarchy.push("vtkShaderProgram"),e.compileShader=()=>t.vertexShader.compile()?t.fragmentShader.compile()?e.attachShader(t.vertexShader)&&e.attachShader(t.fragmentShader)?e.link()?(e.setCompiled(!0),1):(_M(`Links failed: ${t.error}`),0):(_M(t.error),0):(_M(t.fragmentShader.getSource().split("\n").map((e,t)=>`${t}: ${e}`).join("\n")),_M(t.fragmentShader.getError()),0):(_M(t.vertexShader.getSource().split("\n").map((e,t)=>`${t}: ${e}`).join("\n")),_M(t.vertexShader.getError()),0),e.cleanup=()=>{"Unknown"!==t.shaderType&&0!==t.handle&&(t.context.deleteShader(t.handle),t.handle=0)},e.bind=()=>!(!t.linked&&!t.link()||(t.context.useProgram(t.handle),e.setBound(!0),0)),e.isBound=()=>!!t.bound,e.release=()=>{t.context.useProgram(null),e.setBound(!1)},e.setContext=e=>{t.vertexShader.setContext(e),t.fragmentShader.setContext(e),t.geometryShader.setContext(e)},e.link=()=>{if(t.inked)return!0;if(0===t.handle)return t.error="Program has not been initialized, and/or does not have shaders.",!1;if(t.uniformLocs={},t.context.linkProgram(t.handle),!t.context.getProgramParameter(t.handle,t.context.LINK_STATUS)){const e=t.context.getProgramInfoLog(t.handle);return _M(`Error linking shader ${e}`),t.handle=0,!1}return e.setLinked(!0),t.attributeLocs={},!0},e.setUniformMatrix=(n,r)=>{const o=e.findUniform(n);return-1===o?(t.error=`Could not set uniform ${n} . No such uniform.`,!1):(t.context.uniformMatrix4fv(o,!1,r),!0)},e.setUniformMatrix3x3=(n,r)=>{const o=e.findUniform(n);return-1===o?(t.error=`Could not set uniform ${n} . No such uniform.`,!1):(t.context.uniformMatrix3fv(o,!1,r),!0)},e.setUniformf=(n,r)=>{const o=e.findUniform(n);return-1===o?(t.error=`Could not set uniform ${n} . No such uniform.`,!1):(t.context.uniform1f(o,r),!0)},e.setUniformfv=(n,r)=>{const o=e.findUniform(n);return-1===o?(t.error=`Could not set uniform ${n} . No such uniform.`,!1):(t.context.uniform1fv(o,r),!0)},e.setUniformi=(n,r)=>{const o=e.findUniform(n);return-1===o?(t.error=`Could not set uniform ${n} . No such uniform.`,!1):(t.context.uniform1i(o,r),!0)},e.setUniformiv=(n,r)=>{const o=e.findUniform(n);return-1===o?(t.error=`Could not set uniform ${n} . No such uniform.`,!1):(t.context.uniform1iv(o,r),!0)},e.setUniform2f=(n,r,o)=>{const i=e.findUniform(n);if(-1===i)return t.error=`Could not set uniform ${n} . No such uniform.`,!1;if(void 0===o)throw new RangeError("Invalid number of values for array");return t.context.uniform2f(i,r,o),!0},e.setUniform2fv=(n,r)=>{const o=e.findUniform(n);return-1===o?(t.error=`Could not set uniform ${n} . No such uniform.`,!1):(t.context.uniform2fv(o,r),!0)},e.setUniform2i=(n,r,o)=>{const i=e.findUniform(n);if(-1===i)return t.error=`Could not set uniform ${n} . No such uniform.`,!1;if(void 0===o)throw new RangeError("Invalid number of values for array");return t.context.uniform2i(i,r,o),!0},e.setUniform2iv=(n,r)=>{const o=e.findUniform(n);return-1===o?(t.error=`Could not set uniform ${n} . No such uniform.`,!1):(t.context.uniform2iv(o,r),!0)},e.setUniform3f=(n,r,o,i)=>{const a=e.findUniform(n);if(-1===a)return t.error=`Could not set uniform ${n} . No such uniform.`,!1;if(void 0===i)throw new RangeError("Invalid number of values for array");return t.context.uniform3f(a,r,o,i),!0},e.setUniform3fArray=(n,r)=>{const o=e.findUniform(n);if(-1===o)return t.error=`Could not set uniform ${n} . No such uniform.`,!1;if(!Array.isArray(r)||3!==r.length)throw new RangeError("Invalid number of values for array");return t.context.uniform3f(o,r[0],r[1],r[2]),!0},e.setUniform3fv=(n,r)=>{const o=e.findUniform(n);return-1===o?(t.error=`Could not set uniform ${n} . No such uniform.`,!1):(t.context.uniform3fv(o,r),!0)},e.setUniform3i=(n,...r)=>{const o=e.findUniform(n);if(-1===o)return t.error=`Could not set uniform ${n} . No such uniform.`,!1;let i=r;if(1===i.length&&Array.isArray(i[0])&&(i=i[0]),3!==i.length)throw new RangeError("Invalid number of values for array");return t.context.uniform3i(o,i[0],i[1],i[2]),!0},e.setUniform3iv=(n,r)=>{const o=e.findUniform(n);return-1===o?(t.error=`Could not set uniform ${n} . No such uniform.`,!1):(t.context.uniform3iv(o,r),!0)},e.setUniform4f=(n,...r)=>{const o=e.findUniform(n);if(-1===o)return t.error=`Could not set uniform ${n} . No such uniform.`,!1;let i=r;if(1===i.length&&Array.isArray(i[0])&&(i=i[0]),4!==i.length)throw new RangeError("Invalid number of values for array");return t.context.uniform4f(o,i[0],i[1],i[2],i[3]),!0},e.setUniform4fv=(n,r)=>{const o=e.findUniform(n);return-1===o?(t.error=`Could not set uniform ${n} . No such uniform.`,!1):(t.context.uniform4fv(o,r),!0)},e.setUniform4i=(n,...r)=>{const o=e.findUniform(n);if(-1===o)return t.error=`Could not set uniform ${n} . No such uniform.`,!1;let i=r;if(1===i.length&&Array.isArray(i[0])&&(i=i[0]),4!==i.length)throw new RangeError("Invalid number of values for array");return t.context.uniform4i(o,i[0],i[1],i[2],i[3]),!0},e.setUniform4iv=(n,r)=>{const o=e.findUniform(n);return-1===o?(t.error=`Could not set uniform ${n} . No such uniform.`,!1):(t.context.uniform4iv(o,r),!0)},e.setUniform4fv=(n,r,o)=>{const i=e.findUniform(n);return-1===i?(t.error=`Could not set uniform ${n} . No such uniform.`,!1):(t.context.uniform4fv(i,o),!0)},e.findUniform=e=>{if(!e||!t.linked)return-1;let n=t.uniformLocs[e];return void 0!==n?n:(n=t.context.getUniformLocation(t.handle,e),null===n?(t.error=`Uniform ${e} not found in current shader program.`,t.uniformLocs[e]=-1,-1):(t.uniformLocs[e]=n,n))},e.isUniformUsed=e=>{if(!e)return!1;let n=t.uniformLocs[e];return void 0!==n?null!==n:t.linked?(n=t.context.getUniformLocation(t.handle,e),t.uniformLocs[e]=n,null!==n):(_M("attempt to find uniform when the shader program is not linked"),!1)},e.isAttributeUsed=e=>{if(!e)return!1;let n=Object.keys(t.attributeLocs).indexOf(e);return-1!==n||(t.linked?(n=t.context.getAttribLocation(t.handle,e),-1!==n&&(t.attributeLocs[e]=n,!0)):(_M("attempt to find uniform when the shader program is not linked"),!1))},e.attachShader=n=>{if(0===n.getHandle())return t.error="Shader object was not initialized, cannot attach it.",!1;if("Unknown"===n.getShaderType())return t.error="Shader object is of type Unknown and cannot be used.",!1;if(0===t.handle){const e=t.context.createProgram();if(0===e)return t.error="Could not create shader program.",!1;t.handle=e,t.linked=!1}return"Vertex"===n.getShaderType()&&(0!==t.vertexShaderHandle&&t.comntext.detachShader(t.handle,t.vertexShaderHandle),t.vertexShaderHandle=n.getHandle()),"Fragment"===n.getShaderType()&&(0!==t.fragmentShaderHandle&&t.context.detachShader(t.handle,t.fragmentShaderHandle),t.fragmentShaderHandle=n.getHandle()),t.context.attachShader(t.handle,n.getHandle()),e.setLinked(!1),!0},e.detachShader=e=>{if(0===e.getHandle())return t.error="shader object was not initialized, cannot attach it.",!1;if("Unknown"===e.getShaderType())return t.error="Shader object is of type Unknown and cannot be used.",!1;switch(0===t.handle&&(t.error="This shader program has not been initialized yet."),e.getShaderType()){case"Vertex":return t.vertexShaderHandle!==e.getHandle()?(t.error="The supplied shader was not attached to this program.",!1):(t.context.detachShader(t.handle,e.getHandle()),t.vertexShaderHandle=0,t.linked=!1,!0);case"Fragment":return t.fragmentShaderHandle!==e.getHandle()?(t.error="The supplied shader was not attached to this program.",!1):(t.context.detachShader(t.handle,e.getHandle()),t.fragmentShaderHandle=0,t.linked=!1,!0);default:return!1}},e.setContext=e=>{t.context=e,t.vertexShader.setContext(e),t.fragmentShader.setContext(e),t.geometryShader.setContext(e)},e.setLastCameraMTime=e=>{t.lastCameraMTime=e}}(e,t)}var UM={newInstance:Ed.newInstance(BM,"vtkShaderProgram"),extend:BM,substitute:function(e,t,n,r=!0){const o=Array.isArray(n)?n.join("\n"):n;let i=!1;-1!==e.search(t)&&(i=!0);let a="";r&&(a="g");const s=new RegExp(t,a);return{replace:i,result:e.replace(s,o)}}};const FM={forceEmulation:!1,handleVAO:0,handleProgram:0,supported:!0,buffers:null,context:null,openGLRenderWindow:null};function GM(e,t,n={}){Object.assign(t,FM,n),t.buffers=[],Ed.obj(e,t),Ed.get(e,t,["supported"]),Ed.setGet(e,t,["forceEmulation"]),function(e,t){t.classHierarchy.push("vtkOpenGLVertexArrayObject"),e.exposedMethod=()=>{},e.initialize=()=>{t.instancingExtension=null,t.openGLRenderWindow.getWebgl2()||(t.instancingExtension=t.context.getExtension("ANGLE_instanced_arrays")),!t.forceEmulation&&t.openGLRenderWindow&&t.openGLRenderWindow.getWebgl2()?(t.extension=null,t.supported=!0,t.handleVAO=t.context.createVertexArray()):(t.extension=t.context.getExtension("OES_vertex_array_object"),!t.forceEmulation&&t.extension?(t.supported=!0,t.handleVAO=t.extension.createVertexArrayOES()):t.supported=!1)},e.isReady=()=>0!==t.handleVAO||!1===t.supported,e.bind=()=>{if(e.isReady()||e.initialize(),e.isReady()&&t.supported)t.extension?t.extension.bindVertexArrayOES(t.handleVAO):t.context.bindVertexArray(t.handleVAO);else if(e.isReady()){const e=t.context;for(let n=0;n<t.buffers.length;++n){const r=t.buffers[n];t.context.bindBuffer(e.ARRAY_BUFFER,r.buffer);for(let n=0;n<r.attributes.length;++n){const o=r.attributes[n],i=o.isMatrix?o.size:1;for(let n=0;n<i;++n)e.enableVertexAttribArray(o.index+n),e.vertexAttribPointer(o.index+n,o.size,o.type,o.normalize,o.stride,o.offset+o.stride*n/o.size),o.divisor>0&&(t.instancingExtension?t.instancingExtension.vertexAttribDivisorANGLE(o.index+n,1):e.vertexAttribDivisor(o.index+n,1))}}}},e.release=()=>{if(e.isReady()&&t.supported)t.extension?t.extension.bindVertexArrayOES(null):t.context.bindVertexArray(null);else if(e.isReady()){const e=t.context;for(let n=0;n<t.buffers.length;++n){const r=t.buffers[n];t.context.bindBuffer(e.ARRAY_BUFFER,r.buffer);for(let n=0;n<r.attributes.length;++n){const o=r.attributes[n],i=o.isMatrix?o.size:1;for(let n=0;n<i;++n)e.enableVertexAttribArray(o.index+n),e.vertexAttribPointer(o.index+n,o.size,o.type,o.normalize,o.stride,o.offset+o.stride*n/o.size),o.divisor>0&&(t.instancingExtension?t.instancingExtension.vertexAttribDivisorANGLE(o.index+n,0):e.vertexAttribDivisor(o.index+n,0)),e.disableVertexAttribArray(o.index+n)}}}},e.shaderProgramChanged=()=>{e.release(),t.handleVAO&&(t.extension?t.extension.deleteVertexArrayOES(t.handleVAO):t.context.deleteVertexArray(t.handleVAO)),t.handleVAO=0,t.handleProgram=0},e.releaseGraphicsResources=()=>{e.shaderProgramChanged(),t.handleVAO&&(t.extension?t.extension.deleteVertexArrayOES(t.handleVAO):t.context.deleteVertexArray(t.handleVAO)),t.handleVAO=0,t.supported=!0,t.handleProgram=0},e.addAttributeArray=(t,n,r,o,i,a,s,l)=>e.addAttributeArrayWithDivisor(t,n,r,o,i,a,s,l,0,!1),e.addAttributeArrayWithDivisor=(n,r,o,i,a,s,l,u,c,d)=>{if(!n)return!1;if(!n.isBound()||0===r.getHandle()||r.getType()!==lM.ARRAY_BUFFER)return!1;if(0===t.handleProgram&&(t.handleProgram=n.getHandle()),e.isReady()||e.initialize(),!e.isReady()||t.handleProgram!==n.getHandle())return!1;const g=t.context,p={};if(p.name=o,p.index=g.getAttribLocation(t.handleProgram,o),p.offset=i,p.stride=a,p.type=s,p.size=l,p.normalize=u,p.isMatrix=d,p.divisor=c,-1===p.Index)return!1;if(r.bind(),g.enableVertexAttribArray(p.index),g.vertexAttribPointer(p.index,p.size,p.type,p.normalize,p.stride,p.offset),c>0&&(t.instancingExtension?t.instancingExtension.vertexAttribDivisorANGLE(p.index,1):g.vertexAttribDivisor(p.index,1)),p.buffer=r.getHandle(),!t.supported){let e=!1;for(let n=0;n<t.buffers.length;++n){const r=t.buffers[n];if(r.buffer===p.buffer){e=!0;let t=!1;for(let e=0;e<r.attributes.length;++e)r.attributes[e].name===o&&(t=!0,r.attributes[e]=p);t||r.attributes.push(p)}}e||t.buffers.push({buffer:p.buffer,attributes:[p]})}return!0},e.addAttributeMatrixWithDivisor=(n,r,o,i,a,s,l,u,c)=>{const d=e.addAttributeArrayWithDivisor(n,r,o,i,a,s,l,u,c,!0);if(!d)return d;const g=t.context,p=g.getAttribLocation(t.handleProgram,o);for(let e=1;e<l;e++)g.enableVertexAttribArray(p+e),g.vertexAttribPointer(p+e,l,s,u,a,i+a*e/l),c>0&&(t.instancingExtension?t.instancingExtension.vertexAttribDivisorANGLE(p+e,1):g.vertexAttribDivisor(p+e,1));return!0},e.removeAttributeArray=n=>{if(!e.isReady()||0===t.handleProgram)return!1;if(!t.supported)for(let e=0;e<t.buffers.length;++e){const r=t.buffers[e];for(let o=0;o<r.attributes.length;++o)if(r.attributes[o].name===n)return r.attributes.splice(o,1),r.attributes.length||t.buffers.splice(e,1),!0}return!0},e.setOpenGLRenderWindow=n=>{t.openGLRenderWindow!==n&&(e.releaseGraphicsResources(),t.openGLRenderWindow=n,t.context=null,n&&(t.context=t.openGLRenderWindow.getContext()))}}(e,t)}var QM={newInstance:Ed.newInstance(GM,"vtkOpenGLVertexArrayObject"),extend:GM};const YM={program:null,shaderSourceTime:null,VAO:null,attributeUpdateTime:null,CABO:null,primitiveType:0};function WM(e,t,n={}){Object.assign(t,YM,n),Ed.obj(e,t),t.shaderSourceTime={},Ed.obj(t.shaderSourceTime),t.attributeUpdateTime={},Ed.obj(t.attributeUpdateTime),Ed.setGet(e,t,["program","shaderSourceTime","VAO","attributeUpdateTime","CABO","primitiveType"]),t.program=UM.newInstance(),t.VAO=QM.newInstance(),t.CABO=jM.newInstance(),function(e,t){t.classHierarchy.push("vtkOpenGLHelper"),e.setOpenGLRenderWindow=e=>{t.program.setContext(e.getContext()),t.VAO.setOpenGLRenderWindow(e),t.CABO.setOpenGLRenderWindow(e)},e.releaseGraphicsResources=e=>{t.VAO.releaseGraphicsResources(),t.CABO.releaseGraphicsResources(),t.CABO.setElementCount(0)}}(e,t)}var HM={newInstance:Ed.newInstance(WM),extend:WM},KM=n("ymfm"),XM=n.n(KM),ZM=n("IYyN"),qM=n.n(ZM),$M=function(e,t,n={}){e.replaceShaderCoincidentOffset=(n,r,o)=>{const i=e.getCoincidentParameters(r,o);if(i&&(0!==i.factor||0!==i.offset)){let e=n.Fragment;e=UM.substitute(e,"//VTK::Coincident::Dec",["uniform float cfactor;","uniform float coffset;"]).result,t.context.getExtension("EXT_frag_depth")&&(0!==i.factor?(e=UM.substitute(e,"//VTK::UniformFlow::Impl",["float cscale = length(vec2(dFdx(gl_FragCoord.z),dFdy(gl_FragCoord.z)));","//VTK::UniformFlow::Impl"],!1).result,e=UM.substitute(e,"//VTK::Depth::Impl","gl_FragDepthEXT = gl_FragCoord.z + cfactor*cscale + 0.000016*coffset;").result):e=UM.substitute(e,"//VTK::Depth::Impl","gl_FragDepthEXT = gl_FragCoord.z + 0.000016*coffset;").result),t.openGLRenderWindow.getWebgl2()&&(0!==i.factor?(e=UM.substitute(e,"//VTK::UniformFlow::Impl",["float cscale = length(vec2(dFdx(gl_FragCoord.z),dFdy(gl_FragCoord.z)));","//VTK::UniformFlow::Impl"],!1).result,e=UM.substitute(e,"//VTK::Depth::Impl","gl_FragDepth = gl_FragCoord.z + cfactor*cscale + 0.000016*coffset;").result):e=UM.substitute(e,"//VTK::Depth::Impl","gl_FragDepth = gl_FragCoord.z + 0.000016*coffset;").result),n.Fragment=e}}};const JM={Start:0,Points:0,Lines:1,Tris:2,TriStrips:3,TrisEdges:4,TriStripsEdges:5,End:6},{Representation:em,Shading:tm}=Bg,{ScalarMode:nm}=Nh,{Filter:rm,Wrap:om}=Vh,{vtkErrorMacro:im}=Ed,am={type:"StartEvent"},sm={type:"EndEvent"},lm={context:null,VBOBuildTime:0,VBOBuildString:null,primitives:null,primTypes:null,shaderRebuildString:null,tmpMat4:null,ambientColor:[],diffuseColor:[],specularColor:[],lightColor:[],lightHalfAngle:[],lightDirection:[],lastHaveSeenDepthRequest:!1,haveSeenDepthRequest:!1};function um(e,t,n={}){Object.assign(t,lm,n),Lh.extend(e,t,n),$M(e,t,n),t.primitives=[],t.primTypes=JM,t.tmpMat3=o.create(),t.tmpMat4=i.create();for(let r=JM.Start;r<JM.End;r++)t.primitives[r]=HM.newInstance(),t.primitives[r].setPrimitiveType(r),t.primitives[r].set({lastLightComplexity:0,lastLightCount:0,lastSelectionPass:!1},!0);Ed.setGet(e,t,["context"]),t.VBOBuildTime={},Ed.obj(t.VBOBuildTime,{mtime:0}),function(e,t){function n(e,t,n){return t.identity(n),e.reduce((e,n,r)=>0===r?n?t.copy(e,n):t.identity(e):n?t.multiply(e,e,n):e,n)}t.classHierarchy.push("vtkOpenGLPolyDataMapper"),e.buildPass=n=>{n&&(t.openGLActor=e.getFirstAncestorOfType("vtkOpenGLActor"),t.openGLRenderer=t.openGLActor.getFirstAncestorOfType("vtkOpenGLRenderer"),t.openGLRenderWindow=t.openGLRenderer.getParent(),t.openGLCamera=t.openGLRenderer.getViewNodeFor(t.openGLRenderer.getRenderable().getActiveCamera()))},e.translucentPass=t=>{t&&e.render()},e.opaqueZBufferPass=n=>{n&&(t.haveSeenDepthRequest=!0,t.renderDepth=!0,e.render(),t.renderDepth=!1)},e.opaquePass=t=>{t&&e.render()},e.render=()=>{const n=t.openGLRenderWindow.getContext();if(t.context!==n){t.context=n;for(let e=JM.Start;e<JM.End;e++)t.primitives[e].setOpenGLRenderWindow(t.openGLRenderWindow)}const r=t.openGLActor.getRenderable(),o=t.openGLRenderer.getRenderable();e.renderPiece(o,r)},e.buildShaders=(n,r,o)=>{e.getShaderTemplate(n,r,o);const i=t.renderable.getViewSpecificProperties().OpenGL;let a=null;if(i&&(a=i.ShaderReplacements),a)for(let e=0;e<a.length;e++){const t=a[e];if(t.replaceFirst){const e=t.shaderType,r=UM.substitute(n[e],t.originalValue,t.replacementValue,t.replaceAll);n[e]=r.result}}if(e.replaceShaderValues(n,r,o),a)for(let e=0;e<a.length;e++){const t=a[e];if(!t.replaceFirst){const e=t.shaderType,r=UM.substitute(n[e],t.originalValue,t.replacementValue,t.replaceAll);n[e]=r.result}}},e.getShaderTemplate=(e,n,r)=>{const o=t.renderable.getViewSpecificProperties().OpenGL;let i=XM.a;if(o){const e=o.VertexShaderCode;void 0!==e&&""!==e&&(i=e)}e.Vertex=i;let a=qM.a;if(o){const e=o.FragmentShaderCode;void 0!==e&&""!==e&&(a=e)}e.Fragment=a;let s="";if(o){const e=o.GeometryShaderCode;void 0!==e&&(s=e)}e.Geometry=s},e.replaceShaderColor=(e,n,r)=>{let o=e.Vertex,i=e.Geometry,a=e.Fragment;const s=t.lastBoundBO.getReferenceByName("lastLightComplexity");let l=["uniform float ambient;","uniform float diffuse;","uniform float specular;","uniform float opacityUniform; // the fragment opacity","uniform vec3 ambientColorUniform;","uniform vec3 diffuseColorUniform;"];s&&(l=l.concat(["uniform vec3 specularColorUniform;","uniform float specularPowerUniform;"]));let u=["vec3 ambientColor;","  vec3 diffuseColor;","  float opacity;"];s&&(u=u.concat(["  vec3 specularColor;","  float specularPower;"])),u=u.concat(["  ambientColor = ambientColorUniform;","  diffuseColor = diffuseColorUniform;","  opacity = opacityUniform;"]),s&&(u=u.concat(["  specularColor = specularColorUniform;","  specularPower = specularPowerUniform;"])),0===t.lastBoundBO.getCABO().getColorComponents()||t.drawingEdges||(l=l.concat(["varying vec4 vertexColorVSOutput;"]),o=UM.substitute(o,"//VTK::Color::Dec",["attribute vec4 scalarColor;","varying vec4 vertexColorVSOutput;"]).result,o=UM.substitute(o,"//VTK::Color::Impl",["vertexColorVSOutput =  scalarColor;"]).result,i=UM.substitute(i,"//VTK::Color::Dec",["in vec4 vertexColorVSOutput[];","out vec4 vertexColorGSOutput;"]).result,i=UM.substitute(i,"//VTK::Color::Impl",["vertexColorGSOutput = vertexColorVSOutput[i];"]).result),a=0===t.lastBoundBO.getCABO().getColorComponents()||t.drawingEdges?t.renderable.getInterpolateScalarsBeforeMapping()&&t.renderable.getColorCoordinates()&&!t.drawingEdges?UM.substitute(a,"//VTK::Color::Impl",u.concat(["  vec4 texColor = texture2D(texture1, tcoordVCVSOutput.st);","  diffuseColor = texColor.rgb;","  ambientColor = texColor.rgb;","  opacity = opacity*texColor.a;"])).result:UM.substitute(a,"//VTK::Color::Impl",u).result:UM.substitute(a,"//VTK::Color::Impl",u.concat(["  diffuseColor = vertexColorVSOutput.rgb;","  ambientColor = vertexColorVSOutput.rgb;","  opacity = opacity*vertexColorVSOutput.a;"])).result,a=UM.substitute(a,"//VTK::Color::Dec",l).result,e.Vertex=o,e.Geometry=i,e.Fragment=a},e.replaceShaderLight=(e,n,r)=>{let o=e.Fragment;const i=t.lastBoundBO.getReferenceByName("lastLightComplexity"),a=t.lastBoundBO.getReferenceByName("lastLightCount");let s=[];switch(i){case 0:o=UM.substitute(o,"//VTK::Light::Impl",["  gl_FragData[0] = vec4(ambientColor * ambient + diffuseColor * diffuse, opacity);","  //VTK::Light::Impl"],!1).result;break;case 1:o=UM.substitute(o,"//VTK::Light::Impl",["  float df = max(0.0, normalVCVSOutput.z);","  float sf = pow(df, specularPower);","  vec3 diffuseL = df * diffuseColor;","  vec3 specularL = sf * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"],!1).result;break;case 2:for(let e=0;e<a;++e)s=s.concat([`uniform vec3 lightColor${e};`,`uniform vec3 lightDirectionVC${e}; // normalized`,`uniform vec3 lightHalfAngleVC${e}; // normalized`]);o=UM.substitute(o,"//VTK::Light::Dec",s).result,s=["vec3 diffuseL = vec3(0,0,0);","  vec3 specularL = vec3(0,0,0);","  float df;"];for(let e=0;e<a;++e)s=s.concat([`  df = max(0.0, dot(normalVCVSOutput, -lightDirectionVC${e}));`,`  diffuseL += ((df) * lightColor${e});`,`  if (dot(normalVCVSOutput, lightDirectionVC${e}) < 0.0)`,"    {",`    float sf = pow( max(0.0, dot(lightHalfAngleVC${e},normalVCVSOutput)), specularPower);`,`    specularL += ((sf) * lightColor${e});`,"    }"]);s=s.concat(["  diffuseL = diffuseL * diffuseColor;","  specularL = specularL * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"]),o=UM.substitute(o,"//VTK::Light::Impl",s,!1).result;break;case 3:for(let e=0;e<a;++e)s=s.concat([`uniform vec3 lightColor${e};`,`uniform vec3 lightDirectionVC${e}; // normalized`,`uniform vec3 lightHalfAngleVC${e}; // normalized`,`uniform vec3 lightPositionVC${e};`,`uniform vec3 lightAttenuation${e};`,`uniform float lightConeAngle${e};`,`uniform float lightExponent${e};`,`uniform int lightPositional${e};`]);o=UM.substitute(o,"//VTK::Light::Dec",s).result,s=["vec3 diffuseL = vec3(0,0,0);","  vec3 specularL = vec3(0,0,0);","  vec3 vertLightDirectionVC;","  float attenuation;","  float df;"];for(let e=0;e<a;++e)s=s.concat(["  attenuation = 1.0;",`  if (lightPositional${e} == 0)`,"    {",`      vertLightDirectionVC = lightDirectionVC${e};`,"    }","  else","    {",`    vertLightDirectionVC = vertexVC.xyz - lightPositionVC${e};`,"    float distanceVC = length(vertLightDirectionVC);","    vertLightDirectionVC = normalize(vertLightDirectionVC);","    attenuation = 1.0 /",`      (lightAttenuation${e}.x`,`       + lightAttenuation${e}.y * distanceVC`,`       + lightAttenuation${e}.z * distanceVC * distanceVC);`,"    // per OpenGL standard cone angle is 90 or less for a spot light",`    if (lightConeAngle${e} <= 90.0)`,"      {",`      float coneDot = dot(vertLightDirectionVC, lightDirectionVC${e});`,"      // if inside the cone",`      if (coneDot >= cos(radians(lightConeAngle${e})))`,"        {",`        attenuation = attenuation * pow(coneDot, lightExponent${e});`,"        }","      else","        {","        attenuation = 0.0;","        }","      }","    }","    df = max(0.0, attenuation*dot(normalVCVSOutput, -vertLightDirectionVC));",`    diffuseL += ((df) * lightColor${e});`,"    if (dot(normalVCVSOutput, vertLightDirectionVC) < 0.0)","      {",`      float sf = attenuation*pow( max(0.0, dot(lightHalfAngleVC${e},normalVCVSOutput)), specularPower);`,`    specularL += ((sf) * lightColor${e});`,"    }"]);s=s.concat(["  diffuseL = diffuseL * diffuseColor;","  specularL = specularL * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"]),o=UM.substitute(o,"//VTK::Light::Impl",s,!1).result;break;default:im("bad light complexity")}e.Fragment=o},e.replaceShaderNormal=(n,r,o)=>{if(t.lastBoundBO.getReferenceByName("lastLightComplexity")>0){let r=n.Vertex,i=n.Geometry,a=n.Fragment;t.lastBoundBO.getCABO().getNormalOffset()?(r=UM.substitute(r,"//VTK::Normal::Dec",["attribute vec3 normalMC;","uniform mat3 normalMatrix;","varying vec3 normalVCVSOutput;"]).result,r=UM.substitute(r,"//VTK::Normal::Impl",["normalVCVSOutput = normalMatrix * normalMC;"]).result,i=UM.substitute(i,"//VTK::Normal::Dec",["in vec3 normalVCVSOutput[];","out vec3 normalVCGSOutput;"]).result,i=UM.substitute(i,"//VTK::Normal::Impl",["normalVCGSOutput = normalVCVSOutput[i];"]).result,a=UM.substitute(a,"//VTK::Normal::Dec",["varying vec3 normalVCVSOutput;"]).result,a=UM.substitute(a,"//VTK::Normal::Impl",["vec3 normalVCVSOutput = normalize(normalVCVSOutput);","  if (gl_FrontFacing == false) { normalVCVSOutput = -normalVCVSOutput; }"]).result):t.haveCellNormals?(a=UM.substitute(a,"//VTK::Normal::Dec",["uniform mat3 normalMatrix;","uniform samplerBuffer textureN;"]).result,a=UM.substitute(a,"//VTK::Normal::Impl",["vec3 normalVCVSOutput = normalize(normalMatrix *","    texelFetchBuffer(textureN, gl_PrimitiveID + PrimitiveIDOffset).xyz);","  if (gl_FrontFacing == false) { normalVCVSOutput = -normalVCVSOutput; }"]).result):e.getOpenGLMode(o.getProperty().getRepresentation(),t.lastBoundBO.getPrimitiveType())===t.context.LINES?(a=UM.substitute(a,"//VTK::UniformFlow::Impl",["  vec3 fdx = vec3(dFdx(vertexVC.x),dFdx(vertexVC.y),dFdx(vertexVC.z));","  vec3 fdy = vec3(dFdy(vertexVC.x),dFdy(vertexVC.y),dFdy(vertexVC.z));","  //VTK::UniformFlow::Impl"]).result,a=UM.substitute(a,"//VTK::Normal::Impl",["vec3 normalVCVSOutput;","  fdx = normalize(fdx);","  fdy = normalize(fdy);","  if (abs(fdx.x) > 0.0)","    { normalVCVSOutput = normalize(cross(vec3(fdx.y, -fdx.x, 0.0), fdx)); }","  else { normalVCVSOutput = normalize(cross(vec3(fdy.y, -fdy.x, 0.0), fdy));}"]).result):(a=UM.substitute(a,"//VTK::Normal::Dec",["uniform int cameraParallel;"]).result,a=UM.substitute(a,"//VTK::UniformFlow::Impl",["  vec3 fdx = dFdx(vertexVC.xyz);","  vec3 fdy = dFdy(vertexVC.xyz);","  //VTK::UniformFlow::Impl"]).result,a=UM.substitute(a,"//VTK::Normal::Impl",["  fdx = normalize(fdx);","  fdy = normalize(fdy);","  vec3 normalVCVSOutput = normalize(cross(fdx,fdy));","  if (cameraParallel == 1 && normalVCVSOutput.z < 0.0) { normalVCVSOutput = -1.0*normalVCVSOutput; }","  if (cameraParallel == 0 && dot(normalVCVSOutput,vertexVC.xyz) > 0.0) { normalVCVSOutput = -1.0*normalVCVSOutput; }"]).result),n.Vertex=r,n.Geometry=i,n.Fragment=a}},e.replaceShaderPositionVC=(e,n,r)=>{let o=e.Vertex,i=e.Geometry,a=e.Fragment;r.getProperty().getRepresentation()!==em.POINTS&&t.lastBoundBO.getPrimitiveType()!==JM.Points||(o=UM.substitute(o,"//VTK::PositionVC::Impl",["//VTK::PositionVC::Impl",`  gl_PointSize = ${r.getProperty().getPointSize()}.0;`],!1).result),t.lastBoundBO.getReferenceByName("lastLightComplexity")>0?(o=UM.substitute(o,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,o=UM.substitute(o,"//VTK::PositionVC::Impl",["vertexVCVSOutput = MCVCMatrix * vertexMC;","  gl_Position = MCPCMatrix * vertexMC;"]).result,o=UM.substitute(o,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;","uniform mat4 MCVCMatrix;"]).result,i=UM.substitute(i,"//VTK::PositionVC::Dec",["in vec4 vertexVCVSOutput[];","out vec4 vertexVCGSOutput;"]).result,i=UM.substitute(i,"//VTK::PositionVC::Impl",["vertexVCGSOutput = vertexVCVSOutput[i];"]).result,a=UM.substitute(a,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,a=UM.substitute(a,"//VTK::PositionVC::Impl",["vec4 vertexVC = vertexVCVSOutput;"]).result):(o=UM.substitute(o,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;"]).result,o=UM.substitute(o,"//VTK::PositionVC::Impl",["  gl_Position = MCPCMatrix * vertexMC;"]).result),e.Vertex=o,e.Geometry=i,e.Fragment=a},e.replaceShaderTCoord=(e,n,r)=>{if(t.lastBoundBO.getCABO().getTCoordOffset()){let n=e.Vertex,r=e.Geometry,o=e.Fragment;if(t.drawingEdges)return;n=UM.substitute(n,"//VTK::TCoord::Impl","tcoordVCVSOutput = tcoordMC;").result;const i=t.openGLActor.getActiveTextures();let a=2,s=2;if(i&&i.length>0&&(a=i[0].getComponents(),i[0].getTarget()===t.context.TEXTURE_CUBE_MAP&&(s=3)),t.renderable.getColorTextureMap()&&(a=t.renderable.getColorTextureMap().getPointData().getScalars().getNumberOfComponents(),s=2),2===s){if(n=UM.substitute(n,"//VTK::TCoord::Dec","attribute vec2 tcoordMC; varying vec2 tcoordVCVSOutput;").result,r=UM.substitute(r,"//VTK::TCoord::Dec",["in vec2 tcoordVCVSOutput[];","out vec2 tcoordVCGSOutput;"]).result,r=UM.substitute(r,"//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];").result,o=UM.substitute(o,"//VTK::TCoord::Dec",["varying vec2 tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,i&&i.length>=1)switch(a){case 1:o=UM.substitute(o,"//VTK::TCoord::Impl",["vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","gl_FragData[0] = clamp(gl_FragData[0],0.0,1.0)*","  vec4(tcolor.r,tcolor.r,tcolor.r,1.0);"]).result;break;case 2:o=UM.substitute(o,"//VTK::TCoord::Impl",["vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","gl_FragData[0] = clamp(gl_FragData[0],0.0,1.0)*","  vec4(tcolor.r,tcolor.r,tcolor.r,tcolor.g);"]).result;break;default:o=UM.substitute(o,"//VTK::TCoord::Impl","gl_FragData[0] = clamp(gl_FragData[0],0.0,1.0)*texture2D(texture1, tcoordVCVSOutput.st);").result}}else switch(n=UM.substitute(n,"//VTK::TCoord::Dec","attribute vec3 tcoordMC; varying vec3 tcoordVCVSOutput;").result,r=UM.substitute(r,"//VTK::TCoord::Dec",["in vec3 tcoordVCVSOutput[];","out vec3 tcoordVCGSOutput;"]).result,r=UM.substitute(r,"//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];").result,o=UM.substitute(o,"//VTK::TCoord::Dec",["varying vec3 tcoordVCVSOutput;","uniform samplerCube texture1;"]).result,a){case 1:o=UM.substitute(o,"//VTK::TCoord::Impl",["vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","gl_FragData[0] = clamp(gl_FragData[0],0.0,1.0)*","  vec4(tcolor.r,tcolor.r,tcolor.r,1.0);"]).result;break;case 2:o=UM.substitute(o,"//VTK::TCoord::Impl",["vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","gl_FragData[0] = clamp(gl_FragData[0],0.0,1.0)*","  vec4(tcolor.r,tcolor.r,tcolor.r,tcolor.g);"]).result;break;default:o=UM.substitute(o,"//VTK::TCoord::Impl","gl_FragData[0] = clamp(gl_FragData[0],0.0,1.0)*textureCube(texture1, tcoordVCVSOutput);").result}e.Vertex=n,e.Geometry=r,e.Fragment=o}},e.replaceShaderClip=(e,n,r)=>{let o=e.Vertex,i=e.Fragment;if(t.renderable.getNumberOfClippingPlanes()){let e=t.renderable.getNumberOfClippingPlanes();e>6&&(Ed.vtkErrorMacro("OpenGL has a limit of 6 clipping planes"),e=6),o=UM.substitute(o,"//VTK::Clip::Dec",["uniform int numClipPlanes;","uniform vec4 clipPlanes[6];","varying float clipDistancesVSOutput[6];"]).result,o=UM.substitute(o,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < 6; planeNum++)","    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    clipDistancesVSOutput[planeNum] = dot(clipPlanes[planeNum], vertexMC);","    }"]).result,i=UM.substitute(i,"//VTK::Clip::Dec",["uniform int numClipPlanes;","varying float clipDistancesVSOutput[6];"]).result,i=UM.substitute(i,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < 6; planeNum++)","    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    if (clipDistancesVSOutput[planeNum] < 0.0) discard;","    }"]).result}e.Vertex=o,e.Fragment=i},e.getCoincidentParameters=(e,n)=>{let r=null;const o=n.getProperty();if(t.renderable.getResolveCoincidentTopology()||o.getEdgeVisibility()&&o.getRepresentation()===em.SURFACE){const e=t.lastBoundBO.getPrimitiveType();e===JM.Points||o.getRepresentation()===em.POINTS?r=t.renderable.getCoincidentTopologyPointOffsetParameter():e===JM.Lines||o.getRepresentation()===em.WIREFRAME?r=t.renderable.getCoincidentTopologyLineOffsetParameters():e!==JM.Tris&&e!==JM.TriStrips||(r=t.renderable.getCoincidentTopologyPolygonOffsetParameters()),e!==JM.TrisEdges&&e!==JM.TriStripsEdges||(r=t.renderable.getCoincidentTopologyPolygonOffsetParameters(),r.factor/=2,r.offset/=2)}return r},e.replaceShaderPicking=(e,t,n)=>{let r=e.Fragment;r=UM.substitute(r,"//VTK::Picking::Dec",["uniform vec3 mapperIndex;","uniform int picking;"]).result,r=UM.substitute(r,"//VTK::Picking::Impl","  gl_FragData[0] = picking != 0 ? vec4(mapperIndex,1.0) : gl_FragData[0];").result,e.Fragment=r},e.replaceShaderValues=(n,r,o)=>{if(e.replaceShaderColor(n,r,o),e.replaceShaderNormal(n,r,o),e.replaceShaderLight(n,r,o),e.replaceShaderTCoord(n,r,o),e.replaceShaderPicking(n,r,o),e.replaceShaderClip(n,r,o),e.replaceShaderCoincidentOffset(n,r,o),e.replaceShaderPositionVC(n,r,o),t.haveSeenDepthRequest){let e=n.Fragment;e=UM.substitute(e,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,e=UM.substitute(e,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result,n.Fragment=e}},e.getNeedToRebuildShaders=(n,r,o)=>{let i=0,a=0;const s=n.getPrimitiveType(),l=t.currentInput;let u=!1;const c=l.getPointData().getNormals(),d=l.getCellData().getNormals(),g=o.getProperty().getInterpolation()===tm.FLAT,p=o.getProperty().getRepresentation(),f=e.getOpenGLMode(p,s);if(f===t.context.TRIANGLES||d&&!c||!g&&c?u=!0:g||f!==t.context.LINES||(u=!0),o.getProperty().getLighting()&&u){i=0;const e=r.getLightsByReference();for(let t=0;t<e.length;++t){const n=e[t];n.getSwitch()>0&&(a++,0===i&&(i=1)),1===i&&(a>1||1!==n.getIntensity()||!n.lightTypeIsHeadLight())&&(i=2),i<3&&n.getPositional()&&(i=3)}}let h=!1;const M=t.lastBoundBO.getReferenceByName("lastLightComplexity"),m=t.lastBoundBO.getReferenceByName("lastLightCount");return M===i&&m===a||(t.lastBoundBO.set({lastLightComplexity:i},!0),t.lastBoundBO.set({lastLightCount:a},!0),h=!0),!!(t.lastHaveSeenDepthRequest!==t.haveSeenDepthRequest||0===n.getProgram()||n.getShaderSourceTime().getMTime()<e.getMTime()||n.getShaderSourceTime().getMTime()<o.getMTime()||n.getShaderSourceTime().getMTime()<t.renderable.getMTime()||n.getShaderSourceTime().getMTime()<t.currentInput.getMTime()||h)&&(t.lastHaveSeenDepthRequest=t.haveSeenDepthRequest,!0)},e.updateShaders=(n,r,o)=>{if(t.lastBoundBO=n,e.getNeedToRebuildShaders(n,r,o)){const i={Vertex:null,Fragment:null,Geometry:null};e.buildShaders(i,r,o);const a=t.openGLRenderWindow.getShaderCache().readyShaderProgramArray(i.Vertex,i.Fragment,i.Geometry);a!==n.getProgram()&&(n.setProgram(a),n.getVAO().releaseGraphicsResources()),n.getShaderSourceTime().modified()}else t.openGLRenderWindow.getShaderCache().readyShaderProgram(n.getProgram());n.getVAO().bind(),e.setMapperShaderParameters(n,r,o),e.setPropertyShaderParameters(n,r,o),e.setCameraShaderParameters(n,r,o),e.setLightingShaderParameters(n,r,o);const i=t.renderable.getViewSpecificProperties().ShadersCallbacks;i&&i.forEach(e=>{e.callback(e.userData,n,r,o)})},e.setMapperShaderParameters=(n,r,o)=>{if(n.getProgram().isUniformUsed("PrimitiveIDOffset")&&n.getProgram().setUniformi("PrimitiveIDOffset",t.primitiveIDOffset),n.getCABO().getElementCount()&&(t.VBOBuildTime.getMTime()>n.getAttributeUpdateTime().getMTime()||n.getShaderSourceTime().getMTime()>n.getAttributeUpdateTime().getMTime())){const e=t.lastBoundBO.getReferenceByName("lastLightComplexity");n.getProgram().isAttributeUsed("vertexMC")&&(n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"vertexMC",n.getCABO().getVertexOffset(),n.getCABO().getStride(),t.context.FLOAT,3,!1)||im("Error setting vertexMC in shader VAO.")),n.getProgram().isAttributeUsed("normalMC")&&n.getCABO().getNormalOffset()&&e>0?n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"normalMC",n.getCABO().getNormalOffset(),n.getCABO().getStride(),t.context.FLOAT,3,!1)||im("Error setting normalMC in shader VAO."):n.getVAO().removeAttributeArray("normalMC"),t.renderable.getCustomShaderAttributes().forEach((e,r)=>{n.getProgram().isAttributeUsed(`${e}MC`)&&(n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),`${e}MC`,n.getCABO().getCustomData()[r].offset,n.getCABO().getStride(),t.context.FLOAT,n.getCABO().getCustomData()[r].components,!1)||im(`Error setting ${e}MC in shader VAO.`))}),n.getProgram().isAttributeUsed("tcoordMC")&&n.getCABO().getTCoordOffset()?n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"tcoordMC",n.getCABO().getTCoordOffset(),n.getCABO().getStride(),t.context.FLOAT,n.getCABO().getTCoordComponents(),!1)||im("Error setting tcoordMC in shader VAO."):n.getVAO().removeAttributeArray("tcoordMC"),n.getProgram().isAttributeUsed("scalarColor")&&n.getCABO().getColorComponents()?n.getVAO().addAttributeArray(n.getProgram(),n.getCABO().getColorBO(),"scalarColor",n.getCABO().getColorOffset(),n.getCABO().getColorBOStride(),t.context.UNSIGNED_BYTE,4,!0)||im("Error setting scalarColor in shader VAO."):n.getVAO().removeAttributeArray("scalarColor"),n.getAttributeUpdateTime().modified()}if(t.renderable.getNumberOfClippingPlanes()){let e=t.renderable.getNumberOfClippingPlanes();e>6&&(Ed.vtkErrorMacro("OpenGL has a limit of 6 clipping planes"),e=6);const r=[];for(let n=0;n<e;n++){const e=[];t.renderable.getClippingPlaneInDataCoords(o.getMatrix(),n,e);for(let t=0;t<4;t++)r.push(e[t])}n.getProgram().setUniformi("numClipPlanes",e),n.getProgram().setUniform4fv("clipPlanes",6,r)}t.internalColorTexture&&n.getProgram().isUniformUsed("texture1")&&n.getProgram().setUniformi("texture1",t.internalColorTexture.getTextureUnit());const i=t.openGLActor.getActiveTextures();if(i)for(let e=0;e<i.length;++e){const t=i[e].getTextureUnit(),r=`texture${t+1}`;n.getProgram().isUniformUsed(r)&&n.getProgram().setUniformi(r,t)}if(t.haveSeenDepthRequest&&n.getProgram().setUniformi("depthRequest",t.renderDepth?1:0),n.getProgram().isUniformUsed("coffset")){const t=e.getCoincidentParameters(r,o);n.getProgram().setUniformf("coffset",t.offset),n.getProgram().isUniformUsed("cfactor")&&n.getProgram().setUniformf("cfactor",t.factor)}const a=t.openGLRenderer.getSelector();n.getProgram().setUniform3fArray("mapperIndex",a?a.getPropColorValue():[0,0,0]),n.getProgram().setUniformi("picking",a?a.getCurrentPass()+1:0)},e.setLightingShaderParameters=(e,n,r)=>{const o=t.lastBoundBO.getReferenceByName("lastLightComplexity");if(o<2)return;const s=e.getProgram();let l=0;const u=n.getLightsByReference();for(let i=0;i<u.length;++i){const e=u[i];if(e.getSwitch()>0){const r=e.getColorByReference(),o=e.getIntensity();t.lightColor[0]=r[0]*o,t.lightColor[1]=r[1]*o,t.lightColor[2]=r[2]*o;const i=e.getDirection(),a=n.getActiveCamera().getViewMatrix(),u=[...i];e.lightTypeIsSceneLight()&&(u[0]=a[0]*i[0]+a[1]*i[1]+a[2]*i[2],u[1]=a[4]*i[0]+a[5]*i[1]+a[6]*i[2],u[2]=a[8]*i[0]+a[9]*i[1]+a[10]*i[2],Bd(u)),t.lightDirection[0]=u[0],t.lightDirection[1]=u[1],t.lightDirection[2]=u[2],t.lightHalfAngle[0]=-t.lightDirection[0],t.lightHalfAngle[1]=-t.lightDirection[1],t.lightHalfAngle[2]=1-t.lightDirection[2],Bd(t.lightDirection),s.setUniform3fArray(`lightColor${l}`,t.lightColor),s.setUniform3fArray(`lightDirectionVC${l}`,t.lightDirection),s.setUniform3fArray(`lightHalfAngleVC${l}`,t.lightHalfAngle),l++}}if(o<3)return;const c=n.getActiveCamera().getViewMatrix();i.transpose(c,c),l=0;for(let t=0;t<u.length;++t){const e=u[t];if(e.getSwitch()>0){const t=e.getTransformedPosition(),n=a.fromValues(t[0],t[1],t[2]);a.transformMat4(n,n,c),s.setUniform3fArray(`lightAttenuation${l}`,e.getAttenuationValuesByReference()),s.setUniformi(`lightPositional${l}`,e.getPositional()),s.setUniformf(`lightExponent${l}`,e.getExponent()),s.setUniformf(`lightConeAngle${l}`,e.getConeAngle()),s.setUniform3fArray(`lightPositionVC${l}`,[n[0],n[1],n[2]]),l++}}},e.setCameraShaderParameters=(e,r,a)=>{const s=e.getProgram(),l=t.openGLCamera.getKeyMatrices(r),u=r.getActiveCamera(),c=t.openGLCamera.getKeyMatrixTime().getMTime(),d=s.getLastCameraMTime(),g=e.getCABO().getCoordShiftAndScaleEnabled()?e.getCABO().getInverseShiftAndScaleMatrix():null,p=a.getIsIdentity(),f=p?{mcwc:null,normalMatrix:null}:t.openGLActor.getKeyMatrices();s.setUniformMatrix("MCPCMatrix",n([l.wcpc,f.mcwc,g],i,t.tmpMat4)),s.isUniformUsed("MCVCMatrix")&&s.setUniformMatrix("MCVCMatrix",n([l.wcvc,f.mcwc,g],i,t.tmpMat4)),s.isUniformUsed("normalMatrix")&&s.setUniformMatrix3x3("normalMatrix",n([l.normalMatrix,f.normalMatrix],o,t.tmpMat3)),d!==c&&(s.isUniformUsed("cameraParallel")&&s.setUniformi("cameraParallel",u.getParallelProjection()),s.setLastCameraMTime(c)),p||s.setLastCameraMTime(0)},e.setPropertyShaderParameters=(e,n,r)=>{const o=e.getProgram(),i=r.getProperty(),a=i.getOpacity();o.setUniformf("opacityUniform",a);const s=t.drawingEdges?i.getEdgeColorByReference():i.getAmbientColorByReference();o.setUniform3fArray("ambientColorUniform",s),o.setUniformf("ambient",i.getAmbient());const l=t.drawingEdges?i.getEdgeColorByReference():i.getDiffuseColorByReference();if(o.setUniform3fArray("diffuseColorUniform",l),o.setUniformf("diffuse",i.getDiffuse()),t.lastBoundBO.getReferenceByName("lastLightComplexity")<1)return;const u=i.getSpecularColorByReference();o.setUniform3fArray("specularColorUniform",u),o.setUniformf("specular",i.getSpecular()),o.setUniformf("specularPowerUniform",i.getSpecularPower())},e.renderPieceStart=(n,r)=>{t.primitiveIDOffset=0,t.openGLRenderer.getSelector()&&(t.openGLRenderer.getSelector().getCurrentPass(),t.openGLRenderer.getSelector().renderProp(r)),e.updateBufferObjects(n,r),t.renderable.getColorTextureMap()&&t.internalColorTexture.activate(),t.lastBoundBO=null},e.renderPieceDraw=(n,r)=>{const o=r.getProperty().getRepresentation(),i=t.context,a=r.getProperty().getEdgeVisibility()&&o===em.SURFACE;i.lineWidth(r.getProperty().getLineWidth());for(let s=JM.Start;s<JM.End;s++){const l=t.primitives[s].getCABO();if(l.getElementCount()){t.drawingEdges=a&&(s===JM.TrisEdges||s===JM.TriStripsEdges);const u=e.getOpenGLMode(o,s);t.drawingEdges&&t.renderDepth||(e.updateShaders(t.primitives[s],n,r),i.drawArrays(u,0,l.getElementCount()));const c=(u===i.POINTS?1:0)||(u===i.LINES?2:3);t.primitiveIDOffset+=l.getElementCount()/c}}i.lineWidth(1)},e.getOpenGLMode=(e,n)=>e===em.POINTS||n===JM.Points?t.context.POINTS:e===em.WIREFRAME||n===JM.Lines||n===JM.TrisEdges||n===JM.TriStripsEdges?t.context.LINES:t.context.TRIANGLES,e.renderPieceFinish=(e,n)=>{t.LastBoundBO&&t.LastBoundBO.getVAO().release(),t.renderable.getColorTextureMap()&&t.internalColorTexture.deactivate()},e.renderPiece=(n,r)=>{if(e.invokeEvent(am),t.renderable.getStatic()||t.renderable.update(),t.currentInput=t.renderable.getInputData(),e.invokeEvent(sm),!t.currentInput)return void im("No input!");if(!t.currentInput.getPoints||!t.currentInput.getPoints().getNumberOfValues())return;const o=t.context,i=r.getProperty().getBackfaceCulling(),a=r.getProperty().getFrontfaceCulling();i||a?a?(t.openGLRenderWindow.enableCullFace(),o.cullFace(o.FRONT)):(t.openGLRenderWindow.enableCullFace(),o.cullFace(o.BACK)):t.openGLRenderWindow.disableCullFace(),e.renderPieceStart(n,r),e.renderPieceDraw(n,r),e.renderPieceFinish(n,r)},e.computeBounds=(n,r)=>{e.getInput()?t.bounds=e.getInput().getBounds():Qd(t.bounds)},e.updateBufferObjects=(t,n)=>{e.getNeedToRebuildBufferObjects(t,n)&&e.buildBufferObjects(t,n)},e.getNeedToRebuildBufferObjects=(n,r)=>{const o=t.VBOBuildTime.getMTime();return o<e.getMTime()||o<t.renderable.getMTime()||o<r.getMTime()||o<t.currentInput.getMTime()},e.buildBufferObjects=(e,n)=>{const r=t.currentInput;if(null===r)return;t.renderable.mapScalars(r,1);const o=t.renderable.getColorMapColors();t.haveCellScalars=!1;const i=t.renderable.getScalarMode();t.renderable.getScalarVisibility()&&(i!==nm.USE_CELL_DATA&&i!==nm.USE_CELL_FIELD_DATA&&i!==nm.USE_FIELD_DATA&&r.getPointData().getScalars()||i===nm.USE_POINT_FIELD_DATA||!o||(t.haveCellScalars=!0));let a=n.getProperty().getInterpolation()!==tm.FLAT?r.getPointData().getNormals():null;null===a&&r.getCellData().getNormals()&&(t.haveCellNormals=!0,a=r.getCellData().getNormals());const s=n.getProperty().getRepresentation();let l=r.getPointData().getTCoords();if(t.openGLActor.getActiveTextures()||(l=null),t.renderable.getColorCoordinates()){l=t.renderable.getColorCoordinates(),t.internalColorTexture||(t.internalColorTexture=Vh.newInstance());const e=t.internalColorTexture;e.setMinificationFilter(rm.NEAREST),e.setMagnificationFilter(rm.NEAREST),e.setWrapS(om.CLAMP_TO_EDGE),e.setWrapT(om.CLAMP_TO_EDGE),e.setOpenGLRenderWindow(t.openGLRenderWindow);const n=t.renderable.getColorTextureMap(),r=n.getExtent(),o=n.getPointData().getScalars();e.create2DFromRaw(r[1]-r[0]+1,r[3]-r[2]+1,o.getNumberOfComponents(),o.getDataType(),o.getData()),e.activate(),e.sendParameters(),e.deactivate()}const u=`${r.getMTime()}A${s}B${r.getMTime()}`+`C${a?a.getMTime():1}D${o?o.getMTime():1}`+`E${n.getProperty().getEdgeVisibility()}`+`F${l?l.getMTime():1}`;if(t.VBOBuildString!==u){const e=r.getPoints(),i={points:e,normals:a,tcoords:l,colors:o,cellOffset:0,haveCellScalars:t.haveCellScalars,haveCellNormals:t.haveCellNormals,customAttributes:t.renderable.getCustomShaderAttributes().map(e=>r.getPointData().getArrayByName(e))};i.cellOffset+=t.primitives[JM.Points].getCABO().createVBO(r.getVerts(),"verts",s,i),i.cellOffset+=t.primitives[JM.Lines].getCABO().createVBO(r.getLines(),"lines",s,i),i.cellOffset+=t.primitives[JM.Tris].getCABO().createVBO(r.getPolys(),"polys",s,i),i.cellOffset+=t.primitives[JM.TriStrips].getCABO().createVBO(r.getStrips(),"strips",s,i),n.getProperty().getEdgeVisibility()&&s===em.SURFACE?(t.primitives[JM.TrisEdges].getCABO().createVBO(r.getPolys(),"polys",em.WIREFRAME,{points:e,normals:a,tcoords:null,colors:null,cellOffset:0,haveCellScalars:!1,haveCellNormals:!1}),t.primitives[JM.TriStripsEdges].getCABO().createVBO(r.getStrips(),"strips",em.WIREFRAME,{points:e,normals:a,tcoords:null,colors:null,cellOffset:0,haveCellScalars:!1,haveCellNormals:!1})):(t.primitives[JM.TrisEdges].releaseGraphicsResources(t.openGLRenderWindow),t.primitives[JM.TriStripsEdges].releaseGraphicsResources(t.openGLRenderWindow)),t.VBOBuildTime.modified(),t.VBOBuildString=u}}}(e,t)}var cm={newInstance:Ed.newInstance(um,"vtkOpenGLPolyDataMapper"),extend:um};const{vtkErrorMacro:dm}=Ed,{Representation:gm}=Bg,{ObjectType:pm}=fM,{PassTypes:fm}=vM,hm={type:"StartEvent"},Mm={type:"EndEvent"},mm={normalMatrix:null,mcpcMatrix:null,mcwcMatrix:null};function Am(e,t,n={}){Object.assign(t,mm,n),cm.extend(e,t,n),t.tmpMat3=o.create(),t.normalMatrix=o.create(),t.mcpcMatrix=i.create(),t.mcvcMatrix=i.create(),t.tmpColor=[],t.glyphBOBuildTime={},Ed.obj(t.glyphBOBuildTime,{mtime:0}),function(e,t){t.classHierarchy.push("vtkOpenGLGlyph3DMapper");const n=Object.assign({},e);e.renderPiece=(n,r)=>{if(e.invokeEvent(hm),t.renderable.getStatic()||t.renderable.update(),t.currentInput=t.renderable.getInputData(1),e.invokeEvent(Mm),!t.currentInput)return void dm("No input!");if(!t.currentInput.getPoints||!t.currentInput.getPoints().getNumberOfValues())return;const o=t.context;t.openGLRenderWindow.getWebgl2()?(t.hardwareSupport=!0,t.extension=null):t.extension||(t.extension=t.context.getExtension("ANGLE_instanced_arrays"),t.hardwareSupport=!!t.extension);const i=r.getProperty().getBackfaceCulling(),a=r.getProperty().getFrontfaceCulling();i||a?a?(t.openGLRenderWindow.enableCullFace(),o.cullFace(o.FRONT)):(t.openGLRenderWindow.enableCullFace(),o.cullFace(o.BACK)):t.openGLRenderWindow.disableCullFace(),e.renderPieceStart(n,r),e.renderPieceDraw(n,r),e.renderPieceFinish(n,r)},e.multiply4x4WithOffset=(e,t,n,r)=>{const o=t[0],i=t[1],a=t[2],s=t[3],l=t[4],u=t[5],c=t[6],d=t[7],g=t[8],p=t[9],f=t[10],h=t[11],M=t[12],m=t[13],A=t[14],y=t[15];let T=n[r],D=n[r+1],N=n[r+2],x=n[r+3];e[0]=T*o+D*l+N*g+x*M,e[1]=T*i+D*u+N*p+x*m,e[2]=T*a+D*c+N*f+x*A,e[3]=T*s+D*d+N*h+x*y,T=n[r+4],D=n[r+5],N=n[r+6],x=n[r+7],e[4]=T*o+D*l+N*g+x*M,e[5]=T*i+D*u+N*p+x*m,e[6]=T*a+D*c+N*f+x*A,e[7]=T*s+D*d+N*h+x*y,T=n[r+8],D=n[r+9],N=n[r+10],x=n[r+11],e[8]=T*o+D*l+N*g+x*M,e[9]=T*i+D*u+N*p+x*m,e[10]=T*a+D*c+N*f+x*A,e[11]=T*s+D*d+N*h+x*y,T=n[r+12],D=n[r+13],N=n[r+14],x=n[r+15],e[12]=T*o+D*l+N*g+x*M,e[13]=T*i+D*u+N*p+x*m,e[14]=T*a+D*c+N*f+x*A,e[15]=T*s+D*d+N*h+x*y},e.replaceShaderNormal=(e,r,o)=>{if(t.hardwareSupport&&t.lastBoundBO.getReferenceByName("lastLightComplexity")>0){let n=e.Vertex;t.lastBoundBO.getCABO().getNormalOffset()&&(n=UM.substitute(n,"//VTK::Normal::Dec",["attribute vec3 normalMC;","attribute mat3 gNormal;","uniform mat3 normalMatrix;","varying vec3 normalVCVSOutput;"]).result,n=UM.substitute(n,"//VTK::Normal::Impl",["normalVCVSOutput = normalMatrix * gNormal * normalMC;"]).result),e.Vertex=n}n.replaceShaderNormal(e,r,o)},e.replaceShaderColor=(e,r,o)=>{if(t.hardwareSupport&&t.renderable.getColorArray()){let n=e.Vertex,r=e.Geometry,o=e.Fragment;const i=t.lastBoundBO.getReferenceByName("lastLightComplexity");let a=["uniform float ambient;","uniform float diffuse;","uniform float specular;","uniform float opacityUniform; // the fragment opacity"];i&&(a=a.concat(["uniform vec3 specularColorUniform;","uniform float specularPowerUniform;"]));let s=["vec3 ambientColor;","  vec3 diffuseColor;","  float opacity;"];i&&(s=s.concat(["  vec3 specularColor;","  float specularPower;"])),s=s.concat(["  opacity = opacityUniform;"]),i&&(s=s.concat(["  specularColor = specularColorUniform;","  specularPower = specularPowerUniform;"])),t.drawingEdges||(a=a.concat(["varying vec4 vertexColorVSOutput;"]),n=UM.substitute(n,"//VTK::Color::Dec",["attribute vec4 gColor;","varying vec4 vertexColorVSOutput;"]).result,n=UM.substitute(n,"//VTK::Color::Impl",["vertexColorVSOutput = gColor;"]).result,r=UM.substitute(r,"//VTK::Color::Dec",["in vec4 vertexColorVSOutput[];","out vec4 vertexColorGSOutput;"]).result,r=UM.substitute(r,"//VTK::Color::Impl",["vertexColorGSOutput = vertexColorVSOutput[i];"]).result,s=s.concat(["  diffuseColor = vertexColorVSOutput.rgb;","  ambientColor = vertexColorVSOutput.rgb;","  opacity = opacity*vertexColorVSOutput.a;"])),o=UM.substitute(o,"//VTK::Color::Impl",s).result,o=UM.substitute(o,"//VTK::Color::Dec",a).result,e.Vertex=n,e.Geometry=r,e.Fragment=o}n.replaceShaderColor(e,r,o)},e.replaceShaderPositionVC=(e,r,o)=>{if(t.hardwareSupport){let n=e.Vertex;t.lastBoundBO.getReferenceByName("lastLightComplexity")>0?(n=UM.substitute(n,"//VTK::PositionVC::Impl",["vec4 gVertexMC = gMatrix * vertexMC;","vertexVCVSOutput = MCVCMatrix * gVertexMC;","  gl_Position = MCPCMatrix * gVertexMC;"]).result,n=UM.substitute(n,"//VTK::Camera::Dec",["attribute mat4 gMatrix;","uniform mat4 MCPCMatrix;","uniform mat4 MCVCMatrix;"]).result):(n=UM.substitute(n,"//VTK::Camera::Dec",["attribute mat4 gMatrix;","uniform mat4 MCPCMatrix;"]).result,n=UM.substitute(n,"//VTK::PositionVC::Impl",["vec4 gVertexMC = gMatrix * vertexMC;","  gl_Position = MCPCMatrix * gVertexMC;"]).result),e.Vertex=n}n.replaceShaderPositionVC(e,r,o)},e.replaceShaderPicking=(e,r,o)=>{if(t.hardwareSupport){let t=e.Fragment,n=e.Vertex;n=UM.substitute(n,"//VTK::Picking::Dec",["attribute vec3 mapperIndexVS;","varying vec3 mapperIndexVSOutput;"]).result,n=UM.substitute(n,"//VTK::Picking::Impl","  mapperIndexVSOutput = mapperIndexVS;").result,e.Vertex=n,t=UM.substitute(t,"//VTK::Picking::Dec",["varying vec3 mapperIndexVSOutput;","uniform vec3 mapperIndex;","uniform int picking;"]).result,t=UM.substitute(t,"//VTK::Picking::Impl",["  vec4 pickColor = picking == 2 ? vec4(mapperIndexVSOutput,1.0) : vec4(mapperIndex,1.0);","  gl_FragData[0] = picking != 0 ? pickColor : gl_FragData[0];"]).result,e.Fragment=t}else n.replaceShaderPicking(e,r,o)},e.updateGlyphShaderParameters=(n,r,o,i,a,s,l,u)=>{const c=o.getProgram();if(n){const e=t.normalMatrix,n=9*l,r=t.tmpMat3,o=e[0],i=e[1],a=e[2],u=e[3],d=e[4],g=e[5],p=e[6],f=e[7],h=e[8],M=s[n],m=s[n+1],A=s[n+2],y=s[n+3],T=s[n+4],D=s[n+5],N=s[n+6],x=s[n+7],I=s[n+8];r[0]=M*o+m*u+A*p,r[1]=M*i+m*d+A*f,r[2]=M*a+m*g+A*h,r[3]=y*o+T*u+D*p,r[4]=y*i+T*d+D*f,r[5]=y*a+T*g+D*h,r[6]=N*o+x*u+I*p,r[7]=N*i+x*d+I*f,r[8]=N*a+x*g+I*h,c.setUniformMatrix3x3("normalMatrix",t.tmpMat3)}if(e.multiply4x4WithOffset(t.tmpMat4,t.mcpcMatrix,a,16*l),c.setUniformMatrix("MCPCMatrix",t.tmpMat4),r&&(e.multiply4x4WithOffset(t.tmpMat4,t.mcvcMatrix,a,16*l),c.setUniformMatrix("MCVCMatrix",t.tmpMat4)),i){const e=i.getData();t.tmpColor[0]=e[4*l]/255,t.tmpColor[1]=e[4*l+1]/255,t.tmpColor[2]=e[4*l+2]/255,c.setUniform3fArray("ambientColorUniform",t.tmpColor),c.setUniform3fArray("diffuseColorUniform",t.tmpColor)}u&&c.setUniform3fArray("mapperIndex",u.getPropColorValue())},e.renderPieceDraw=(n,r)=>{const a=r.getProperty().getRepresentation(),s=t.context,l=r.getProperty().getEdgeVisibility()&&a===gm.SURFACE,u=t.openGLCamera.getKeyMatrices(n),c=t.openGLActor.getKeyMatrices();o.multiply(t.normalMatrix,u.normalMatrix,c.normalMatrix),i.multiply(t.mcpcMatrix,u.wcpc,c.mcwc),i.multiply(t.mcvcMatrix,u.wcvc,c.mcwc);const d=t.renderable.getMatrixArray(),g=t.renderable.getNormalArray(),p=t.renderable.getColorArray(),f=d.length/16;let h=!1;t.openGLRenderer.getSelector()&&t.openGLRenderer.getSelector().getCurrentPass()===fm.COMPOSITE_INDEX_PASS&&(h=!0);for(let o=t.primTypes.Start;o<t.primTypes.End;o++){const i=t.primitives[o].getCABO();if(i.getElementCount()){t.drawingEdges=l&&(o===t.primTypes.TrisEdges||o===t.primTypes.TriStripsEdges),e.updateShaders(t.primitives[o],n,r);const u=t.primitives[o].getProgram(),c=e.getOpenGLMode(a,o),M=u.isUniformUsed("normalMatrix"),m=u.isUniformUsed("MCVCMatrix");if(t.hardwareSupport)t.extension?t.extension.drawArraysInstancedANGLE(c,0,i.getElementCount(),f):s.drawArraysInstanced(c,0,i.getElementCount(),f);else for(let n=0;n<f;++n)h&&t.openGLRenderer.getSelector().renderCompositeIndex(n),e.updateGlyphShaderParameters(M,m,t.primitives[o],p,d,g,n,h?t.openGLRenderer.getSelector():null),s.drawArrays(c,0,i.getElementCount())}}},e.setMapperShaderParameters=(e,r,o)=>{if(e.getCABO().getElementCount()&&(t.glyphBOBuildTime.getMTime()>e.getAttributeUpdateTime().getMTime()||e.getShaderSourceTime().getMTime()>e.getAttributeUpdateTime().getMTime()))return e.getProgram().isAttributeUsed("gMatrix")?e.getVAO().addAttributeMatrixWithDivisor(e.getProgram(),t.matrixBuffer,"gMatrix",0,64,t.context.FLOAT,4,!1,1)||dm("Error setting gMatrix in shader VAO."):e.getVAO().removeAttributeArray("gMatrix"),e.getProgram().isAttributeUsed("gNormal")?e.getVAO().addAttributeMatrixWithDivisor(e.getProgram(),t.normalBuffer,"gNormal",0,36,t.context.FLOAT,3,!1,1)||dm("Error setting gNormal in shader VAO."):e.getVAO().removeAttributeArray("gNormal"),e.getProgram().isAttributeUsed("gColor")?e.getVAO().addAttributeArrayWithDivisor(e.getProgram(),t.colorBuffer,"gColor",0,4,t.context.UNSIGNED_BYTE,4,!0,1,!1)||dm("Error setting gColor in shader VAO."):e.getVAO().removeAttributeArray("gColor"),e.getProgram().isAttributeUsed("mapperIndexVS")?e.getVAO().addAttributeArrayWithDivisor(e.getProgram(),t.pickBuffer,"mapperIndexVS",0,4,t.context.UNSIGNED_BYTE,4,!0,1,!1)||dm("Error setting mapperIndexVS in shader VAO."):e.getVAO().removeAttributeArray("mapperIndexVS"),n.setMapperShaderParameters(e,r,o),void e.getAttributeUpdateTime().modified();n.setMapperShaderParameters(e,r,o)},e.getNeedToRebuildBufferObjects=(e,r)=>(t.renderable.buildArrays(),t.VBOBuildTime.getMTime()<t.renderable.getBuildTime().getMTime()||n.getNeedToRebuildBufferObjects(e,r)),e.buildBufferObjects=(e,r)=>{if(t.hardwareSupport){const e=t.renderable.getMatrixArray(),n=t.renderable.getNormalArray(),r=t.renderable.getColorArray();if(t.matrixBuffer||(t.matrixBuffer=fM.newInstance(),t.matrixBuffer.setOpenGLRenderWindow(t.openGLRenderWindow),t.normalBuffer=fM.newInstance(),t.normalBuffer.setOpenGLRenderWindow(t.openGLRenderWindow),t.colorBuffer=fM.newInstance(),t.colorBuffer.setOpenGLRenderWindow(t.openGLRenderWindow),t.pickBuffer=fM.newInstance(),t.pickBuffer.setOpenGLRenderWindow(t.openGLRenderWindow)),t.renderable.getBuildTime().getMTime()>t.glyphBOBuildTime.getMTime()){t.matrixBuffer.upload(e,pm.ARRAY_BUFFER),t.normalBuffer.upload(n,pm.ARRAY_BUFFER),r?t.colorBuffer.upload(r.getData(),pm.ARRAY_BUFFER):t.colorBuffer.releaseGraphicsResources();const o=e.length/16,i=new Uint8Array(4*o);for(let e=0;e<o;++e){let t=e+1;const n=4*e;i[n]=t%256,t-=i[n],t/=256,i[n+1]=t%256,t-=i[n+1],t/=256,i[n+2]=t%256,i[n+3]=255}t.pickBuffer.upload(i,pm.ARRAY_BUFFER),t.glyphBOBuildTime.modified()}}return n.buildBufferObjects(e,r)}}(e,t)}var ym={newInstance:Ed.newInstance(Am,"vtkOpenGLGlyph3DMapper"),extend:Am};const{vtkErrorMacro:Tm}=Ed,{SlicingMode:Dm}={SlicingMode:{NONE:-1,I:0,J:1,K:2,X:3,Y:4,Z:5}};function Nm(e,t,n){if(t.apply(e)){const t=e.getIndependentComponents();return`${e.getMTime()}-${t}-${n}`}return"0"}const xm={VBOBuildTime:0,VBOBuildString:null,openGLTexture:null,tris:null,imagemat:null,colorTexture:null,pwfTexture:null,lastHaveSeenDepthRequest:!1,haveSeenDepthRequest:!1,lastTextureComponents:0};function Im(e,t,n={}){Object.assign(t,xm,n),Lh.extend(e,t,n),$M(e,t,n),t.tris=HM.newInstance(),t.openGLTexture=Vh.newInstance(),t.colorTexture=Vh.newInstance(),t.pwfTexture=Vh.newInstance(),t.imagemat=i.create(),Ed.setGet(e,t,[]),t.VBOBuildTime={},Ed.obj(t.VBOBuildTime),function(e,t){t.classHierarchy.push("vtkOpenGLImageMapper"),e.buildPass=n=>{if(n){t.openGLImageSlice=e.getFirstAncestorOfType("vtkOpenGLImageSlice"),t.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t.openGLRenderWindow=t.openGLRenderer.getParent(),t.context=t.openGLRenderWindow.getContext(),t.tris.setOpenGLRenderWindow(t.openGLRenderWindow),t.openGLTexture.setOpenGLRenderWindow(t.openGLRenderWindow),t.colorTexture.setOpenGLRenderWindow(t.openGLRenderWindow),t.pwfTexture.setOpenGLRenderWindow(t.openGLRenderWindow);const n=t.openGLRenderer.getRenderable();t.openGLCamera=t.openGLRenderer.getViewNodeFor(n.getActiveCamera()),t.renderable.getSliceAtFocalPoint()&&t.renderable.setSliceFromCamera(n.getActiveCamera())}},e.translucentPass=t=>{t&&e.render()},e.opaqueZBufferPass=n=>{n&&(t.haveSeenDepthRequest=!0,t.renderDepth=!0,e.render(),t.renderDepth=!1)},e.opaquePass=t=>{t&&e.render()},e.getCoincidentParameters=(e,n)=>t.renderable.getResolveCoincidentTopology()?t.renderable.getCoincidentTopologyPolygonOffsetParameters():null,e.render=()=>{const n=t.openGLImageSlice.getRenderable(),r=t.openGLRenderer.getRenderable();e.renderPiece(r,n)},e.buildShaders=(t,n,r)=>{e.getShaderTemplate(t,n,r),e.replaceShaderValues(t,n,r)},e.getShaderTemplate=(e,t,n)=>{e.Vertex=XM.a,e.Fragment=qM.a,e.Geometry=""},e.replaceShaderValues=(n,r,o)=>{let i=n.Vertex,a=n.Fragment;i=UM.substitute(i,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;"]).result,i=UM.substitute(i,"//VTK::PositionVC::Impl",["  gl_Position = MCPCMatrix * vertexMC;"]).result,i=UM.substitute(i,"//VTK::TCoord::Impl","tcoordVCVSOutput = tcoordMC;").result,i=UM.substitute(i,"//VTK::TCoord::Dec","attribute vec2 tcoordMC; varying vec2 tcoordVCVSOutput;").result;const s=t.openGLTexture.getComponents(),l=o.getProperty().getIndependentComponents();let u=["varying vec2 tcoordVCVSOutput;","uniform float cshift0;","uniform float cscale0;","uniform float pwfshift0;","uniform float pwfscale0;","uniform sampler2D texture1;","uniform sampler2D colorTexture1;","uniform sampler2D pwfTexture1;","uniform float opacity;"];if(l){for(let e=1;e<s;e++)u=u.concat([`uniform float cshift${e};`,`uniform float cscale${e};`,`uniform float pwfshift${e};`,`uniform float pwfscale${e};`]);switch(s){case 1:u=u.concat(["uniform float mix0;","#define height0 0.5"]);break;case 2:u=u.concat(["uniform float mix0;","uniform float mix1;","#define height0 0.25","#define height1 0.75"]);break;case 3:u=u.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","#define height0 0.17","#define height1 0.5","#define height2 0.83"]);break;case 4:u=u.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","uniform float mix3;","#define height0 0.125","#define height1 0.375","#define height2 0.625","#define height3 0.875"]);break;default:Tm("Unsupported number of independent coordinates.")}}if(a=UM.substitute(a,"//VTK::TCoord::Dec",u).result,l){const e=["r","g","b","a"];let t=["vec4 tvalue = texture2D(texture1, tcoordVCVSOutput);"];for(let n=0;n<s;n++)t=t.concat([`vec3 tcolor${n} = mix${n} * texture2D(colorTexture1, vec2(tvalue.${e[n]} * cscale${n} + cshift${n}, height${n})).rgb;`,`float compWeight${n} = mix${n} * texture2D(pwfTexture1, vec2(tvalue.${e[n]} * pwfscale${n} + pwfshift${n}, height${n})).r;`]);switch(s){case 1:t=t.concat(["gl_FragData[0] = vec4(tcolor0.rgb, opacity);"]);break;case 2:t=t.concat(["float weightSum = compWeight0 + compWeight1;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum))), opacity);"]);break;case 3:t=t.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum))), opacity);"]);break;case 4:t=t.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2 + compWeight3;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum)) + (tcolor3.rgb * (compWeight3 / weightSum))), opacity);"]);break;default:Tm("Unsupported number of independent coordinates.")}a=UM.substitute(a,"//VTK::TCoord::Impl",t).result}else switch(s){case 1:a=UM.substitute(a,"//VTK::TCoord::Impl",["float intensity = texture2D(texture1, tcoordVCVSOutput).r;","vec3 tcolor = texture2D(colorTexture1, vec2(intensity * cscale0 + cshift0, 0.5)).rgb;","float scalarOpacity = texture2D(pwfTexture1, vec2(intensity * pwfscale0 + pwfshift0, 0.5)).r;","gl_FragData[0] = vec4(tcolor, scalarOpacity * opacity);"]).result;break;case 2:a=UM.substitute(a,"//VTK::TCoord::Impl",["vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","float intensity = tcolor.r*cscale0 + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(intensity, 0.5)).rgb, pwfscale0*tcolor.g + pwfshift0);"]).result;break;default:a=UM.substitute(a,"//VTK::TCoord::Impl",["vec4 tcolor = cscale0*texture2D(texture1, tcoordVCVSOutput.st) + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, tcolor.a);"]).result}t.haveSeenDepthRequest&&(a=UM.substitute(a,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,a=UM.substitute(a,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result),n.Vertex=i,n.Fragment=a,e.replaceShaderCoincidentOffset(n,r,o)},e.getNeedToRebuildShaders=(e,n,r)=>{const o=t.openGLTexture.getComponents(),i=r.getProperty().getIndependentComponents();return(t.lastHaveSeenDepthRequest!==t.haveSeenDepthRequest||0===e.getProgram()||t.lastTextureComponents!==o||t.lastIndependentComponents!==i)&&(t.lastHaveSeenDepthRequest=t.haveSeenDepthRequest,t.lastTextureComponents=o,t.lastIndependentComponents=i,!0)},e.updateShaders=(n,r,o)=>{if(t.lastBoundBO=n,e.getNeedToRebuildShaders(n,r,o)){const i={Vertex:null,Fragment:null,Geometry:null};e.buildShaders(i,r,o);const a=t.openGLRenderWindow.getShaderCache().readyShaderProgramArray(i.Vertex,i.Fragment,i.Geometry);a!==n.getProgram()&&(n.setProgram(a),n.getVAO().releaseGraphicsResources()),n.getShaderSourceTime().modified()}else t.openGLRenderWindow.getShaderCache().readyShaderProgram(n.getProgram());n.getVAO().bind(),e.setMapperShaderParameters(n,r,o),e.setCameraShaderParameters(n,r,o),e.setPropertyShaderParameters(n,r,o)},e.setMapperShaderParameters=(n,r,o)=>{n.getCABO().getElementCount()&&(t.VBOBuildTime>n.getAttributeUpdateTime().getMTime()||n.getShaderSourceTime().getMTime()>n.getAttributeUpdateTime().getMTime())&&(n.getProgram().isAttributeUsed("vertexMC")&&(n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"vertexMC",n.getCABO().getVertexOffset(),n.getCABO().getStride(),t.context.FLOAT,3,t.context.FALSE)||Tm("Error setting vertexMC in shader VAO.")),n.getProgram().isAttributeUsed("tcoordMC")&&n.getCABO().getTCoordOffset()&&(n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"tcoordMC",n.getCABO().getTCoordOffset(),n.getCABO().getStride(),t.context.FLOAT,n.getCABO().getTCoordComponents(),t.context.FALSE)||Tm("Error setting tcoordMC in shader VAO.")),n.getAttributeUpdateTime().modified());const i=t.openGLTexture.getTextureUnit();n.getProgram().setUniformi("texture1",i);const a=t.openGLTexture.getComponents(),s=o.getProperty().getIndependentComponents();if(s)for(let e=0;e<a;e++)n.getProgram().setUniformf(`mix${e}`,o.getProperty().getComponentWeight(e));const l=t.openGLTexture.getShiftAndScale();for(let e=0;e<a;e++){let t=o.getProperty().getColorWindow(),r=o.getProperty().getColorLevel();const i=s?e:0,a=o.getProperty().getRGBTransferFunction(i);if(a){const e=a.getRange();t=e[1]-e[0],r=.5*(e[1]+e[0])}const u=l.scale/t,c=(l.shift-r)/t+.5;n.getProgram().setUniformf(`cshift${e}`,c),n.getProgram().setUniformf(`cscale${e}`,u)}for(let e=0;e<a;e++){let t=1,r=0;const i=s?e:0,a=o.getProperty().getPiecewiseFunction(i);if(a){const e=a.getRange(),n=e[1]-e[0];t=l.scale/n,r=(l.shift-.5*(e[0]+e[1]))/n+.5}n.getProgram().setUniformf(`pwfshift${e}`,r),n.getProgram().setUniformf(`pwfscale${e}`,t)}if(t.haveSeenDepthRequest&&n.getProgram().setUniformi("depthRequest",t.renderDepth?1:0),n.getProgram().isUniformUsed("coffset")){const t=e.getCoincidentParameters(r,o);n.getProgram().setUniformf("coffset",t.offset),n.getProgram().isUniformUsed("cfactor")&&n.getProgram().setUniformf("cfactor",t.factor)}const u=t.colorTexture.getTextureUnit();n.getProgram().setUniformi("colorTexture1",u);const c=t.pwfTexture.getTextureUnit();n.getProgram().setUniformi("pwfTexture1",c)},e.setCameraShaderParameters=(e,n,r)=>{const o=e.getProgram(),a=t.openGLImageSlice.getKeyMatrices(),s=t.currentInput.getIndexToWorld();i.multiply(t.imagemat,a.mcwc,s);const l=t.openGLCamera.getKeyMatrices(n);if(i.multiply(t.imagemat,l.wcpc,t.imagemat),e.getCABO().getCoordShiftAndScaleEnabled()){const n=e.getCABO().getInverseShiftAndScaleMatrix();i.multiply(t.imagemat,t.imagemat,n)}o.setUniformMatrix("MCPCMatrix",t.imagemat)},e.setPropertyShaderParameters=(e,t,n)=>{const r=e.getProgram(),o=n.getProperty().getOpacity();r.setUniformf("opacity",o)},e.renderPieceStart=(n,r)=>{e.updateBufferObjects(n,r),t.lastBoundBO=null},e.renderPieceDraw=(n,r)=>{const o=t.context;t.openGLTexture.activate(),t.colorTexture.activate(),t.pwfTexture.activate(),t.tris.getCABO().getElementCount()&&(e.updateShaders(t.tris,n,r),o.drawArrays(o.TRIANGLES,0,t.tris.getCABO().getElementCount()),t.tris.getVAO().release()),t.openGLTexture.deactivate(),t.colorTexture.deactivate(),t.pwfTexture.deactivate()},e.renderPieceFinish=(e,t)=>{},e.renderPiece=(n,r)=>{e.invokeEvent({type:"StartEvent"}),t.renderable.update(),t.currentInput=t.renderable.getInputData(),e.invokeEvent({type:"EndEvent"}),t.currentInput?(e.renderPieceStart(n,r),e.renderPieceDraw(n,r),e.renderPieceFinish(n,r)):Tm("No input!")},e.computeBounds=(n,r)=>{e.getInput()?t.bounds=e.getInput().getBounds():Qd(t.bounds)},e.updateBufferObjects=(t,n)=>{e.getNeedToRebuildBufferObjects(t,n)&&e.buildBufferObjects(t,n)},e.getNeedToRebuildBufferObjects=(n,r)=>t.VBOBuildTime.getMTime()<e.getMTime()||t.VBOBuildTime.getMTime()<r.getMTime()||t.VBOBuildTime.getMTime()<t.renderable.getMTime()||t.VBOBuildTime.getMTime()<r.getProperty().getMTime()||t.VBOBuildTime.getMTime()<t.currentInput.getMTime(),e.buildBufferObjects=(n,r)=>{const o=t.currentInput;if(null===o)return;const i=r.getProperty(),a=i.getInterpolationType();0===a?(t.colorTexture.setMinificationFilter(Ih.NEAREST),t.colorTexture.setMagnificationFilter(Ih.NEAREST),t.pwfTexture.setMinificationFilter(Ih.NEAREST),t.pwfTexture.setMagnificationFilter(Ih.NEAREST)):(t.colorTexture.setMinificationFilter(Ih.LINEAR),t.colorTexture.setMagnificationFilter(Ih.LINEAR),t.pwfTexture.setMinificationFilter(Ih.LINEAR),t.pwfTexture.setMagnificationFilter(Ih.LINEAR));const s=o.getPointData().getScalars().getNumberOfComponents(),l=i.getIndependentComponents(),u=l?s:1,c=l?2*u:1,d=Nm(i,i.getRGBTransferFunction,u);if(t.colorTextureString!==d){const e=1024,n=new Uint8Array(e*c*3);let r=i.getRGBTransferFunction();if(r){const o=new Float32Array(3*e);for(let t=0;t<u;t++){r=i.getRGBTransferFunction(t);const a=r.getRange();if(r.getTable(a[0],a[1],e,o,1),l)for(let r=0;r<3*e;r++)n[t*e*6+r]=255*o[r],n[t*e*6+r+3*e]=255*o[r];else for(let r=0;r<3*e;r++)n[t*e*6+r]=255*o[r]}t.colorTexture.create2DFromRaw(e,c,3,Yg.UNSIGNED_CHAR,n)}else{for(let t=0;t<3*e;++t)n[t]=255*t/(3*(e-1)),n[t+1]=255*t/(3*(e-1)),n[t+2]=255*t/(3*(e-1));t.colorTexture.create2DFromRaw(e,1,3,Yg.UNSIGNED_CHAR,n)}t.colorTextureString=d}const g=Nm(i,i.getPiecewiseFunction,u);if(t.pwfTextureString!==g){const e=1024,n=e*c,r=new Uint8Array(n);let o=i.getPiecewiseFunction();if(o){const r=new Float32Array(n),a=new Float32Array(e);for(let t=0;t<u;++t)if(o=i.getPiecewiseFunction(t),null===o)r.fill(1);else{const n=o.getRange();if(o.getTable(n[0],n[1],e,a,1),l)for(let o=0;o<e;o++)r[t*e*2+o]=a[o],r[t*e*2+o+e]=a[o];else for(let o=0;o<e;o++)r[t*e*2+o]=a[o]}t.pwfTexture.create2DFromRaw(e,c,1,Yg.FLOAT,r)}else r.fill(255),t.pwfTexture.create2DFromRaw(e,1,1,Yg.UNSIGNED_CHAR,r);t.pwfTextureString=g}const{ijkMode:p}=t.renderable.getClosestIJKAxis();let f=t.renderable.getSlice();p!==t.renderable.getSlicingMode()&&(f=t.renderable.getSliceAtPosition(f));const h=o.getExtent();let M;p===Dm.I&&(M=f-h[0]),p===Dm.J&&(M=f-h[2]),p!==Dm.K&&p!==Dm.NONE||(M=f-h[4]);const m=`${f}A${o.getMTime()}A${o.getPointData().getScalars().getMTime()}B${e.getMTime()}C${t.renderable.getSlicingMode()}D${r.getProperty().getMTime()}`;if(t.VBOBuildString!==m){const e=o.getDimensions();0===a?(4===s?(t.openGLTexture.setGenerateMipmap(!0),t.openGLTexture.setMinificationFilter(Ih.NEAREST)):t.openGLTexture.setMinificationFilter(Ih.NEAREST),t.openGLTexture.setMagnificationFilter(Ih.NEAREST)):(4===s?(t.openGLTexture.setGenerateMipmap(!0),t.openGLTexture.setMinificationFilter(Ih.LINEAR_MIPMAP_LINEAR)):t.openGLTexture.setMinificationFilter(Ih.LINEAR),t.openGLTexture.setMagnificationFilter(Ih.LINEAR)),t.openGLTexture.setWrapS(xh.CLAMP_TO_EDGE),t.openGLTexture.setWrapT(xh.CLAMP_TO_EDGE);const n=e[0]*e[1]*s,r=new Float32Array(12),i=new Float32Array(8);for(let t=0;t<4;t++)i[2*t]=t%2?1:0,i[2*t+1]=t>1?1:0;const l=o.getPointData().getScalars().getData();let u=null;if(p===Dm.I){u=new l.constructor(e[2]*e[1]*s);let t=0;for(let n=0;n<e[2];n++)for(let r=0;r<e[1];r++){const o=(M+r*e[0]+n*e[0]*e[1])*s;t=(n*e[1]+r)*s,u.set(l.subarray(o,o+s),t)}e[0]=e[1],e[1]=e[2],r[0]=f,r[1]=h[2],r[2]=h[4],r[3]=f,r[4]=h[3],r[5]=h[4],r[6]=f,r[7]=h[2],r[8]=h[5],r[9]=f,r[10]=h[3],r[11]=h[5]}else if(p===Dm.J){u=new l.constructor(e[2]*e[0]*s);let t=0;for(let n=0;n<e[2];n++)for(let r=0;r<e[0];r++){const o=(r+M*e[0]+n*e[0]*e[1])*s;t=(n*e[0]+r)*s,u.set(l.subarray(o,o+s),t)}e[1]=e[2],r[0]=h[0],r[1]=f,r[2]=h[4],r[3]=h[1],r[4]=f,r[5]=h[4],r[6]=h[0],r[7]=f,r[8]=h[5],r[9]=h[1],r[10]=f,r[11]=h[5]}else p===Dm.K||p===Dm.NONE?(u=l.subarray(M*n,(M+1)*n),r[0]=h[0],r[1]=h[2],r[2]=f,r[3]=h[1],r[4]=h[2],r[5]=f,r[6]=h[0],r[7]=h[3],r[8]=f,r[9]=h[1],r[10]=h[3],r[11]=f):Tm("Reformat slicing not yet supported.");t.openGLTexture.create2DFromRaw(e[0],e[1],s,o.getPointData().getScalars().getDataType(),u),t.openGLTexture.activate(),t.openGLTexture.sendParameters(),t.openGLTexture.deactivate();const c=rp.newInstance({numberOfComponents:3,values:r});c.setName("points");const d=rp.newInstance({numberOfComponents:2,values:i});d.setName("tcoords");const g=new Uint16Array(8);g[0]=3,g[1]=0,g[2]=1,g[3]=3,g[4]=3,g[5]=0,g[6]=3,g[7]=2;const A=rp.newInstance({numberOfComponents:1,values:g});t.tris.getCABO().createVBO(A,"polys",Sg.SURFACE,{points:c,tcoords:d,cellOffset:0}),t.VBOBuildTime.modified(),t.VBOBuildString=m}}}(e,t)}var wm={newInstance:Ed.newInstance(Im,"vtkOpenGLImageMapper"),extend:Im};const Cm={context:null,keyMatrixTime:null,keyMatrices:null};function Em(e,t,n={}){Object.assign(t,Cm,n),Lh.extend(e,t,n),t.keyMatrixTime={},Ed.obj(t.keyMatrixTime,{mtime:0}),t.keyMatrices={mcwc:i.create()},Ed.setGet(e,t,["context"]),function(e,t){t.classHierarchy.push("vtkOpenGLImageSlice"),e.buildPass=n=>{if(t.renderable&&t.renderable.getVisibility()&&n){if(!t.renderable)return;t.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),e.prepareNodes(),e.addMissingNode(t.renderable.getMapper()),e.removeUnusedNodes()}},e.traverseOpaqueZBufferPass=t=>{e.traverseOpaquePass(t)},e.traverseOpaquePass=n=>{t.renderable&&t.renderable.getVisibility()&&t.renderable.getIsOpaque()&&(!t.openGLRenderer.getSelector()||t.renderable.getPickable())&&(e.apply(n,!0),t.children.forEach(e=>{e.traverse(n)}),e.apply(n,!1))},e.traverseTranslucentPass=n=>{!t.renderable||!t.renderable.getVisibility()||t.renderable.getIsOpaque()||t.openGLRenderer.getSelector()&&!t.renderable.getPickable()||(e.apply(n,!0),t.children.forEach(e=>{e.traverse(n)}),e.apply(n,!1))},e.queryPass=(e,n)=>{if(e){if(!t.renderable||!t.renderable.getVisibility())return;t.renderable.getIsOpaque()?n.incrementOpaqueActorCount():n.incrementTranslucentActorCount()}},e.opaqueZBufferPass=(t,n)=>e.opaquePass(t,n),e.opaquePass=(n,r)=>{n&&(t.context=e.getFirstAncestorOfType("vtkOpenGLRenderWindow").getContext(),t.context.depthMask(!0))},e.translucentPass=(n,r)=>{n?(t.context=e.getFirstAncestorOfType("vtkOpenGLRenderWindow").getContext(),t.context.depthMask(!1)):t.context.depthMask(!0)},e.getKeyMatrices=()=>(t.renderable.getMTime()>t.keyMatrixTime.getMTime()&&(i.copy(t.keyMatrices.mcwc,t.renderable.getMatrix()),i.transpose(t.keyMatrices.mcwc,t.keyMatrices.mcwc),t.keyMatrixTime.modified()),t.keyMatrices)}(e,t)}var vm={newInstance:Ed.newInstance(Em,"vtkOpenGLImageSlice"),extend:Em};const{vtkDebugMacro:Lm}=Ed,bm={};function Om(e,t,n={}){Object.assign(t,bm,n),Lh.extend(e,t,n),function(e,t){t.classHierarchy.push("vtkOpenGLPixelSpaceCallbackMapper"),e.opaquePass=(n,r)=>{t.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t.openGLRenderWindow=t.openGLRenderer.getParent();const o=t.openGLRenderer.getAspectRatio(),i=t.openGLRenderer?t.openGLRenderer.getRenderable().getActiveCamera():null,a=t.openGLRenderer.getTiledSizeAndOrigin();let s=null;if(t.renderable.getUseZValues()){const e=r.getZBufferTexture(),n=Math.floor(e.getWidth()),o=Math.floor(e.getHeight()),i=t.openGLRenderWindow.getContext();e.bind();const a=r.getFramebuffer();a?a.saveCurrentBindingsAndBuffers():Lm("No framebuffer to save/restore");const l=i.createFramebuffer();i.bindFramebuffer(i.FRAMEBUFFER,l),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,e.getHandle(),0),i.checkFramebufferStatus(i.FRAMEBUFFER)===i.FRAMEBUFFER_COMPLETE&&(s=new Uint8Array(n*o*4),i.viewport(0,0,n,o),i.readPixels(0,0,n,o,i.RGBA,i.UNSIGNED_BYTE,s)),a&&a.restorePreviousBindingsAndBuffers(),i.deleteFramebuffer(l)}t.renderable.invokeCallback(t.renderable.getInputData(),i,o,a,s)},e.queryPass=(e,n)=>{e&&(t.renderable.getUseZValues(),n.setDepthRequested(!0))}}(e,t)}var Sm={newInstance:Ed.newInstance(Om,"vtkOpenGLPixelSpaceCallbackMapper"),extend:Om};const{vtkDebugMacro:jm}=Ed,Pm={context:null,openGLRenderWindow:null,selector:null};function km(e,t,n={}){Object.assign(t,Pm,n),Lh.extend(e,t,n),Ed.get(e,t,["shaderCache"]),Ed.setGet(e,t,["selector"]),function(e,t){t.classHierarchy.push("vtkOpenGLRenderer"),e.buildPass=n=>{if(n){if(!t.renderable)return;t.renderable.isActiveCameraCreated()||t.renderable.resetCamera(),e.updateLights(),e.prepareNodes(),e.addMissingNode(t.renderable.getActiveCamera()),e.addMissingNodes(t.renderable.getViewPropsWithNestedProps()),e.removeUnusedNodes()}},e.updateLights=()=>{let e=0;const n=t.renderable.getLightsByReference();for(let t=0;t<n.length;++t)n[t].getSwitch()>0&&e++;return e||(jm("No lights are on, creating one."),t.renderable.createLight()),e},e.opaqueZBufferPass=n=>{if(n){let n=0;const r=t.context;t.renderable.getTransparent()||(t.context.clearColor(1,0,0,1),n|=r.COLOR_BUFFER_BIT),t.renderable.getPreserveDepthBuffer()||(r.clearDepth(1),n|=r.DEPTH_BUFFER_BIT,r.depthMask(!0));const o=e.getTiledSizeAndOrigin();r.enable(r.SCISSOR_TEST),r.scissor(o.lowerLeftU,o.lowerLeftV,o.usize,o.vsize),r.viewport(o.lowerLeftU,o.lowerLeftV,o.usize,o.vsize),r.colorMask(!0,!0,!0,!0),r.clear(n),r.enable(r.DEPTH_TEST)}},e.cameraPass=t=>{t&&e.clear()},e.getAspectRatio=()=>{const e=t.parent.getSizeByReference(),n=t.renderable.getViewportByReference();return e[0]*(n[2]-n[0])/((n[3]-n[1])*e[1])},e.getTiledSizeAndOrigin=()=>{const e=t.renderable.getViewportByReference(),n=[0,0,1,1],r=Hd(e[0]-n[0],0,1),o=Hd(e[1]-n[1],0,1),i=t.parent.normalizedDisplayToDisplay(r,o),a=Math.round(i[0]),s=Math.round(i[1]);let l=Hd(e[2]-n[0],0,1),u=Hd(e[3]-n[1],0,1);l>n[2]-n[0]&&(l=n[2]-n[0]),u>n[3]-n[1]&&(u=n[3]-n[1]);const c=t.parent.normalizedDisplayToDisplay(l,u);let d=Math.round(c[0])-a,g=Math.round(c[1])-s;return d<0&&(d=0),g<0&&(g=0),{usize:d,vsize:g,lowerLeftU:a,lowerLeftV:s}},e.clear=()=>{let n=0;const r=t.context;if(!t.renderable.getTransparent()){const e=t.renderable.getBackgroundByReference();t.context.clearColor(e[0],e[1],e[2],e[3]),n|=r.COLOR_BUFFER_BIT}t.renderable.getPreserveDepthBuffer()||(r.clearDepth(1),n|=r.DEPTH_BUFFER_BIT,r.depthMask(!0)),r.colorMask(!0,!0,!0,!0);const o=e.getTiledSizeAndOrigin();r.enable(r.SCISSOR_TEST),r.scissor(o.lowerLeftU,o.lowerLeftV,o.usize,o.vsize),r.viewport(o.lowerLeftU,o.lowerLeftV,o.usize,o.vsize),r.clear(n),r.enable(r.DEPTH_TEST)},e.releaseGraphicsResources=()=>{null!==t.selector&&t.selector.releaseGraphicsResources()},e.setOpenGLRenderWindow=n=>{t.openGLRenderWindow!==n&&(e.releaseGraphicsResources(),t.openGLRenderWindow=n,t.context=null,n&&(t.context=t.openGLRenderWindow.getContext()))}}(e,t)}var zm={newInstance:Ed.newInstance(km,"vtkOpenGLRenderer"),extend:km};const{vtkErrorMacro:Rm}=Ed,_m={context:null};function Vm(e,t,n={}){Object.assign(t,_m,n),Lh.extend(e,t,n),t.openGLTexture=Vh.newInstance(),t.tris=HM.newInstance(),t.keyMatrixTime={},Ed.obj(t.keyMatrixTime,{mtime:0}),t.keyMatrices={normalMatrix:o.create(),mcwc:i.create()},Ed.setGet(e,t,["context"]),Ed.get(e,t,["activeTextures"]),function(e,t){t.classHierarchy.push("vtkOpenGLSkybox"),e.buildPass=n=>{if(n){t.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t.openGLRenderWindow=t.openGLRenderer.getParent(),t.context=t.openGLRenderWindow.getContext(),t.tris.setOpenGLRenderWindow(t.openGLRenderWindow),t.openGLTexture.setOpenGLRenderWindow(t.openGLRenderWindow);const n=t.openGLRenderer.getRenderable();t.openGLCamera=t.openGLRenderer.getViewNodeFor(n.getActiveCamera())}},e.queryPass=(e,n)=>{if(e){if(!t.renderable||!t.renderable.getVisibility())return;n.incrementOpaqueActorCount()}},e.opaquePass=(n,r)=>{if(n&&!t.openGLRenderer.getSelector()){e.updateBufferObjects(),t.openGLRenderWindow.enableDepthMask(),t.openGLRenderWindow.getShaderCache().readyShaderProgram(t.tris.getProgram()),t.openGLTexture.render(t.openGLRenderWindow);const n=t.openGLTexture.getTextureUnit();t.tris.getProgram().setUniformi("sbtexture",n);const r=t.openGLRenderer.getRenderable(),o=t.openGLCamera.getKeyMatrices(r),a=i.create();if(i.invert(a,o.wcpc),t.tris.getProgram().setUniformMatrix("IMCPCMatrix",a),"box"===t.lastFormat){const e=r.getActiveCamera().getPosition();t.tris.getProgram().setUniform3f("camPos",e[0],e[1],e[2])}t.tris.getVAO().bind(),t.context.drawArrays(t.context.TRIANGLES,0,t.tris.getCABO().getElementCount()),t.tris.getVAO().release(),t.openGLTexture.deactivate()}},e.updateBufferObjects=()=>{if(!t.tris.getCABO().getElementCount()){const e=new Float32Array(12);for(let t=0;t<4;t++)e[3*t]=t%2*2-1,e[3*t+1]=t>1?1:-1,e[3*t+2]=1;const n=rp.newInstance({numberOfComponents:3,values:e});n.setName("points");const r=new Uint16Array(8);r[0]=3,r[1]=0,r[2]=1,r[3]=3,r[4]=3,r[5]=0,r[6]=3,r[7]=2;const o=rp.newInstance({numberOfComponents:1,values:r});t.tris.getCABO().createVBO(o,"polys",Sg.SURFACE,{points:n,cellOffset:0})}t.renderable.getFormat()!==t.lastFormat&&(t.lastFormat=t.renderable.getFormat(),"box"===t.lastFormat&&t.tris.setProgram(t.openGLRenderWindow.getShaderCache().readyShaderProgramArray("//VTK::System::Dec\n             attribute vec3 vertexMC;\n             uniform mat4 IMCPCMatrix;\n             varying vec3 TexCoords;\n             void main () {\n              gl_Position = vec4(vertexMC.xyz, 1.0);\n              vec4 wpos = IMCPCMatrix * gl_Position;\n              TexCoords = wpos.xyz/wpos.w;\n             }","//VTK::System::Dec\n             //VTK::Output::Dec\n             varying vec3 TexCoords;\n             uniform samplerCube sbtexture;\n             uniform vec3 camPos;\n             void main () {\n               // skybox looks from inside out\n               // which means we have to adjust\n               // our tcoords. Otherwise text would\n               // be flipped\n               vec3 tc = normalize(TexCoords - camPos);\n               if (abs(tc.z) < max(abs(tc.x),abs(tc.y)))\n               {\n                 tc = vec3(1.0, 1.0, -1.0) * tc;\n               }\n               else\n               {\n                 tc = vec3(-1.0, 1.0, 1.0) * tc;\n               }\n               gl_FragData[0] = textureCube(sbtexture, tc);\n             }","")),"background"===t.lastFormat&&t.tris.setProgram(t.openGLRenderWindow.getShaderCache().readyShaderProgramArray("//VTK::System::Dec\n             attribute vec3 vertexMC;\n             uniform mat4 IMCPCMatrix;\n             varying vec2 TexCoords;\n             void main () {\n              gl_Position = vec4(vertexMC.xyz, 1.0);\n              vec4 wpos = IMCPCMatrix * gl_Position;\n              TexCoords = vec2(vertexMC.x, vertexMC.y)*0.5 + 0.5;\n             }","//VTK::System::Dec\n             //VTK::Output::Dec\n             varying vec2 TexCoords;\n             uniform sampler2D sbtexture;\n             void main () {\n               gl_FragData[0] = texture2D(sbtexture, TexCoords);\n             }","")),t.tris.getShaderSourceTime().modified(),t.tris.getVAO().bind(),t.tris.getVAO().addAttributeArray(t.tris.getProgram(),t.tris.getCABO(),"vertexMC",t.tris.getCABO().getVertexOffset(),t.tris.getCABO().getStride(),t.context.FLOAT,3,t.context.FALSE)||Rm("Error setting vertexMC in shader VAO."));const e=t.renderable.getTextures();e.length||Rm("vtkSkybox requires a texture map"),t.openGLTexture.getRenderable()!==e[0]&&(t.openGLTexture.releaseGraphicsResources(t.openGLRenderWindow),t.openGLTexture.setRenderable(e[0]))}}(e,t)}var Bm={newInstance:Ed.newInstance(Vm),extend:Vm},Um=n("8GHZ"),Fm=n.n(Um);const{vtkErrorMacro:Gm}=Ed,Qm={};function Ym(e,t,n={}){Object.assign(t,Qm,n),cm.extend(e,t,n),function(e,t){t.classHierarchy.push("vtkOpenGLSphereMapper");const n=Object.assign({},e);e.getShaderTemplate=(e,t,n)=>{e.Vertex=Fm.a,e.Fragment=qM.a,e.Geometry=""},e.replaceShaderValues=(e,r,o)=>{let i=e.Vertex,a=e.Fragment;i=UM.substitute(i,"//VTK::Camera::Dec",["uniform mat4 VCPCMatrix;\n","uniform mat4 MCVCMatrix;"]).result,a=UM.substitute(a,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,a=UM.substitute(a,"//VTK::PositionVC::Impl",["vec4 vertexVC = vertexVCVSOutput;\n"]).result,a=UM.substitute(a,"//VTK::Normal::Dec",["uniform float invertedDepth;\n","uniform int cameraParallel;\n","varying float radiusVCVSOutput;\n","varying vec3 centerVCVSOutput;\n","uniform mat4 VCPCMatrix;\n"]).result;let s="";t.context.getExtension("EXT_frag_depth")&&(s="gl_FragDepthEXT = (pos.z / pos.w + 1.0) / 2.0;\n"),t.openGLRenderWindow.getWebgl2()&&(s="gl_FragDepth = (pos.z / pos.w + 1.0) / 2.0;\n"),a=UM.substitute(a,"//VTK::Depth::Impl",["  vec3 EyePos;\n","  vec3 EyeDir;\n","  if (cameraParallel != 0) {\n","    EyePos = vec3(vertexVC.x, vertexVC.y, vertexVC.z + 3.0*radiusVCVSOutput);\n","    EyeDir = vec3(0.0,0.0,-1.0); }\n","  else {\n","    EyeDir = vertexVC.xyz;\n","    EyePos = vec3(0.0,0.0,0.0);\n","    float lengthED = length(EyeDir);\n","    EyeDir = normalize(EyeDir);\n","    if (lengthED > radiusVCVSOutput*3.0) {\n","      EyePos = vertexVC.xyz - EyeDir*3.0*radiusVCVSOutput; }\n","    }\n","  EyePos = EyePos - centerVCVSOutput;\n","  EyePos = EyePos/radiusVCVSOutput;\n","  float b = 2.0*dot(EyePos,EyeDir);\n","  float c = dot(EyePos,EyePos) - 1.0;\n","  float d = b*b - 4.0*c;\n","  vec3 normalVCVSOutput = vec3(0.0,0.0,1.0);\n","  if (d < 0.0) { discard; }\n","  else {\n","    float t = (-b - invertedDepth*sqrt(d))*0.5;\n","    normalVCVSOutput = invertedDepth*normalize(EyePos + t*EyeDir);\n","    vertexVC.xyz = normalVCVSOutput*radiusVCVSOutput + centerVCVSOutput;\n","    }\n","  vec4 pos = VCPCMatrix * vertexVC;\n",s]).result,a=UM.substitute(a,"//VTK::Normal::Impl","").result,t.haveSeenDepthRequest&&(a=UM.substitute(a,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float computedZ = (pos.z / pos.w + 1.0) / 2.0;","float iz = floor(computedZ * 65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result),e.Vertex=i,e.Fragment=a,n.replaceShaderValues(e,r,o)},e.setMapperShaderParameters=(e,r,o)=>{e.getCABO().getElementCount()&&(t.VBOBuildTime>e.getAttributeUpdateTime().getMTime()||e.getShaderSourceTime().getMTime()>e.getAttributeUpdateTime().getMTime())&&e.getProgram().isAttributeUsed("offsetMC")&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"offsetMC",12,e.getCABO().getStride(),t.context.FLOAT,2,!1)||Gm("Error setting 'offsetMC' in shader VAO.")),e.getProgram().isUniformUsed("invertedDepth")&&e.getProgram().setUniformf("invertedDepth",t.invert?-1:1),n.setMapperShaderParameters(e,r,o)},e.setCameraShaderParameters=(e,n,r)=>{const o=e.getProgram(),a=n.getActiveCamera(),s=t.openGLCamera.getKeyMatrices(n);if(o.isUniformUsed("VCPCMatrix")&&o.setUniformMatrix("VCPCMatrix",s.vcpc),o.isUniformUsed("MCVCMatrix"))if(r.getIsIdentity())o.setUniformMatrix("MCVCMatrix",s.wcvc);else{const e=t.openGLActor.getKeyMatrices(),n=i.create();i.multiply(n,s.wcvc,e.mcwc),o.setUniformMatrix("MCVCMatrix",n)}o.isUniformUsed("cameraParallel")&&e.getProgram().setUniformi("cameraParallel",a.getParallelProjection())},e.getOpenGLMode=(e,n)=>t.context.TRIANGLES,e.buildBufferObjects=(e,n)=>{const r=t.currentInput;if(null===r)return;t.renderable.mapScalars(r,1);const o=t.renderable.getColorMapColors(),i=t.primitives[t.primTypes.Tris].getCABO(),a=r.getPointData(),s=r.getPoints(),l=s.getNumberOfPoints(),u=s.getData();let c=null;null!=t.renderable.getScaleArray()&&a.hasArray(t.renderable.getScaleArray())&&(c=a.getArray(t.renderable.getScaleArray()).getData());let d=null,g=0,p=null;o?(g=o.getNumberOfComponents(),i.setColorOffset(0),i.setColorBOStride(4),d=o.getData(),p=new Uint8Array(3*l*4),i.getColorBO()||i.setColorBO(fM.newInstance()),i.getColorBO().setOpenGLRenderWindow(t.openGLRenderWindow)):i.getColorBO()&&i.setColorBO(null),i.setColorComponents(g);const f=new Float32Array(5*l*3);i.setStride(20);const h=Math.cos(Sd(30));let M=0,m=0,A=0,y=0;for(let T=0;T<l;++T){let e=t.renderable.getRadius();c&&(e=c[T]),M=3*T,f[A++]=u[M++],f[A++]=u[M++],f[A++]=u[M++],f[A++]=-2*e*h,f[A++]=-e,d&&(m=T*g,p[y++]=d[m],p[y++]=d[m+1],p[y++]=d[m+2],p[y++]=d[m+3]),M=3*T,f[A++]=u[M++],f[A++]=u[M++],f[A++]=u[M++],f[A++]=2*e*h,f[A++]=-e,d&&(p[y++]=d[m],p[y++]=d[m+1],p[y++]=d[m+2],p[y++]=d[m+3]),M=3*T,f[A++]=u[M++],f[A++]=u[M++],f[A++]=u[M++],f[A++]=0,f[A++]=2*e,d&&(p[y++]=d[m],p[y++]=d[m+1],p[y++]=d[m+2],p[y++]=d[m+3])}i.setElementCount(A/5),i.upload(f,lM.ARRAY_BUFFER),o&&i.getColorBO().upload(p,lM.ARRAY_BUFFER),t.VBOBuildTime.modified()}}(e,t)}var Wm={newInstance:Ed.newInstance(Ym,"vtkOpenGLSphereMapper"),extend:Ym},Hm=n("a9tY"),Km=n.n(Hm);const{vtkErrorMacro:Xm}=u,Zm={};function qm(e,t,n={}){Object.assign(t,Zm,n),cm.extend(e,t,n),function(e,t){t.classHierarchy.push("vtkOpenGLStickMapper");const n=Object.assign({},e);e.getShaderTemplate=(e,t,n)=>{e.Vertex=Km.a,e.Fragment=qM.a,e.Geometry=""},e.replaceShaderValues=(e,r,o)=>{let i=e.Vertex,a=e.Fragment;i=UM.substitute(i,"//VTK::Camera::Dec",["uniform mat4 VCPCMatrix;\n","uniform mat4 MCVCMatrix;"]).result,a=UM.substitute(a,"//VTK::PositionVC::Dec","varying vec4 vertexVCVSOutput;").result,a=UM.substitute(a,"//VTK::PositionVC::Impl","  vec4 vertexVC = vertexVCVSOutput;\n").result,a=UM.substitute(a,"//VTK::Normal::Dec",["uniform int cameraParallel;\n","varying float radiusVCVSOutput;\n","varying vec3 orientVCVSOutput;\n","varying float lengthVCVSOutput;\n","varying vec3 centerVCVSOutput;\n","uniform mat4 VCPCMatrix;\n"]).result;let s="";t.context.getExtension("EXT_frag_depth")&&(s="  gl_FragDepthEXT = (pos.z / pos.w + 1.0) / 2.0;\n"),t.openGLRenderWindow.getWebgl2()&&(s="gl_FragDepth = (pos.z / pos.w + 1.0) / 2.0;\n"),a=UM.substitute(a,"//VTK::Depth::Impl",["  vec3 EyePos;\n","  vec3 EyeDir;\n","  if (cameraParallel != 0) {\n","    EyePos = vec3(vertexVC.x, vertexVC.y, vertexVC.z + 3.0*radiusVCVSOutput);\n","    EyeDir = vec3(0.0,0.0,-1.0); }\n","  else {\n","    EyeDir = vertexVC.xyz;\n","    EyePos = vec3(0.0,0.0,0.0);\n","    float lengthED = length(EyeDir);\n","    EyeDir = normalize(EyeDir);\n","    if (lengthED > radiusVCVSOutput*3.0) {\n","      EyePos = vertexVC.xyz - EyeDir*3.0*radiusVCVSOutput; }\n","    }\n","  EyePos = EyePos - centerVCVSOutput;\n","  vec3 base1;\n","  if (abs(orientVCVSOutput.z) < 0.99) {\n","    base1 = normalize(cross(orientVCVSOutput,vec3(0.0,0.0,1.0))); }\n","  else {\n","    base1 = normalize(cross(orientVCVSOutput,vec3(0.0,1.0,0.0))); }\n","  vec3 base2 = cross(orientVCVSOutput,base1);\n","  EyePos = vec3(dot(EyePos,base1),dot(EyePos,base2),dot(EyePos,orientVCVSOutput));\n","  EyeDir = vec3(dot(EyeDir,base1),dot(EyeDir,base2),dot(EyeDir,orientVCVSOutput));\n","  EyePos = EyePos/radiusVCVSOutput;\n","  float a = EyeDir.x*EyeDir.x + EyeDir.y*EyeDir.y;\n","  float b = 2.0*(EyePos.x*EyeDir.x + EyePos.y*EyeDir.y);\n","  float c = EyePos.x*EyePos.x + EyePos.y*EyePos.y - 1.0;\n","  float d = b*b - 4.0*a*c;\n","  vec3 normalVCVSOutput = vec3(0.0,0.0,1.0);\n","  if (d < 0.0) { discard; }\n","  else {\n","    float t =  (-b - sqrt(d))/(2.0*a);\n","    float tz = EyePos.z + t*EyeDir.z;\n","    vec3 iPoint = EyePos + t*EyeDir;\n","    if (abs(iPoint.z)*radiusVCVSOutput > lengthVCVSOutput*0.5) {\n","      float t2 = (-b + sqrt(d))/(2.0*a);\n","      float tz2 = EyePos.z + t2*EyeDir.z;\n","      if (tz2*radiusVCVSOutput > lengthVCVSOutput*0.5 || tz*radiusVCVSOutput < -0.5*lengthVCVSOutput) { discard; }\n","      else {\n","        normalVCVSOutput = orientVCVSOutput;\n","        float t3 = (lengthVCVSOutput*0.5/radiusVCVSOutput - EyePos.z)/EyeDir.z;\n","        iPoint = EyePos + t3*EyeDir;\n","        vertexVC.xyz = radiusVCVSOutput*(iPoint.x*base1 + iPoint.y*base2 + iPoint.z*orientVCVSOutput) + centerVCVSOutput;\n","        }\n","      }\n","    else {\n","      normalVCVSOutput = iPoint.x*base1 + iPoint.y*base2;\n","      vertexVC.xyz = radiusVCVSOutput*(normalVCVSOutput + iPoint.z*orientVCVSOutput) + centerVCVSOutput;\n","      }\n","    }\n","  vec4 pos = VCPCMatrix * vertexVC;\n",s]).result,a=UM.substitute(a,"//VTK::Normal::Impl","").result,t.haveSeenDepthRequest&&(a=UM.substitute(a,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float computedZ = (pos.z / pos.w + 1.0) / 2.0;","float iz = floor(computedZ * 65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result),e.Vertex=i,e.Fragment=a,n.replaceShaderValues(e,r,o)},e.setMapperShaderParameters=(e,r,o)=>{e.getCABO().getElementCount()&&(t.VBOBuildTime>e.getAttributeUpdateTime().getMTime()||e.getShaderSourceTime().getMTime()>e.getAttributeUpdateTime().getMTime())&&(e.getProgram().isAttributeUsed("orientMC")&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"orientMC",12,e.getCABO().getStride(),t.context.FLOAT,3,!1)||Xm("Error setting 'orientMC' in shader VAO.")),e.getProgram().isAttributeUsed("offsetMC")&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO().getColorBO(),"offsetMC",0,e.getCABO().getColorBOStride(),t.context.UNSIGNED_BYTE,3,!0)||Xm("Error setting 'offsetMC' in shader VAO.")),e.getProgram().isAttributeUsed("radiusMC")&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"radiusMC",24,e.getCABO().getStride(),t.context.FLOAT,1,!1)||Xm("Error setting 'radiusMC' in shader VAO."))),n.setMapperShaderParameters(e,r,o)},e.setCameraShaderParameters=(e,n,r)=>{const a=e.getProgram(),s=n.getActiveCamera(),l=t.openGLCamera.getKeyMatrices(n);if(a.isUniformUsed("VCPCMatrix")&&a.setUniformMatrix("VCPCMatrix",l.vcpc),r.getIsIdentity())a.isUniformUsed("MCVCMatrix")&&a.setUniformMatrix("MCVCMatrix",l.wcvc),a.isUniformUsed("normalMatrix")&&a.setUniformMatrix3x3("normalMatrix",l.normalMatrix);else{const e=t.openGLActor.getKeyMatrices(),n=i.create();if(a.isUniformUsed("MCVCMatrix")&&(i.multiply(n,l.wcvc,e.mcwc),a.setUniformMatrix("MCVCMatrix",n)),a.isUniformUsed("normalMatrix")){const t=o.create();o.multiply(t,l.normalMatrix,e.normalMatrix),a.setUniformMatrix3x3("normalMatrix",t)}}a.isUniformUsed("cameraParallel")&&e.getProgram().setUniformi("cameraParallel",s.getParallelProjection())},e.getOpenGLMode=(e,n)=>t.context.TRIANGLES,e.buildBufferObjects=(e,n)=>{const r=t.currentInput;if(null===r)return;t.renderable.mapScalars(r,1);const o=t.renderable.getColorMapColors(),i=t.primitives[t.primTypes.Tris].getCABO(),a=r.getPointData(),s=r.getPoints(),l=s.getNumberOfPoints(),u=s.getData();let c=3;c+=4;let d=null,g=0;i.setColorBOStride(4),i.getColorBO()||i.setColorBO(fM.newInstance()),i.getColorBO().setOpenGLRenderWindow(t.openGLRenderWindow),o&&(g=o.getNumberOfComponents(),i.setColorOffset(4),d=o.getData(),i.setColorBOStride(8)),i.setColorComponents(g),i.setStride(28);const p=new Float32Array(7*l*12),f=new Uint8Array(12*l*(d?8:4));let h=null,M=null;null!=t.renderable.getScaleArray()&&a.hasArray(t.renderable.getScaleArray())&&(h=a.getArray(t.renderable.getScaleArray()).getData()),null!=t.renderable.getOrientationArray()&&a.hasArray(t.renderable.getOrientationArray())?M=a.getArray(t.renderable.getOrientationArray()).getData():Xm(["Error setting orientationArray.\n","You have to specify the stick orientation"]);const m=[0,1,3,0,3,2,2,3,5,2,5,4];let A=0,y=0,T=0,D=0;for(let N=0;N<l;++N){let e=t.renderable.getLength(),n=t.renderable.getRadius();h&&(e=h[2*N],n=h[2*N+1]);for(let t=0;t<m.length;++t)A=3*N,p[T++]=u[A++],p[T++]=u[A++],p[T++]=u[A++],A=3*N,p[T++]=M[A++]*e,p[T++]=M[A++]*e,p[T++]=M[A++]*e,p[T++]=n,f[D++]=m[t]%2*255,f[D++]=m[t]>=4?255:0,f[D++]=m[t]>=2?255:0,f[D++]=255,y=N*g,d&&(f[D++]=d[y],f[D++]=d[y+1],f[D++]=d[y+2],f[D++]=d[y+3])}i.setElementCount(T/7),i.upload(p,lM.ARRAY_BUFFER),i.getColorBO().upload(f,lM.ARRAY_BUFFER),t.VBOBuildTime.modified()}}(e,t)}var $m={newInstance:hd(qm,"vtkOpenGLStickMapper"),extend:qm};const Jm={};function eA(e,t,n={}){Object.assign(t,Jm,n),Lh.extend(e,t,n),t.keyMatrixTime={},Ed.obj(t.keyMatrixTime,{mtime:0}),t.normalMatrix=o.create(),t.MCWCMatrix=i.create(),Ed.setGet(e,t,["context"]),function(e,t){t.classHierarchy.push("vtkOpenGLVolume"),e.buildPass=n=>{t.renderable&&t.renderable.getVisibility()&&n&&(t.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),e.prepareNodes(),e.addMissingNode(t.renderable.getMapper()),e.removeUnusedNodes())},e.queryPass=(e,n)=>{if(e){if(!t.renderable||!t.renderable.getVisibility())return;n.incrementVolumeCount()}},e.traverseVolumePass=n=>{t.renderable&&t.renderable.getVisibility()&&(!t.openGLRenderer.getSelector()||t.renderable.getPickable())&&(e.apply(n,!0),t.children[0].traverse(n),e.apply(n,!1))},e.volumePass=n=>{t.renderable&&t.renderable.getVisibility()&&(n?(t.context=e.getFirstAncestorOfType("vtkOpenGLRenderWindow").getContext(),t.context.depthMask(!1)):t.context.depthMask(!0))},e.getKeyMatrices=()=>(t.renderable.getMTime()>t.keyMatrixTime.getMTime()&&(t.renderable.computeMatrix(),i.copy(t.MCWCMatrix,t.renderable.getMatrix()),i.transpose(t.MCWCMatrix,t.MCWCMatrix),t.renderable.getIsIdentity()?o.identity(t.normalMatrix):(o.fromMat4(t.normalMatrix,t.MCWCMatrix),o.invert(t.normalMatrix,t.normalMatrix)),t.keyMatrixTime.modified()),{mcwc:t.MCWCMatrix,normalMatrix:t.normalMatrix})}(e,t)}var tA={newInstance:Ed.newInstance(eA,"vtkOpenGLVolume"),extend:eA};var nA=n("WyB7"),rA=n.n(nA),oA=n("+FSz"),iA=n.n(oA);const{vtkWarningMacro:aA,vtkErrorMacro:sA}=Ed,lA={context:null,VBOBuildTime:null,scalarTexture:null,scalarTextureString:null,opacityTexture:null,opacityTextureString:null,colorTexture:null,colorTextureString:null,jitterTexture:null,tris:null,framebuffer:null,copyShader:null,copyVAO:null,lastXYF:1,targetXYF:1,zBufferTexture:null,lastZBufferTexture:null,lastLightComplexity:0,fullViewportTime:1,idxToView:null,idxNormalMatrix:null,modelToView:null,projectionToView:null,avgWindowArea:0,avgFrameTime:0};function uA(e,t,n={}){Object.assign(t,lA,n),Lh.extend(e,t,n),t.VBOBuildTime={},Ed.obj(t.VBOBuildTime,{mtime:0}),t.tris=HM.newInstance(),t.scalarTexture=Vh.newInstance(),t.opacityTexture=Vh.newInstance(),t.colorTexture=Vh.newInstance(),t.jitterTexture=Vh.newInstance(),t.jitterTexture.setWrapS(xh.REPEAT),t.jitterTexture.setWrapT(xh.REPEAT),t.framebuffer=Gh.newInstance(),t.idxToView=i.create(),t.idxNormalMatrix=o.create(),t.modelToView=i.create(),t.projectionToView=i.create(),t.projectionToWorld=i.create(),Ed.setGet(e,t,["context"]),function(e,t){t.classHierarchy.push("vtkOpenGLVolumeMapper"),e.buildPass=()=>{t.zBufferTexture=null},e.opaqueZBufferPass=(e,n)=>{if(e){const e=n.getZBufferTexture();e!==t.zBufferTexture&&(t.zBufferTexture=e)}},e.volumePass=(n,r)=>{if(n){t.openGLRenderWindow=e.getFirstAncestorOfType("vtkOpenGLRenderWindow"),t.context=t.openGLRenderWindow.getContext(),t.tris.setOpenGLRenderWindow(t.openGLRenderWindow),t.jitterTexture.setOpenGLRenderWindow(t.openGLRenderWindow),t.framebuffer.setOpenGLRenderWindow(t.openGLRenderWindow),t.scalarTexture.setOpenGLRenderWindow(t.openGLRenderWindow),t.colorTexture.setOpenGLRenderWindow(t.openGLRenderWindow),t.opacityTexture.setOpenGLRenderWindow(t.openGLRenderWindow),t.openGLVolume=e.getFirstAncestorOfType("vtkOpenGLVolume");const n=t.openGLVolume.getRenderable();t.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer");const r=t.openGLRenderer.getRenderable();t.openGLCamera=t.openGLRenderer.getViewNodeFor(r.getActiveCamera()),e.renderPiece(r,n)}},e.buildShaders=(t,n,r)=>{e.getShaderTemplate(t,n,r),e.replaceShaderValues(t,n,r)},e.getShaderTemplate=(e,t,n)=>{e.Vertex=rA.a,e.Fragment=iA.a,e.Geometry=""},e.replaceShaderValues=(n,r,o)=>{let i=n.Fragment;1===o.getProperty().getInterpolationType()&&(i=UM.substitute(i,"//VTK::TrilinearOn","#define vtkTrilinearOn").result),!0===o.getProperty().getUseLabelOutline()&&(i=UM.substitute(i,"//VTK::ImageLabelOutlineOn","#define vtkImageLabelOutlineOn").result);const s=t.scalarTexture.getComponents();i=UM.substitute(i,"//VTK::NumComponents",`#define vtkNumComponents ${s}`).result;const l=o.getProperty().getIndependentComponents();l&&(i=UM.substitute(i,"//VTK::IndependentComponentsOn","#define vtkIndependentComponentsOn").result);const u=t.currentInput.getExtent(),c=t.currentInput.getSpacing(),d=a.create();a.set(d,(u[1]-u[0])*c[0],(u[3]-u[2])*c[1],(u[5]-u[4])*c[2]);const g=a.length(d)/t.renderable.getSampleDistance();i=UM.substitute(i,"//VTK::MaximumSamplesValue",`${Math.ceil(g)}`).result,i=UM.substitute(i,"//VTK::LightComplexity",`#define vtkLightComplexity ${t.lastLightComplexity}`).result,t.gopacity=o.getProperty().getUseGradientOpacity(0);for(let e=1;l&&!t.gopacity&&e<s;++e)o.getProperty().getUseGradientOpacity(e)&&(t.gopacity=!0);t.gopacity&&(i=UM.substitute(i,"//VTK::GradientOpacityOn","#define vtkGradientOpacityOn").result),null!==t.zBufferTexture&&(i=UM.substitute(i,"//VTK::ZBuffer::Dec",["uniform sampler2D zBufferTexture;","uniform float vpWidth;","uniform float vpHeight;"]).result,i=UM.substitute(i,"//VTK::ZBuffer::Impl",["vec4 depthVec = texture2D(zBufferTexture, vec2(gl_FragCoord.x / vpWidth, gl_FragCoord.y/vpHeight));","float zdepth = (depthVec.r*256.0 + depthVec.g)/257.0;","zdepth = zdepth * 2.0 - 1.0;","zdepth = -2.0 * camFar * camNear / (zdepth*(camFar-camNear)-(camFar+camNear)) - camNear;","zdepth = -zdepth/rayDir.z;","dists.y = min(zdepth,dists.y);"]).result),i=UM.substitute(i,"//VTK::BlendMode",`${t.renderable.getBlendMode()}`).result;const p=t.renderable.getAverageIPScalarRange();i=UM.substitute(i,"//VTK::AverageIPScalarRangeMin",`${p[0]}.0`).result,i=UM.substitute(i,"//VTK::AverageIPScalarRangeMax",`${p[1]}.0`).result,n.Fragment=i,e.replaceShaderLight(n,r,o)},e.replaceShaderLight=(e,n,r)=>{let o=e.Fragment;switch(t.lastLightComplexity){default:case 0:break;case 1:case 2:case 3:{let e=0;n.getLights().forEach(t=>{t.getSwitch()>0&&(o=UM.substitute(o,"//VTK::Light::Dec",[`uniform vec3 lightColor${e};`,`uniform vec3 lightDirectionVC${e}; // normalized`,`uniform vec3 lightHalfAngleVC${e}; // normalized`,"//VTK::Light::Dec"],!1).result,o=UM.substitute(o,"//VTK::Light::Impl",[`  float df = abs(dot(normal.rgb, -lightDirectionVC${e}));`,`  diffuse += ((df) * lightColor${e});`,`    float sf = pow( abs(dot(lightHalfAngleVC${e},normal.rgb)), vSpecularPower);`,`    specular += ((sf) * lightColor${e});`,"  //VTK::Light::Impl"],!1).result,e++)})}}e.Fragment=o},e.getNeedToRebuildShaders=(n,r,o)=>{let i=0;o.getProperty().getShade()&&0===t.renderable.getBlendMode()&&(i=0,t.numberOfLights=0,r.getLights().forEach(e=>{e.getSwitch()>0&&(t.numberOfLights++,0===i&&(i=1)),1===i&&(t.numberOfLights>1||1!==e.getIntensity()||!e.lightTypeIsHeadLight())&&(i=2),i<3&&e.getPositional()&&(i=3)}));let a=!1;return t.lastLightComplexity!==i&&(t.lastLightComplexity=i,a=!0),!!(0===n.getProgram()||a||t.lastHaveSeenDepthRequest!==t.haveSeenDepthRequest||!!t.lastZBufferTexture!=!!t.zBufferTexture||n.getShaderSourceTime().getMTime()<e.getMTime()||n.getShaderSourceTime().getMTime()<o.getMTime()||n.getShaderSourceTime().getMTime()<t.renderable.getMTime()||n.getShaderSourceTime().getMTime()<t.currentInput.getMTime())&&(t.lastZBufferTexture=t.zBufferTexture,!0)},e.updateShaders=(n,r,o)=>{if(t.lastBoundBO=n,e.getNeedToRebuildShaders(n,r,o)){const i={Vertex:null,Fragment:null,Geometry:null};e.buildShaders(i,r,o);const a=t.openGLRenderWindow.getShaderCache().readyShaderProgramArray(i.Vertex,i.Fragment,i.Geometry);a!==n.getProgram()&&(n.setProgram(a),n.getVAO().releaseGraphicsResources()),n.getShaderSourceTime().modified()}else t.openGLRenderWindow.getShaderCache().readyShaderProgram(n.getProgram());n.getVAO().bind(),e.setMapperShaderParameters(n,r,o),e.setCameraShaderParameters(n,r,o),e.setPropertyShaderParameters(n,r,o)},e.setMapperShaderParameters=(n,r,o)=>{const i=n.getProgram();if(n.getCABO().getElementCount()&&(t.VBOBuildTime.getMTime()>n.getAttributeUpdateTime().getMTime()||n.getShaderSourceTime().getMTime()>n.getAttributeUpdateTime().getMTime())&&(i.isAttributeUsed("vertexDC")&&(n.getVAO().addAttributeArray(i,n.getCABO(),"vertexDC",n.getCABO().getVertexOffset(),n.getCABO().getStride(),t.context.FLOAT,3,t.context.FALSE)||sA("Error setting vertexDC in shader VAO.")),n.getAttributeUpdateTime().modified()),i.setUniformi("texture1",t.scalarTexture.getTextureUnit()),i.setUniformf("sampleDistance",t.renderable.getSampleDistance()),null!==t.zBufferTexture){i.setUniformi("zBufferTexture",t.zBufferTexture.getTextureUnit());const n=e.getRenderTargetSize();i.setUniformf("vpWidth",n[0]),i.setUniformf("vpHeight",n[1])}},e.setCameraShaderParameters=(n,r,s)=>{const l=t.openGLCamera.getKeyMatrices(r),u=t.openGLVolume.getKeyMatrices();i.multiply(t.modelToView,l.wcvc,u.mcwc);const c=n.getProgram(),d=t.openGLCamera.getRenderable(),g=d.getClippingRange();c.setUniformf("camThick",g[1]-g[0]),c.setUniformf("camNear",g[0]),c.setUniformf("camFar",g[1]);const p=t.currentInput.getBounds(),f=t.currentInput.getDimensions(),h=a.create(),M=a.create();let m=1,A=-1,y=1,T=-1;for(let e=0;e<8;++e)a.set(h,p[e%2],p[2+Math.floor(e/2)%2],p[4+Math.floor(e/4)]),a.transformMat4(h,h,t.modelToView),d.getParallelProjection()||(a.normalize(M,h),a.scale(h,M,-g[0]/h[2])),a.transformMat4(h,h,l.vcpc),m=Math.min(h[0],m),A=Math.max(h[0],A),y=Math.min(h[1],y),T=Math.max(h[1],T);c.setUniformf("dcxmin",m),c.setUniformf("dcxmax",A),c.setUniformf("dcymin",y),c.setUniformf("dcymax",T),c.isUniformUsed("cameraParallel")&&c.setUniformi("cameraParallel",d.getParallelProjection());const D=t.currentInput.getExtent(),N=t.currentInput.getSpacing(),x=a.create();a.set(x,(D[1]-D[0]+1)*N[0],(D[3]-D[2]+1)*N[1],(D[5]-D[4]+1)*N[2]),c.setUniform3f("vSpacing",N[0],N[1],N[2]),a.set(h,D[0],D[2],D[4]),t.currentInput.indexToWorldVec3(h,h),a.transformMat4(h,h,t.modelToView),c.setUniform3f("vOriginVC",h[0],h[1],h[2]);const I=t.currentInput.getIndexToWorld();i.multiply(t.idxToView,t.modelToView,I),o.multiply(t.idxNormalMatrix,l.normalMatrix,u.normalMatrix),o.multiply(t.idxNormalMatrix,t.idxNormalMatrix,t.currentInput.getDirection());const w=a.length(x)/t.renderable.getSampleDistance();w>t.renderable.getMaximumSamplesPerRay()&&aA(`The number of steps required ${Math.ceil(w)} is larger than the\n        specified maximum number of steps ${t.renderable.getMaximumSamplesPerRay()}.\n        Please either change the\n        volumeMapper sampleDistance or its maximum number of samples.`);const C=a.create();if(a.set(C,1,1,1),a.divide(C,C,x),c.setUniform3f("vVCToIJK",C[0],C[1],C[2]),c.setUniform3i("volumeDimensions",f[0],f[1],f[2]),!t.openGLRenderWindow.getWebgl2()){const e=t.scalarTexture.getVolumeInfo();c.setUniformf("texWidth",t.scalarTexture.getWidth()),c.setUniformf("texHeight",t.scalarTexture.getHeight()),c.setUniformi("xreps",e.xreps),c.setUniformf("xstride",e.xstride),c.setUniformf("ystride",e.ystride)}const E=a.create(),v=a.create();for(let o=0;o<6;++o){switch(o){default:case 0:a.set(E,1,0,0),a.set(v,D[1],D[3],D[5]);break;case 1:a.set(E,-1,0,0),a.set(v,D[0],D[2],D[4]);break;case 2:a.set(E,0,1,0),a.set(v,D[1],D[3],D[5]);break;case 3:a.set(E,0,-1,0),a.set(v,D[0],D[2],D[4]);break;case 4:a.set(E,0,0,1),a.set(v,D[1],D[3],D[5]);break;case 5:a.set(E,0,0,-1),a.set(v,D[0],D[2],D[4])}a.transformMat3(E,E,t.idxNormalMatrix),a.transformMat4(v,v,t.idxToView);const n=-1*a.dot(v,E);if(c.setUniform3f(`vPlaneNormal${o}`,E[0],E[1],E[2]),c.setUniformf(`vPlaneDistance${o}`,n),s.getProperty().getUseLabelOutline()){const n=t.currentInput.getWorldToIndex();c.setUniformMatrix("vWCtoIDX",n),i.invert(t.projectionToWorld,l.wcpc),c.setUniformMatrix("PCWCMatrix",t.projectionToWorld);const r=e.getRenderTargetSize();c.setUniformf("vpWidth",r[0]),c.setUniformf("vpHeight",r[1])}}switch(i.invert(t.projectionToView,l.vcpc),c.setUniformMatrix("PCVCMatrix",t.projectionToView),t.lastLightComplexity){default:case 0:break;case 1:case 2:case 3:{let e=0;const t=[];r.getLights().forEach(n=>{if(n.getSwitch()>0){const r=n.getColor(),o=n.getIntensity();t[0]=r[0]*o,t[1]=r[1]*o,t[2]=r[2]*o,c.setUniform3fArray(`lightColor${e}`,t);const i=n.getDirection();a.set(E,i[0],i[1],i[2]),a.transformMat3(E,E,l.normalMatrix),c.setUniform3f(`lightDirectionVC${e}`,E[0],E[1],E[2]),c.setUniform3fArray(`lightHalfAngleVC${e}`,[-.5*E[0],-.5*E[1],-.5*(E[2]-1)]),e++}})}}},e.setPropertyShaderParameters=(e,n,r)=>{const o=e.getProgram();o.setUniformi("ctexture",t.colorTexture.getTextureUnit()),o.setUniformi("otexture",t.opacityTexture.getTextureUnit()),o.setUniformi("jtexture",t.jitterTexture.getTextureUnit());const i=t.scalarTexture.getVolumeInfo(),a=r.getProperty(),s=t.scalarTexture.getComponents(),l=r.getProperty().getIndependentComponents();if(l&&s>=2)for(let t=0;t<s;t++)o.setUniformf(`mix${t}`,r.getProperty().getComponentWeight(t));for(let t=0;t<s;t++){const e=l?t:0,n=i.scale[t],r=a.getScalarOpacity(e).getRange(),s=n/(r[1]-r[0]);o.setUniformf(`oshift${t}`,(i.offset[t]-r[0])/(r[1]-r[0])),o.setUniformf(`oscale${t}`,s);const u=a.getRGBTransferFunction(e).getRange();o.setUniformf(`cshift${t}`,(i.offset[t]-u[0])/(u[1]-u[0])),o.setUniformf(`cscale${t}`,n/(u[1]-u[0]))}if(t.gopacity)if(l)for(let t=0;t<s;++t){const e=i.scale[t];if(a.getUseGradientOpacity(t)){const n=a.getGradientOpacityMinimumOpacity(t),r=a.getGradientOpacityMaximumOpacity(t);o.setUniformf(`gomin${t}`,n),o.setUniformf(`gomax${t}`,r);const i=[a.getGradientOpacityMinimumValue(t),a.getGradientOpacityMaximumValue(t)];o.setUniformf(`goscale${t}`,e*(r-n)/(i[1]-i[0])),o.setUniformf(`goshift${t}`,-i[0]*(r-n)/(i[1]-i[0])+n)}else o.setUniformf(`gomin${t}`,1),o.setUniformf(`gomax${t}`,1),o.setUniformf(`goscale${t}`,0),o.setUniformf(`goshift${t}`,1)}else{const e=i.scale[s-1],t=a.getGradientOpacityMinimumOpacity(0),n=a.getGradientOpacityMaximumOpacity(0);o.setUniformf("gomin0",t),o.setUniformf("gomax0",n);const r=[a.getGradientOpacityMinimumValue(0),a.getGradientOpacityMaximumValue(0)];o.setUniformf("goscale0",e*(n-t)/(r[1]-r[0])),o.setUniformf("goshift0",-r[0]*(n-t)/(r[1]-r[0])+t)}if(!0===r.getProperty().getUseLabelOutline()){const e=r.getProperty().getLabelOutlineThickness();o.setUniformi("outlineThickness",e)}t.lastLightComplexity>0&&(o.setUniformf("vAmbient",a.getAmbient()),o.setUniformf("vDiffuse",a.getDiffuse()),o.setUniformf("vSpecular",a.getSpecular()),o.setUniformf("vSpecularPower",a.getSpecularPower()))},e.getRenderTargetSize=()=>{if(t.lastXYF>1.43){const e=t.framebuffer.getSize();return[t.fvp[0]*e[0],t.fvp[1]*e[1]]}return t.openGLRenderWindow.getFramebufferSize()},e.renderPieceStart=(n,r)=>{if(t.renderable.getAutoAdjustSampleDistances()){const e=n.getVTKWindow().getInteractor(),r=e.getLastFrameTime();if(t.avgFrameTime=.97*t.avgFrameTime+.03*r,t.avgWindowArea=.97*t.avgWindowArea+.03/(t.lastXYF*t.lastXYF),n.getVTKWindow().getInteractor().isAnimating()){let n=Math.sqrt(t.avgFrameTime*e.getDesiredUpdateRate()/t.avgWindowArea);n>10&&(n=10),t.targetXYF=n}else t.targetXYF=Math.sqrt(t.avgFrameTime*e.getStillUpdateRate()/t.avgWindowArea);t.targetXYF<1.53&&t.targetXYF>1.33&&(t.targetXYF=t.lastXYF),Math.abs(1-t.targetXYF/t.lastXYF)<.1&&(t.targetXYF=t.lastXYF),t.lastXYF=t.targetXYF}else t.lastXYF=t.renderable.getImageSampleDistance();t.lastXYF<=1.43&&(t.lastXYF=1);const o=t.lastXYF,i=t.openGLRenderWindow.getFramebufferSize();if(o>1.43){if(t.framebuffer.saveCurrentBindingsAndBuffers(),null===t.framebuffer.getGLFramebuffer())t.framebuffer.create(Math.floor(.7*i[0]),Math.floor(.7*i[1])),t.framebuffer.populateFramebuffer();else{const e=t.framebuffer.getSize();e[0]===Math.floor(.7*i[0])&&e[1]===Math.floor(.7*i[1])||(t.framebuffer.create(Math.floor(.7*i[0]),Math.floor(.7*i[1])),t.framebuffer.populateFramebuffer())}t.framebuffer.bind();const e=t.context;e.clearColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clear(e.COLOR_BUFFER_BIT),e.viewport(0,0,i[0]/o,i[1]/o),t.fvp=[Math.floor(i[0]/o)/Math.floor(.7*i[0]),Math.floor(i[1]/o)/Math.floor(.7*i[1])]}t.context.disable(t.context.DEPTH_TEST),e.updateBufferObjects(n,r),0===r.getProperty().getInterpolationType()?(t.scalarTexture.setMinificationFilter(Ih.NEAREST),t.scalarTexture.setMagnificationFilter(Ih.NEAREST)):(t.scalarTexture.setMinificationFilter(Ih.LINEAR),t.scalarTexture.setMagnificationFilter(Ih.LINEAR)),t.lastBoundBO=null,null!==t.zBufferTexture&&t.zBufferTexture.activate()},e.renderPieceDraw=(n,r)=>{const o=t.context;t.scalarTexture.activate(),t.opacityTexture.activate(),t.colorTexture.activate(),t.jitterTexture.activate(),e.updateShaders(t.tris,n,r),o.drawArrays(o.TRIANGLES,0,t.tris.getCABO().getElementCount()),t.tris.getVAO().release(),t.scalarTexture.deactivate(),t.colorTexture.deactivate(),t.opacityTexture.deactivate(),t.jitterTexture.deactivate()},e.renderPieceFinish=(e,n)=>{if(null!==t.zBufferTexture&&t.zBufferTexture.deactivate(),t.lastXYF>1.43){if(t.framebuffer.restorePreviousBindingsAndBuffers(),null===t.copyShader){t.copyShader=t.openGLRenderWindow.getShaderCache().readyShaderProgramArray(["//VTK::System::Dec","attribute vec4 vertexDC;","uniform vec2 tfactor;","varying vec2 tcoord;","void main() { tcoord = vec2(vertexDC.x*0.5 + 0.5, vertexDC.y*0.5 + 0.5) * tfactor; gl_Position = vertexDC; }"].join("\n"),["//VTK::System::Dec","//VTK::Output::Dec","uniform sampler2D texture1;","varying vec2 tcoord;","void main() { gl_FragData[0] = texture2D(texture1,tcoord); }"].join("\n"),"");const e=t.copyShader;t.copyVAO=QM.newInstance(),t.copyVAO.setOpenGLRenderWindow(t.openGLRenderWindow),t.tris.getCABO().bind(),t.copyVAO.addAttributeArray(e,t.tris.getCABO(),"vertexDC",t.tris.getCABO().getVertexOffset(),t.tris.getCABO().getStride(),t.context.FLOAT,3,t.context.FALSE)||sA("Error setting vertexDC in copy shader VAO.")}else t.openGLRenderWindow.getShaderCache().readyShaderProgram(t.copyShader);const e=t.openGLRenderWindow.getFramebufferSize();t.context.viewport(0,0,e[0],e[1]);const n=t.framebuffer.getColorTexture();n.activate(),t.copyShader.setUniformi("texture",n.getTextureUnit()),t.copyShader.setUniform2f("tfactor",t.fvp[0],t.fvp[1]);const r=t.context;r.blendFuncSeparate(r.ONE,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA),t.context.drawArrays(t.context.TRIANGLES,0,t.tris.getCABO().getElementCount()),n.deactivate(),r.blendFuncSeparate(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA)}},e.renderPiece=(n,r)=>{e.invokeEvent({type:"StartEvent"}),t.renderable.update(),t.currentInput=t.renderable.getInputData(),e.invokeEvent({type:"EndEvent"}),t.currentInput?(e.renderPieceStart(n,r),e.renderPieceDraw(n,r),e.renderPieceFinish(n,r)):sA("No input!")},e.computeBounds=(n,r)=>{e.getInput()?t.bounds=e.getInput().getBounds():Qd(t.Bounds)},e.updateBufferObjects=(t,n)=>{e.getNeedToRebuildBufferObjects(t,n)&&e.buildBufferObjects(t,n)},e.getNeedToRebuildBufferObjects=(n,r)=>t.VBOBuildTime.getMTime()<e.getMTime()||t.VBOBuildTime.getMTime()<r.getMTime()||t.VBOBuildTime.getMTime()<t.renderable.getMTime()||t.VBOBuildTime.getMTime()<r.getProperty().getMTime()||t.VBOBuildTime.getMTime()<t.currentInput.getMTime(),e.buildBufferObjects=(e,n)=>{const r=t.currentInput;if(null===r)return;const o=n.getProperty();if(!t.jitterTexture.getHandle()){const e=new Uint8Array(1024);for(let t=0;t<1024;++t)e[t]=255*Math.random();t.jitterTexture.setMinificationFilter(Ih.LINEAR),t.jitterTexture.setMagnificationFilter(Ih.LINEAR),t.jitterTexture.create2DFromRaw(32,32,1,Yg.UNSIGNED_CHAR,e)}const i=r.getPointData().getScalars().getNumberOfComponents(),a=o.getIndependentComponents()?i:1;let s=`${o.getMTime()}`;if(t.opacityTextureString!==s){const e=1024,n=2*e*a,r=new Float32Array(n),i=new Float32Array(e);for(let s=0;s<a;++s){const n=o.getScalarOpacity(s),a=t.renderable.getSampleDistance()/o.getScalarOpacityUnitDistance(s),l=n.getRange();n.getTable(l[0],l[1],e,i,1);for(let t=0;t<e;++t)r[s*e*2+t]=1-(1-i[t])**a,r[s*e*2+t+e]=r[s*e*2+t]}if(t.opacityTexture.releaseGraphicsResources(t.openGLRenderWindow),t.opacityTexture.setMinificationFilter(Ih.LINEAR),t.opacityTexture.setMagnificationFilter(Ih.LINEAR),t.openGLRenderWindow.getWebgl2()||t.context.getExtension("OES_texture_float")&&t.context.getExtension("OES_texture_float_linear"))t.opacityTexture.create2DFromRaw(e,2*a,1,Yg.FLOAT,r);else{const o=new Uint8Array(n);for(let e=0;e<n;++e)o[e]=255*r[e];t.opacityTexture.create2DFromRaw(e,2*a,1,Yg.UNSIGNED_CHAR,o)}t.opacityTextureString=s}if(s=`${o.getMTime()}`,t.colorTextureString!==s){const e=1024,n=new Uint8Array(2*e*a*3),r=new Float32Array(3*e);for(let t=0;t<a;++t){const i=o.getRGBTransferFunction(t),a=i.getRange();i.getTable(a[0],a[1],e,r,1);for(let o=0;o<3*e;++o)n[t*e*6+o]=255*r[o],n[t*e*6+o+3*e]=255*r[o]}t.colorTexture.releaseGraphicsResources(t.openGLRenderWindow),t.colorTexture.setMinificationFilter(Ih.LINEAR),t.colorTexture.setMagnificationFilter(Ih.LINEAR),t.colorTexture.create2DFromRaw(e,2*a,3,Yg.UNSIGNED_CHAR,n),t.colorTextureString=s}if(s=`${r.getMTime()}`,t.scalarTextureString!==s){const e=r.getDimensions();t.scalarTexture.releaseGraphicsResources(t.openGLRenderWindow),t.scalarTexture.resetFormatAndType(),t.scalarTexture.create3DFilterableFromRaw(e[0],e[1],e[2],i,r.getPointData().getScalars().getDataType(),r.getPointData().getScalars().getData()),t.scalarTextureString=s}if(!t.tris.getCABO().getElementCount()){const e=new Float32Array(12);for(let t=0;t<4;t++)e[3*t]=t%2*2-1,e[3*t+1]=t>1?1:-1,e[3*t+2]=-1;const n=new Uint16Array(8);n[0]=3,n[1]=0,n[2]=1,n[3]=3,n[4]=3,n[5]=0,n[6]=3,n[7]=2;const r=rp.newInstance({numberOfComponents:3,values:e});r.setName("points");const o=rp.newInstance({numberOfComponents:1,values:n});t.tris.getCABO().createVBO(o,"polys",Sg.SURFACE,{points:r,cellOffset:0})}t.VBOBuildTime.modified()}}(e,t)}var cA={newInstance:Ed.newInstance(uA,"vtkOpenGLVolumeMapper"),extend:uA};const dA={};function gA(e,t,n={}){Object.assign(t,dA,n),Ed.obj(e,t),function(e,t){t.overrides={},t.classHierarchy.push("vtkViewNodeFactory"),e.createNode=n=>{if(n.isDeleted())return null;let r=0,o=n.getClassName(r++),i=!1;const a=Object.keys(t.overrides);for(;o&&!i;)-1!==a.indexOf(o)?i=!0:o=n.getClassName(r++);if(!i)return null;const s=t.overrides[o]();return s.setMyFactory(e),s},e.registerOverride=(e,n)=>{t.overrides[e]=n}}(e,t)}var pA={newInstance:Ed.newInstance(gA,"vtkViewNodeFactory"),extend:gA};const fA={};function hA(e,t,n={}){Object.assign(t,fA,n),pA.extend(e,t,n),function(e,t){t.classHierarchy.push("vtkOpenGLViewNodeFactory")}(0,t),e.registerOverride("vtkActor",tM.newInstance),e.registerOverride("vtkActor2D",oM.newInstance),e.registerOverride("vtkCamera",sM.newInstance),e.registerOverride("vtkGlyph3DMapper",ym.newInstance),e.registerOverride("vtkImageMapper",wm.newInstance),e.registerOverride("vtkImageSlice",vm.newInstance),e.registerOverride("vtkMapper",cm.newInstance),e.registerOverride("vtkPixelSpaceCallbackMapper",Sm.newInstance),e.registerOverride("vtkRenderer",zm.newInstance),e.registerOverride("vtkSkybox",Bm.newInstance),e.registerOverride("vtkSphereMapper",Wm.newInstance),e.registerOverride("vtkStickMapper",$m.newInstance),e.registerOverride("vtkTexture",Vh.newInstance),e.registerOverride("vtkVolume",tA.newInstance),e.registerOverride("vtkVolumeMapper",cA.newInstance),e.registerOverride("vtkWidgetRepresentation",$h.newInstance)}var MA={newInstance:Ed.newInstance(hA,"vtkOpenGLViewNodeFactory"),extend:hA},mA=n("jYEY"),AA=n.n(mA);const yA=["lastShaderBound","context","openGLRenderWindow"],TA={lastShaderBound:null,shaderPrograms:null,context:null,openGLRenderWindow:null};function DA(e,t,n={}){return Object.assign(t,TA,n),t.shaderPrograms={},Ed.obj(e,t),Ed.setGet(e,t,yA),function(e,t){t.classHierarchy.push("vtkShaderCache"),e.replaceShaderValues=(e,n,r)=>{let o=n;r.length>0&&(o=UM.substitute(o,"VSOut","GSOut").result);const i=t.openGLRenderWindow.getWebgl2();let a="\n",s="#version 100\n";i?s="#version 300 es\n#define attribute in\n#define textureCube texture\n#define texture2D texture\n#define textureCubeLod textureLod\n#define texture2DLod textureLod\n":(t.context.getExtension("OES_standard_derivatives"),t.context.getExtension("EXT_frag_depth")&&(a="#extension GL_EXT_frag_depth : enable\n"),t.context.getExtension("EXT_shader_texture_lod")&&(a+="#extension GL_EXT_shader_texture_lod : enable\n#define textureCubeLod textureCubeLodEXT\n#define texture2DLod texture2DLodEXT")),o=UM.substitute(o,"//VTK::System::Dec",[`${s}\n`,i?"":"#extension GL_OES_standard_derivatives : enable\n",a,"#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","precision highp int;","#else","precision mediump float;","precision mediump int;","#endif"]).result;let l=UM.substitute(e,"//VTK::System::Dec",[`${s}\n`,"#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","precision highp int;","#else","precision mediump float;","precision mediump int;","#endif"]).result;return i&&(l=UM.substitute(l,"varying","out").result,o=UM.substitute(o,"varying","in").result,o=UM.substitute(o,"gl_FragData\\[0\\]","fragOutput0").result,o=UM.substitute(o,"//VTK::Output::Dec","layout(location = 0) out vec4 fragOutput0;").result),{VSSource:l,FSSource:o,GSSource:UM.substitute(r,"//VTK::System::Dec",s).result}},e.readyShaderProgramArray=(t,n,r)=>{const o=e.replaceShaderValues(t,n,r),i=e.getShaderProgram(o.VSSource,o.FSSource,o.GSSource);return e.readyShaderProgram(i)},e.readyShaderProgram=t=>t&&(t.getCompiled()||t.compileShader())&&e.bindShader(t)?t:null,e.getShaderProgram=(e,n,r)=>{const o=`${e}${n}${r}`,i=AA()(o);if(-1===Object.keys(t.shaderPrograms).indexOf(i)){const o=UM.newInstance();return o.setContext(t.context),o.getVertexShader().setSource(e),o.getFragmentShader().setSource(n),r&&o.getGeometryShader().setSource(r),o.setMd5Hash(i),t.shaderPrograms[i]=o,o}return t.shaderPrograms[i]},e.releaseGraphicsResources=n=>{e.releaseCurrentShader(),Object.keys(t.shaderPrograms).map(e=>t.shaderPrograms[e]).forEach(e=>e.releaseGraphicsResources(n))},e.releaseGraphicsResources=()=>{t.astShaderBound&&(t.lastShaderBound.release(),t.lastShaderBound=null)},e.bindShader=e=>(t.lastShaderBound===e||(t.lastShaderBound&&t.lastShaderBound.release(),e.bind(),t.lastShaderBound=e),1)}(e,t),Object.freeze(e)}var NA={newInstance:Ed.newInstance(DA,"vtkShaderCache"),extend:DA};const{vtkErrorMacro:xA}=Ed,IA={context:null,numberOfTextureUnits:0,textureUnits:0};function wA(e,t,n={}){Object.assign(t,IA,n),Ed.obj(e,t),t.textureUnits=[],Ed.get(e,t,["numberOfTextureUnits"]),Ed.setGet(e,t,["context"]),function(e,t){t.classHierarchy.push("vtkOpenGLTextureUnitManager"),e.deleteTable=()=>{for(let e=0;e<t.numberOfTextureUnits;++e)!0===t.textureUnits[e]&&xA("some texture units  were not properly released");t.textureUnits=[],t.numberOfTextureUnits=0},e.setContext=n=>{if(t.context!==n){if(0!==t.context&&e.deleteTable(),t.context=n,t.context){t.numberOfTextureUnits=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS);for(let e=0;e<t.numberOfTextureUnits;++e)t.textureUnits[e]=!1}e.modified()}},e.allocate=()=>{for(let n=0;n<t.numberOfTextureUnits;n++)if(!e.isAllocated(n))return t.textureUnits[n]=!0,n;return-1},e.allocateUnit=n=>e.isAllocated(n)?-1:(t.textureUnits[n]=!0,n),e.isAllocated=e=>t.textureUnits[e],e.free=e=>{t.textureUnits[e]=!1}}(e,t)}var CA={newInstance:Ed.newInstance(wA,"vtkOpenGLTextureUnitManager"),extend:wA},EA=n("O2i/"),vA=n.n(EA);const{vtkDebugMacro:LA,vtkErrorMacro:bA}=Ed,OA=-1!==navigator.userAgent.indexOf("Chrome");function SA(e,t,n){const r=e.createFramebuffer(),o=e.createTexture();e.bindTexture(e.TEXTURE_2D,o),e.texImage2D(e.TEXTURE_2D,0,t,2,2,0,t,n,null),e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,o,0);const i=e.checkFramebufferStatus(e.FRAMEBUFFER);return e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindTexture(e.TEXTURE_2D,null),i===e.FRAMEBUFFER_COMPLETE}let jA=0;const PA=[];function kA(){jA--,PA.forEach(e=>e(jA))}const zA={cullFaceEnabled:!1,depthMaskEnabled:!0,shaderCache:null,initialized:!1,context:null,canvas:null,size:[300,300],cursorVisibility:!0,cursor:"pointer",textureUnitManager:null,textureResourceIds:null,containerSize:null,renderPasses:[],notifyStartCaptureImage:!1,webgl2:!1,defaultToWebgl2:!0,vrResolution:[2160,1200],queryVRSize:!1,hideCanvasInVR:!0,activeFramebuffer:null,vrDisplay:null,imageFormat:"image/png",useOffScreen:!1,useBackgroundImage:!1};function RA(e,t,n={}){Object.assign(t,zA,n),t.canvas=document.createElement("canvas"),t.canvas.style.width="100%",jA++,PA.forEach(e=>e(jA)),t.bgImage=new Image,t.bgImage.style.position="absolute",t.bgImage.style.left="0",t.bgImage.style.top="0",t.bgImage.style.width="100%",t.bgImage.style.height="100%",t.bgImage.style.zIndex="-1",t.textureResourceIds=new Map,Lh.extend(e,t,n),t.myFactory=MA.newInstance(),t.myFactory.registerOverride("vtkRenderWindow",_A),t.shaderCache=NA.newInstance(),t.shaderCache.setOpenGLRenderWindow(e),t.renderPasses[0]=Xh.newInstance(),Ed.event(e,t,"imageReady"),Ed.event(e,t,"haveVRDisplay"),Ed.get(e,t,["shaderCache","textureUnitManager","webgl2","vrDisplay","useBackgroundImage"]),Ed.setGet(e,t,["initialized","context","canvas","renderPasses","notifyStartCaptureImage","defaultToWebgl2","cursor","queryVRSize","hideCanvasInVR","useOffScreen","activeFramebuffer"]),Ed.setGetArray(e,t,["size","vrResolution"],2),function(e,t){t.classHierarchy.push("vtkOpenGLRenderWindow");const n=[0,0];e.onModified((function(){t.renderable&&(t.size[0]===n[0]&&t.size[1]===n[1]||(n[0]=t.size[0],n[1]=t.size[1],t.canvas.setAttribute("width",t.size[0]),t.canvas.setAttribute("height",t.size[1]))),t.viewStream&&t.viewStream.setSize(t.size[0],t.size[1]),t.canvas.style.display=t.useOffScreen?"none":"block",t.el&&(t.el.style.cursor=t.cursorVisibility?t.cursor:"none"),t.containerSize=null})),e.buildPass=n=>{if(n){if(!t.renderable)return;e.prepareNodes(),e.addMissingNodes(t.renderable.getRenderersByReference()),e.removeUnusedNodes(),e.initialize(),t.children.forEach(t=>{t.setOpenGLRenderWindow(e)})}},e.initialize=()=>{if(!t.initialized){t.context=e.get3DContext(),t.textureUnitManager=CA.newInstance(),t.textureUnitManager.setContext(t.context),t.shaderCache.setContext(t.context);const n=t.context;n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),n.depthFunc(n.LEQUAL),n.enable(n.BLEND),t.initialized=!0}},e.makeCurrent=()=>{t.context.makeCurrent()},e.setContainer=n=>{t.el&&t.el!==n&&(t.canvas.parentNode!==t.el&&bA("Error: canvas parent node does not match container"),t.el.removeChild(t.canvas),t.el.contains(t.bgImage)&&t.el.removeChild(t.bgImage)),t.el!==n&&(t.el=n,t.el&&(t.el.appendChild(t.canvas),t.useBackgroundImage&&t.el.appendChild(t.bgImage)),e.modified())},e.getContainer=()=>t.el,e.getContainerSize=()=>{if(!t.containerSize&&t.el){const{width:e,height:n}=t.el.getBoundingClientRect();t.containerSize=[e,n]}return t.containerSize||t.size},e.getFramebufferSize=()=>t.activeFramebuffer?t.activeFramebuffer.getSize():t.size,e.isInViewport=(t,n,r)=>{const o=r.getViewportByReference(),i=e.getFramebufferSize();return o[0]*i[0]<=t&&o[2]*i[0]>=t&&o[1]*i[1]<=n&&o[3]*i[1]>=n},e.getViewportSize=t=>{const n=t.getViewportByReference(),r=e.getFramebufferSize();return[(n[2]-n[0])*r[0],(n[3]-n[1])*r[1]]},e.getViewportCenter=t=>{const n=e.getViewportSize(t);return[.5*n[0],.5*n[1]]},e.displayToNormalizedDisplay=(t,n,r)=>{const o=e.getFramebufferSize();return[t/o[0],n/o[1],r]},e.normalizedDisplayToDisplay=(t,n,r)=>{const o=e.getFramebufferSize();return[t*o[0],n*o[1],r]},e.worldToView=(e,t,n,r)=>r.worldToView(e,t,n),e.viewToWorld=(e,t,n,r)=>r.viewToWorld(e,t,n),e.worldToDisplay=(t,n,r,o)=>{const i=o.worldToView(t,n,r),a=e.getViewportSize(o),s=o.viewToProjection(i[0],i[1],i[2],a[0]/a[1]),l=o.projectionToNormalizedDisplay(s[0],s[1],s[2]);return e.normalizedDisplayToDisplay(l[0],l[1],l[2])},e.displayToWorld=(t,n,r,o)=>{const i=e.displayToNormalizedDisplay(t,n,r),a=o.normalizedDisplayToProjection(i[0],i[1],i[2]),s=e.getViewportSize(o),l=o.projectionToView(a[0],a[1],a[2],s[0]/s[1]);return o.viewToWorld(l[0],l[1],l[2])},e.normalizedDisplayToViewport=(t,n,r,o)=>{let i=o.getViewportByReference();i=e.normalizedDisplayToDisplay(i[0],i[1],0);const a=e.normalizedDisplayToDisplay(t,n,r);return[a[0]-i[0]-.5,a[1]-i[1]-.5,r]},e.viewportToNormalizedViewport=(t,n,r,o)=>{const i=e.getViewportSize(o);return i&&0!==i[0]&&0!==i[1]?[t/(i[0]-1),n/(i[1]-1),r]:[t,n,r]},e.normalizedViewportToViewport=(t,n,r)=>{const o=e.getFramebufferSize();return[t*(o[0]-1),n*(o[1]-1),r]},e.displayToLocalDisplay=(t,n,r)=>[t,e.getFramebufferSize()[1]-n-1,r],e.viewportToNormalizedDisplay=(t,n,r,o)=>{let i=o.getViewportByReference();return i=e.normalizedDisplayToDisplay(i[0],i[1],0),e.displayToNormalizedDisplay(t+i[0]+.5,n+i[1]+.5,r)},e.getPixelData=(e,n,r,o)=>{const i=new Uint8Array((r-e+1)*(o-n+1)*4);return t.context.readPixels(e,n,r-e+1,o-n+1,t.context.RGBA,t.context.UNSIGNED_BYTE,i),i},e.get3DContext=(n={preserveDrawingBuffer:!1,depth:!0,alpha:!0})=>{let r=null;const o="undefined"!=typeof WebGL2RenderingContext;return t.webgl2=!1,t.defaultToWebgl2&&o&&(r=t.canvas.getContext("webgl2",n),r&&(t.webgl2=!0,LA("using webgl2"))),r||(LA("using webgl1"),r=t.canvas.getContext("webgl",n)||t.canvas.getContext("experimental-webgl",n)),new vA.a({PROVIDE_MOBILE_VRDISPLAY:!0,DIRTY_SUBMIT_FRAME_BINDINGS:!1,BUFFER_SCALE:.75}),navigator.getVRDisplays&&navigator.getVRDisplays().then(n=>{n.length>0&&(t.vrDisplay=n[0],t.vrDisplay.depthNear=.01,t.vrDisplay.depthFar=100,e.invokeHaveVRDisplay())}),t.canvas.addEventListener("webglcontextlost",e=>{e.preventDefault()},!1),t.canvas.addEventListener("webglcontextrestored",e.restoreContext,!1),r},e.startVR=()=>{t.oldCanvasSize=t.size.slice(),t.vrDisplay.capabilities.canPresent?t.vrDisplay.requestPresent([{source:t.canvas}]).then(()=>{if(t.el&&t.vrDisplay.capabilities.hasExternalDisplay&&t.hideCanvasInVR&&(t.el.style.display="none"),t.queryVRSize){const n=t.vrDisplay.getEyeParameters("left"),r=t.vrDisplay.getEyeParameters("right"),o=Math.floor(n.renderWidth+r.renderWidth),i=Math.floor(Math.max(n.renderHeight,r.renderHeight));e.setSize(o,i)}else e.setSize(t.vrResolution);t.renderable.getRenderers()[0].resetCamera(),t.vrFrameData=new VRFrameData,t.renderable.getInteractor().switchToVRAnimation(),t.vrSceneFrame=t.vrDisplay.requestAnimationFrame(e.vrRender),OA&&(t.vrSceneFrame=t.vrDisplay.requestAnimationFrame(e.vrRender))}).catch(()=>{console.error("failed to requestPresent")}):bA("vrDisplay is not connected")},e.stopVR=()=>{t.renderable.getInteractor().returnFromVRAnimation(),t.vrDisplay.exitPresent(),t.vrDisplay.cancelAnimationFrame(t.vrSceneFrame),e.setSize(...t.oldCanvasSize),t.el&&t.vrDisplay.capabilities.hasExternalDisplay&&(t.el.style.display="block");const n=t.renderable.getRenderers()[0];n.getActiveCamera().setProjectionMatrix(null),n.setViewport(0,0,1,1),e.traverseAllPasses()},e.vrRender=()=>{if(!t.vrDisplay.isPresenting)return;t.renderable.getInteractor().updateGamepads(t.vrDisplay.displayId),t.vrSceneFrame=t.vrDisplay.requestAnimationFrame(e.vrRender),t.vrDisplay.getFrameData(t.vrFrameData);const n=t.renderable.getRenderers()[0];n.setViewport(0,0,.5,1),n.getActiveCamera().computeViewParametersFromPhysicalMatrix(t.vrFrameData.leftViewMatrix),n.getActiveCamera().setProjectionMatrix(t.vrFrameData.leftProjectionMatrix),e.traverseAllPasses(),n.setViewport(.5,0,1,1),n.getActiveCamera().computeViewParametersFromPhysicalMatrix(t.vrFrameData.rightViewMatrix),n.getActiveCamera().setProjectionMatrix(t.vrFrameData.rightProjectionMatrix),e.traverseAllPasses(),t.vrDisplay.submitFrame()},e.restoreContext=()=>{const t=Wh.newInstance();t.setCurrentOperation("Release"),t.traverse(e,null)},e.activateTexture=n=>{const r=t.textureResourceIds.get(n);if(void 0!==r)return void t.context.activeTexture(t.context.TEXTURE0+r);const o=e.getTextureUnitManager().allocate();o<0?bA("Hardware does not support the number of textures defined."):(t.textureResourceIds.set(n,o),t.context.activeTexture(t.context.TEXTURE0+o))},e.deactivateTexture=n=>{const r=t.textureResourceIds.get(n);void 0!==r&&(e.getTextureUnitManager().free(r),t.textureResourceIds.delete(n))},e.getTextureUnitForTexture=e=>{const n=t.textureResourceIds.get(e);return void 0!==n?n:-1},e.getDefaultTextureInternalFormat=(e,n,r)=>{if(t.webgl2)switch(e){case Yg.UNSIGNED_CHAR:switch(n){case 1:return t.context.R8;case 2:return t.context.RG8;case 3:return t.context.RGB8;case 4:default:return t.context.RGBA8}default:case Yg.FLOAT:switch(n){case 1:return t.context.R16F;case 2:return t.context.RG16F;case 3:return t.context.RGB16F;case 4:default:return t.context.RGBA16F}}switch(n){case 1:return t.context.LUMINANCE;case 2:return t.context.LUMINANCE_ALPHA;case 3:return t.context.RGB;case 4:default:return t.context.RGBA}},e.setBackgroundImage=e=>{t.bgImage.src=e.src},e.setUseBackgroundImage=e=>{t.useBackgroundImage=e,t.useBackgroundImage&&!t.el.contains(t.bgImage)?t.el.appendChild(t.bgImage):!t.useBackgroundImage&&t.el.contains(t.bgImage)&&t.el.removeChild(t.bgImage)},e.captureNextImage=(n="image/png")=>{if(t.deleted)return null;t.imageFormat=n;const r=t.notifyStartCaptureImage;return t.notifyStartCaptureImage=!0,new Promise((n,o)=>{const i=e.onImageReady(e=>{t.notifyStartCaptureImage=r,i.unsubscribe(),n(e)})})},e.getGLInformations=()=>{const n=e.get3DContext(),r=n.getExtension("OES_texture_float"),o=n.getExtension("OES_texture_half_float"),i=n.getExtension("WEBGL_debug_renderer_info"),a=n.getExtension("WEBGL_draw_buffers"),s=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),l=[["Max Vertex Attributes","MAX_VERTEX_ATTRIBS",n.getParameter(n.MAX_VERTEX_ATTRIBS)],["Max Varying Vectors","MAX_VARYING_VECTORS",n.getParameter(n.MAX_VARYING_VECTORS)],["Max Vertex Uniform Vectors","MAX_VERTEX_UNIFORM_VECTORS",n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS)],["Max Fragment Uniform Vectors","MAX_FRAGMENT_UNIFORM_VECTORS",n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS)],["Max Fragment Texture Image Units","MAX_TEXTURE_IMAGE_UNITS",n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)],["Max Vertex Texture Image Units","MAX_VERTEX_TEXTURE_IMAGE_UNITS",n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS)],["Max Combined Texture Image Units","MAX_COMBINED_TEXTURE_IMAGE_UNITS",n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS)],["Max 2D Texture Size","MAX_TEXTURE_SIZE",n.getParameter(n.MAX_TEXTURE_SIZE)],["Max Cube Texture Size","MAX_CUBE_MAP_TEXTURE_SIZE",n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE)],["Max Texture Anisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT",s&&n.getParameter(s.MAX_TEXTURE_MAX_ANISOTROPY_EXT)],["Point Size Range","ALIASED_POINT_SIZE_RANGE",n.getParameter(n.ALIASED_POINT_SIZE_RANGE).join(" - ")],["Line Width Range","ALIASED_LINE_WIDTH_RANGE",n.getParameter(n.ALIASED_LINE_WIDTH_RANGE).join(" - ")],["Max Viewport Dimensions","MAX_VIEWPORT_DIMS",n.getParameter(n.MAX_VIEWPORT_DIMS).join(" - ")],["Max Renderbuffer Size","MAX_RENDERBUFFER_SIZE",n.getParameter(n.MAX_RENDERBUFFER_SIZE)],["Framebuffer Red Bits","RED_BITS",n.getParameter(n.RED_BITS)],["Framebuffer Green Bits","GREEN_BITS",n.getParameter(n.GREEN_BITS)],["Framebuffer Blue Bits","BLUE_BITS",n.getParameter(n.BLUE_BITS)],["Framebuffer Alpha Bits","ALPHA_BITS",n.getParameter(n.ALPHA_BITS)],["Framebuffer Depth Bits","DEPTH_BITS",n.getParameter(n.DEPTH_BITS)],["Framebuffer Stencil Bits","STENCIL_BITS",n.getParameter(n.STENCIL_BITS)],["Framebuffer Subpixel Bits","SUBPIXEL_BITS",n.getParameter(n.SUBPIXEL_BITS)],["MSAA Samples","SAMPLES",n.getParameter(n.SAMPLES)],["MSAA Sample Buffers","SAMPLE_BUFFERS",n.getParameter(n.SAMPLE_BUFFERS)],["Supported Formats for UByte Render Targets     ","UNSIGNED_BYTE RENDER TARGET FORMATS",[r&&SA(n,n.RGBA,n.UNSIGNED_BYTE)?"RGBA":"",r&&SA(n,n.RGB,n.UNSIGNED_BYTE)?"RGB":"",r&&SA(n,n.LUMINANCE,n.UNSIGNED_BYTE)?"LUMINANCE":"",r&&SA(n,n.ALPHA,n.UNSIGNED_BYTE)?"ALPHA":"",r&&SA(n,n.LUMINANCE_ALPHA,n.UNSIGNED_BYTE)?"LUMINANCE_ALPHA":""].join(" ")],["Supported Formats for Half Float Render Targets","HALF FLOAT RENDER TARGET FORMATS",[o&&SA(n,n.RGBA,o.HALF_FLOAT_OES)?"RGBA":"",o&&SA(n,n.RGB,o.HALF_FLOAT_OES)?"RGB":"",o&&SA(n,n.LUMINANCE,o.HALF_FLOAT_OES)?"LUMINANCE":"",o&&SA(n,n.ALPHA,o.HALF_FLOAT_OES)?"ALPHA":"",o&&SA(n,n.LUMINANCE_ALPHA,o.HALF_FLOAT_OES)?"LUMINANCE_ALPHA":""].join(" ")],["Supported Formats for Full Float Render Targets","FLOAT RENDER TARGET FORMATS",[r&&SA(n,n.RGBA,n.FLOAT)?"RGBA":"",r&&SA(n,n.RGB,n.FLOAT)?"RGB":"",r&&SA(n,n.LUMINANCE,n.FLOAT)?"LUMINANCE":"",r&&SA(n,n.ALPHA,n.FLOAT)?"ALPHA":"",r&&SA(n,n.LUMINANCE_ALPHA,n.FLOAT)?"LUMINANCE_ALPHA":""].join(" ")],["Max Multiple Render Targets Buffers","MAX_DRAW_BUFFERS_WEBGL",a?n.getParameter(a.MAX_DRAW_BUFFERS_WEBGL):0],["High Float Precision in Vertex Shader","HIGH_FLOAT VERTEX_SHADER",[n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).rangeMax,"</sup>)"].join("")],["Medium Float Precision in Vertex Shader","MEDIUM_FLOAT VERTEX_SHADER",[n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).rangeMax,"</sup>)"].join("")],["Low Float Precision in Vertex Shader","LOW_FLOAT VERTEX_SHADER",[n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.LOW_FLOAT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.LOW_FLOAT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.LOW_FLOAT).rangeMax,"</sup>)"].join("")],["High Float Precision in Fragment Shader","HIGH_FLOAT FRAGMENT_SHADER",[n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).rangeMax,"</sup>)"].join("")],["Medium Float Precision in Fragment Shader","MEDIUM_FLOAT FRAGMENT_SHADER",[n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).rangeMax,"</sup>)"].join("")],["Low Float Precision in Fragment Shader","LOW_FLOAT FRAGMENT_SHADER",[n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.LOW_FLOAT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.LOW_FLOAT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.LOW_FLOAT).rangeMax,"</sup>)"].join("")],["High Int Precision in Vertex Shader","HIGH_INT VERTEX_SHADER",[n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_INT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_INT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_INT).rangeMax,"</sup>)"].join("")],["Medium Int Precision in Vertex Shader","MEDIUM_INT VERTEX_SHADER",[n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_INT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_INT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_INT).rangeMax,"</sup>)"].join("")],["Low Int Precision in Vertex Shader","LOW_INT VERTEX_SHADER",[n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.LOW_INT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.LOW_INT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.LOW_INT).rangeMax,"</sup>)"].join("")],["High Int Precision in Fragment Shader","HIGH_INT FRAGMENT_SHADER",[n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_INT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_INT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_INT).rangeMax,"</sup>)"].join("")],["Medium Int Precision in Fragment Shader","MEDIUM_INT FRAGMENT_SHADER",[n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_INT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_INT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_INT).rangeMax,"</sup>)"].join("")],["Low Int Precision in Fragment Shader","LOW_INT FRAGMENT_SHADER",[n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.LOW_INT).precision," (-2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.LOW_INT).rangeMin,"</sup> - 2<sup>",n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.LOW_INT).rangeMax,"</sup>)"].join("")],["Supported Extensions","EXTENSIONS",n.getSupportedExtensions().join("<br/>\t\t\t\t\t    ")],["WebGL Renderer","RENDERER",n.getParameter(n.RENDERER)],["WebGL Vendor","VENDOR",n.getParameter(n.VENDOR)],["WebGL Version","VERSION",n.getParameter(n.VERSION)],["Shading Language Version","SHADING_LANGUAGE_VERSION",n.getParameter(n.SHADING_LANGUAGE_VERSION)],["Unmasked Renderer","UNMASKED_RENDERER",i&&n.getParameter(i.UNMASKED_RENDERER_WEBGL)],["Unmasked Vendor","UNMASKED_VENDOR",i&&n.getParameter(i.UNMASKED_VENDOR_WEBGL)],["WebGL Version","WEBGL_VERSION",t.webgl2?2:1]],u={};for(;l.length;){const[e,t,n]=l.pop();t&&(u[t]={label:e,value:n})}return u},e.traverseAllPasses=()=>{if(t.renderPasses)for(let n=0;n<t.renderPasses.length;++n)t.renderPasses[n].traverse(e,null);t.notifyStartCaptureImage&&function(n=t.imageFormat){const r=document.createElement("canvas"),o=r.getContext("2d");r.width=t.canvas.width,r.height=t.canvas.height,o.drawImage(t.canvas,0,0);const i=t.canvas.getBoundingClientRect();t.renderable.getRenderers().forEach(e=>{e.getViewProps().forEach(e=>{if(e.getContainer){const t=e.getContainer().getElementsByTagName("canvas");for(let e=0;e<t.length;e++){const n=t[e],r=n.getBoundingClientRect();o.drawImage(n,r.x-i.x,r.y-i.y)}}})});const a=r.toDataURL(n);r.remove(),e.invokeImageReady(a)}()},e.disableDepthMask=()=>{t.depthMaskEnabled&&(t.context.depthMask(!1),t.depthMaskEnabled=!1)},e.enableDepthMask=()=>{t.depthMaskEnabled||(t.context.depthMask(!0),t.depthMaskEnabled=!0)},e.disableCullFace=()=>{t.cullFaceEnabled&&(t.context.disable(t.context.CULL_FACE),t.cullFaceEnabled=!1)},e.enableCullFace=()=>{t.cullFaceEnabled||(t.context.enable(t.context.CULL_FACE),t.cullFaceEnabled=!0)},e.setViewStream=n=>t.viewStream!==n&&(t.subscription&&(t.subscription.unsubscribe(),t.subscription=null),t.viewStream=n,t.viewStream&&(t.renderable.getRenderers()[0].getBackgroundByReference()[3]=0,e.setUseBackgroundImage(!0),t.subscription=t.viewStream.onImageReady(t=>e.setBackgroundImage(t.image)),t.viewStream.setSize(t.size[0],t.size[1]),t.viewStream.invalidateCache(),t.viewStream.render(),e.modified()),!0),e.delete=Ed.chain(e.delete,e.setViewStream,kA)}(e,t)}const _A=Ed.newInstance(RA,"vtkOpenGLRenderWindow");var VA={newInstance:_A,extend:RA,pushMonitorGLContextCount:function(e){PA.push(e)},popMonitorGLContextCount:function(e){return PA.pop()}};const BA={renderers:[],views:[],interactor:null,neverRendered:!0,numberOfLayers:1};function UA(e,t,n={}){Object.assign(t,BA,n),Ed.obj(e,t),Ed.setGet(e,t,["interactor","numberOfLayers","views"]),Ed.get(e,t,["neverRendered"]),Ed.getArray(e,t,["renderers"]),Ed.event(e,t,"completion"),function(e,t){t.classHierarchy.push("vtkRenderWindow"),e.addRenderer=n=>{e.hasRenderer(n)||(n.setRenderWindow(e),t.renderers.push(n),e.modified())},e.removeRenderer=n=>{t.renderers=t.renderers.filter(e=>e!==n),e.modified()},e.hasRenderer=e=>-1!==t.renderers.indexOf(e),e.addView=n=>{e.hasView(n)||(n.setRenderable(e),t.views.push(n),e.modified())},e.removeView=n=>{t.views=t.views.filter(e=>e!==n),e.modified()},e.hasView=e=>-1!==t.views.indexOf(e),e.render=()=>{t.interactor?t.interactor.render():t.views.forEach(e=>e.traverseAllPasses())},e.getStatistics=()=>{const e={propCount:0,invisiblePropCount:0};return t.renderers.forEach(t=>{t.getViewProps().forEach(t=>{if(t.getVisibility()){e.propCount+=1;const n=t.getMapper&&t.getMapper();if(n&&n.getPrimitiveCount){const t=n.getPrimitiveCount();Object.keys(t).forEach(n=>{e[n]||(e[n]=0),e[n]+=t[n]})}}else e.invisiblePropCount+=1})}),e.str=Object.keys(e).map(t=>`${t}: ${e[t]}`).join("\n"),e},e.captureImages=(n="image/png")=>(Ed.setImmediate(e.render),t.views.map(e=>e.captureNextImage?e.captureNextImage(n):void 0).filter(e=>!!e))}(e,t)}var FA={newInstance:Ed.newInstance(UA,"vtkRenderWindow"),extend:UA};const GA={Unknown:0,LeftController:1,RightController:2},QA={Unknown:0,Trigger:1,TrackPad:2,Grip:3,ApplicationMenu:4};var YA={Device:GA,Input:QA};const{Device:WA,Input:HA}=YA,{vtkWarningMacro:KA,vtkErrorMacro:XA,normalizeWheel:ZA,vtkOnceErrorMacro:qA}=Ed,$A={"OpenVR Gamepad":[HA.TrackPad,HA.Trigger,HA.Grip,HA.ApplicationMenu]},JA=["StartAnimation","Animation","EndAnimation","StartMouseMove","MouseMove","EndMouseMove","LeftButtonPress","LeftButtonRelease","MiddleButtonPress","MiddleButtonRelease","RightButtonPress","RightButtonRelease","KeyPress","KeyDown","KeyUp","StartMouseWheel","MouseWheel","EndMouseWheel","StartPinch","Pinch","EndPinch","StartPan","Pan","EndPan","StartRotate","Rotate","EndRotate","Button3D","Move3D","StartPointerLock","EndPointerLock","StartInteractionEvent","InteractionEvent","EndInteractionEvent"];function ey(e){return e.stopPropagation(),e.preventDefault(),!1}const ty={renderWindow:null,interactorStyle:null,picker:null,pickingManager:null,initialized:!1,enabled:!1,enableRender:!0,currentRenderer:null,lightFollowCamera:!0,desiredUpdateRate:30,stillUpdateRate:2,container:null,view:null,recognizeGestures:!0,currentGesture:"Start",animationRequest:null,lastFrameTime:.1,wheelTimeoutID:0,moveTimeoutID:0,lastGamepadValues:{}};function ny(e,t,n={}){Object.assign(t,ty,n),Ed.obj(e,t),Ed.event(e,t,"RenderEvent"),JA.forEach(n=>Ed.event(e,t,n)),Ed.get(e,t,["initialized","container","enabled","enableRender","interactorStyle","lastFrameTime","view"]),Ed.setGet(e,t,["lightFollowCamera","enabled","recognizeGestures","desiredUpdateRate","stillUpdateRate","picker"]),function(e,t){t.classHierarchy.push("vtkRenderWindowInteractor");const n=new Set;function r(n,r){t.currentRenderer=e.findPokedRenderer(n,r)}function o(e){const n=t.container.getBoundingClientRect(),o=t.view.getCanvas(),i={x:o.width/n.width*(e.clientX-n.left),y:o.height/n.height*(n.height-e.clientY+n.top),z:0};return r(i.x,i.y),i}function i(e){const t={};for(let n=0;n<e.length;n++){const r=e[n];t[r.identifier]=o(r)}return t}function a(e){return{controlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey}}function s(e){const t=a(e),n={key:e.key,keyCode:e.charCode};return Object.assign(n,t),n}function l(n){const r=document.querySelector("body"),o=n?"addEventListener":"removeEventListener";t.container&&t.container[n?"removeEventListener":"addEventListener"]("mousemove",e.handleMouseMove),r[o]("mouseup",e.handleMouseUp),r[o]("mouseleave",e.handleMouseUp),r[o]("mousemove",e.handleMouseMove),r[o]("touchend",e.handleTouchEnd,!1),r[o]("touchcancel",e.handleTouchEnd,!1),r[o]("touchmove",e.handleTouchMove,!1)}function u(){t.view&&t.enabled&&t.enableRender&&(t.inRender=!0,t.view.traverseAllPasses(),t.inRender=!1),e.invokeRenderEvent()}e.start=()=>{(t.initialized||(e.initialize(),t.initialized))&&e.startEventLoop()},e.setRenderWindow=e=>{XA("you want to call setView(view) instead of setRenderWindow on a vtk.js interactor")},e.setInteractorStyle=n=>{t.interactorStyle!==n&&(null!=t.interactorStyle&&t.interactorStyle.setInteractor(null),t.interactorStyle=n,null!=t.interactorStyle&&t.interactorStyle.getInteractor()!==e&&t.interactorStyle.setInteractor(e))},e.initialize=()=>{t.initialized=!0,e.enable(),e.render()},e.enable=()=>e.setEnabled(!0),e.disable=()=>e.setEnabled(!1),e.startEventLoop=()=>KA("empty event loop"),e.getCurrentRenderer=()=>(t.currentRenderer||r(0,0),t.currentRenderer),e.bindEvents=n=>{t.container=n,n.addEventListener("contextmenu",ey),n.addEventListener("wheel",e.handleWheel),n.addEventListener("DOMMouseScroll",e.handleWheel),n.addEventListener("mousemove",e.handleMouseMove),n.addEventListener("mousedown",e.handleMouseDown),document.querySelector("body").addEventListener("keypress",e.handleKeyPress),document.querySelector("body").addEventListener("keydown",e.handleKeyDown),document.querySelector("body").addEventListener("keyup",e.handleKeyUp),document.addEventListener("pointerlockchange",e.handlePointerLockChange),n.addEventListener("touchstart",e.handleTouchStart,!1)},e.unbindEvents=()=>{l(!1),t.container.removeEventListener("contextmenu",ey),t.container.removeEventListener("wheel",e.handleWheel),t.container.removeEventListener("DOMMouseScroll",e.handleWheel),t.container.removeEventListener("mousemove",e.handleMouseMove),t.container.removeEventListener("mousedown",e.handleMouseDown),document.querySelector("body").removeEventListener("keypress",e.handleKeyPress),document.querySelector("body").removeEventListener("keydown",e.handleKeyDown),document.querySelector("body").removeEventListener("keyup",e.handleKeyUp),document.removeEventListener("pointerlockchange",e.handlePointerLockChange),t.container.removeEventListener("touchstart",e.handleTouchStart),t.container=null},e.handleKeyPress=t=>{const n=s(t);e.keyPressEvent(n)},e.handleKeyDown=t=>{const n=s(t);e.keyDownEvent(n)},e.handleKeyUp=t=>{const n=s(t);e.keyUpEvent(n)},e.handleMouseDown=t=>{l(!0),t.stopPropagation(),t.preventDefault();const n={position:o(t)},r=a(t);switch(Object.assign(n,r),t.which){case 1:e.leftButtonPressEvent(n);break;case 2:e.middleButtonPressEvent(n);break;case 3:e.rightButtonPressEvent(n);break;default:XA(`Unknown mouse button pressed: ${t.which}`)}},e.requestPointerLock=()=>{e.getView().getCanvas().requestPointerLock()},e.exitPointerLock=()=>document.exitPointerLock(),e.isPointerLocked=()=>!!document.pointerLockElement,e.handlePointerLockChange=()=>{e.isPointerLocked()?e.startPointerLockEvent():e.endPointerLockEvent()},e.requestAnimation=r=>{void 0!==r?n.has(r)?KA("requester is already registered for animating"):(n.add(r),1===n.size&&(t.lastFrameTime=.1,t.lastFrameStart=Date.now(),t.animationRequest=requestAnimationFrame(e.handleAnimation),e.startAnimationEvent())):XA("undefined requester, can not start animating")},e.isAnimating=()=>t.vrAnimation||null!==t.animationRequest,e.cancelAnimation=(r,o=!1)=>{if(n.has(r))n.delete(r),t.animationRequest&&0===n.size&&(cancelAnimationFrame(t.animationRequest),t.animationRequest=null,e.endAnimationEvent(),e.render());else if(!o){const e=r&&r.getClassName?r.getClassName():r;KA(`${e} did not request an animation`)}},e.switchToVRAnimation=()=>{t.animationRequest&&(cancelAnimationFrame(t.animationRequest),t.animationRequest=null),t.vrAnimation=!0},e.returnFromVRAnimation=()=>{t.vrAnimation=!1,0!==n.size&&(t.FrameTime=-1,t.animationRequest=requestAnimationFrame(e.handleAnimation))},e.updateGamepads=n=>{const r=navigator.getGamepads();for(let o=0;o<r.length;++o){const i=r[o];if(i&&i.displayId===n){i.index in t.lastGamepadValues||(t.lastGamepadValues[i.index]={buttons:{}});for(let n=0;n<i.buttons.length;++n)n in t.lastGamepadValues[i.index].buttons||(t.lastGamepadValues[i.index].buttons[n]=!1),t.lastGamepadValues[i.index].buttons[n]!==i.buttons[n].pressed&&(e.button3DEvent({gamepad:i,position:i.pose.position,orientation:i.pose.orientation,pressed:i.buttons[n].pressed,device:"left"===i.hand?WA.LeftController:WA.RightController,input:$A[i.id]&&$A[i.id][n]?$A[i.id][n]:HA.Trigger}),t.lastGamepadValues[i.index].buttons[n]=i.buttons[n].pressed),t.lastGamepadValues[i.index].buttons[n]&&e.move3DEvent({gamepad:i,position:i.pose.position,orientation:i.pose.orientation,device:"left"===i.hand?WA.LeftController:WA.RightController})}}},e.handleMouseMove=n=>{const r={position:o(n)},i=a(n);Object.assign(r,i),0===t.moveTimeoutID?e.startMouseMoveEvent(r):(e.mouseMoveEvent(r),clearTimeout(t.moveTimeoutID)),t.moveTimeoutID=setTimeout(()=>{e.endMouseMoveEvent(),t.moveTimeoutID=0},200)},e.handleAnimation=()=>{const n=Date.now();t.lastFrameTime=-1===t.FrameTime?.1:(n-t.lastFrameStart)/1e3,t.lastFrameTime=Math.max(.01,t.lastFrameTime),t.lastFrameStart=n,e.animationEvent(),u(),t.animationRequest=requestAnimationFrame(e.handleAnimation)},e.handleWheel=n=>{n.stopPropagation(),n.preventDefault();const r=ZA(n),o=a(n);Object.assign(r,o),0===t.wheelTimeoutID?e.startMouseWheelEvent(r):(e.mouseWheelEvent(r),clearTimeout(t.wheelTimeoutID)),t.wheelTimeoutID=setTimeout(()=>{e.endMouseWheelEvent(),t.wheelTimeoutID=0},200)},e.handleMouseUp=t=>{l(!1),t.stopPropagation(),t.preventDefault();const n={position:o(t)},r=a(t);switch(Object.assign(n,r),t.which){case 1:e.leftButtonReleaseEvent(n);break;case 2:e.middleButtonReleaseEvent(n);break;case 3:e.rightButtonReleaseEvent(n);break;default:XA(`Unknown mouse button released: ${t.which}`)}},e.handleTouchStart=n=>{if(l(!0),n.stopPropagation(),n.preventDefault(),t.recognizeGestures&&n.touches.length>1){const t=i(n.touches);if(2===n.touches.length){const t={position:o(n.touches[0]),shiftKey:!1,altKey:!1,controlKey:!1};e.leftButtonReleaseEvent(t)}e.recognizeGesture("TouchStart",t)}else{const t={position:o(n.touches[0]),shiftKey:!1,altKey:!1,controlKey:!1};e.leftButtonPressEvent(t)}},e.handleTouchMove=n=>{if(n.stopPropagation(),n.preventDefault(),t.recognizeGestures&&n.touches.length>1){const t=i(n.touches);e.recognizeGesture("TouchMove",t)}else{const t={position:o(n.touches[0]),shiftKey:!1,altKey:!1,controlKey:!1};e.mouseMoveEvent(t)}},e.handleTouchEnd=n=>{if(n.stopPropagation(),n.preventDefault(),t.recognizeGestures)if(0===n.touches.length)if(1===n.changedTouches.length){const t={position:o(n.changedTouches[0]),shiftKey:!1,altKey:!1,controlKey:!1};e.leftButtonReleaseEvent(t),l(!1)}else{const t=i(n.changedTouches);e.recognizeGesture("TouchEnd",t),l(!1)}else if(1===n.touches.length){const t=i(n.changedTouches);e.recognizeGesture("TouchEnd",t);const r={position:o(n.touches[0]),shiftKey:!1,altKey:!1,controlKey:!1};e.leftButtonPressEvent(r)}else{const t=i(n.touches);e.recognizeGesture("TouchMove",t)}else{const t={position:o(n.changedTouches[0]),shiftKey:!1,altKey:!1,controlKey:!1};e.leftButtonReleaseEvent(t),l(!1)}},e.setView=n=>{t.view!==n&&(t.view=n,t.view.getRenderable().setInteractor(e),e.modified())},e.findPokedRenderer=(e=0,n=0)=>{if(!t.view)return null;const r=t.view.getRenderable().getRenderersByReference();let o=null,i=null,a=null,s=r.length;for(;s--;){const l=r[s];t.view.isInViewport(e,n,l)&&l.getInteractive()&&(a=l),null===o&&l.getInteractive()&&(o=l),null===i&&t.view.isInViewport(e,n,l)&&(i=l)}return null===a&&(a=o),null===a&&(a=i),null==a&&(a=r[0]),a},e.render=()=>{null!==t.animationRequest||t.inRender||u()},JA.forEach(n=>{const r=n.charAt(0).toLowerCase()+n.slice(1);e[`${r}Event`]=r=>{if(!t.enabled)return;if(!e.getCurrentRenderer())return void qA("\n          Can not forward events without a current renderer on the interactor.\n        ");const o={type:n,pokedRenderer:t.currentRenderer};Object.assign(o,r),e[`invoke${n}`](o)}}),e.recognizeGesture=(n,r)=>{if(Object.keys(r).length>2)return;if(t.startingEventPositions||(t.startingEventPositions={}),"TouchStart"===n)return Object.keys(r).forEach(e=>{t.startingEventPositions[e]=r[e]}),void(t.currentGesture="Start");if("TouchEnd"===n)return"Pinch"===t.currentGesture&&(e.render(),e.endPinchEvent()),"Rotate"===t.currentGesture&&(e.render(),e.endRotateEvent()),"Pan"===t.currentGesture&&(e.render(),e.endPanEvent()),t.currentGesture="Start",void(t.startingEventPositions={});let o=0;const i=[],a=[];Object.keys(r).forEach(e=>{i[o]=r[e],a[o]=t.startingEventPositions[e],o++});const s=Math.sqrt((a[0].x-a[1].x)*(a[0].x-a[1].x)+(a[0].y-a[1].y)*(a[0].y-a[1].y)),l=Math.sqrt((i[0].x-i[1].x)*(i[0].x-i[1].x)+(i[0].y-i[1].y)*(i[0].y-i[1].y));let u=jd(Math.atan2(a[1].y-a[0].y,a[1].x-a[0].x)),c=jd(Math.atan2(i[1].y-i[0].y,i[1].x-i[0].x)),d=c-u;c=c+180>=360?c-180:c+180,u=u+180>=360?u-180:u+180,Math.abs(c-u)<Math.abs(d)&&(d=c-u);const g=[];if(g[0]=(i[0].x-a[0].x+i[1].x-a[1].x)/2,g[1]=(i[0].y-a[0].y+i[1].y-a[1].y)/2,"TouchMove"===n)if("Start"===t.currentGesture){let n=.01*Math.sqrt(t.container.clientWidth*t.container.clientWidth+t.container.clientHeight*t.container.clientHeight);n<15&&(n=15);const o=Math.abs(l-s),i=3.1415926*l*Math.abs(d)/360,a=Math.sqrt(g[0]*g[0]+g[1]*g[1]);o>n&&o>i&&o>a?(t.currentGesture="Pinch",e.startPinchEvent({scale:1,touches:r})):i>n&&i>a?(t.currentGesture="Rotate",e.startRotateEvent({rotation:0,touches:r})):a>n&&(t.currentGesture="Pan",e.startPanEvent({translation:[0,0],touches:r}))}else"Rotate"===t.currentGesture&&e.rotateEvent({rotation:d,touches:r}),"Pinch"===t.currentGesture&&e.pinchEvent({scale:l/s,touches:r}),"Pan"===t.currentGesture&&e.panEvent({translation:g,touches:r})};const c=e.delete;e.delete=()=>{for(;n.size;)e.cancelAnimation(n.values().next().value);c()}}(e,t)}const ry=Ed.newInstance(ny,"vtkRenderWindowInteractor");var oy=Object.assign({newInstance:ry,extend:ny,handledEvents:JA},YA);const{vtkDebugMacro:iy}=Ed,ay={position:[0,0,1],focalPoint:[0,0,0],viewUp:[0,1,0],directionOfProjection:[0,0,-1],parallelProjection:!1,useHorizontalViewAngle:!1,viewAngle:30,parallelScale:1,clippingRange:[.01,1000.01],windowCenter:[0,0],viewPlaneNormal:[0,0,1],useOffAxisProjection:!1,screenBottomLeft:[-.5,-.5,-.5],screenBottomRight:[.5,-.5,-.5],screenTopRight:[.5,.5,-.5],freezeFocalPoint:!1,projectionMatrix:null,viewMatrix:null,physicalTranslation:[0,0,0],physicalScale:1,physicalViewUp:[0,1,0],physicalViewNorth:[0,0,-1]};function sy(e,t,n={}){Object.assign(t,ay,n),Ed.obj(e,t),Ed.get(e,t,["distance"]),Ed.setGet(e,t,["parallelProjection","useHorizontalViewAngle","viewAngle","parallelScale","useOffAxisProjection","freezeFocalPoint","physicalScale"]),Ed.getArray(e,t,["directionOfProjection","viewPlaneNormal","position","focalPoint"]),Ed.setGetArray(e,t,["clippingRange","windowCenter"],2),Ed.setGetArray(e,t,["viewUp","screenBottomLeft","screenBottomRight","screenTopRight","physicalTranslation","physicalViewUp","physicalViewNorth"],3),function(e,t){t.classHierarchy.push("vtkCamera");const n=a.create(),r=a.fromValues(0,0,-1),o=a.fromValues(0,1,0),u=i.create(),c=a.create(),d=a.create(),g=a.create(),p=i.create(),f=i.create(),h=a.create(),M=a.create();function m(){t.viewPlaneNormal[0]=-t.directionOfProjection[0],t.viewPlaneNormal[1]=-t.directionOfProjection[1],t.viewPlaneNormal[2]=-t.directionOfProjection[2]}e.orthogonalizeViewUp=()=>{const n=e.getViewMatrix();t.viewUp[0]=n[4],t.viewUp[1]=n[5],t.viewUp[2]=n[6],e.modified()},e.setPosition=(n,r,o)=>{n===t.position[0]&&r===t.position[1]&&o===t.position[2]||(t.position[0]=n,t.position[1]=r,t.position[2]=o,e.computeDistance(),e.modified())},e.setFocalPoint=(n,r,o)=>{n===t.focalPoint[0]&&r===t.focalPoint[1]&&o===t.focalPoint[2]||(t.focalPoint[0]=n,t.focalPoint[1]=r,t.focalPoint[2]=o,e.computeDistance(),e.modified())},e.setDistance=n=>{if(t.distance===n)return;t.distance=n,t.distance<1e-20&&(t.distance=1e-20,iy("Distance is set to minimum."));const r=t.directionOfProjection;t.focalPoint[0]=t.position[0]+r[0]*t.distance,t.focalPoint[1]=t.position[1]+r[1]*t.distance,t.focalPoint[2]=t.position[2]+r[2]*t.distance,e.modified()},e.computeDistance=()=>{const e=t.focalPoint[0]-t.position[0],n=t.focalPoint[1]-t.position[1],r=t.focalPoint[2]-t.position[2];if(t.distance=Math.sqrt(e*e+n*n+r*r),t.distance<1e-20){t.distance=1e-20,iy("Distance is set to minimum.");const e=t.directionOfProjection;t.focalPoint[0]=t.position[0]+e[0]*t.distance,t.focalPoint[1]=t.position[1]+e[1]*t.distance,t.focalPoint[2]=t.position[2]+e[2]*t.distance}t.directionOfProjection[0]=e/t.distance,t.directionOfProjection[1]=n/t.distance,t.directionOfProjection[2]=r/t.distance,m()},e.dolly=n=>{if(n<=0)return;const r=t.distance/n;e.setPosition(t.focalPoint[0]-r*t.directionOfProjection[0],t.focalPoint[1]-r*t.directionOfProjection[1],t.focalPoint[2]-r*t.directionOfProjection[2])},e.roll=n=>{const r=t.position,o=t.focalPoint,l=t.viewUp,u=s.fromValues(l[0],l[1],l[2],0);i.identity(p);const c=a.fromValues(o[0]-r[0],o[1]-r[1],o[2]-r[2]);i.rotate(p,p,Sd(n),c),s.transformMat4(u,u,p),t.viewUp[0]=u[0],t.viewUp[1]=u[1],t.viewUp[2]=u[2],e.modified()},e.azimuth=n=>{const r=t.focalPoint;i.identity(f),i.translate(f,f,a.fromValues(r[0],r[1],r[2])),i.rotate(f,f,Sd(n),a.fromValues(t.viewUp[0],t.viewUp[1],t.viewUp[2])),i.translate(f,f,a.fromValues(-r[0],-r[1],-r[2])),a.transformMat4(h,a.fromValues(t.position[0],t.position[1],t.position[2]),f),e.setPosition(h[0],h[1],h[2])},e.yaw=n=>{const r=t.position;i.identity(f),i.translate(f,f,a.fromValues(r[0],r[1],r[2])),i.rotate(f,f,Sd(n),a.fromValues(t.viewUp[0],t.viewUp[1],t.viewUp[2])),i.translate(f,f,a.fromValues(-r[0],-r[1],-r[2])),a.transformMat4(M,a.fromValues(t.focalPoint[0],t.focalPoint[1],t.focalPoint[2]),f),e.setFocalPoint(M[0],M[1],M[2])},e.elevation=n=>{const r=t.focalPoint,o=e.getViewMatrix(),s=[-o[0],-o[1],-o[2]];i.identity(f),i.translate(f,f,a.fromValues(r[0],r[1],r[2])),i.rotate(f,f,Sd(n),a.fromValues(s[0],s[1],s[2])),i.translate(f,f,a.fromValues(-r[0],-r[1],-r[2])),a.transformMat4(h,a.fromValues(t.position[0],t.position[1],t.position[2]),f),e.setPosition(h[0],h[1],h[2])},e.pitch=n=>{const r=t.position,o=e.getViewMatrix(),s=[o[0],o[1],o[2]];i.identity(f),i.translate(f,f,a.fromValues(r[0],r[1],r[2])),i.rotate(f,f,Sd(n),a.fromValues(s[0],s[1],s[2])),i.translate(f,f,a.fromValues(-r[0],-r[1],-r[2])),a.transformMat4(M,a.fromValues(...t.focalPoint),f),e.setFocalPoint(...M)},e.zoom=n=>{n<=0||(t.parallelProjection?t.parallelScale/=n:t.viewAngle/=n,e.modified())},e.applyTransform=n=>{const r=[...t.viewUp,1],o=[],i=[],a=[];r[0]+=t.position[0],r[1]+=t.position[1],r[2]+=t.position[2],s.transformMat4(o,[...t.position,1],n),s.transformMat4(i,[...t.focalPoint,1],n),s.transformMat4(a,r,n),a[0]-=o[0],a[1]-=o[1],a[2]-=o[2],e.setPosition(...o.slice(0,3)),e.setFocalPoint(...i.slice(0,3)),e.setViewUp(...a.slice(0,3))},e.getThickness=()=>t.clippingRange[1]-t.clippingRange[0],e.setThickness=n=>{let r=n;r<1e-20&&(r=1e-20,iy("Thickness is set to minimum.")),e.setClippingRange(t.clippingRange[0],t.clippingRange[0]+r)},e.setThicknessFromFocalPoint=n=>{let r=n;r<1e-20&&(r=1e-20,iy("Thickness is set to minimum.")),e.setClippingRange(t.distance-r/2,t.distance+r/2)},e.setRoll=e=>{},e.getRoll=()=>{},e.setObliqueAngles=(e,t)=>{},e.getOrientation=()=>{},e.getOrientationWXYZ=()=>{},e.getFrustumPlanes=e=>{},e.getCameraLightTransformMatrix=()=>{},e.deepCopy=e=>{},e.physicalOrientationToWorldDirection=e=>{const t=l.fromValues(e[0],e[1],e[2],e[3]),n=l.create(),r=l.fromValues(0,0,1,0);return l.conjugate(n,t),l.multiply(r,t,r),l.multiply(r,r,n),[r[0],r[1],r[2]]},e.getPhysicalToWorldMatrix=t=>{e.getWorldToPhysicalMatrix(t),i.invert(t,t)},e.getWorldToPhysicalMatrix=e=>{i.identity(e);const n=[3];_d(t.physicalViewNorth,t.physicalViewUp,n),e[0]=n[0],e[1]=n[1],e[2]=n[2],e[4]=t.physicalViewUp[0],e[5]=t.physicalViewUp[1],e[6]=t.physicalViewUp[2],e[8]=-t.physicalViewNorth[0],e[9]=-t.physicalViewNorth[1],e[10]=-t.physicalViewNorth[2],i.transpose(e,e),a.set(c,1/t.physicalScale,1/t.physicalScale,1/t.physicalScale),i.scale(e,e,c),i.translate(e,e,t.physicalTranslation)},e.computeViewParametersFromViewMatrix=s=>{i.invert(u,s),a.transformMat4(c,n,u),e.computeDistance();const l=t.distance;e.setPosition(c[0],c[1],c[2]),a.transformMat4(d,r,u),a.subtract(d,d,c),a.normalize(d,d),e.setDirectionOfProjection(d[0],d[1],d[2]),a.transformMat4(g,o,u),a.subtract(g,g,c),a.normalize(g,g),e.setViewUp(g[0],g[1],g[2]),e.setDistance(l)},e.computeViewParametersFromPhysicalMatrix=t=>{e.getWorldToPhysicalMatrix(u),i.multiply(u,t,u),e.computeViewParametersFromViewMatrix(u)},e.setViewMatrix=n=>{t.viewMatrix=n,t.viewMatrix&&(i.copy(u,t.viewMatrix),e.computeViewParametersFromViewMatrix(u),i.transpose(t.viewMatrix,t.viewMatrix))},e.getViewMatrix=()=>{if(t.viewMatrix)return t.viewMatrix;const e=i.create();return i.lookAt(u,a.fromValues(...t.position),a.fromValues(...t.focalPoint),a.fromValues(...t.viewUp)),i.transpose(u,u),i.copy(e,u),e},e.setProjectionMatrix=e=>{t.projectionMatrix=e},e.getProjectionMatrix=(e,n,r)=>{const o=i.create();if(t.projectionMatrix){const e=1/t.physicalScale;return a.set(c,e,e,e),i.copy(o,t.projectionMatrix),i.scale(o,o,c),i.transpose(o,o),o}i.identity(u);const s=t.clippingRange[1]-t.clippingRange[0],l=[t.clippingRange[0]+(n+1)*s/2,t.clippingRange[0]+(r+1)*s/2];if(t.parallelProjection){const n=t.parallelScale*e,r=t.parallelScale;i.ortho(u,(t.windowCenter[0]-1)*n,(t.windowCenter[0]+1)*n,(t.windowCenter[1]-1)*r,(t.windowCenter[1]+1)*r,l[0],l[1]),i.transpose(u,u)}else{if(t.useOffAxisProjection)throw new Error("Off-Axis projection is not supported at this time");{const n=Math.tan(Sd(t.viewAngle)/2);let r,o;!0===t.useHorizontalViewAngle?(r=t.clippingRange[0]*n,o=t.clippingRange[0]*n/e):(r=t.clippingRange[0]*n*e,o=t.clippingRange[0]*n);const i=(t.windowCenter[0]-1)*r,a=(t.windowCenter[0]+1)*r,s=(t.windowCenter[1]-1)*o,c=(t.windowCenter[1]+1)*o,d=l[0],g=l[1];u[0]=2*d/(a-i),u[5]=2*d/(c-s),u[2]=(i+a)/(a-i),u[6]=(s+c)/(c-s),u[10]=-(d+g)/(g-d),u[14]=-1,u[11]=-2*d*g/(g-d),u[15]=0}}return i.copy(o,u),o},e.getCompositeProjectionMatrix=(t,n,r)=>{const o=e.getViewMatrix(),a=e.getProjectionMatrix(t,n,r),s=i.create();return i.multiply(s,o,a),s},e.setDirectionOfProjection=(e,n,r)=>{if(t.directionOfProjection[0]===e&&t.directionOfProjection[1]===n&&t.directionOfProjection[2]===r)return;t.directionOfProjection[0]=e,t.directionOfProjection[1]=n,t.directionOfProjection[2]=r;const o=t.directionOfProjection;t.focalPoint[0]=t.position[0]+o[0]*t.distance,t.focalPoint[1]=t.position[1]+o[1]*t.distance,t.focalPoint[2]=t.position[2]+o[2]*t.distance,m()},e.setDeviceAngles=(n,r,o,s)=>{const l=[3];_d(t.physicalViewNorth,t.physicalViewUp,l);const u=i.create();i.rotate(u,u,Sd(n),t.physicalViewUp),i.rotate(u,u,Sd(r),l),i.rotate(u,u,Sd(o),t.physicalViewNorth),i.rotate(u,u,Sd(-s),t.physicalViewUp);const c=a.fromValues(-t.physicalViewUp[0],-t.physicalViewUp[1],-t.physicalViewUp[2]),d=a.fromValues(t.physicalViewNorth[0],t.physicalViewNorth[1],t.physicalViewNorth[2]);a.transformMat4(c,c,u),a.transformMat4(d,d,u),e.setDirectionOfProjection(c[0],c[1],c[2]),e.setViewUp(d[0],d[1],d[2]),e.modified()},e.setOrientationWXYZ=(t,n,r,o)=>{const s=i.create();if(0!==t&&(0!==n||0!==r||0!==o)){const e=Sd(t),i=l.create();l.setAxisAngle(i,[n,r,o],e),l.toMat4(i,s)}const u=a.fromValues(0,0,-1),c=a.create();a.transformMat4(c,u,s);const d=a.fromValues(0,1,0),g=a.create();a.transformMat4(g,d,s),e.setDirectionOfProjection(...c),e.setViewUp(...g),e.modified()},e.computeClippingRange=e=>{let n=null,r=null;n=t.viewPlaneNormal,r=t.position;const o=-n[0],i=-n[1],a=-n[2],s=-(o*r[0]+i*r[1]+a*r[2]),l=[o*e[0]+i*e[2]+a*e[4]+s,1e-18];for(let t=0;t<2;t++)for(let n=0;n<2;n++)for(let r=0;r<2;r++){const u=o*e[r]+i*e[2+n]+a*e[4+t]+s;l[0]=u<l[0]?u:l[0],l[1]=u>l[1]?u:l[1]}return l}}(e,t)}var ly={newInstance:Ed.newInstance(sy,"vtkCamera"),extend:sy};const uy={switch:!0,intensity:1,color:[1,1,1],position:[0,0,1],focalPoint:[0,0,0],positional:!1,exponent:1,coneAngle:30,attenuationValues:[1,0,0],transformMatrix:null,lightType:"SceneLight",shadowAttenuation:1,direction:[0,0,0],directionMTime:0};function cy(e,t,n={}){Object.assign(t,uy,n),Ed.obj(e,t),Ed.setGet(e,t,["intensity","switch","positional","exponent","coneAngle","transformMatrix","lightType","shadowAttenuation"]),Ed.setGetArray(e,t,["color","position","focalPoint","attenuationValues"],3),function(e,t){t.classHierarchy.push("vtkLight"),e.getTransformedPosition=()=>t.transformMatrix?[]:[].concat(t.position),e.getTransformedFocalPoint=()=>t.transformMatrix?[]:[].concat(t.focalPoint),e.getDirection=()=>(t.directionMTime<t.mtime&&(t.direction[0]=t.focalPoint[0]-t.position[0],t.direction[1]=t.focalPoint[1]-t.position[1],t.direction[2]=t.focalPoint[2]-t.position[2],Bd(t.direction),t.directionMTime=t.mtime),t.direction),e.setDirectionAngle=(t,n)=>{const r=Sd(t),o=Sd(n);e.setPosition(Math.cos(r)*Math.sin(o),Math.sin(r),Math.cos(r)*Math.cos(o)),e.setFocalPoint(0,0,0),e.setPositional(0)},e.setLightTypeToHeadLight=()=>{e.setLightType("HeadLight")},e.setLightTypeToCameraLight=()=>{e.setLightType("CameraLight")},e.setLightTypeToSceneLight=()=>{e.setTransformMatrix(null),e.setLightType("SceneLight")},e.lightTypeIsHeadLight=()=>"HeadLight"===t.lightType,e.lightTypeIsSceneLight=()=>"SceneLight"===t.lightType,e.lightTypeIsCameraLight=()=>"CameraLight"===t.lightType}(e,t)}var dy={newInstance:Ed.newInstance(cy,"vtkLight"),extend:cy,LIGHT_TYPES:["HeadLight","CameraLight","SceneLight"]};const{vtkErrorMacro:gy}=Ed,py={vtkWindow:null,background:[0,0,0],background2:[.2,.2,.2],gradientBackground:!1,viewport:[0,0,1,1],aspect:[1,1],pixelAspect:[1,1],props:[],actors2D:[]};function fy(e,t,n={}){Object.assign(t,py,n),Ed.obj(e,t),Ed.event(e,t,"event"),Ed.setGetArray(e,t,["viewport"],4),Ed.setGetArray(e,t,["background","background2"],3),function(e,t){function n(e,t=[]){t.push(e);const r=e.getNestedProps();if(r&&r.length)for(let o=0;o<r.length;o++)n(r[o],t);return t}t.classHierarchy.push("vtkViewport"),e.getViewProps=()=>t.props,e.hasViewProp=e=>!!t.props.filter(t=>t===e).length,e.addViewProp=n=>{n&&!e.hasViewProp(n)&&(t.props=t.props.concat(n))},e.removeViewProp=e=>{const n=t.props.filter(t=>t!==e);t.props.length!==n.length&&(t.props=n)},e.removeAllViewProps=()=>{t.props=[]},e.getViewPropsWithNestedProps=()=>{const e=[];for(let r=0;r<t.props.length;r++)n(t.props[r],e);return e},e.addActor2D=e.addViewProp,e.removeActor2D=t=>{e.removeViewProp(t)},e.getActors2D=()=>(t.actors2D=[],t.props.forEach(e=>{t.actors2D=t.actors2D.concat(e.getActors2D())}),t.actors2D),e.displayToView=()=>gy("call displayToView on your view instead"),e.viewToDisplay=()=>gy("callviewtodisplay on your view instead"),e.getSize=()=>gy("call getSize on your View instead"),e.normalizedDisplayToProjection=(t,n,r)=>{const o=e.normalizedDisplayToNormalizedViewport(t,n,r);return e.normalizedViewportToProjection(o[0],o[1],o[2])},e.normalizedDisplayToNormalizedViewport=(e,n,r)=>{const o=[t.viewport[2]-t.viewport[0],t.viewport[3]-t.viewport[1]];return[(e-t.viewport[0])/o[0],(n-t.viewport[1])/o[1],r]},e.normalizedViewportToProjection=(e,t,n)=>[2*e-1,2*t-1,2*n-1],e.projectionToNormalizedDisplay=(t,n,r)=>{const o=e.projectionToNormalizedViewport(t,n,r);return e.normalizedViewportToNormalizedDisplay(o[0],o[1],o[2])},e.normalizedViewportToNormalizedDisplay=(e,n,r)=>{const o=[t.viewport[2]-t.viewport[0],t.viewport[3]-t.viewport[1]];return[e*o[0]+t.viewport[0],n*o[1]+t.viewport[1],r]},e.projectionToNormalizedViewport=(e,t,n)=>[.5*(e+1),.5*(t+1),.5*(n+1)],e.PickPropFrom=()=>gy("vtkViewport::PickPropFrom - NOT IMPLEMENTED")}(e,t)}var hy={newInstance:Ed.newInstance(fy,"vtkViewport"),extend:fy};const{vtkDebugMacro:My,vtkErrorMacro:my,vtkWarningMacro:Ay}=u;function yy(e){return()=>my(`vtkRenderer::${e} - NOT IMPLEMENTED`)}const Ty={pickedProp:null,activeCamera:null,allBounds:[],ambient:[1,1,1],allocatedRenderTime:100,timeFactor:1,createdLight:null,automaticLightCreation:!0,twoSidedLighting:!0,lastRenderTimeInSeconds:-1,renderWindow:null,lights:[],actors:[],volumes:[],lightFollowCamera:!0,numberOfPropsRendered:0,propArray:null,pathArray:null,layer:0,preserveColorBuffer:!1,preserveDepthBuffer:!1,computeVisiblePropBounds:$d(),interactive:!0,nearClippingPlaneTolerance:0,clippingRangeExpansion:.05,erase:!0,draw:!0,useShadows:!1,useDepthPeeling:!1,occlusionRatio:0,maximumNumberOfPeels:4,selector:null,delegate:null,texturedBackground:!1,backgroundTexture:null,pass:0};function Dy(e,t,n={}){Object.assign(t,Ty,n),hy.extend(e,t,n),od(e,t,["renderWindow","allocatedRenderTime","timeFactor","lastRenderTimeInSeconds","numberOfPropsRendered","lastRenderingUsedDepthPeeling","selector"]),ld(e,t,["twoSidedLighting","lightFollowCamera","automaticLightCreation","erase","draw","nearClippingPlaneTolerance","clippingRangeExpansion","backingStore","interactive","layer","preserveColorBuffer","preserveDepthBuffer","useDepthPeeling","occlusionRatio","maximumNumberOfPeels","delegate","backgroundTexture","texturedBackground","useShadows","pass"]),ud(e,t,["actors","volumes","lights"]),dd(e,t,["background"],4,1),function(e,t){for(t.classHierarchy.push("vtkRenderer"),t.background||(t.background=[0,0,0,1]);t.background.length<3;)t.background.push(0);3===t.background.length&&t.background.push(1);const n={type:"ComputeVisiblePropBoundsEvent",renderer:e},r={type:"ResetCameraClippingRangeEvent",renderer:e},o={type:"ResetCameraEvent",renderer:e};e.updateCamera=()=>(t.activeCamera||(My("No cameras are on, creating one."),e.getActiveCameraAndResetIfCreated()),t.activeCamera.render(e),!0),e.updateLightsGeometryToFollowCamera=()=>{const n=e.getActiveCameraAndResetIfCreated();t.lights.forEach(e=>{e.lightTypeIsSceneLight()||e.lightTypeIsCameraLight()||(e.lightTypeIsHeadLight()?(e.setPositionFrom(n.getPositionByReference()),e.setFocalPointFrom(n.getFocalPointByReference()),e.modified(n.getMTime())):my("light has unknown light type",e.get()))})},e.updateLightGeometry=()=>!t.lightFollowCamera||e.updateLightsGeometryToFollowCamera(),e.allocateTime=yy("allocateTime"),e.updateGeometry=yy("updateGeometry"),e.getVTKWindow=()=>t.renderWindow,e.setLayer=n=>{My(e.getClassName(),e,"setting Layer to ",n),t.layer!==n&&(t.layer=n,e.modified()),e.setPreserveColorBuffer(!!n)},e.setActiveCamera=n=>t.activeCamera!==n&&(t.activeCamera=n,e.modified(),e.invokeEvent({type:"ActiveCameraEvent",camera:n}),!0),e.makeCamera=()=>{const t=ly.newInstance();return e.invokeEvent({type:"CreateCameraEvent",camera:t}),t},e.getActiveCamera=()=>(t.activeCamera||(t.activeCamera=e.makeCamera()),t.activeCamera),e.getActiveCameraAndResetIfCreated=()=>(t.activeCamera||(e.getActiveCamera(),e.resetCamera()),t.activeCamera),e.getActors=()=>(t.actors=[],t.props.forEach(e=>{t.actors=t.actors.concat(e.getActors())}),t.actors),e.addActor=e.addViewProp,e.removeActor=n=>{t.actors=t.actors.filter(e=>e!==n),e.removeViewProp(n),e.modified()},e.removeAllActors=()=>{t.actors.forEach(t=>{e.removeViewProp(t)}),t.actors=[],e.modified()},e.getVolumes=()=>(t.volumes=[],t.props.forEach(e=>{t.volumes=t.volumes.concat(e.getVolumes())}),t.volumes),e.addVolume=e.addViewProp,e.removeVolume=n=>{t.volumes=t.volumes.filter(e=>e!==n),e.removeViewProp(n),e.modified()},e.removeAllVolumes=()=>{t.volumes.forEach(t=>{e.removeViewProp(t)}),t.volumes=[],e.modified()},e.addLight=n=>{t.lights=[].concat(t.lights,n),e.modified()},e.removeLight=n=>{t.lights=t.lights.filter(e=>e!==n),e.modified()},e.removeAllLights=()=>{t.lights=[],e.modified()},e.setLightCollection=n=>{t.lights=n,e.modified()},e.makeLight=dy.newInstance,e.createLight=()=>{t.automaticLightCreation&&(t.createdLight&&(e.removeLight(t.createdLight),t.createdLight.delete(),t.createdLight=null),t.createdLight=e.makeLight(),e.addLight(t.createdLight),t.createdLight.setLightTypeToHeadLight(),t.createdLight.setPosition(e.getActiveCamera().getPosition()),t.createdLight.setFocalPoint(e.getActiveCamera().getFocalPoint()))},e.normalizedDisplayToWorld=(t,n,r,o)=>{let i=e.normalizedDisplayToProjection(t,n,r);return i=e.projectionToView(i[0],i[1],i[2],o),e.viewToWorld(i[0],i[1],i[2])},e.worldToNormalizedDisplay=(t,n,r,o)=>{let i=e.worldToView(t,n,r);return i=e.viewToProjection(i[0],i[1],i[2],o),e.projectionToNormalizedDisplay(i[0],i[1],i[2])},e.viewToWorld=(e,n,r)=>{if(null===t.activeCamera)return my("ViewToWorld: no active camera, cannot compute view to world, returning 0,0,0"),[0,0,0];const o=t.activeCamera.getViewMatrix();i.invert(o,o),i.transpose(o,o);const s=a.fromValues(e,n,r);return a.transformMat4(s,s,o),[s[0],s[1],s[2]]},e.projectionToView=(e,n,r,o)=>{if(null===t.activeCamera)return my("ProjectionToView: no active camera, cannot compute projection to view, returning 0,0,0"),[0,0,0];const s=t.activeCamera.getProjectionMatrix(o,-1,1);i.invert(s,s),i.transpose(s,s);const l=a.fromValues(e,n,r);return a.transformMat4(l,l,s),[l[0],l[1],l[2]]},e.worldToView=(e,n,r)=>{if(null===t.activeCamera)return my("WorldToView: no active camera, cannot compute view to world, returning 0,0,0"),[0,0,0];const o=t.activeCamera.getViewMatrix();i.transpose(o,o);const s=a.fromValues(e,n,r);return a.transformMat4(s,s,o),[s[0],s[1],s[2]]},e.viewToProjection=(e,n,r,o)=>{if(null===t.activeCamera)return my("ViewToProjection: no active camera, cannot compute view to projection, returning 0,0,0"),[0,0,0];const s=t.activeCamera.getProjectionMatrix(o,-1,1);i.transpose(s,s);const l=a.fromValues(e,n,r);return a.transformMat4(l,l,s),[l[0],l[1],l[2]]},e.computeVisiblePropBounds=()=>{t.allBounds[0]=xg.INIT_BOUNDS[0],t.allBounds[1]=xg.INIT_BOUNDS[1],t.allBounds[2]=xg.INIT_BOUNDS[2],t.allBounds[3]=xg.INIT_BOUNDS[3],t.allBounds[4]=xg.INIT_BOUNDS[4],t.allBounds[5]=xg.INIT_BOUNDS[5];let r=!0;e.invokeEvent(n);for(let e=0;e<t.props.length;++e){const n=t.props[e];if(n.getVisibility()&&n.getUseBounds()){const e=n.getBounds();e&&Yd(e)&&(r=!1,e[0]<t.allBounds[0]&&(t.allBounds[0]=e[0]),e[1]>t.allBounds[1]&&(t.allBounds[1]=e[1]),e[2]<t.allBounds[2]&&(t.allBounds[2]=e[2]),e[3]>t.allBounds[3]&&(t.allBounds[3]=e[3]),e[4]<t.allBounds[4]&&(t.allBounds[4]=e[4]),e[5]>t.allBounds[5]&&(t.allBounds[5]=e[5]))}}return r&&(Qd(t.allBounds),My("Can't compute bounds, no 3D props are visible")),t.allBounds},e.resetCamera=(n=null)=>{const r=n||e.computeVisiblePropBounds(),i=[0,0,0];if(!Yd(r))return My("Cannot reset camera!"),!1;let a=null;if(!e.getActiveCamera())return my("Trying to reset non-existent camera"),!1;a=t.activeCamera.getViewPlaneNormal(),t.activeCamera.setViewAngle(30),i[0]=(r[0]+r[1])/2,i[1]=(r[2]+r[3])/2,i[2]=(r[4]+r[5])/2;let s=r[1]-r[0],l=r[3]-r[2],u=r[5]-r[4];s*=s,l*=l,u*=u;let c=s+l+u;c=0===c?1:c,c=.5*Math.sqrt(c);const d=Sd(t.activeCamera.getViewAngle()),g=c,p=c/Math.sin(.5*d),f=t.activeCamera.getViewUp();return Math.abs(Rd(f,a))>.999&&(Ay("Resetting view-up since view plane normal is parallel"),t.activeCamera.setViewUp(-f[2],f[0],f[1])),t.activeCamera.setFocalPoint(i[0],i[1],i[2]),t.activeCamera.setPosition(i[0]+p*a[0],i[1]+p*a[1],i[2]+p*a[2]),e.resetCameraClippingRange(r),t.activeCamera.setParallelScale(g),t.activeCamera.setPhysicalScale(c),t.activeCamera.setPhysicalTranslation(-i[0],-i[1],-i[2]),e.invokeEvent(o),!0},e.resetCameraClippingRange=(n=null)=>{const o=n||e.computeVisiblePropBounds();if(!Yd(o))return My("Cannot reset camera clipping range!"),!1;if(e.getActiveCameraAndResetIfCreated(),!t.activeCamera)return my("Trying to reset clipping range of non-existent camera"),!1;const i=t.activeCamera.computeClippingRange(o);let a=0;if(t.activeCamera.getParallelProjection())a=.1*t.activeCamera.getParallelScale();else{const e=Sd(t.activeCamera.getViewAngle());a=.2*Math.tan(e/2)*i[1]}return i[1]-i[0]<a&&(a=a-i[1]+i[0],i[1]+=a/2,i[0]-=a/2),i[0]<0&&(i[0]=0),i[0]=.99*i[0]-(i[1]-i[0])*t.clippingRangeExpansion,i[1]=1.01*i[1]+(i[1]-i[0])*t.clippingRangeExpansion,i[0]=i[0]>=i[1]?.01*i[1]:i[0],t.nearClippingPlaneTolerance||(t.nearClippingPlaneTolerance=.01),i[0]<t.nearClippingPlaneTolerance*i[1]&&(i[0]=t.nearClippingPlaneTolerance*i[1]),t.activeCamera.setClippingRange(i[0],i[1]),e.invokeEvent(r),!1},e.setRenderWindow=e=>{e!==t.renderWindow&&(t.vtkWindow=e,t.renderWindow=e)},e.visibleActorCount=()=>t.props.filter(e=>e.getVisibility()).length,e.visibleVolumeCount=e.visibleActorCount,e.getMTime=()=>{let e=t.mtime;const n=t.activeCamera?t.activeCamera.getMTime():0;n>e&&(e=n);const r=t.createdLight?t.createdLight.getMTime():0;return r>e&&(e=r),e},e.getTransparent=()=>!!t.preserveColorBuffer,e.isActiveCameraCreated=()=>!!t.activeCamera}(e,t)}var Ny={newInstance:hd(Dy,"vtkRenderer"),extend:Dy};const{vtkErrorMacro:xy,VOID:Iy}=Ed,wy={enabled:!0,interactor:null,priority:0,processEvents:!0,subscribedEvents:[]};function Cy(e,t,n={}){Object.assign(t,wy,n),Ed.obj(e,t),Ed.event(e,t,"InteractionEvent"),Ed.event(e,t,"StartInteractionEvent"),Ed.event(e,t,"EndInteractionEvent"),Ed.get(e,t,["interactor","enabled"]),Ed.setGet(e,t,["priority","processEvents"]),function(e,t){t.classHierarchy.push("vtkInteractorObserver");const n=Object.assign({},e);function r(){for(;t.subscribedEvents.length;)t.subscribedEvents.pop().unsubscribe()}function o(){oy.handledEvents.forEach(n=>{e[`handle${n}`]&&t.subscribedEvents.push(t.interactor[`on${n}`](r=>t.processEvents?e[`handle${n}`](r):Iy,t.priority))})}e.setInteractor=n=>{n!==t.interactor&&(r(),t.interactor=n,n&&t.enabled&&o(),e.modified())},e.setEnabled=n=>{n!==t.enabled&&(r(),n&&(t.interactor?o():xy("\n          The interactor must be set before subscribing to events\n        ")),t.enabled=n,e.modified())},e.computeDisplayToWorld=(e,n,r,o)=>e?t.interactor.getView().displayToWorld(n,r,o,e):null,e.computeWorldToDisplay=(e,n,r,o)=>e?t.interactor.getView().worldToDisplay(n,r,o,e):null,e.setPriority=e=>{n.setPriority(e)&&t.interactor&&(r(),o())}}(e,t)}const Ey=Ed.newInstance(Cy,"vtkInteractorObserver");var vy=Object.assign({newInstance:Ey,extend:Cy},{computeWorldToDisplay:function(e,t,n,r){return e.getRenderWindow().getViews()[0].worldToDisplay(t,n,r,e)},computeDisplayToWorld:function(e,t,n,r){return e.getRenderWindow().getViews()[0].displayToWorld(t,n,r,e)}}),Ly={States:{IS_START:0,IS_NONE:0,IS_ROTATE:1,IS_PAN:2,IS_SPIN:3,IS_DOLLY:4,IS_CAMERA_POSE:11,IS_WINDOW_LEVEL:1024,IS_SLICE:1025}};const{States:by}=Ly,Oy={Rotate:by.IS_ROTATE,Pan:by.IS_PAN,Spin:by.IS_SPIN,Dolly:by.IS_DOLLY,CameraPose:by.IS_CAMERA_POSE,WindowLevel:by.IS_WINDOW_LEVEL,Slice:by.IS_SLICE},Sy={state:by.IS_NONE,handleObservers:1,autoAdjustCameraClippingRange:1};function jy(e,t,n={}){Object.assign(t,Sy,n),vy.extend(e,t,n),function(e,t){t.classHierarchy.push("vtkInteractorStyle"),Object.keys(Oy).forEach(n=>{Ed.event(e,t,`Start${n}Event`),e[`start${n}`]=()=>{t.state===by.IS_NONE&&(t.state=Oy[n],t.interactor.requestAnimation(e),e.invokeStartInteractionEvent({type:"StartInteractionEvent"}),e[`invokeStart${n}Event`]({type:`Start${n}Event`}))},Ed.event(e,t,`End${n}Event`),e[`end${n}`]=()=>{t.state===Oy[n]&&(t.state=by.IS_NONE,t.interactor.cancelAnimation(e),e.invokeEndInteractionEvent({type:"EndInteractionEvent"}),e[`invokeEnd${n}Event`]({type:`End${n}Event`}),t.interactor.render())}}),e.handleKeyPress=e=>{const n=t.interactor;let r=null;switch(e.key){case"r":case"R":e.pokedRenderer.resetCamera(),n.render();break;case"w":case"W":r=e.pokedRenderer.getActors(),r.forEach(e=>{e.getProperty().setRepresentationToWireframe()}),n.render();break;case"s":case"S":r=e.pokedRenderer.getActors(),r.forEach(e=>{e.getProperty().setRepresentationToSurface()}),n.render();break;case"v":case"V":r=e.pokedRenderer.getActors(),r.forEach(e=>{e.getProperty().setRepresentationToPoints()}),n.render()}}}(e,t)}const Py=Ed.newInstance(jy,"vtkInteractorStyle");var ky=Object.assign({newInstance:Py,extend:jy},Ly);const{States:zy}=Ly,Ry={motionFactor:10};function _y(e,t,n={}){Object.assign(t,Ry,n),ky.extend(e,t,n),Ed.setGet(e,t,["motionFactor"]),function(e,t){t.classHierarchy.push("vtkInteractorStyleTrackballCamera"),e.handleMouseMove=n=>{const r=n.position,o=n.pokedRenderer;switch(t.state){case zy.IS_ROTATE:e.handleMouseRotate(o,r),e.invokeInteractionEvent({type:"InteractionEvent"});break;case zy.IS_PAN:e.handleMousePan(o,r),e.invokeInteractionEvent({type:"InteractionEvent"});break;case zy.IS_DOLLY:e.handleMouseDolly(o,r),e.invokeInteractionEvent({type:"InteractionEvent"});break;case zy.IS_SPIN:e.handleMouseSpin(o,r),e.invokeInteractionEvent({type:"InteractionEvent"})}t.previousPosition=r},e.handleButton3D=n=>{n&&n.pressed&&n.device===GA.RightController&&n.input===QA.TrackPad?e.startCameraPose():n&&!n.pressed&&n.device===GA.RightController&&n.input===QA.TrackPad&&t.state===zy.IS_CAMERA_POSE&&e.endCameraPose()},e.handleMove3D=n=>{switch(t.state){case zy.IS_CAMERA_POSE:e.updateCameraPose(n)}},e.updateCameraPose=e=>{const t=e.pokedRenderer.getActiveCamera(),n=t.getPhysicalTranslation(),r=.05*e.gamepad.axes[1]/t.getPhysicalScale(),o=t.physicalOrientationToWorldDirection(e.orientation);t.setPhysicalTranslation(n[0]+o[0]*r,n[1]+o[1]*r,n[2]+o[2]*r)},e.handleLeftButtonPress=n=>{t.previousPosition=n.position,n.shiftKey?n.controlKey||n.altKey?e.startDolly():e.startPan():n.controlKey||n.altKey?e.startSpin():e.startRotate()},e.handleLeftButtonRelease=()=>{switch(t.state){case zy.IS_DOLLY:e.endDolly();break;case zy.IS_PAN:e.endPan();break;case zy.IS_SPIN:e.endSpin();break;case zy.IS_ROTATE:e.endRotate()}},e.handleStartMouseWheel=t=>{e.startDolly(),e.handleMouseWheel(t)},e.handleEndMouseWheel=()=>{e.endDolly()},e.handleStartPinch=n=>{t.previousScale=n.scale,e.startDolly()},e.handleEndPinch=()=>{e.endDolly()},e.handleStartRotate=n=>{t.previousRotation=n.rotation,e.startRotate()},e.handleEndRotate=()=>{e.endRotate()},e.handleStartPan=n=>{t.previousTranslation=n.translation,e.startPan()},e.handleEndPan=()=>{e.endPan()},e.handlePinch=n=>{e.dollyByFactor(n.pokedRenderer,n.scale/t.previousScale),t.previousScale=n.scale},e.handlePan=n=>{const r=n.pokedRenderer.getActiveCamera();let o=r.getFocalPoint();o=e.computeWorldToDisplay(n.pokedRenderer,o[0],o[1],o[2]);const i=o[2],a=n.translation,s=t.previousTranslation,l=e.computeDisplayToWorld(n.pokedRenderer,o[0]+a[0]-s[0],o[1]+a[1]-s[1],i),u=e.computeDisplayToWorld(n.pokedRenderer,o[0],o[1],i),c=[];c[0]=u[0]-l[0],c[1]=u[1]-l[1],c[2]=u[2]-l[2],o=r.getFocalPoint();const d=r.getPosition();r.setFocalPoint(c[0]+o[0],c[1]+o[1],c[2]+o[2]),r.setPosition(c[0]+d[0],c[1]+d[1],c[2]+d[2]),t.interactor.getLightFollowCamera()&&n.pokedRenderer.updateLightsGeometryToFollowCamera(),r.orthogonalizeViewUp(),t.previousTranslation=n.translation},e.handleRotate=e=>{const n=e.pokedRenderer.getActiveCamera();n.roll(e.rotation-t.previousRotation),n.orthogonalizeViewUp(),t.previousRotation=e.rotation},e.handleMouseRotate=(e,n)=>{const r=t.interactor,o=n.x-t.previousPosition.x,i=n.y-t.previousPosition.y,a=r.getView().getViewportSize(e);let s=-.1,l=-.1;a[0]&&a[1]&&(s=-20/a[1],l=-20/a[0]);const u=o*l*t.motionFactor,c=i*s*t.motionFactor,d=e.getActiveCamera();Number.isNaN(u)||Number.isNaN(c)||(d.azimuth(u),d.elevation(c),d.orthogonalizeViewUp()),t.autoAdjustCameraClippingRange&&e.resetCameraClippingRange(),r.getLightFollowCamera()&&e.updateLightsGeometryToFollowCamera()},e.handleMouseSpin=(e,n)=>{const r=t.interactor,o=e.getActiveCamera(),i=r.getView().getViewportCenter(e),a=jd(Math.atan2(t.previousPosition.y-i[1],t.previousPosition.x-i[0])),s=jd(Math.atan2(n.y-i[1],n.x-i[0]))-a;Number.isNaN(s)||(o.roll(s),o.orthogonalizeViewUp())},e.handleMousePan=(n,r)=>{const o=n.getActiveCamera();let i=o.getFocalPoint();i=e.computeWorldToDisplay(n,i[0],i[1],i[2]);const a=i[2],s=e.computeDisplayToWorld(n,r.x,r.y,a),l=e.computeDisplayToWorld(n,t.previousPosition.x,t.previousPosition.y,a),u=[];u[0]=l[0]-s[0],u[1]=l[1]-s[1],u[2]=l[2]-s[2],i=o.getFocalPoint();const c=o.getPosition();o.setFocalPoint(u[0]+i[0],u[1]+i[1],u[2]+i[2]),o.setPosition(u[0]+c[0],u[1]+c[1],u[2]+c[2]),t.interactor.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera()},e.handleMouseDolly=(n,r)=>{const o=r.y-t.previousPosition.y,i=t.interactor.getView().getViewportCenter(n);e.dollyByFactor(n,1.1**(t.motionFactor*o/i[1]))},e.handleMouseWheel=t=>{e.dollyByFactor(t.pokedRenderer,1-t.spinY/10)},e.dollyByFactor=(e,n)=>{if(Number.isNaN(n))return;const r=e.getActiveCamera();r.getParallelProjection()?r.setParallelScale(r.getParallelScale()/n):(r.dolly(n),t.autoAdjustCameraClippingRange&&e.resetCameraClippingRange()),t.interactor.getLightFollowCamera()&&e.updateLightsGeometryToFollowCamera()}}(e,t)}const Vy=Ed.newInstance(_y,"vtkInteractorStyleTrackballCamera");var By=Object.assign({newInstance:Vy,extend:_y});const{vtkWarningMacro:Uy}=Ed,Fy={formula:{getArrays:()=>({input:[],output:[]}),evaluate:()=>null}};function Gy(e,t,n={}){Object.assign(t,Fy,n),Ed.obj(e,t),Ed.algo(e,t,1,1),function(e,t){t.classHierarchy.push("vtkCalculator"),e.setFormula=n=>n!==t.formula&&(t.formula=n,e.modified(),!0),e.getFormula=()=>t.formula,e.augmentInputArrays=(e,t)=>{const n=t.slice(0);return e!==Fp.POINT&&e!==Fp.VERTEX||n.push({location:Fp.COORDINATE}),n},e.createSimpleFormulaObject=(t,n,r,o,i={})=>({getArrays:()=>({input:e.augmentInputArrays(t,n.map(e=>({location:t,name:e}))),output:[{location:t,name:r,attribute:"outputAttributeType"in i?i.outputAttributeType:Sp.SCALARS,numberOfComponents:"numberOfOutputComponents"in i?i.numberOfOutputComponents:1}]}),evaluate:(e,t)=>{const n=new Array(e.length),r=e.map((e,t)=>{const r=e.getNumberOfComponents(),o=e.getData();return 1===r?e=>o[e]:r=>e.getTuple(r,n[t])}),i=t[0],a=i.getData(),s=i.getNumberOfComponents();let l=new Array(s);if(1===s)a.forEach((e,t)=>{a[t]=o(...r.map(e=>e(t)),t,l)});else{const e=i.getNumberOfTuples();for(let t=0;t<e;++t)l=o(...r.map(e=>e(t)),t,l),i.setTuple(t,l)}}}),e.setFormulaSimple=(t,n,r,o,i={})=>e.setFormula(e.createSimpleFormulaObject(t,n,r,o,i)),e.prepareArrays=(e,t,n)=>{const r=[],o=[];return e.input.forEach(e=>{if(e.location===Fp.COORDINATE)r.push(t.getPoints());else{const n=[[Fp.UNIFORM,e=>e.getFieldData()],[Fp.POINT,e=>e.getPointData()],[Fp.CELL,e=>e.getCellData()],[Fp.VERTEX,e=>e.getVertexData()],[Fp.EDGE,e=>e.getEdgeData()],[Fp.ROW,e=>e.getRowData()]].reduce((e,t)=>(e[t[0]]=t[1],e),{}),o="location"in e&&e.location in n?n[e.location](t):null;o?e.name?r.push(o.getArrayByName(e.name)):"index"in e?r.push(o.getArrayByIndex(e.index)):"attribute"in e&&e.location!==Fp.UNIFORM?r.push(o.getActiveAttribute(e.attribute)):(Uy(`No matching array for specifier "${JSON.stringify(e)}".`),r.push(null)):(Uy(`Specifier "${JSON.stringify(e)}" did not provide a usable location.`),r.push(null))}}),e.output.forEach(e=>{const r=Object.assign({},e),i="numberOfComponents"in r?r.numberOfComponents:1;if(e.location===Fp.UNIFORM&&"tuples"in r&&(r.size=i*r.tuples),e.location===Fp.COORDINATE){const e=t.getPoints(),r=fp.newInstance({dataType:e.getDataType()});r.setNumberOfPoints(e.getNumberOfPoints(),e.getNumberOfComponents()),n.setPoints(r),o.push(r)}else{const a=[[Fp.UNIFORM,e=>e.getFieldData(),(e,t)=>"tuples"in t?t.tuples:0],[Fp.POINT,e=>e.getPointData(),e=>e.getPoints().getNumberOfPoints()],[Fp.CELL,e=>e.getCellData(),e=>e.getNumberOfCells()],[Fp.VERTEX,e=>e.getVertexData(),e=>e.getNumberOfVertices()],[Fp.EDGE,e=>e.getEdgeData(),e=>e.getNumberOfEdges()],[Fp.ROW,e=>e.getRowData(),e=>e.getNumberOfRows()]].reduce((e,t)=>(e[t[0]]={getData:t[1],getSize:t[2]},e),{});let s=null,l=0;if("location"in e&&e.location in a&&(s=a[e.location].getData(n),l=a[e.location].getSize(t,r)),l<=0)Uy(`Output array size could not be determined for ${JSON.stringify(e)}.`),o.push(null);else if(s){r.size=i*l;const t=rp.newInstance(r),n=s.addArray(t);"attribute"in r&&e.location!==Fp.UNIFORM&&s.setActiveAttributeByIndex(n,r.attribute),o.push(t)}else Uy(`Specifier "${JSON.stringify(e)}" did not provide a usable location.`),o.push(null)}}),{arraysIn:r,arraysOut:o}},e.requestData=(n,r)=>{if(!t.formula)return 0;const o=t.formula.getArrays(n),i=kc({vtkClass:n[0].getClassName()});i.shallowCopy(n[0]),r[0]=i;const a=e.prepareArrays(o,n[0],r[0]);return t.formula.evaluate(a.arraysIn,a.arraysOut),1}}(e,t)}var Qy={newInstance:Ed.newInstance(Gy,"vtkCalculator"),extend:Gy};let Yy=(()=>{class e{constructor(e){this.el=e,this.renderWindow=FA.newInstance(),this.renderer=Ny.newInstance({background:[.2,.3,.4]}),this.coneSource=wf.newInstance({height:1}),this.mapper=Nh.newInstance(),this.actor=Qg.newInstance(),this.openglRenderWindow=VA.newInstance()}ngOnInit(){const e=Qy.newInstance();e.setInputConnection(this.coneSource.getOutputPort()),e.setFormula({getArrays:e=>({input:[],output:[{location:Fp.CELL,name:"Random",dataType:"Float32Array",attribute:Sp.SCALARS}]}),evaluate:(e,t)=>{const[n]=t.map(e=>e.getData());for(let r=0;r<n.length;r++)n[r]=Math.random()}}),this.mapper.setInputConnection(e.getOutputPort()),this.actor.setMapper(this.mapper),this.renderer.addActor(this.actor),this.renderer.resetCamera(),this.renderWindow.render(),this.renderWindow.addRenderer(this.renderer),this.renderWindow.addView(this.openglRenderWindow);const t=this.el.nativeElement.querySelector(".content");this.openglRenderWindow.setContainer(t);const{width:n,height:r}=t.getBoundingClientRect();this.openglRenderWindow.setSize(n,r);const o=oy.newInstance();o.setView(this.openglRenderWindow),o.initialize(),o.bindEvents(t),o.setInteractorStyle(By.newInstance())}representationSelector(e){const t=Number(e.target.value);this.actor.getProperty().setRepresentation(t),this.renderWindow.render()}resolutionChange(e){const t=Number(e.target.value);this.coneSource.setResolution(t),this.renderWindow.render()}}return e.\u0275fac=function(t){return new(t||e)(io(To))},e.\u0275cmp=qe({type:e,selectors:[["app-vtk-test"]],decls:15,vars:0,consts:[[1,"block"],[1,"controller"],[1,"representations",2,"width","100%",3,"change"],["value","0"],["value","1"],["value","2","selected",""],["type","range","min","4","max","80","value","6",1,"resolution",3,"change"],[1,"content"]],template:function(e,t){1&e&&(so(0,"div",0),so(1,"table",1),so(2,"tr"),so(3,"td"),so(4,"select",2),go("change",(function(e){return t.representationSelector(e)})),so(5,"option",3),ho(6,"Points"),lo(),so(7,"option",4),ho(8,"Wireframe"),lo(),so(9,"option",5),ho(10,"Surface"),lo(),lo(),lo(),lo(),so(11,"tr"),so(12,"td"),so(13,"input",6),go("change",(function(e){return t.resolutionChange(e)})),lo(),lo(),lo(),lo(),uo(14,"div",7),lo())},styles:[".block[_ngcontent-%COMP%]{max-width:500px;position:relative}table.controller[_ngcontent-%COMP%]{position:absolute}@media (max-width:768px){.block[_ngcontent-%COMP%]{margin-top:10px}}"]}),e})();const{vtkErrorMacro:Wy}=Ed;function Hy(e,t,n,r){e.set(function(e,t){let n=0;return e.map((e,r)=>r===n?(n+=e+1,e):e+t)}(t,n),r)}const Ky={outputPointsPrecision:jp.DEFAULT};function Xy(e,t,n={}){Object.assign(t,Ky,n),Ed.setGet(e,t,["outputPointsPrecision"]),Ed.obj(e,t),Ed.algo(e,t,1,1),function(e,t){t.classHierarchy.push("vtkAppendPolyData"),e.requestData=(n,r)=>{const o=e.getNumberOfInputPorts();if(!o)return void Wy("No input specified.");if(1===o)return void(r[0]=n[0]);const i=Af.newInstance();let a=0,s=0,l=1,u=1,c=0,d=0,g=0,p=0,f=!0,h=!0,M=!0;for(let e=0;e<o;e++){const t=n[e];if(!t)return void Wy("Invalid or missing input");const r=t.getPoints().getNumberOfPoints();a+=r,c+=t.getVerts().getNumberOfValues(),d+=t.getLines().getNumberOfValues(),g+=t.getStrips().getNumberOfValues(),p+=t.getPolys().getNumberOfValues(),r&&(u&&(u=0,s=t.getPoints().getDataType()),l=t.getPoints().getDataType(),s=s>l?s:l);const o=t.getPointData();o?(f=f&&null!==o.getNormals(),h=h&&null!==o.getTCoords(),M=M&&null!==o.getScalars()):(f=!1,h=!1,M=!1)}t.outputPointsPrecision===jp.SINGLE?s=Yg.FLOAT:t.outputPointsPrecision===jp.DOUBLE&&(s=Yg.DOUBLE);const m=fp.newInstance({dataType:s});m.setNumberOfPoints(a);const A=m.getData(),y=new Uint32Array(c),T=new Uint32Array(d),D=new Uint32Array(g),N=new Uint32Array(p);let x=null,I=null,w=null;const C=n[o-1];if(f){const e=C.getPointData().getNormals();x=rp.newInstance({numberOfComponents:3,numberOfTuples:a,size:3*a,dataType:e.getDataType(),name:e.getName()})}if(h){const e=C.getPointData().getTCoords();I=rp.newInstance({numberOfComponents:2,numberOfTuples:a,size:2*a,dataType:e.getDataType(),name:e.getName()})}if(M){const e=C.getPointData().getScalars();w=rp.newInstance({numberOfComponents:e.getNumberOfComponents(),numberOfTuples:a,size:a*e.getNumberOfComponents(),dataType:e.getDataType(),name:e.getName()})}a=0,c=0,d=0,g=0,p=0;for(let e=0;e<o;e++){const t=n[e];A.set(t.getPoints().getData(),3*a),Hy(y,t.getVerts().getData(),a,c),c+=t.getVerts().getNumberOfValues(),Hy(T,t.getLines().getData(),a,d),d+=t.getLines().getNumberOfValues(),Hy(D,t.getStrips().getData(),a,g),g+=t.getStrips().getNumberOfValues(),Hy(N,t.getPolys().getData(),a,p),p+=t.getPolys().getNumberOfValues();const r=t.getPointData();if(f){const e=r.getNormals();x.getData().set(e.getData(),3*a)}if(h){const e=r.getTCoords();I.getData().set(e.getData(),2*a)}if(M){const e=r.getScalars();w.getData().set(e.getData(),a*w.getNumberOfComponents())}a+=t.getPoints().getNumberOfPoints()}i.setPoints(m),i.getVerts().setData(y),i.getLines().setData(T),i.getStrips().setData(D),i.getPolys().setData(N),x&&i.getPointData().setNormals(x),I&&i.getPointData().setTCoords(I),w&&i.getPointData().setScalars(w),r[0]=i}}(e,t)}const Zy=Ed.newInstance(Xy,"vtkAppendPolyData");var qy=Object.assign({newInstance:Zy,extend:Xy});const $y={height:1,radius:1,resolution:6,center:[0,0,0],direction:[0,1,0],capping:!0,pointType:"Float32Array"};function Jy(e,t,n={}){Object.assign(t,$y,n),Ed.obj(e,t),Ed.setGet(e,t,["height","radius","resolution","capping"]),Ed.setGetArray(e,t,["center","direction"],3),Ed.algo(e,t,0,1),function(e,t){t.classHierarchy.push("vtkCylinderSource"),e.requestData=function(e,n){if(t.deleted)return;let r=n[0];const o=2*Math.PI/t.resolution;let i=2*t.resolution,a=5*t.resolution;t.capping&&(i=4*t.resolution,a=7*t.resolution+2);const s=new window[t.pointType](3*i);let l=0;const u=new Uint32Array(a),c=new Float32Array(3*i),d=rp.newInstance({numberOfComponents:3,values:c,name:"Normals"}),g=new Float32Array(2*i),p=rp.newInstance({numberOfComponents:2,values:g,name:"TCoords"}),f=[0,0,0],h=[0,0,0],M=[0,0,0],m=[0,0,0],A=[0,0],y=[0,0];for(let T=0;T<t.resolution;T++){f[0]=Math.cos(T*o),h[0]=f[0],M[0]=t.radius*f[0]+t.center[0],m[0]=M[0],A[0]=Math.abs(2*T/t.resolution-1),y[0]=A[0],M[1]=.5*t.height+t.center[1],m[1]=-.5*t.height+t.center[1],A[1]=0,y[1]=1,f[2]=-Math.sin(T*o),h[2]=f[2],M[2]=t.radius*f[2]+t.center[2],m[2]=M[2];const e=2*T;for(let t=0;t<3;t++)c[3*e+t]=f[t],c[3*(e+1)+t]=h[t],s[3*e+t]=M[t],s[3*(e+1)+t]=m[t],t<2&&(g[2*e+t]=A[t],g[2*(e+1)+t]=y[t])}for(let T=0;T<t.resolution;T++){u[l++]=4,u[l++]=2*T,u[l++]=2*T+1;const e=(2*T+3)%(2*t.resolution);u[l++]=e,u[l++]=e-1}if(t.capping){for(let e=0;e<t.resolution;e++){M[0]=t.radius*Math.cos(e*o),m[0]=M[0],A[0]=M[0],y[0]=M[0],M[0]+=t.center[0],m[0]+=t.center[0],f[1]=1,h[1]=-1,M[1]=.5*t.height+t.center[1],m[1]=-.5*t.height+t.center[1],M[2]=-t.radius*Math.sin(e*o),m[2]=M[2],A[1]=M[2],y[1]=M[2],M[2]+=t.center[2],m[2]+=t.center[2];const n=2*t.resolution+e,r=3*t.resolution+t.resolution-e-1;for(let e=0;e<3;e++)c[3*n+e]=f[e],c[3*r+e]=h[e],s[3*n+e]=M[e],s[3*r+e]=m[e],e<2&&(g[2*n+e]=A[e],g[2*r+e]=y[e])}u[l++]=t.resolution;for(let e=0;e<t.resolution;e++)u[l++]=2*t.resolution+e;u[l++]=t.resolution;for(let e=0;e<t.resolution;e++)u[l++]=3*t.resolution+e}Nf().translate(...t.center).rotateFromDirections([0,1,0],t.direction).translate(...t.center.map(e=>-1*e)).apply(s),r=Af.newInstance(),r.getPoints().setData(s,3),r.getPolys().setData(u,1),r.getPointData().setNormals(d),r.getPointData().setTCoords(p),n[0]=r}}(e,t)}var eT={newInstance:Ed.newInstance(Jy,"vtkCylinderSource"),extend:Jy};const tT={tipResolution:6,tipRadius:.1,tipLength:.35,shaftResolution:6,shaftRadius:.03,invert:!1,direction:[1,0,0],pointType:"Float32Array"};function nT(e,t,n={}){Object.assign(t,tT,n),Ed.obj(e,t),Ed.setGet(e,t,["tipResolution","tipRadius","tipLength","shaftResolution","shaftRadius","invert"]),Ed.setGetArray(e,t,["direction"],3),Ed.algo(e,t,0,1),function(e,t){t.classHierarchy.push("vtkArrowSource"),e.requestData=function(e,n){if(t.deleted)return;const r=eT.newInstance({capping:!0});r.setResolution(t.shaftResolution),r.setRadius(t.shaftRadius),r.setHeight(1-t.tipLength),r.setCenter(0,.5*(1-t.tipLength),0);const o=r.getOutputData(),i=o.getPoints().getData(),a=o.getPointData().getNormals().getData();new Df(!0).rotateZ(-90).apply(i).apply(a);const s=wf.newInstance();s.setResolution(t.tipResolution),s.setHeight(t.tipLength),s.setRadius(t.tipRadius);const l=s.getOutputData(),u=l.getPoints().getData();Nf().translate(1-.5*t.tipLength,0,0).apply(u);const c=qy.newInstance();c.setInputData(o),c.addInputData(l);const d=c.getOutputData(),g=d.getPoints().getData();Nf().translate(.5*t.tipLength-.5,0,0).apply(g),t.invert?(Nf().rotateFromDirections([1,0,0],t.direction).scale(-1,-1,-1).apply(g),n[0]=d):(Nf().rotateFromDirections([1,0,0],t.direction).scale(1,1,1).apply(g),n[0]=c.getOutputData())}}(e,t)}var rT={newInstance:Ed.newInstance(nT,"vtkArrowSource"),extend:nT};let oT=(()=>{class e{constructor(e,t){this.elRef=e,this.renderer2=t,this.renderWindow=FA.newInstance(),this.renderer=Ny.newInstance({background:[0,0,0]}),this.pipelines=null,this.openglRenderWindow=VA.newInstance()}ngOnInit(){this.directionElems=this.elRef.nativeElement.querySelectorAll(".direction"),this.pipelines=[this.createArrowPipeLine()],this.renderer.resetCamera(),this.renderer.resetCameraClippingRange(),this.renderWindow.render(),this.renderWindow.addRenderer(this.renderer),this.renderWindow.addView(this.openglRenderWindow);const e=this.elRef.nativeElement.querySelector(".content");this.openglRenderWindow.setContainer(e);const{width:t,height:n}=e.getBoundingClientRect();this.openglRenderWindow.setSize(t,n);const r=oy.newInstance();r.setView(this.openglRenderWindow),r.initialize(),r.bindEvents(e),r.setInteractorStyle(By.newInstance()),this.initializeControlEvent();for(const i of this.directionElems)this.renderer2.listen(i,"input",this.updateTransformedArrow.bind(this));const o=this.elRef.nativeElement.querySelector(".reset");this.renderer2.listen(o,"click",this.resetUI.bind(this))}createArrowPipeLine(){const e=rT.newInstance(),t=Qg.newInstance(),n=Nh.newInstance();return t.setMapper(n),t.getProperty().setEdgeVisibility(!0),t.getProperty().setEdgeColor(1,0,0),t.getProperty().setRepresentationToSurface(),n.setInputConnection(e.getOutputPort()),this.renderer.addActor(t),{arrowSource:e,mapper:n,actor:t}}initializeControlEvent(){["tipResolution","tipRadius","tipLength","shaftResolution","shaftRadius"].forEach(e=>{const t=this.elRef.nativeElement.querySelector(`.${e}`);this.renderer2.listen(t,"input",t=>{const n=Number(t.target.value);this.pipelines[0].arrowSource.set({[e]:n}),this.renderer.resetCameraClippingRange(),this.renderWindow.render()})})}updateTransformedArrow(){const e=[1,0,0];for(const t of this.directionElems)e[Number(t.dataset.index)]=Number(t.value);this.pipelines[0].arrowSource.set({direction:e}),this.renderer.resetCameraClippingRange(),this.renderWindow.render()}resetUI(){const e=[1,0,0];this.renderer2.setValue(this.elRef.nativeElement.querySelector(".tipResolution"),String(6)),this.pipelines[0].arrowSource.set({tipResolution:Number(6)}),this.renderer2.setValue(this.elRef.nativeElement.querySelector(".tipRadius"),String(.1)),this.pipelines[0].arrowSource.set({tipRadius:Number(.1)}),this.renderer2.setValue(this.elRef.nativeElement.querySelector(".tipLength"),String(.35)),this.pipelines[0].arrowSource.set({tipLength:Number(.35)}),this.renderer2.setValue(this.elRef.nativeElement.querySelector(".shaftResolution"),String(6)),this.pipelines[0].arrowSource.set({shaftResolution:Number(6)}),this.renderer2.setValue(this.elRef.nativeElement.querySelector(".shaftRadius"),String(.03)),this.pipelines[0].arrowSource.set({shaftRadius:Number(.03)}),this.elRef.nativeElement.querySelector(".invert").checked=!1,this.pipelines[0].arrowSource.set({invert:!1});for(let t=0;t<3;t++)this.directionElems[t].value=Number(e[t]);this.pipelines[0].arrowSource.set({direction:e}),this.renderer.resetCamera(),this.renderer.resetCameraClippingRange(),this.renderWindow.render()}}return e.\u0275fac=function(t){return new(t||e)(io(To),io(Io))},e.\u0275cmp=qe({type:e,selectors:[["app-arrowsource"]],decls:58,vars:0,consts:[[1,"block"],[1,"content"],[1,"control"],["colspan","3"],["type","range","min","4","max","100","step","1","value","6",1,"tipResolution"],["type","range","min","0.01","max","1.0","step","0.01","value","0.1",1,"tipRadius"],["type","range","min","0.1","max","0.5","step","0.05","value","0.35",1,"tipLength"],["type","range","min","4","max","100","step","1","value","6",1,"shaftResolution"],["type","range","min","0.01","max","1.0","step","0.01","value","0.03",1,"shaftRadius"],["type","checkbox",1,"invert"],[2,"text-align","center"],["data-index","0","type","range","min","-1","max","1","step","0.1","value","1",1,"direction",2,"width","50px"],["data-index","1","type","range","min","-1","max","1","step","0.1","value","0",1,"direction",2,"width","50px"],["data-index","2","type","range","min","-1","max","1","step","0.1","value","0",1,"direction",2,"width","50px"],["type","button","value","Reset",1,"reset"]],template:function(e,t){1&e&&(so(0,"div",0),uo(1,"div",1),so(2,"div",2),so(3,"table"),so(4,"tbody"),so(5,"tr"),so(6,"td"),ho(7,"TipResolution"),lo(),so(8,"td",3),uo(9,"input",4),lo(),lo(),so(10,"tr"),so(11,"td"),ho(12,"TipRadius"),lo(),so(13,"td",3),uo(14,"input",5),lo(),lo(),so(15,"tr"),so(16,"td"),ho(17,"TipLength"),lo(),so(18,"td",3),uo(19,"input",6),lo(),lo(),so(20,"tr"),so(21,"td"),ho(22,"ShaftResolution"),lo(),so(23,"td",3),uo(24,"input",7),lo(),lo(),so(25,"tr"),so(26,"td"),ho(27,"ShaftRadius"),lo(),so(28,"td",3),uo(29,"input",8),lo(),lo(),so(30,"tr"),so(31,"td"),ho(32,"Invert"),lo(),so(33,"td",3),uo(34,"input",9),lo(),lo(),so(35,"tr",10),uo(36,"td"),so(37,"td"),ho(38,"X"),lo(),so(39,"td"),ho(40,"Y"),lo(),so(41,"td"),ho(42,"Z"),lo(),lo(),so(43,"tr"),so(44,"td"),ho(45,"Direction"),lo(),so(46,"td"),uo(47,"input",11),lo(),so(48,"td"),uo(49,"input",12),lo(),so(50,"td"),uo(51,"input",13),lo(),lo(),so(52,"tr"),so(53,"td"),uo(54,"input",14),lo(),uo(55,"td"),uo(56,"td"),uo(57,"td"),lo(),lo(),lo(),lo(),lo())},styles:[".block[_ngcontent-%COMP%]{max-width:500px;position:relative}@media (max-width:768px){.block[_ngcontent-%COMP%]{margin-top:10px}}"]}),e})();const iT={scaleArray:null,radius:.05};function aT(e,t,n={}){Object.assign(t,iT,n),Nh.extend(e,t,n),Ed.setGet(e,t,["radius","scaleArray"]),function(e,t){t.classHierarchy.push("vtkSphereMapper")}(0,t)}var sT={newInstance:Ed.newInstance(aT,"vtkSphereMapper"),extend:aT};const lT={callback:null,useZValues:!1};function uT(e,t,n={}){Object.assign(t,lT,n),Nh.extend(e,t,n),Ed.setGet(e,t,["callback","useZValues"]),function(e,t){t.classHierarchy.push("vtkPixelSpaceCallbackMapper"),t.callback||(t.callback=()=>{}),e.invokeCallback=(e,n,r,o,s)=>{if(!t.callback)return;const l=n.getCompositeProjectionMatrix(r,-1,1);i.transpose(l,l);const u=e.getPoints(),c=a.fromValues(0,0,0),d=o.usize,g=o.vsize,p=d/2,f=g/2,h=[];for(let t=0;t<u.getNumberOfPoints();t+=1){const e=u.getPoint(t);c[0]=e[0],c[1]=e[1],c[2]=e[2],a.transformMat4(c,c,l);const n=[c[0]*p+p,c[1]*f+f,c[2],0];if(s){const e=4*(Math.floor(n[1])*d+Math.floor(n[0]));n[3]=(s[e]/255*256+s[e+1]/255)/257*2-1}h.push(n)}t.callback(h,n,r,s,[d,g])}}(e,t)}var cT={newInstance:Ed.newInstance(uT,"vtkPixelSpaceCallbackMapper"),extend:uT};const dT=[],gT={name:"",numberOfComponents:1,size:0,dataType:"string"},pT=Ed.newInstance((function(e,t,n={}){if(Object.assign(t,gT,n),!t.empty&&!t.values&&!t.size)throw new TypeError("Cannot create vtkStringArray object without: size > 0, values");t.values?Array.isArray(t.values)&&(t.values=t.values):t.values=[],t.values&&(t.size=t.values.length),Ed.obj(e,t),Ed.set(e,t,["name"]),function(e,t){t.classHierarchy.push("vtkStringArray"),e.getComponent=(e,n=0)=>t.values[e*t.numberOfComponents+n],e.setComponent=(n,r,o)=>{o!==t.values[n*t.numberOfComponents+r]&&(t.values[n*t.numberOfComponents+r]=o,e.modified())},e.getData=()=>t.values,e.getTuple=(e,n=dT)=>{const r=t.numberOfComponents||1;n.length&&(n.length=r);const o=e*r;for(let i=0;i<r;i++)n[i]=t.values[o+i];return n},e.getTupleLocation=(e=1)=>e*t.numberOfComponents,e.getNumberOfComponents=()=>t.numberOfComponents,e.getNumberOfValues=()=>t.values.length,e.getNumberOfTuples=()=>t.values.length/t.numberOfComponents,e.getDataType=()=>t.dataType,e.newClone=()=>pT({name:t.name,numberOfComponents:t.numberOfComponents}),e.getName=()=>(t.name||(e.modified(),t.name=`vtkStringArray${e.getMTime()}`),t.name),e.setData=(n,r)=>{t.values=n,t.size=n.length,r&&(t.numberOfComponents=r),t.size%t.numberOfComponents!=0&&(t.numberOfComponents=1),e.modified()}}(e,t)}),"vtkStringArray");let fT=(()=>{class e{constructor(e,t){this.elRef=e,this.renderer2=t,this.textCtx=null,this.windowWidth=0,this.windowHeight=0,this.renderWindow=FA.newInstance(),this.renderer=Ny.newInstance({background:[.2,.3,.4]}),this.pointPoly=kc({vtkClass:"vtkPolyData",points:{vtkClass:"vtkPoints",dataType:"Float32Array",numberOfComponents:3,values:[0,0,-1]},polys:{vtkClass:"vtkCellArray",dataType:"Uint16Array",values:[1,0]},pointData:{vtkClass:"vtkDataSetAttributes",arrays:[{data:{vtkClass:"vtkStringArray",name:"pointLabels",dataType:"string",values:["Neo"]}}]}}),this.planePoly=kc({vtkClass:"vtkPolyData",points:{vtkClass:"vtkPoints",dataType:"Float32Array",numberOfComponents:3,values:[-1,-1,0,1,-1,0,1,1,0,-1,1,0]},polys:{vtkClass:"vtkCellArray",dataType:"Uint16Array",values:[3,0,1,2,3,0,2,3]}})}ngOnInit(){this.container=this.elRef.nativeElement.querySelector(".block"),this.renderWindow.addRenderer(this.renderer);const e=sT.newInstance({radius:.5}),t=Qg.newInstance();e.setInputData(this.pointPoly),t.setMapper(e);const n=Nh.newInstance(),r=Qg.newInstance();n.setInputData(this.planePoly),r.setMapper(n);const o=cT.newInstance();o.setInputData(this.pointPoly),o.setUseZValues(!0),o.setCallback((e,t,n,r)=>{if(this.textCtx&&this.windowWidth>0&&this.windowHeight>0){const r=o.getInputData().getPoints(),s=t.getViewMatrix();i.transpose(s,s);const l=t.getProjectionMatrix(n,-1,1);i.transpose(l,l),this.textCtx.clearRect(0,0,this.windowWidth,this.windowHeight),e.forEach((e,t)=>{const n=r.getPoint(t),o=a.fromValues(n[0],n[1],n[2]);a.transformMat4(o,o,s),o[2]+=.5,a.transformMat4(o,o,l),console.log(`Distance to camera: point = ${e[2]}, depth buffer = ${e[3]}`),o[2]-.001<e[3]&&(this.textCtx.font="12px serif",this.textCtx.textAlign="center",this.textCtx.textBaseline="middle",this.textCtx.fillText(`p ${t}`,e[0],this.windowHeight-e[1]))});const u=this.renderWindow.getRenderers()[0].getActiveCamera().getClippingRange();console.log(`current clipping range: [${u[0]}, ${u[1]}]`)}});const s=Qg.newInstance();s.setMapper(o),this.renderer.addActor(t),this.renderer.addActor(s),this.renderer.addActor(r),this.resetCameraPosition();const l=VA.newInstance();this.renderWindow.addView(l),l.setContainer(this.container);const u=this.renderer2.createElement("canvas");this.renderer2.addClass(u,"textCanvas");const c=this.renderer2.createText("p2");this.renderer2.appendChild(u,c),this.renderer2.appendChild(this.container,u),this.textCtx=u.getContext("2d");const d=oy.newInstance();d.setView(l),d.initialize(),d.bindEvents(this.container),d.setInteractorStyle(By.newInstance())}affine(e,t,n,r,o){return(e-t)/(n-t)*(o-r)+r}resetCameraPosition(e=!1){const t=this.renderWindow.getRenderers()[0].getActiveCamera();t.setPosition(0,0,3),t.setFocalPoint(0,0,0),t.setViewUp(0,1,0),t.setClippingRange(3.49999,4.50001),e&&this.renderWindow.render()}}return e.\u0275fac=function(t){return new(t||e)(io(To),io(Io))},e.\u0275cmp=qe({type:e,selectors:[["app-depth"]],decls:1,vars:0,consts:[[1,"block"]],template:function(e,t){1&e&&uo(0,"div",0)},styles:[".block[_ngcontent-%COMP%]{max-width:500px;display:block}@media (max-width:768px){.block[_ngcontent-%COMP%]{margin-top:110px}}"]}),e})(),hT=(()=>{class e{constructor(){this.title="Vtk"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=qe({type:e,selectors:[["app-root"]],decls:19,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light","mb-3"],["href","#",1,"navbar-brand"],[1,"navbar-text","ml-auto"],[1,"container"],[1,"row"],[1,"col-md-4"],[1,"col-md-12"],[1,"text-center","mt-4"]],template:function(e,t){1&e&&(so(0,"nav",0),so(1,"a",1),ho(2,"Logo Place Here"),lo(),so(3,"span",2),so(4,"h3"),ho(5,"Some Text"),lo(),lo(),lo(),so(6,"div",3),so(7,"div",4),so(8,"div",5),uo(9,"app-vtk-test"),lo(),so(10,"div",5),uo(11,"app-arrowsource"),lo(),so(12,"div",5),uo(13,"app-depth"),lo(),lo(),lo(),so(14,"div",3),so(15,"div",4),so(16,"div",6),so(17,"footer",7),ho(18,"Copyright Text will be placed here"),lo(),lo(),lo(),lo())},directives:[Yy,oT,fT],styles:[""]}),e})(),MT=(()=>{class e{}return e.\u0275mod=tt({type:e,bootstrap:[hT]}),e.\u0275inj=oe({factory:function(t){return new(t||e)},providers:[],imports:[[Sa]]}),e})();(function(){if(Nn)throw new Error("Cannot enable prod mode after platform setup.");Dn=!1})(),ba().bootstrapModule(MT).catch(e=>console.error(e))},zn8P:function(e,t){function n(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="zn8P"}},[[0,0]]]);